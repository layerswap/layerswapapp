/*! For license information please see 436.ffd9c792.iframe.bundle.js.LICENSE.txt */
(self.webpackChunklayerswap=self.webpackChunklayerswap||[]).push([[436],{"./node_modules/@coinbase/wallet-sdk/dist/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{createCoinbaseWalletSDK:()=>createCoinbaseWalletSDK});class ScopedLocalStorage{constructor(scope,module){this.scope=scope,this.module=module}storeObject(key,item){this.setItem(key,JSON.stringify(item))}loadObject(key){const item=this.getItem(key);return item?JSON.parse(item):void 0}setItem(key,value){localStorage.setItem(this.scopedKey(key),value)}getItem(key){return localStorage.getItem(this.scopedKey(key))}removeItem(key){localStorage.removeItem(this.scopedKey(key))}clear(){const prefix=this.scopedKey(""),keysToRemove=[];for(let i=0;i<localStorage.length;i++){const key=localStorage.key(i);"string"==typeof key&&key.startsWith(prefix)&&keysToRemove.push(key)}keysToRemove.forEach(key=>localStorage.removeItem(key))}scopedKey(key){return`-${this.scope}${this.module?`:${this.module}`:""}:${key}`}static clearAll(){new ScopedLocalStorage("CBWSDK").clear(),new ScopedLocalStorage("walletlink").clear()}}const standardErrorCodes_rpc={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},standardErrorCodes_provider={userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902},errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}};function getMessageFromCode(code,fallbackMessage="Unspecified error message."){if(code&&Number.isInteger(code)){const codeString=code.toString();if(hasKey(errorValues,codeString))return errorValues[codeString].message;if(isJsonRpcServerError(code))return"Unspecified server error."}return fallbackMessage}function serialize(error,{shouldIncludeStack=!1}={}){const serialized={};if(error&&"object"==typeof error&&!Array.isArray(error)&&hasKey(error,"code")&&function isValidCode(code){if(!Number.isInteger(code))return!1;const codeString=code.toString();return!!errorValues[codeString]||!!isJsonRpcServerError(code)}(error.code)){const _error=error;serialized.code=_error.code,_error.message&&"string"==typeof _error.message?(serialized.message=_error.message,hasKey(_error,"data")&&(serialized.data=_error.data)):(serialized.message=getMessageFromCode(serialized.code),serialized.data={originalError:assignOriginalError(error)})}else serialized.code=standardErrorCodes_rpc.internal,serialized.message=hasStringProperty(error,"message")?error.message:"Unspecified error message.",serialized.data={originalError:assignOriginalError(error)};return shouldIncludeStack&&(serialized.stack=hasStringProperty(error,"stack")?error.stack:void 0),serialized}function isJsonRpcServerError(code){return code>=-32099&&code<=-32e3}function assignOriginalError(error){return error&&"object"==typeof error&&!Array.isArray(error)?Object.assign({},error):error}function hasKey(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)}function hasStringProperty(obj,prop){return"object"==typeof obj&&null!==obj&&prop in obj&&"string"==typeof obj[prop]}const errors_standardErrors_rpc={parse:arg=>getEthJsonRpcError(standardErrorCodes_rpc.parse,arg),invalidRequest:arg=>getEthJsonRpcError(standardErrorCodes_rpc.invalidRequest,arg),invalidParams:arg=>getEthJsonRpcError(standardErrorCodes_rpc.invalidParams,arg),methodNotFound:arg=>getEthJsonRpcError(standardErrorCodes_rpc.methodNotFound,arg),internal:arg=>getEthJsonRpcError(standardErrorCodes_rpc.internal,arg),server:opts=>{if(!opts||"object"!=typeof opts||Array.isArray(opts))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code}=opts;if(!Number.isInteger(code)||code>-32005||code<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return getEthJsonRpcError(code,opts)},invalidInput:arg=>getEthJsonRpcError(standardErrorCodes_rpc.invalidInput,arg),resourceNotFound:arg=>getEthJsonRpcError(standardErrorCodes_rpc.resourceNotFound,arg),resourceUnavailable:arg=>getEthJsonRpcError(standardErrorCodes_rpc.resourceUnavailable,arg),transactionRejected:arg=>getEthJsonRpcError(standardErrorCodes_rpc.transactionRejected,arg),methodNotSupported:arg=>getEthJsonRpcError(standardErrorCodes_rpc.methodNotSupported,arg),limitExceeded:arg=>getEthJsonRpcError(standardErrorCodes_rpc.limitExceeded,arg)},errors_standardErrors_provider={userRejectedRequest:arg=>getEthProviderError(standardErrorCodes_provider.userRejectedRequest,arg),unauthorized:arg=>getEthProviderError(standardErrorCodes_provider.unauthorized,arg),unsupportedMethod:arg=>getEthProviderError(standardErrorCodes_provider.unsupportedMethod,arg),disconnected:arg=>getEthProviderError(standardErrorCodes_provider.disconnected,arg),chainDisconnected:arg=>getEthProviderError(standardErrorCodes_provider.chainDisconnected,arg),unsupportedChain:arg=>getEthProviderError(standardErrorCodes_provider.unsupportedChain,arg),custom:opts=>{if(!opts||"object"!=typeof opts||Array.isArray(opts))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code,message,data}=opts;if(!message||"string"!=typeof message)throw new Error('"message" must be a nonempty string');return new EthereumProviderError(code,message,data)}};function getEthJsonRpcError(code,arg){const[message,data]=parseOpts(arg);return new EthereumRpcError(code,message||getMessageFromCode(code),data)}function getEthProviderError(code,arg){const[message,data]=parseOpts(arg);return new EthereumProviderError(code,message||getMessageFromCode(code),data)}function parseOpts(arg){if(arg){if("string"==typeof arg)return[arg];if("object"==typeof arg&&!Array.isArray(arg)){const{message,data}=arg;if(message&&"string"!=typeof message)throw new Error("Must specify string message.");return[message||void 0,data]}}return[]}class EthereumRpcError extends Error{constructor(code,message,data){if(!Number.isInteger(code))throw new Error('"code" must be an integer.');if(!message||"string"!=typeof message)throw new Error('"message" must be a nonempty string.');super(message),this.code=code,void 0!==data&&(this.data=data)}}class EthereumProviderError extends EthereumRpcError{constructor(code,message,data){if(!function isValidEthProviderCode(code){return Number.isInteger(code)&&code>=1e3&&code<=4999}(code))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(code,message,data)}}const HexString=value=>value,AddressString=value=>value,BigIntString=value=>value;function type_IntNumber(num){return Math.floor(num)}var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer;const INT_STRING_REGEX=/^[0-9]*$/,HEXADECIMAL_STRING_REGEX=/^[a-f0-9]*$/;function randomBytesHex(length){return uint8ArrayToHex(crypto.getRandomValues(new Uint8Array(length)))}function uint8ArrayToHex(value){return[...value].map(b=>b.toString(16).padStart(2,"0")).join("")}function hexStringToUint8Array(hexString){return new Uint8Array(hexString.match(/.{1,2}/g).map(byte=>Number.parseInt(byte,16)))}function hexStringFromBuffer(buf,includePrefix=!1){const hex=buf.toString("hex");return HexString(includePrefix?`0x${hex}`:hex)}function encodeToHexString(str){return hexStringFromBuffer(ensureBuffer(str),!0)}function bigIntStringFromBigInt(bi){return BigIntString(bi.toString(10))}function hexStringFromNumber(num){return HexString(`0x${BigInt(num).toString(16)}`)}function has0xPrefix(str){return str.startsWith("0x")||str.startsWith("0X")}function strip0x(hex){return has0xPrefix(hex)?hex.slice(2):hex}function prepend0x(hex){return has0xPrefix(hex)?`0x${hex.slice(2)}`:`0x${hex}`}function isHexString(hex){if("string"!=typeof hex)return!1;const s=strip0x(hex).toLowerCase();return HEXADECIMAL_STRING_REGEX.test(s)}function ensureEvenLengthHexString(hex,includePrefix=!1){let h=function ensureHexString(hex,includePrefix=!1){if("string"==typeof hex){const s=strip0x(hex).toLowerCase();if(HEXADECIMAL_STRING_REGEX.test(s))return HexString(includePrefix?`0x${s}`:s)}throw errors_standardErrors_rpc.invalidParams(`"${String(hex)}" is not a hexadecimal string`)}(hex,!1);return h.length%2==1&&(h=HexString(`0${h}`)),includePrefix?HexString(`0x${h}`):h}function ensureAddressString(str){if("string"==typeof str){const s=strip0x(str).toLowerCase();if(isHexString(s)&&40===s.length)return AddressString(prepend0x(s))}throw errors_standardErrors_rpc.invalidParams(`Invalid Ethereum address: ${String(str)}`)}function ensureBuffer(str){if(Buffer.isBuffer(str))return str;if("string"==typeof str){if(isHexString(str)){const s=ensureEvenLengthHexString(str,!1);return Buffer.from(s,"hex")}return Buffer.from(str,"utf8")}throw errors_standardErrors_rpc.invalidParams(`Not binary data: ${String(str)}`)}function ensureIntNumber(num){if("number"==typeof num&&Number.isInteger(num))return type_IntNumber(num);if("string"==typeof num){if(INT_STRING_REGEX.test(num))return type_IntNumber(Number(num));if(isHexString(num))return type_IntNumber(Number(BigInt(ensureEvenLengthHexString(num,!0))))}throw errors_standardErrors_rpc.invalidParams(`Not an integer: ${String(num)}`)}function ensureBigInt(val){if(null!==val&&("bigint"==typeof val||function isBigNumber(val){if(null==val||"function"!=typeof val.constructor)return!1;const{constructor}=val;return"function"==typeof constructor.config&&"number"==typeof constructor.EUCLID}(val)))return BigInt(val.toString(10));if("number"==typeof val)return BigInt(ensureIntNumber(val));if("string"==typeof val){if(INT_STRING_REGEX.test(val))return BigInt(val);if(isHexString(val))return BigInt(ensureEvenLengthHexString(val,!0))}throw errors_standardErrors_rpc.invalidParams(`Not an integer: ${String(val)}`)}function ensureParsedJSONObject(val){if("string"==typeof val)return JSON.parse(val);if("object"==typeof val)return val;throw errors_standardErrors_rpc.invalidParams(`Not a JSON string or an object: ${String(val)}`)}function getFormat(keyType){switch(keyType){case"public":return"spki";case"private":return"pkcs8"}}async function exportKeyToHexString(type,key){const format=getFormat(type),exported=await crypto.subtle.exportKey(format,key);return uint8ArrayToHex(new Uint8Array(exported))}async function importKeyFromHexString(type,hexString){const format=getFormat(type),arrayBuffer=hexStringToUint8Array(hexString).buffer;return await crypto.subtle.importKey(format,new Uint8Array(arrayBuffer),{name:"ECDH",namedCurve:"P-256"},!0,"private"===type?["deriveKey"]:[])}async function encryptContent(content,sharedSecret){return async function encrypt(sharedSecret,plainText){const iv=crypto.getRandomValues(new Uint8Array(12));return{iv,cipherText:await crypto.subtle.encrypt({name:"AES-GCM",iv},sharedSecret,(new TextEncoder).encode(plainText))}}(sharedSecret,JSON.stringify(content,(_,value)=>{if(!(value instanceof Error))return value;const error=value;return Object.assign(Object.assign({},error.code?{code:error.code}:{}),{message:error.message})}))}async function decryptContent(encryptedData,sharedSecret){return JSON.parse(await async function decrypt(sharedSecret,{iv,cipherText}){const plainText=await crypto.subtle.decrypt({name:"AES-GCM",iv},sharedSecret,cipherText);return(new TextDecoder).decode(plainText)}(sharedSecret,encryptedData))}const OWN_PRIVATE_KEY={storageKey:"ownPrivateKey",keyType:"private"},OWN_PUBLIC_KEY={storageKey:"ownPublicKey",keyType:"public"},PEER_PUBLIC_KEY={storageKey:"peerPublicKey",keyType:"public"};class SCWKeyManager{constructor(){this.storage=new ScopedLocalStorage("CBWSDK","SCWKeyManager"),this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null}async getOwnPublicKey(){return await this.loadKeysIfNeeded(),this.ownPublicKey}async getSharedSecret(){return await this.loadKeysIfNeeded(),this.sharedSecret}async setPeerPublicKey(key){this.sharedSecret=null,this.peerPublicKey=key,await this.storeKey(PEER_PUBLIC_KEY,key),await this.loadKeysIfNeeded()}async clear(){this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null,this.storage.removeItem(OWN_PUBLIC_KEY.storageKey),this.storage.removeItem(OWN_PRIVATE_KEY.storageKey),this.storage.removeItem(PEER_PUBLIC_KEY.storageKey)}async generateKeyPair(){const newKeyPair=await async function generateKeyPair(){return crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"])}();this.ownPrivateKey=newKeyPair.privateKey,this.ownPublicKey=newKeyPair.publicKey,await this.storeKey(OWN_PRIVATE_KEY,newKeyPair.privateKey),await this.storeKey(OWN_PUBLIC_KEY,newKeyPair.publicKey)}async loadKeysIfNeeded(){if(null===this.ownPrivateKey&&(this.ownPrivateKey=await this.loadKey(OWN_PRIVATE_KEY)),null===this.ownPublicKey&&(this.ownPublicKey=await this.loadKey(OWN_PUBLIC_KEY)),null!==this.ownPrivateKey&&null!==this.ownPublicKey||await this.generateKeyPair(),null===this.peerPublicKey&&(this.peerPublicKey=await this.loadKey(PEER_PUBLIC_KEY)),null===this.sharedSecret){if(null===this.ownPrivateKey||null===this.peerPublicKey)return;this.sharedSecret=await async function deriveSharedSecret(ownPrivateKey,peerPublicKey){return crypto.subtle.deriveKey({name:"ECDH",public:peerPublicKey},ownPrivateKey,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}(this.ownPrivateKey,this.peerPublicKey)}}async loadKey(item){const key=this.storage.getItem(item.storageKey);return key?importKeyFromHexString(item.keyType,key):null}async storeKey(item,key){const hexString=await exportKeyToHexString(item.keyType,key);this.storage.setItem(item.storageKey,hexString)}}const VERSION="4.3.0",NAME="@coinbase/wallet-sdk";async function fetchRPCRequest(request,rpcUrl){const requestBody=Object.assign(Object.assign({},request),{jsonrpc:"2.0",id:crypto.randomUUID()}),res=await window.fetch(rpcUrl,{method:"POST",body:JSON.stringify(requestBody),mode:"cors",headers:{"Content-Type":"application/json","X-Cbw-Sdk-Version":VERSION,"X-Cbw-Sdk-Platform":NAME}}),{result,error}=await res.json();if(error)throw error;return result}function getCoinbaseInjectedProvider({metadata,preference}){var _a,_b;const{appName,appLogoUrl,appChainIds}=metadata;if("smartWalletOnly"!==preference.options){const extension=function getCoinbaseInjectedLegacyProvider(){return globalThis.coinbaseWalletExtension}();if(extension)return null===(_a=extension.setAppInfo)||void 0===_a||_a.call(extension,appName,appLogoUrl,appChainIds,preference),extension}const ethereum=function getInjectedEthereum(){var _a,_b;try{const window=globalThis;return null!==(_a=window.ethereum)&&void 0!==_a?_a:null===(_b=window.top)||void 0===_b?void 0:_b.ethereum}catch(_c){return}}();if(null==ethereum?void 0:ethereum.isCoinbaseBrowser)return null===(_b=ethereum.setAppInfo)||void 0===_b||_b.call(ethereum,appName,appLogoUrl,appChainIds,preference),ethereum}class SCWSigner{constructor(params){var _a,_b,_c;this.metadata=params.metadata,this.communicator=params.communicator,this.callback=params.callback,this.keyManager=new SCWKeyManager,this.storage=new ScopedLocalStorage("CBWSDK","SCWStateManager"),this.accounts=null!==(_a=this.storage.loadObject("accounts"))&&void 0!==_a?_a:[],this.chain=this.storage.loadObject("activeChain")||{id:null!==(_c=null===(_b=params.metadata.appChainIds)||void 0===_b?void 0:_b[0])&&void 0!==_c?_c:1},this.handshake=this.handshake.bind(this),this.request=this.request.bind(this),this.createRequestMessage=this.createRequestMessage.bind(this),this.decryptResponseMessage=this.decryptResponseMessage.bind(this)}async handshake(args){var _a,_b,_c,_d;await(null===(_b=(_a=this.communicator).waitForPopupLoaded)||void 0===_b?void 0:_b.call(_a));const handshakeMessage=await this.createRequestMessage({handshake:{method:args.method,params:Object.assign({},this.metadata,null!==(_c=args.params)&&void 0!==_c?_c:{})}}),response=await this.communicator.postRequestAndWaitForResponse(handshakeMessage);if("failure"in response.content)throw response.content.failure;const peerPublicKey=await importKeyFromHexString("public",response.sender);await this.keyManager.setPeerPublicKey(peerPublicKey);const result=(await this.decryptResponseMessage(response)).result;if("error"in result)throw result.error;switch(args.method){case"eth_requestAccounts":{const accounts=result.value;this.accounts=accounts,this.storage.storeObject("accounts",accounts),null===(_d=this.callback)||void 0===_d||_d.call(this,"accountsChanged",accounts);break}}}async request(request){var _a;if(0===this.accounts.length){if("wallet_sendCalls"===request.method)return this.sendRequestToPopup(request);throw errors_standardErrors_provider.unauthorized()}switch(request.method){case"eth_requestAccounts":return null===(_a=this.callback)||void 0===_a||_a.call(this,"connect",{chainId:hexStringFromNumber(this.chain.id)}),this.accounts;case"eth_accounts":return this.accounts;case"eth_coinbase":return this.accounts[0];case"net_version":return this.chain.id;case"eth_chainId":return hexStringFromNumber(this.chain.id);case"wallet_getCapabilities":return this.storage.loadObject("walletCapabilities");case"wallet_switchEthereumChain":return this.handleSwitchChainRequest(request);case"eth_ecRecover":case"personal_sign":case"wallet_sign":case"personal_ecRecover":case"eth_signTransaction":case"eth_sendTransaction":case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"eth_signTypedData_v4":case"eth_signTypedData":case"wallet_addEthereumChain":case"wallet_watchAsset":case"wallet_sendCalls":case"wallet_showCallsStatus":case"wallet_grantPermissions":return this.sendRequestToPopup(request);default:if(!this.chain.rpcUrl)throw errors_standardErrors_rpc.internal("No RPC URL set for chain");return fetchRPCRequest(request,this.chain.rpcUrl)}}async sendRequestToPopup(request){var _a,_b;await(null===(_b=(_a=this.communicator).waitForPopupLoaded)||void 0===_b?void 0:_b.call(_a));const response=await this.sendEncryptedRequest(request),result=(await this.decryptResponseMessage(response)).result;if("error"in result)throw result.error;return result.value}async cleanup(){var _a,_b;this.storage.clear(),await this.keyManager.clear(),this.accounts=[],this.chain={id:null!==(_b=null===(_a=this.metadata.appChainIds)||void 0===_a?void 0:_a[0])&&void 0!==_b?_b:1}}async handleSwitchChainRequest(request){var _a;const params=request.params;if(!params||!(null===(_a=params[0])||void 0===_a?void 0:_a.chainId))throw errors_standardErrors_rpc.invalidParams();const chainId=ensureIntNumber(params[0].chainId);if(this.updateChain(chainId))return null;const popupResult=await this.sendRequestToPopup(request);return null===popupResult&&this.updateChain(chainId),popupResult}async sendEncryptedRequest(request){const sharedSecret=await this.keyManager.getSharedSecret();if(!sharedSecret)throw errors_standardErrors_provider.unauthorized("No valid session found, try requestAccounts before other methods");const encrypted=await encryptContent({action:request,chainId:this.chain.id},sharedSecret),message=await this.createRequestMessage({encrypted});return this.communicator.postRequestAndWaitForResponse(message)}async createRequestMessage(content){const publicKey=await exportKeyToHexString("public",await this.keyManager.getOwnPublicKey());return{id:crypto.randomUUID(),sender:publicKey,content,timestamp:new Date}}async decryptResponseMessage(message){var _a,_b;const content=message.content;if("failure"in content)throw content.failure;const sharedSecret=await this.keyManager.getSharedSecret();if(!sharedSecret)throw errors_standardErrors_provider.unauthorized("Invalid session");const response=await decryptContent(content.encrypted,sharedSecret),availableChains=null===(_a=response.data)||void 0===_a?void 0:_a.chains;if(availableChains){const chains=Object.entries(availableChains).map(([id,rpcUrl])=>({id:Number(id),rpcUrl}));this.storage.storeObject("availableChains",chains),this.updateChain(this.chain.id,chains)}const walletCapabilities=null===(_b=response.data)||void 0===_b?void 0:_b.capabilities;return walletCapabilities&&this.storage.storeObject("walletCapabilities",walletCapabilities),response}updateChain(chainId,newAvailableChains){var _a;const chains=null!=newAvailableChains?newAvailableChains:this.storage.loadObject("availableChains"),chain=null==chains?void 0:chains.find(chain=>chain.id===chainId);return!!chain&&(chain!==this.chain&&(this.chain=chain,this.storage.storeObject("activeChain",chain),null===(_a=this.callback)||void 0===_a||_a.call(this,"chainChanged",hexStringFromNumber(chain.id))),!0)}}var eth_eip712_util=__webpack_require__("./node_modules/@coinbase/wallet-sdk/dist/vendor-js/eth-eip712-util/index.cjs"),eth_eip712_util_default=__webpack_require__.n(eth_eip712_util);function isErrorResponse(response){return void 0!==response.errorMessage}class WalletLinkCipher{constructor(secret){this.secret=secret}async encrypt(plainText){const secret=this.secret;if(64!==secret.length)throw Error("secret must be 256 bits");const ivBytes=crypto.getRandomValues(new Uint8Array(12)),secretKey=await crypto.subtle.importKey("raw",hexStringToUint8Array(secret),{name:"aes-gcm"},!1,["encrypt","decrypt"]),enc=new TextEncoder,encryptedResult=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:ivBytes},secretKey,enc.encode(plainText)),authTag=encryptedResult.slice(encryptedResult.byteLength-16),encryptedPlaintext=encryptedResult.slice(0,encryptedResult.byteLength-16),authTagBytes=new Uint8Array(authTag),encryptedPlaintextBytes=new Uint8Array(encryptedPlaintext);return uint8ArrayToHex(new Uint8Array([...ivBytes,...authTagBytes,...encryptedPlaintextBytes]))}async decrypt(cipherText){const secret=this.secret;if(64!==secret.length)throw Error("secret must be 256 bits");return new Promise((resolve,reject)=>{!async function(){const secretKey=await crypto.subtle.importKey("raw",hexStringToUint8Array(secret),{name:"aes-gcm"},!1,["encrypt","decrypt"]),encrypted=hexStringToUint8Array(cipherText),ivBytes=encrypted.slice(0,12),authTagBytes=encrypted.slice(12,28),encryptedPlaintextBytes=encrypted.slice(28),concattedBytes=new Uint8Array([...encryptedPlaintextBytes,...authTagBytes]),algo={name:"AES-GCM",iv:new Uint8Array(ivBytes)};try{const decrypted=await window.crypto.subtle.decrypt(algo,secretKey,concattedBytes),decoder=new TextDecoder;resolve(decoder.decode(decrypted))}catch(err){reject(err)}}()})}}var ConnectionState,console=__webpack_require__("./node_modules/console-browserify/index.js");class WalletLinkHTTP{constructor(linkAPIUrl,sessionId,sessionKey){this.linkAPIUrl=linkAPIUrl,this.sessionId=sessionId;const credentials=`${sessionId}:${sessionKey}`;this.auth=`Basic ${btoa(credentials)}`}async markUnseenEventsAsSeen(events){return Promise.all(events.map(e=>fetch(`${this.linkAPIUrl}/events/${e.eventId}/seen`,{method:"POST",headers:{Authorization:this.auth}}))).catch(error=>console.error("Unabled to mark event as failed:",error))}async fetchUnseenEvents(){var _a;const response=await fetch(`${this.linkAPIUrl}/events?unseen=true`,{headers:{Authorization:this.auth}});if(response.ok){const{events,error}=await response.json();if(error)throw new Error(`Check unseen events failed: ${error}`);const responseEvents=null!==(_a=null==events?void 0:events.filter(e=>"Web3Response"===e.event).map(e=>({type:"Event",sessionId:this.sessionId,eventId:e.id,event:e.event,data:e.data})))&&void 0!==_a?_a:[];return this.markUnseenEventsAsSeen(responseEvents),responseEvents}throw new Error(`Check unseen events failed: ${response.status}`)}}!function(ConnectionState){ConnectionState[ConnectionState.DISCONNECTED=0]="DISCONNECTED",ConnectionState[ConnectionState.CONNECTING=1]="CONNECTING",ConnectionState[ConnectionState.CONNECTED=2]="CONNECTED"}(ConnectionState||(ConnectionState={}));class WalletLinkWebSocket{setConnectionStateListener(listener){this.connectionStateListener=listener}setIncomingDataListener(listener){this.incomingDataListener=listener}constructor(url,WebSocketClass=WebSocket){this.WebSocketClass=WebSocketClass,this.webSocket=null,this.pendingData=[],this.url=url.replace(/^http/,"ws")}async connect(){if(this.webSocket)throw new Error("webSocket object is not null");return new Promise((resolve,reject)=>{var _a;let webSocket;try{this.webSocket=webSocket=new this.WebSocketClass(this.url)}catch(err){return void reject(err)}null===(_a=this.connectionStateListener)||void 0===_a||_a.call(this,ConnectionState.CONNECTING),webSocket.onclose=evt=>{var _a;this.clearWebSocket(),reject(new Error(`websocket error ${evt.code}: ${evt.reason}`)),null===(_a=this.connectionStateListener)||void 0===_a||_a.call(this,ConnectionState.DISCONNECTED)},webSocket.onopen=_=>{var _a;if(resolve(),null===(_a=this.connectionStateListener)||void 0===_a||_a.call(this,ConnectionState.CONNECTED),this.pendingData.length>0){[...this.pendingData].forEach(data=>this.sendData(data)),this.pendingData=[]}},webSocket.onmessage=evt=>{var _a,_b;if("h"===evt.data)null===(_a=this.incomingDataListener)||void 0===_a||_a.call(this,{type:"Heartbeat"});else try{const message=JSON.parse(evt.data);null===(_b=this.incomingDataListener)||void 0===_b||_b.call(this,message)}catch(_c){}}})}disconnect(){var _a;const{webSocket}=this;if(webSocket){this.clearWebSocket(),null===(_a=this.connectionStateListener)||void 0===_a||_a.call(this,ConnectionState.DISCONNECTED),this.connectionStateListener=void 0,this.incomingDataListener=void 0;try{webSocket.close()}catch(_b){}}}sendData(data){const{webSocket}=this;if(!webSocket)return this.pendingData.push(data),void this.connect();webSocket.send(data)}clearWebSocket(){const{webSocket}=this;webSocket&&(this.webSocket=null,webSocket.onclose=null,webSocket.onerror=null,webSocket.onmessage=null,webSocket.onopen=null)}}var WalletLinkConnection_console=__webpack_require__("./node_modules/console-browserify/index.js");class WalletLinkConnection{constructor({session,linkAPIUrl,listener}){this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=type_IntNumber(1),this._connected=!1,this._linked=!1,this.shouldFetchUnseenEventsOnConnect=!1,this.requestResolutions=new Map,this.handleSessionMetadataUpdated=metadata=>{if(!metadata)return;new Map([["__destroyed",this.handleDestroyed],["EthereumAddress",this.handleAccountUpdated],["WalletUsername",this.handleWalletUsernameUpdated],["AppVersion",this.handleAppVersionUpdated],["ChainId",v=>metadata.JsonRpcUrl&&this.handleChainUpdated(v,metadata.JsonRpcUrl)]]).forEach((handler,key)=>{const value=metadata[key];void 0!==value&&handler(value)})},this.handleDestroyed=__destroyed=>{var _a;"1"===__destroyed&&(null===(_a=this.listener)||void 0===_a||_a.resetAndReload())},this.handleAccountUpdated=async encryptedEthereumAddress=>{var _a;const address=await this.cipher.decrypt(encryptedEthereumAddress);null===(_a=this.listener)||void 0===_a||_a.accountUpdated(address)},this.handleMetadataUpdated=async(key,encryptedMetadataValue)=>{var _a;const decryptedValue=await this.cipher.decrypt(encryptedMetadataValue);null===(_a=this.listener)||void 0===_a||_a.metadataUpdated(key,decryptedValue)},this.handleWalletUsernameUpdated=async walletUsername=>{this.handleMetadataUpdated("walletUsername",walletUsername)},this.handleAppVersionUpdated=async appVersion=>{this.handleMetadataUpdated("AppVersion",appVersion)},this.handleChainUpdated=async(encryptedChainId,encryptedJsonRpcUrl)=>{var _a;const chainId=await this.cipher.decrypt(encryptedChainId),jsonRpcUrl=await this.cipher.decrypt(encryptedJsonRpcUrl);null===(_a=this.listener)||void 0===_a||_a.chainUpdated(chainId,jsonRpcUrl)},this.session=session,this.cipher=new WalletLinkCipher(session.secret),this.listener=listener;const ws=new WalletLinkWebSocket(`${linkAPIUrl}/rpc`,WebSocket);ws.setConnectionStateListener(async state=>{let connected=!1;switch(state){case ConnectionState.DISCONNECTED:if(!this.destroyed){const connect=async()=>{await new Promise(resolve=>setTimeout(resolve,5e3)),this.destroyed||ws.connect().catch(()=>{connect()})};connect()}break;case ConnectionState.CONNECTED:connected=await this.handleConnected(),this.updateLastHeartbeat(),setInterval(()=>{this.heartbeat()},1e4),this.shouldFetchUnseenEventsOnConnect&&this.fetchUnseenEventsAPI();case ConnectionState.CONNECTING:}this.connected!==connected&&(this.connected=connected)}),ws.setIncomingDataListener(m=>{var _a;switch(m.type){case"Heartbeat":return void this.updateLastHeartbeat();case"IsLinkedOK":case"Linked":{const linked="IsLinkedOK"===m.type?m.linked:void 0;this.linked=linked||m.onlineGuests>0;break}case"GetSessionConfigOK":case"SessionConfigUpdated":this.handleSessionMetadataUpdated(m.metadata);break;case"Event":this.handleIncomingEvent(m)}void 0!==m.id&&(null===(_a=this.requestResolutions.get(m.id))||void 0===_a||_a(m))}),this.ws=ws,this.http=new WalletLinkHTTP(linkAPIUrl,session.id,session.key)}connect(){if(this.destroyed)throw new Error("instance is destroyed");this.ws.connect()}async destroy(){this.destroyed||(await this.makeRequest({type:"SetSessionConfig",id:type_IntNumber(this.nextReqId++),sessionId:this.session.id,metadata:{__destroyed:"1"}},{timeout:1e3}),this.destroyed=!0,this.ws.disconnect(),this.listener=void 0)}get connected(){return this._connected}set connected(connected){this._connected=connected}get linked(){return this._linked}set linked(linked){var _a,_b;this._linked=linked,linked&&(null===(_a=this.onceLinked)||void 0===_a||_a.call(this)),null===(_b=this.listener)||void 0===_b||_b.linkedUpdated(linked)}setOnceLinked(callback){return new Promise(resolve=>{this.linked?callback().then(resolve):this.onceLinked=()=>{callback().then(resolve),this.onceLinked=void 0}})}async handleIncomingEvent(m){var _a;if("Event"!==m.type||"Web3Response"!==m.event)return;const decryptedData=await this.cipher.decrypt(m.data),message=JSON.parse(decryptedData);if("WEB3_RESPONSE"!==message.type)return;const{id,response}=message;null===(_a=this.listener)||void 0===_a||_a.handleWeb3ResponseMessage(id,response)}async checkUnseenEvents(){if(this.connected){await new Promise(resolve=>setTimeout(resolve,250));try{await this.fetchUnseenEventsAPI()}catch(e){WalletLinkConnection_console.error("Unable to check for unseen events",e)}}else this.shouldFetchUnseenEventsOnConnect=!0}async fetchUnseenEventsAPI(){this.shouldFetchUnseenEventsOnConnect=!1;(await this.http.fetchUnseenEvents()).forEach(e=>this.handleIncomingEvent(e))}async publishEvent(event,unencryptedData,callWebhook=!1){const data=await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},unencryptedData),{origin:location.origin,location:location.href,relaySource:"coinbaseWalletExtension"in window&&window.coinbaseWalletExtension?"injected_sdk":"sdk"}))),message={type:"PublishEvent",id:type_IntNumber(this.nextReqId++),sessionId:this.session.id,event,data,callWebhook};return this.setOnceLinked(async()=>{const res=await this.makeRequest(message);if("Fail"===res.type)throw new Error(res.error||"failed to publish event");return res.eventId})}sendData(message){this.ws.sendData(JSON.stringify(message))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>2e4)this.ws.disconnect();else try{this.ws.sendData("h")}catch(_a){}}async makeRequest(message,options={timeout:6e4}){const reqId=message.id;let timeoutId;return this.sendData(message),Promise.race([new Promise((_,reject)=>{timeoutId=window.setTimeout(()=>{reject(new Error(`request ${reqId} timed out`))},options.timeout)}),new Promise(resolve=>{this.requestResolutions.set(reqId,m=>{clearTimeout(timeoutId),resolve(m),this.requestResolutions.delete(reqId)})})])}async handleConnected(){return"Fail"!==(await this.makeRequest({type:"HostSession",id:type_IntNumber(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key})).type&&(this.sendData({type:"IsLinked",id:type_IntNumber(this.nextReqId++),sessionId:this.session.id}),this.sendData({type:"GetSessionConfig",id:type_IntNumber(this.nextReqId++),sessionId:this.session.id}),!0)}}class RelayEventManager{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const id=this._nextRequestId,idStr=prepend0x(id.toString(16));return this.callbacks.get(idStr)&&this.callbacks.delete(idStr),id}}var sha256=__webpack_require__("./node_modules/@noble/hashes/esm/sha256.js"),utils=__webpack_require__("./node_modules/@noble/hashes/esm/utils.js");class WalletLinkSession{constructor(storage,id,secret,linked=!1){this.storage=storage,this.id=id,this.secret=secret,this.key=(0,utils.My)((0,sha256.sc)(`${id}, ${secret} WalletLink`)),this._linked=!!linked}static create(storage){const id=randomBytesHex(16),secret=randomBytesHex(32);return new WalletLinkSession(storage,id,secret).save()}static load(storage){const id=storage.getItem("session:id"),linked=storage.getItem("session:linked"),secret=storage.getItem("session:secret");return id&&secret?new WalletLinkSession(storage,id,secret,"1"===linked):null}get linked(){return this._linked}set linked(val){this._linked=val,this.persistLinked()}save(){return this.storage.setItem("session:id",this.id),this.storage.setItem("session:secret",this.secret),this.persistLinked(),this}persistLinked(){this.storage.setItem("session:linked",this._linked?"1":"0")}}function getLocation(){try{return function isInIFrame(){try{return null!==window.frameElement}catch(e){return!1}}()&&window.top?window.top.location:window.location}catch(e){return window.location}}function isDarkMode(){var _a,_b;return null!==(_b=null===(_a=null===window||void 0===window?void 0:window.matchMedia)||void 0===_a?void 0:_a.call(window,"(prefers-color-scheme: dark)").matches)&&void 0!==_b&&_b}function injectCssReset(){const styleEl=document.createElement("style");styleEl.type="text/css",styleEl.appendChild(document.createTextNode('@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}')),document.documentElement.appendChild(styleEl)}var clsx_m=__webpack_require__("./node_modules/clsx/dist/clsx.m.js"),preact_module=__webpack_require__("./node_modules/preact/dist/preact.module.js"),hooks_module=__webpack_require__("./node_modules/preact/hooks/dist/hooks.module.js");class Snackbar{constructor(){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=isDarkMode()}attach(el){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",el.appendChild(this.root),this.render()}presentItem(itemProps){const key=this.nextItemKey++;return this.items.set(key,itemProps),this.render(),()=>{this.items.delete(key),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&(0,preact_module.render)((0,preact_module.h)("div",null,(0,preact_module.h)(SnackbarContainer,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([key,itemProps])=>(0,preact_module.h)(SnackbarInstance,Object.assign({},itemProps,{key}))))),this.root)}}const SnackbarContainer=props=>(0,preact_module.h)("div",{class:(0,clsx_m.clsx)("-cbwsdk-snackbar-container")},(0,preact_module.h)("style",null,".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}"),(0,preact_module.h)("div",{class:"-cbwsdk-snackbar"},props.children)),SnackbarInstance=({autoExpand,message,menuItems})=>{const[hidden,setHidden]=(0,hooks_module.useState)(!0),[expanded,setExpanded]=(0,hooks_module.useState)(null!=autoExpand&&autoExpand);(0,hooks_module.useEffect)(()=>{const timers=[window.setTimeout(()=>{setHidden(!1)},1),window.setTimeout(()=>{setExpanded(!0)},1e4)];return()=>{timers.forEach(window.clearTimeout)}});return(0,preact_module.h)("div",{class:(0,clsx_m.clsx)("-cbwsdk-snackbar-instance",hidden&&"-cbwsdk-snackbar-instance-hidden",expanded&&"-cbwsdk-snackbar-instance-expanded")},(0,preact_module.h)("div",{class:"-cbwsdk-snackbar-instance-header",onClick:()=>{setExpanded(!expanded)}},(0,preact_module.h)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+",class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",(0,preact_module.h)("div",{class:"-cbwsdk-snackbar-instance-header-message"},message),(0,preact_module.h)("div",{class:"-gear-container"},!expanded&&(0,preact_module.h)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,preact_module.h)("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),(0,preact_module.h)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=",class:"-gear-icon",title:"Expand"}))),menuItems&&menuItems.length>0&&(0,preact_module.h)("div",{class:"-cbwsdk-snackbar-instance-menu"},menuItems.map((action,i)=>(0,preact_module.h)("div",{class:(0,clsx_m.clsx)("-cbwsdk-snackbar-instance-menu-item",action.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:action.onClick,key:i},(0,preact_module.h)("svg",{width:action.svgWidth,height:action.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,preact_module.h)("path",{"fill-rule":action.defaultFillRule,"clip-rule":action.defaultClipRule,d:action.path,fill:"#AAAAAA"})),(0,preact_module.h)("span",{class:(0,clsx_m.clsx)("-cbwsdk-snackbar-instance-menu-item-info",action.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},action.info)))))};class WalletLinkRelayUI{constructor(){this.attached=!1,this.snackbar=new Snackbar}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");const el=document.documentElement,container=document.createElement("div");container.className="-cbwsdk-css-reset",el.appendChild(container),this.snackbar.attach(container),this.attached=!0,injectCssReset()}showConnecting(options){let snackbarProps;return snackbarProps=options.isUnlinkedErrorState?{autoExpand:!0,message:"Connection lost",menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:options.onResetConnection}]}:{message:"Confirm on phone",menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:options.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:options.onResetConnection}]},this.snackbar.presentItem(snackbarProps)}}class RedirectDialog{constructor(){this.root=null,this.darkMode=isDarkMode()}attach(){const el=document.documentElement;this.root=document.createElement("div"),this.root.className="-cbwsdk-css-reset",el.appendChild(this.root),injectCssReset()}present(props){this.render(props)}clear(){this.render(null)}render(props){this.root&&((0,preact_module.render)(null,this.root),props&&(0,preact_module.render)((0,preact_module.h)(RedirectDialogContent,Object.assign({},props,{onDismiss:()=>{this.clear()},darkMode:this.darkMode})),this.root))}}const RedirectDialogContent=({title,buttonText,darkMode,onButtonClick,onDismiss})=>{const theme=darkMode?"dark":"light";return(0,preact_module.h)(SnackbarContainer,{darkMode},(0,preact_module.h)("div",{class:"-cbwsdk-redirect-dialog"},(0,preact_module.h)("style",null,".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}"),(0,preact_module.h)("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:onDismiss}),(0,preact_module.h)("div",{class:(0,clsx_m.clsx)("-cbwsdk-redirect-dialog-box",theme)},(0,preact_module.h)("p",null,title),(0,preact_module.h)("button",{onClick:onButtonClick},buttonText))))};class WLMobileRelayUI{constructor(){this.attached=!1,this.redirectDialog=new RedirectDialog}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");this.redirectDialog.attach(),this.attached=!0}redirectToCoinbaseWallet(walletLinkUrl){const url=new URL("https://go.cb-w.com/walletlink");url.searchParams.append("redirect_url",getLocation().href),walletLinkUrl&&url.searchParams.append("wl_url",walletLinkUrl);const anchorTag=document.createElement("a");anchorTag.target="cbw-opener",anchorTag.href=url.href,anchorTag.rel="noreferrer noopener",anchorTag.click()}openCoinbaseWalletDeeplink(walletLinkUrl){this.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",onButtonClick:()=>{this.redirectToCoinbaseWallet(walletLinkUrl)}}),setTimeout(()=>{this.redirectToCoinbaseWallet(walletLinkUrl)},99)}showConnecting(_options){return()=>{this.redirectDialog.clear()}}}class WalletLinkRelay{constructor(options){this.chainCallbackParams={chainId:"",jsonRpcUrl:""},this.isMobileWeb=function isMobileWeb(){var _a;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(null===(_a=null===window||void 0===window?void 0:window.navigator)||void 0===_a?void 0:_a.userAgent)}(),this.linkedUpdated=linked=>{this.isLinked=linked;const cachedAddresses=this.storage.getItem("Addresses");if(linked&&(this._session.linked=linked),this.isUnlinkedErrorState=!1,cachedAddresses){const addresses=cachedAddresses.split(" "),wasConnectedViaStandalone="true"===this.storage.getItem("IsStandaloneSigning");""===addresses[0]||linked||!this._session.linked||wasConnectedViaStandalone||(this.isUnlinkedErrorState=!0)}},this.metadataUpdated=(key,value)=>{this.storage.setItem(key,value)},this.chainUpdated=(chainId,jsonRpcUrl)=>{this.chainCallbackParams.chainId===chainId&&this.chainCallbackParams.jsonRpcUrl===jsonRpcUrl||(this.chainCallbackParams={chainId,jsonRpcUrl},this.chainCallback&&this.chainCallback(jsonRpcUrl,Number.parseInt(chainId,10)))},this.accountUpdated=selectedAddress=>{this.accountsCallback&&this.accountsCallback([selectedAddress]),WalletLinkRelay.accountRequestCallbackIds.size>0&&(Array.from(WalletLinkRelay.accountRequestCallbackIds.values()).forEach(id=>{this.invokeCallback(id,{method:"requestEthereumAccounts",result:[selectedAddress]})}),WalletLinkRelay.accountRequestCallbackIds.clear())},this.resetAndReload=this.resetAndReload.bind(this),this.linkAPIUrl=options.linkAPIUrl,this.storage=options.storage,this.metadata=options.metadata,this.accountsCallback=options.accountsCallback,this.chainCallback=options.chainCallback;const{session,ui,connection}=this.subscribe();this._session=session,this.connection=connection,this.relayEventManager=new RelayEventManager,this.ui=ui,this.ui.attach()}subscribe(){const session=WalletLinkSession.load(this.storage)||WalletLinkSession.create(this.storage),{linkAPIUrl}=this,connection=new WalletLinkConnection({session,linkAPIUrl,listener:this}),ui=this.isMobileWeb?new WLMobileRelayUI:new WalletLinkRelayUI;return connection.connect(),{session,ui,connection}}resetAndReload(){this.connection.destroy().then(()=>{const storedSession=WalletLinkSession.load(this.storage);(null==storedSession?void 0:storedSession.id)===this._session.id&&ScopedLocalStorage.clearAll(),document.location.reload()}).catch(_=>{})}signEthereumTransaction(params){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:params.fromAddress,toAddress:params.toAddress,weiValue:bigIntStringFromBigInt(params.weiValue),data:hexStringFromBuffer(params.data,!0),nonce:params.nonce,gasPriceInWei:params.gasPriceInWei?bigIntStringFromBigInt(params.gasPriceInWei):null,maxFeePerGas:params.gasPriceInWei?bigIntStringFromBigInt(params.gasPriceInWei):null,maxPriorityFeePerGas:params.gasPriceInWei?bigIntStringFromBigInt(params.gasPriceInWei):null,gasLimit:params.gasLimit?bigIntStringFromBigInt(params.gasLimit):null,chainId:params.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(params){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:params.fromAddress,toAddress:params.toAddress,weiValue:bigIntStringFromBigInt(params.weiValue),data:hexStringFromBuffer(params.data,!0),nonce:params.nonce,gasPriceInWei:params.gasPriceInWei?bigIntStringFromBigInt(params.gasPriceInWei):null,maxFeePerGas:params.maxFeePerGas?bigIntStringFromBigInt(params.maxFeePerGas):null,maxPriorityFeePerGas:params.maxPriorityFeePerGas?bigIntStringFromBigInt(params.maxPriorityFeePerGas):null,gasLimit:params.gasLimit?bigIntStringFromBigInt(params.gasLimit):null,chainId:params.chainId,shouldSubmit:!0}})}submitEthereumTransaction(signedTransaction,chainId){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:hexStringFromBuffer(signedTransaction,!0),chainId}})}getWalletLinkSession(){return this._session}sendRequest(request){let hideSnackbarItem=null;const id=randomBytesHex(8),cancel=error=>{this.publishWeb3RequestCanceledEvent(id),this.handleErrorResponse(id,request.method,error),null==hideSnackbarItem||hideSnackbarItem()};return new Promise((resolve,reject)=>{hideSnackbarItem=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:cancel,onResetConnection:this.resetAndReload}),this.relayEventManager.callbacks.set(id,response=>{if(null==hideSnackbarItem||hideSnackbarItem(),isErrorResponse(response))return reject(new Error(response.errorMessage));resolve(response)}),this.publishWeb3RequestEvent(id,request)})}publishWeb3RequestEvent(id,request){const message={type:"WEB3_REQUEST",id,request};this.publishEvent("Web3Request",message,!0).then(_=>{}).catch(err=>{this.handleWeb3ResponseMessage(message.id,{method:request.method,errorMessage:err.message})}),this.isMobileWeb&&this.openCoinbaseWalletDeeplink(request.method)}openCoinbaseWalletDeeplink(method){if(this.ui instanceof WLMobileRelayUI)switch(method){case"requestEthereumAccounts":case"switchEthereumChain":return;default:window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{this.connection.checkUnseenEvents()},{once:!0})},{once:!0}),this.ui.openCoinbaseWalletDeeplink()}}publishWeb3RequestCanceledEvent(id){const message={type:"WEB3_REQUEST_CANCELED",id};this.publishEvent("Web3RequestCanceled",message,!1).then()}publishEvent(event,message,callWebhook){return this.connection.publishEvent(event,message,callWebhook)}handleWeb3ResponseMessage(id,response){if("requestEthereumAccounts"===response.method)return WalletLinkRelay.accountRequestCallbackIds.forEach(id=>this.invokeCallback(id,response)),void WalletLinkRelay.accountRequestCallbackIds.clear();this.invokeCallback(id,response)}handleErrorResponse(id,method,error){var _a;const errorMessage=null!==(_a=null==error?void 0:error.message)&&void 0!==_a?_a:"Unspecified error message.";this.handleWeb3ResponseMessage(id,{method,errorMessage})}invokeCallback(id,response){const callback=this.relayEventManager.callbacks.get(id);callback&&(callback(response),this.relayEventManager.callbacks.delete(id))}requestEthereumAccounts(){const{appName,appLogoUrl}=this.metadata,request={method:"requestEthereumAccounts",params:{appName,appLogoUrl}},id=randomBytesHex(8);return new Promise((resolve,reject)=>{this.relayEventManager.callbacks.set(id,response=>{if(isErrorResponse(response))return reject(new Error(response.errorMessage));resolve(response)}),WalletLinkRelay.accountRequestCallbackIds.add(id),this.publishWeb3RequestEvent(id,request)})}watchAsset(type,address,symbol,decimals,image,chainId){const request={method:"watchAsset",params:{type,options:{address,symbol,decimals,image},chainId}};let hideSnackbarItem=null;const id=randomBytesHex(8),cancel=error=>{this.publishWeb3RequestCanceledEvent(id),this.handleErrorResponse(id,request.method,error),null==hideSnackbarItem||hideSnackbarItem()};return hideSnackbarItem=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:cancel,onResetConnection:this.resetAndReload}),new Promise((resolve,reject)=>{this.relayEventManager.callbacks.set(id,response=>{if(null==hideSnackbarItem||hideSnackbarItem(),isErrorResponse(response))return reject(new Error(response.errorMessage));resolve(response)}),this.publishWeb3RequestEvent(id,request)})}addEthereumChain(chainId,rpcUrls,iconUrls,blockExplorerUrls,chainName,nativeCurrency){const request={method:"addEthereumChain",params:{chainId,rpcUrls,blockExplorerUrls,chainName,iconUrls,nativeCurrency}};let hideSnackbarItem=null;const id=randomBytesHex(8),cancel=error=>{this.publishWeb3RequestCanceledEvent(id),this.handleErrorResponse(id,request.method,error),null==hideSnackbarItem||hideSnackbarItem()};return hideSnackbarItem=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:cancel,onResetConnection:this.resetAndReload}),new Promise((resolve,reject)=>{this.relayEventManager.callbacks.set(id,response=>{if(null==hideSnackbarItem||hideSnackbarItem(),isErrorResponse(response))return reject(new Error(response.errorMessage));resolve(response)}),this.publishWeb3RequestEvent(id,request)})}switchEthereumChain(chainId,address){const request={method:"switchEthereumChain",params:Object.assign({chainId},{address})};let hideSnackbarItem=null;const id=randomBytesHex(8),cancel=error=>{this.publishWeb3RequestCanceledEvent(id),this.handleErrorResponse(id,request.method,error),null==hideSnackbarItem||hideSnackbarItem()};return hideSnackbarItem=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:cancel,onResetConnection:this.resetAndReload}),new Promise((resolve,reject)=>{this.relayEventManager.callbacks.set(id,response=>(null==hideSnackbarItem||hideSnackbarItem(),isErrorResponse(response)&&response.errorCode?reject(errors_standardErrors_provider.custom({code:response.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."})):isErrorResponse(response)?reject(new Error(response.errorMessage)):void resolve(response))),this.publishWeb3RequestEvent(id,request)})}}WalletLinkRelay.accountRequestCallbackIds=new Set;var WalletLinkSigner_Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer;class WalletLinkSigner{constructor(options){this._relay=null,this._addresses=[],this.metadata=options.metadata,this._storage=new ScopedLocalStorage("walletlink","https://www.walletlink.org"),this.callback=options.callback||null;const cachedAddresses=this._storage.getItem("Addresses");if(cachedAddresses){const addresses=cachedAddresses.split(" ");""!==addresses[0]&&(this._addresses=addresses.map(address=>ensureAddressString(address)))}this.initializeRelay()}getSession(){const relay=this.initializeRelay(),{id,secret}=relay.getWalletLinkSession();return{id,secret}}async handshake(){await this._eth_requestAccounts()}get selectedAddress(){return this._addresses[0]||void 0}get jsonRpcUrl(){var _a;return null!==(_a=this._storage.getItem("DefaultJsonRpcUrl"))&&void 0!==_a?_a:void 0}set jsonRpcUrl(value){this._storage.setItem("DefaultJsonRpcUrl",value)}updateProviderInfo(jsonRpcUrl,chainId){var _a;this.jsonRpcUrl=jsonRpcUrl;const originalChainId=this.getChainId();this._storage.setItem("DefaultChainId",chainId.toString(10));ensureIntNumber(chainId)!==originalChainId&&(null===(_a=this.callback)||void 0===_a||_a.call(this,"chainChanged",hexStringFromNumber(chainId)))}async watchAsset(params){const request=Array.isArray(params)?params[0]:params;if(!request.type)throw errors_standardErrors_rpc.invalidParams("Type is required");if("ERC20"!==(null==request?void 0:request.type))throw errors_standardErrors_rpc.invalidParams(`Asset of type '${request.type}' is not supported`);if(!(null==request?void 0:request.options))throw errors_standardErrors_rpc.invalidParams("Options are required");if(!(null==request?void 0:request.options.address))throw errors_standardErrors_rpc.invalidParams("Address is required");const chainId=this.getChainId(),{address,symbol,image,decimals}=request.options,relay=this.initializeRelay(),result=await relay.watchAsset(request.type,address,symbol,decimals,image,null==chainId?void 0:chainId.toString());return!isErrorResponse(result)&&!!result.result}async addEthereumChain(params){var _a,_b;const request=params[0];if(0===(null===(_a=request.rpcUrls)||void 0===_a?void 0:_a.length))throw errors_standardErrors_rpc.invalidParams("please pass in at least 1 rpcUrl");if(!request.chainName||""===request.chainName.trim())throw errors_standardErrors_rpc.invalidParams("chainName is a required field");if(!request.nativeCurrency)throw errors_standardErrors_rpc.invalidParams("nativeCurrency is a required field");const chainIdNumber=Number.parseInt(request.chainId,16);if(chainIdNumber===this.getChainId())return!1;const relay=this.initializeRelay(),{rpcUrls=[],blockExplorerUrls=[],chainName,iconUrls=[],nativeCurrency}=request,res=await relay.addEthereumChain(chainIdNumber.toString(),rpcUrls,iconUrls,blockExplorerUrls,chainName,nativeCurrency);if(isErrorResponse(res))return!1;if(!0===(null===(_b=res.result)||void 0===_b?void 0:_b.isApproved))return this.updateProviderInfo(rpcUrls[0],chainIdNumber),null;throw errors_standardErrors_rpc.internal("unable to add ethereum chain")}async switchEthereumChain(params){const request=params[0],chainId=Number.parseInt(request.chainId,16),relay=this.initializeRelay(),res=await relay.switchEthereumChain(chainId.toString(10),this.selectedAddress||void 0);if(isErrorResponse(res))throw res;const switchResponse=res.result;return switchResponse.isApproved&&switchResponse.rpcUrl.length>0&&this.updateProviderInfo(switchResponse.rpcUrl,chainId),null}async cleanup(){this.callback=null,this._relay&&this._relay.resetAndReload(),this._storage.clear()}_setAddresses(addresses,_){var _a;if(!Array.isArray(addresses))throw new Error("addresses is not an array");const newAddresses=addresses.map(address=>ensureAddressString(address));JSON.stringify(newAddresses)!==JSON.stringify(this._addresses)&&(this._addresses=newAddresses,null===(_a=this.callback)||void 0===_a||_a.call(this,"accountsChanged",newAddresses),this._storage.setItem("Addresses",newAddresses.join(" ")))}async request(request){const params=request.params||[];switch(request.method){case"eth_accounts":return[...this._addresses];case"eth_coinbase":return this.selectedAddress||null;case"net_version":return this.getChainId().toString(10);case"eth_chainId":return hexStringFromNumber(this.getChainId());case"eth_requestAccounts":return this._eth_requestAccounts();case"eth_ecRecover":case"personal_ecRecover":return this.ecRecover(request);case"personal_sign":return this.personalSign(request);case"eth_signTransaction":return this._eth_signTransaction(params);case"eth_sendRawTransaction":return this._eth_sendRawTransaction(params);case"eth_sendTransaction":return this._eth_sendTransaction(params);case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"eth_signTypedData_v4":case"eth_signTypedData":return this.signTypedData(request);case"wallet_addEthereumChain":return this.addEthereumChain(params);case"wallet_switchEthereumChain":return this.switchEthereumChain(params);case"wallet_watchAsset":return this.watchAsset(params);default:if(!this.jsonRpcUrl)throw errors_standardErrors_rpc.internal("No RPC URL set for chain");return fetchRPCRequest(request,this.jsonRpcUrl)}}_ensureKnownAddress(addressString){const addressStr=ensureAddressString(addressString);if(!this._addresses.map(address=>ensureAddressString(address)).includes(addressStr))throw new Error("Unknown Ethereum address")}_prepareTransactionParams(tx){const fromAddress=tx.from?ensureAddressString(tx.from):this.selectedAddress;if(!fromAddress)throw new Error("Ethereum address is unavailable");this._ensureKnownAddress(fromAddress);return{fromAddress,toAddress:tx.to?ensureAddressString(tx.to):null,weiValue:null!=tx.value?ensureBigInt(tx.value):BigInt(0),data:tx.data?ensureBuffer(tx.data):WalletLinkSigner_Buffer.alloc(0),nonce:null!=tx.nonce?ensureIntNumber(tx.nonce):null,gasPriceInWei:null!=tx.gasPrice?ensureBigInt(tx.gasPrice):null,maxFeePerGas:null!=tx.maxFeePerGas?ensureBigInt(tx.maxFeePerGas):null,maxPriorityFeePerGas:null!=tx.maxPriorityFeePerGas?ensureBigInt(tx.maxPriorityFeePerGas):null,gasLimit:null!=tx.gas?ensureBigInt(tx.gas):null,chainId:tx.chainId?ensureIntNumber(tx.chainId):this.getChainId()}}async ecRecover(request){const{method,params}=request;if(!Array.isArray(params))throw errors_standardErrors_rpc.invalidParams();const relay=this.initializeRelay(),res=await relay.sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:encodeToHexString(params[0]),signature:encodeToHexString(params[1]),addPrefix:"personal_ecRecover"===method}});if(isErrorResponse(res))throw res;return res.result}getChainId(){var _a;return Number.parseInt(null!==(_a=this._storage.getItem("DefaultChainId"))&&void 0!==_a?_a:"1",10)}async _eth_requestAccounts(){var _a,_b;if(this._addresses.length>0)return null===(_a=this.callback)||void 0===_a||_a.call(this,"connect",{chainId:hexStringFromNumber(this.getChainId())}),this._addresses;const relay=this.initializeRelay(),res=await relay.requestEthereumAccounts();if(isErrorResponse(res))throw res;if(!res.result)throw new Error("accounts received is empty");return this._setAddresses(res.result),null===(_b=this.callback)||void 0===_b||_b.call(this,"connect",{chainId:hexStringFromNumber(this.getChainId())}),this._addresses}async personalSign({params}){if(!Array.isArray(params))throw errors_standardErrors_rpc.invalidParams();const address=params[1],rawData=params[0];this._ensureKnownAddress(address);const relay=this.initializeRelay(),res=await relay.sendRequest({method:"signEthereumMessage",params:{address:ensureAddressString(address),message:encodeToHexString(rawData),addPrefix:!0,typedDataJson:null}});if(isErrorResponse(res))throw res;return res.result}async _eth_signTransaction(params){const tx=this._prepareTransactionParams(params[0]||{}),relay=this.initializeRelay(),res=await relay.signEthereumTransaction(tx);if(isErrorResponse(res))throw res;return res.result}async _eth_sendRawTransaction(params){const signedTransaction=ensureBuffer(params[0]),relay=this.initializeRelay(),res=await relay.submitEthereumTransaction(signedTransaction,this.getChainId());if(isErrorResponse(res))throw res;return res.result}async _eth_sendTransaction(params){const tx=this._prepareTransactionParams(params[0]||{}),relay=this.initializeRelay(),res=await relay.signAndSubmitEthereumTransaction(tx);if(isErrorResponse(res))throw res;return res.result}async signTypedData(request){const{method,params}=request;if(!Array.isArray(params))throw errors_standardErrors_rpc.invalidParams();const address=params["eth_signTypedData_v1"===method?1:0],rawData=params["eth_signTypedData_v1"===method?0:1];this._ensureKnownAddress(address);const relay=this.initializeRelay(),res=await relay.sendRequest({method:"signEthereumMessage",params:{address:ensureAddressString(address),message:(input=rawData,hexStringFromBuffer({eth_signTypedData_v1:eth_eip712_util_default().hashForSignTypedDataLegacy,eth_signTypedData_v3:eth_eip712_util_default().hashForSignTypedData_v3,eth_signTypedData_v4:eth_eip712_util_default().hashForSignTypedData_v4,eth_signTypedData:eth_eip712_util_default().hashForSignTypedData_v4}[method]({data:ensureParsedJSONObject(input)}),!0)),typedDataJson:JSON.stringify(rawData,null,2),addPrefix:!1}});var input;if(isErrorResponse(res))throw res;return res.result}initializeRelay(){return this._relay||(this._relay=new WalletLinkRelay({linkAPIUrl:"https://www.walletlink.org",storage:this._storage,metadata:this.metadata,accountsCallback:this._setAddresses.bind(this),chainCallback:this.updateProviderInfo.bind(this)})),this._relay}}const storage=new ScopedLocalStorage("CBWSDK","SignerConfigurator");async function fetchSignerType(params){const{communicator,metadata,handshakeRequest,callback}=params;(async function listenForWalletLinkSessionRequest(communicator,metadata,callback){await communicator.onMessage(({event})=>"WalletLinkSessionRequest"===event);const walletlink=new WalletLinkSigner({metadata,callback});communicator.postMessage({event:"WalletLinkUpdate",data:{session:walletlink.getSession()}}),await walletlink.handshake(),communicator.postMessage({event:"WalletLinkUpdate",data:{connected:!0}})})(communicator,metadata,callback).catch(()=>{});const request={id:crypto.randomUUID(),event:"selectSignerType",data:Object.assign(Object.assign({},params.preference),{handshakeRequest})},{data}=await communicator.postRequestAndWaitForResponse(request);return data}var checkCrossOriginOpenerPolicy_console=__webpack_require__("./node_modules/console-browserify/index.js");const{checkCrossOriginOpenerPolicy,getCrossOriginOpenerPolicy}=(()=>{let crossOriginOpenerPolicy;return{getCrossOriginOpenerPolicy:()=>void 0===crossOriginOpenerPolicy?"undefined":crossOriginOpenerPolicy,checkCrossOriginOpenerPolicy:async()=>{if("undefined"!=typeof window)try{const url=`${window.location.origin}${window.location.pathname}`,response=await fetch(url,{method:"HEAD"});if(!response.ok)throw new Error(`HTTP error! status: ${response.status}`);const result=response.headers.get("Cross-Origin-Opener-Policy");crossOriginOpenerPolicy=null!=result?result:"null","same-origin"===crossOriginOpenerPolicy&&checkCrossOriginOpenerPolicy_console.error("Coinbase Wallet SDK requires the Cross-Origin-Opener-Policy header to not be set to 'same-origin'. This is to ensure that the SDK can communicate with the Coinbase Smart Wallet app.\n\nPlease see https://www.smartwallet.dev/guides/tips/popup-tips#cross-origin-opener-policy for more information.")}catch(error){checkCrossOriginOpenerPolicy_console.error("Error checking Cross-Origin-Opener-Policy:",error.message),crossOriginOpenerPolicy="error"}else crossOriginOpenerPolicy="non-browser-env"}}})();function openPopup(url){const left=(window.innerWidth-420)/2+window.screenX,top=(window.innerHeight-540)/2+window.screenY;!function appendAppInfoQueryParams(url){const params={sdkName:NAME,sdkVersion:VERSION,origin:window.location.origin,coop:getCrossOriginOpenerPolicy()};for(const[key,value]of Object.entries(params))url.searchParams.append(key,value.toString())}(url);const popupId=`wallet_${crypto.randomUUID()}`,popup=window.open(url,popupId,`width=420, height=540, left=${left}, top=${top}`);if(null==popup||popup.focus(),!popup)throw errors_standardErrors_rpc.internal("Pop up window failed to open");return popup}class Communicator{constructor({url="https://keys.coinbase.com/connect",metadata,preference}){this.popup=null,this.listeners=new Map,this.postMessage=async message=>{(await this.waitForPopupLoaded()).postMessage(message,this.url.origin)},this.postRequestAndWaitForResponse=async request=>{const responsePromise=this.onMessage(({requestId})=>requestId===request.id);return this.postMessage(request),await responsePromise},this.onMessage=async predicate=>new Promise((resolve,reject)=>{const listener=event=>{if(event.origin!==this.url.origin)return;const message=event.data;predicate(message)&&(resolve(message),window.removeEventListener("message",listener),this.listeners.delete(listener))};window.addEventListener("message",listener),this.listeners.set(listener,{reject})}),this.disconnect=()=>{!function closePopup(popup){popup&&!popup.closed&&popup.close()}(this.popup),this.popup=null,this.listeners.forEach(({reject},listener)=>{reject(errors_standardErrors_provider.userRejectedRequest("Request rejected")),window.removeEventListener("message",listener)}),this.listeners.clear()},this.waitForPopupLoaded=async()=>this.popup&&!this.popup.closed?(this.popup.focus(),this.popup):(this.popup=openPopup(this.url),this.onMessage(({event})=>"PopupUnload"===event).then(this.disconnect).catch(()=>{}),this.onMessage(({event})=>"PopupLoaded"===event).then(message=>{this.postMessage({requestId:message.id,data:{version:VERSION,metadata:this.metadata,preference:this.preference,location:window.location.toString()}})}).then(()=>{if(!this.popup)throw errors_standardErrors_rpc.internal();return this.popup})),this.url=new URL(url),this.metadata=metadata,this.preference=preference}}function serializeError(error){const serialized=serialize(function getErrorObject(error){var _a;if("string"==typeof error)return{message:error,code:standardErrorCodes_rpc.internal};if(isErrorResponse(error)){const message=error.errorMessage,code=null!==(_a=error.errorCode)&&void 0!==_a?_a:message.match(/(denied|rejected)/i)?standardErrorCodes_provider.userRejectedRequest:void 0;return Object.assign(Object.assign({},error),{message,code,data:{method:error.method}})}return error}(error),{shouldIncludeStack:!0}),docUrl=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");return docUrl.searchParams.set("version",VERSION),docUrl.searchParams.set("code",serialized.code.toString()),docUrl.searchParams.set("message",serialized.message),Object.assign(Object.assign({},serialized),{docUrl:docUrl.href})}var eventemitter3=__webpack_require__("./node_modules/eventemitter3/index.mjs");class ProviderEventEmitter extends eventemitter3.b{}var CoinbaseWalletProvider_console=__webpack_require__("./node_modules/console-browserify/index.js"),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};class CoinbaseWalletProvider extends ProviderEventEmitter{constructor(_a){var{metadata}=_a,_b=_a.preference,{keysUrl}=_b,preference=__rest(_b,["keysUrl"]);super(),this.signer=null,this.isCoinbaseWallet=!0,this.metadata=metadata,this.preference=preference,this.communicator=new Communicator({url:keysUrl,metadata,preference});const signerType=function loadSignerType(){return storage.getItem("SignerType")}();signerType&&(this.signer=this.initSigner(signerType))}async request(args){try{if(function checkErrorForInvalidRequestArgs(args){if(!args||"object"!=typeof args||Array.isArray(args))throw errors_standardErrors_rpc.invalidParams({message:"Expected a single, non-array, object argument.",data:args});const{method,params}=args;if("string"!=typeof method||0===method.length)throw errors_standardErrors_rpc.invalidParams({message:"'args.method' must be a non-empty string.",data:args});if(void 0!==params&&!Array.isArray(params)&&("object"!=typeof params||null===params))throw errors_standardErrors_rpc.invalidParams({message:"'args.params' must be an object or array if provided.",data:args});switch(method){case"eth_sign":case"eth_signTypedData_v2":case"eth_subscribe":case"eth_unsubscribe":throw errors_standardErrors_provider.unsupportedMethod()}}(args),!this.signer)switch(args.method){case"eth_requestAccounts":{const signerType=await this.requestSignerSelection(args),signer=this.initSigner(signerType);await signer.handshake(args),this.signer=signer,function storeSignerType(signerType){storage.setItem("SignerType",signerType)}(signerType);break}case"wallet_sendCalls":{const ephemeralSigner=this.initSigner("scw");await ephemeralSigner.handshake({method:"handshake"});const result=await ephemeralSigner.request(args);return await ephemeralSigner.cleanup(),result}case"wallet_getCallsStatus":return fetchRPCRequest(args,"http://rpc.wallet.coinbase.com");case"net_version":return 1;case"eth_chainId":return hexStringFromNumber(1);default:throw errors_standardErrors_provider.unauthorized("Must call 'eth_requestAccounts' before other methods")}return await this.signer.request(args)}catch(error){const{code}=error;return code===standardErrorCodes_provider.unauthorized&&this.disconnect(),Promise.reject(serializeError(error))}}async enable(){return CoinbaseWalletProvider_console.warn('.enable() has been deprecated. Please use .request({ method: "eth_requestAccounts" }) instead.'),await this.request({method:"eth_requestAccounts"})}async disconnect(){var _a;await(null===(_a=this.signer)||void 0===_a?void 0:_a.cleanup()),this.signer=null,ScopedLocalStorage.clearAll(),this.emit("disconnect",errors_standardErrors_provider.disconnected("User initiated disconnection"))}requestSignerSelection(handshakeRequest){return fetchSignerType({communicator:this.communicator,preference:this.preference,metadata:this.metadata,handshakeRequest,callback:this.emit.bind(this)})}initSigner(signerType){return function createSigner(params){const{signerType,metadata,communicator,callback}=params;switch(signerType){case"scw":return new SCWSigner({metadata,callback,communicator});case"walletlink":return new WalletLinkSigner({metadata,callback})}}({signerType,metadata:this.metadata,communicator:this.communicator,callback:this.emit.bind(this)})}}const DEFAULT_PREFERENCE={options:"all"};function createCoinbaseWalletSDK(params){var _a;new ScopedLocalStorage("CBWSDK").setItem("VERSION",VERSION),checkCrossOriginOpenerPolicy();const options={metadata:{appName:params.appName||"Dapp",appLogoUrl:params.appLogoUrl||"",appChainIds:params.appChainIds||[]},preference:Object.assign(DEFAULT_PREFERENCE,null!==(_a=params.preference)&&void 0!==_a?_a:{})};!function validatePreferences(preference){if(preference){if(!["all","smartWalletOnly","eoaOnly"].includes(preference.options))throw new Error(`Invalid options: ${preference.options}`);if(preference.attribution&&void 0!==preference.attribution.auto&&void 0!==preference.attribution.dataSuffix)throw new Error("Attribution cannot contain both auto and dataSuffix properties")}}(options.preference);let provider=null;return{getProvider:()=>(provider||(provider=function createCoinbaseWalletProvider(options){var _a;const params={metadata:options.metadata,preference:options.preference};return null!==(_a=getCoinbaseInjectedProvider(params))&&void 0!==_a?_a:new CoinbaseWalletProvider(params)}(options)),provider)}}},"./node_modules/@coinbase/wallet-sdk/dist/vendor-js/eth-eip712-util/abi.cjs":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer;const util=__webpack_require__("./node_modules/@coinbase/wallet-sdk/dist/vendor-js/eth-eip712-util/util.cjs");function elementaryName(name){return name.startsWith("int[")?"int256"+name.slice(3):"int"===name?"int256":name.startsWith("uint[")?"uint256"+name.slice(4):"uint"===name?"uint256":name.startsWith("fixed[")?"fixed128x128"+name.slice(5):"fixed"===name?"fixed128x128":name.startsWith("ufixed[")?"ufixed128x128"+name.slice(6):"ufixed"===name?"ufixed128x128":name}function parseTypeN(type){return Number.parseInt(/^\D+(\d+)$/.exec(type)[1],10)}function parseTypeNxM(type){var tmp=/^\D+(\d+)x(\d+)$/.exec(type);return[Number.parseInt(tmp[1],10),Number.parseInt(tmp[2],10)]}function parseTypeArray(type){var tmp=type.match(/(.*)\[(.*?)\]$/);return tmp?""===tmp[2]?"dynamic":Number.parseInt(tmp[2],10):null}function parseNumber(arg){var type=typeof arg;if("string"===type||"number"===type)return BigInt(arg);if("bigint"===type)return arg;throw new Error("Argument is not a number")}function encodeSingle(type,arg){var size,num,ret,i;if("address"===type)return encodeSingle("uint160",parseNumber(arg));if("bool"===type)return encodeSingle("uint8",arg?1:0);if("string"===type)return encodeSingle("bytes",new Buffer(arg,"utf8"));if(function isArray(type){return type.lastIndexOf("]")===type.length-1}(type)){if(void 0===arg.length)throw new Error("Not an array?");if("dynamic"!==(size=parseTypeArray(type))&&0!==size&&arg.length>size)throw new Error("Elements exceed array size: "+size);for(i in ret=[],type=type.slice(0,type.lastIndexOf("[")),"string"==typeof arg&&(arg=JSON.parse(arg)),arg)ret.push(encodeSingle(type,arg[i]));if("dynamic"===size){var length=encodeSingle("uint256",arg.length);ret.unshift(length)}return Buffer.concat(ret)}if("bytes"===type)return arg=new Buffer(arg),ret=Buffer.concat([encodeSingle("uint256",arg.length),arg]),arg.length%32!=0&&(ret=Buffer.concat([ret,util.zeros(32-arg.length%32)])),ret;if(type.startsWith("bytes")){if((size=parseTypeN(type))<1||size>32)throw new Error("Invalid bytes<N> width: "+size);return util.setLengthRight(arg,32)}if(type.startsWith("uint")){if((size=parseTypeN(type))%8||size<8||size>256)throw new Error("Invalid uint<N> width: "+size);num=parseNumber(arg);const bitLength=util.bitLengthFromBigInt(num);if(bitLength>size)throw new Error("Supplied uint exceeds width: "+size+" vs "+bitLength);if(num<0)throw new Error("Supplied uint is negative");return util.bufferBEFromBigInt(num,32)}if(type.startsWith("int")){if((size=parseTypeN(type))%8||size<8||size>256)throw new Error("Invalid int<N> width: "+size);num=parseNumber(arg);const bitLength=util.bitLengthFromBigInt(num);if(bitLength>size)throw new Error("Supplied int exceeds width: "+size+" vs "+bitLength);const twos=util.twosFromBigInt(num,256);return util.bufferBEFromBigInt(twos,32)}if(type.startsWith("ufixed")){if(size=parseTypeNxM(type),(num=parseNumber(arg))<0)throw new Error("Supplied ufixed is negative");return encodeSingle("uint256",num*BigInt(2)**BigInt(size[1]))}if(type.startsWith("fixed"))return size=parseTypeNxM(type),encodeSingle("int256",parseNumber(arg)*BigInt(2)**BigInt(size[1]));throw new Error("Unsupported or invalid type: "+type)}function isDynamic(type){return"string"===type||"bytes"===type||"dynamic"===parseTypeArray(type)}function solidityPack(types,values){if(types.length!==values.length)throw new Error("Number of types are not matching the values");for(var size,num,ret=[],i=0;i<types.length;i++){var type=elementaryName(types[i]),value=values[i];if("bytes"===type)ret.push(value);else if("string"===type)ret.push(new Buffer(value,"utf8"));else if("bool"===type)ret.push(new Buffer(value?"01":"00","hex"));else if("address"===type)ret.push(util.setLength(value,20));else if(type.startsWith("bytes")){if((size=parseTypeN(type))<1||size>32)throw new Error("Invalid bytes<N> width: "+size);ret.push(util.setLengthRight(value,size))}else if(type.startsWith("uint")){if((size=parseTypeN(type))%8||size<8||size>256)throw new Error("Invalid uint<N> width: "+size);num=parseNumber(value);const bitLength=util.bitLengthFromBigInt(num);if(bitLength>size)throw new Error("Supplied uint exceeds width: "+size+" vs "+bitLength);ret.push(util.bufferBEFromBigInt(num,size/8))}else{if(!type.startsWith("int"))throw new Error("Unsupported or invalid type: "+type);{if((size=parseTypeN(type))%8||size<8||size>256)throw new Error("Invalid int<N> width: "+size);num=parseNumber(value);const bitLength=util.bitLengthFromBigInt(num);if(bitLength>size)throw new Error("Supplied int exceeds width: "+size+" vs "+bitLength);const twos=util.twosFromBigInt(num,size);ret.push(util.bufferBEFromBigInt(twos,size/8))}}}return Buffer.concat(ret)}module.exports={rawEncode:function rawEncode(types,values){var output=[],data=[],headLength=32*types.length;for(var i in types){var type=elementaryName(types[i]),cur=encodeSingle(type,values[i]);isDynamic(type)?(output.push(encodeSingle("uint256",headLength)),data.push(cur),headLength+=cur.length):output.push(cur)}return Buffer.concat(output.concat(data))},solidityPack,soliditySHA3:function soliditySHA3(types,values){return util.keccak(solidityPack(types,values))}}},"./node_modules/@coinbase/wallet-sdk/dist/vendor-js/eth-eip712-util/index.cjs":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer;const util=__webpack_require__("./node_modules/@coinbase/wallet-sdk/dist/vendor-js/eth-eip712-util/util.cjs"),abi=__webpack_require__("./node_modules/@coinbase/wallet-sdk/dist/vendor-js/eth-eip712-util/abi.cjs"),TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},TypedDataUtils={encodeData(primaryType,data,types,useV4=!0){const encodedTypes=["bytes32"],encodedValues=[this.hashType(primaryType,types)];if(useV4){const encodeField=(name,type,value)=>{if(void 0!==types[type])return["bytes32",null==value?"0x0000000000000000000000000000000000000000000000000000000000000000":util.keccak(this.encodeData(type,value,types,useV4))];if(void 0===value)throw new Error(`missing value for field ${name} of type ${type}`);if("bytes"===type)return["bytes32",util.keccak(value)];if("string"===type)return"string"==typeof value&&(value=Buffer.from(value,"utf8")),["bytes32",util.keccak(value)];if(type.lastIndexOf("]")===type.length-1){const parsedType=type.slice(0,type.lastIndexOf("[")),typeValuePairs=value.map(item=>encodeField(name,parsedType,item));return["bytes32",util.keccak(abi.rawEncode(typeValuePairs.map(([type])=>type),typeValuePairs.map(([,value])=>value)))]}return[type,value]};for(const field of types[primaryType]){const[type,value]=encodeField(field.name,field.type,data[field.name]);encodedTypes.push(type),encodedValues.push(value)}}else for(const field of types[primaryType]){let value=data[field.name];if(void 0!==value)if("bytes"===field.type)encodedTypes.push("bytes32"),value=util.keccak(value),encodedValues.push(value);else if("string"===field.type)encodedTypes.push("bytes32"),"string"==typeof value&&(value=Buffer.from(value,"utf8")),value=util.keccak(value),encodedValues.push(value);else if(void 0!==types[field.type])encodedTypes.push("bytes32"),value=util.keccak(this.encodeData(field.type,value,types,useV4)),encodedValues.push(value);else{if(field.type.lastIndexOf("]")===field.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");encodedTypes.push(field.type),encodedValues.push(value)}}return abi.rawEncode(encodedTypes,encodedValues)},encodeType(primaryType,types){let result="",deps=this.findTypeDependencies(primaryType,types).filter(dep=>dep!==primaryType);deps=[primaryType].concat(deps.sort());for(const type of deps){if(!types[type])throw new Error("No type definition specified: "+type);result+=type+"("+types[type].map(({name,type})=>type+" "+name).join(",")+")"}return result},findTypeDependencies(primaryType,types,results=[]){if(primaryType=primaryType.match(/^\w*/)[0],results.includes(primaryType)||void 0===types[primaryType])return results;results.push(primaryType);for(const field of types[primaryType])for(const dep of this.findTypeDependencies(field.type,types,results))!results.includes(dep)&&results.push(dep);return results},hashStruct(primaryType,data,types,useV4=!0){return util.keccak(this.encodeData(primaryType,data,types,useV4))},hashType(primaryType,types){return util.keccak(this.encodeType(primaryType,types))},sanitizeData(data){const sanitizedData={};for(const key in TYPED_MESSAGE_SCHEMA.properties)data[key]&&(sanitizedData[key]=data[key]);return sanitizedData.types&&(sanitizedData.types=Object.assign({EIP712Domain:[]},sanitizedData.types)),sanitizedData},hash(typedData,useV4=!0){const sanitizedData=this.sanitizeData(typedData),parts=[Buffer.from("1901","hex")];return parts.push(this.hashStruct("EIP712Domain",sanitizedData.domain,sanitizedData.types,useV4)),"EIP712Domain"!==sanitizedData.primaryType&&parts.push(this.hashStruct(sanitizedData.primaryType,sanitizedData.message,sanitizedData.types,useV4)),util.keccak(Buffer.concat(parts))}};module.exports={TYPED_MESSAGE_SCHEMA,TypedDataUtils,hashForSignTypedDataLegacy:function(msgParams){return function typedSignatureHashLegacy(typedData){const error=new Error("Expect argument to be non-empty array");if("object"!=typeof typedData||!typedData.length)throw error;const data=typedData.map(function(e){return"bytes"===e.type?util.toBuffer(e.value):e.value}),types=typedData.map(function(e){return e.type}),schema=typedData.map(function(e){if(!e.name)throw error;return e.type+" "+e.name});return abi.soliditySHA3(["bytes32","bytes32"],[abi.soliditySHA3(new Array(typedData.length).fill("string"),schema),abi.soliditySHA3(types,data)])}(msgParams.data)},hashForSignTypedData_v3:function(msgParams){return TypedDataUtils.hash(msgParams.data,!1)},hashForSignTypedData_v4:function(msgParams){return TypedDataUtils.hash(msgParams.data)}}},"./node_modules/@coinbase/wallet-sdk/dist/vendor-js/eth-eip712-util/util.cjs":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer;const{keccak_256}=__webpack_require__("./node_modules/@noble/hashes/sha3.js");function zeros(bytes){return Buffer.allocUnsafe(bytes).fill(0)}function bufferBEFromBigInt(num,length){let hex=num.toString(16);hex.length%2!=0&&(hex="0"+hex);const byteArray=hex.match(/.{1,2}/g).map(byte=>parseInt(byte,16));for(;byteArray.length<length;)byteArray.unshift(0);return Buffer.from(byteArray)}function setLength(msg,length,right){const buf=zeros(length);return msg=toBuffer(msg),right?msg.length<length?(msg.copy(buf),buf):msg.slice(0,length):msg.length<length?(msg.copy(buf,length-msg.length),buf):msg.slice(-length)}function toBuffer(v){if(!Buffer.isBuffer(v))if(Array.isArray(v))v=Buffer.from(v);else if("string"==typeof v)v=isHexString(v)?Buffer.from(function padToEven(str){return str.length%2?"0"+str:str}(stripHexPrefix(v)),"hex"):Buffer.from(v);else if("number"==typeof v)v=intToBuffer(v);else if(null==v)v=Buffer.allocUnsafe(0);else if("bigint"==typeof v)v=bufferBEFromBigInt(v);else{if(!v.toArray)throw new Error("invalid type");v=Buffer.from(v.toArray())}return v}function isHexString(str){return"string"==typeof str&&str.match(/^0x[0-9A-Fa-f]*$/)}function stripHexPrefix(str){return"string"==typeof str&&str.startsWith("0x")?str.slice(2):str}module.exports={zeros,setLength,setLengthRight:function setLengthRight(msg,length){return setLength(msg,length,!0)},isHexString,stripHexPrefix,toBuffer,bufferToHex:function bufferToHex(buf){return"0x"+(buf=toBuffer(buf)).toString("hex")},keccak:function keccak(a,bits){if(a=toBuffer(a),bits||(bits=256),256!==bits)throw new Error("unsupported");return Buffer.from(keccak_256(new Uint8Array(a)))},bitLengthFromBigInt:function bitLengthFromBigInt(num){return num.toString(2).length},bufferBEFromBigInt,twosFromBigInt:function twosFromBigInt(value,width){let result;if(value<0n){result=1n+(~value&(1n<<BigInt(width))-1n)}else result=value;return result&=(1n<<BigInt(width))-1n,result}}},"./node_modules/@noble/hashes/_u64.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toBig=exports.shrSL=exports.shrSH=exports.rotrSL=exports.rotrSH=exports.rotrBL=exports.rotrBH=exports.rotr32L=exports.rotr32H=exports.rotlSL=exports.rotlSH=exports.rotlBL=exports.rotlBH=exports.add5L=exports.add5H=exports.add4L=exports.add4H=exports.add3L=exports.add3H=void 0,exports.add=add,exports.fromBig=fromBig,exports.split=split;const U32_MASK64=BigInt(2**32-1),_32n=BigInt(32);function fromBig(n,le=!1){return le?{h:Number(n&U32_MASK64),l:Number(n>>_32n&U32_MASK64)}:{h:0|Number(n>>_32n&U32_MASK64),l:0|Number(n&U32_MASK64)}}function split(lst,le=!1){const len=lst.length;let Ah=new Uint32Array(len),Al=new Uint32Array(len);for(let i=0;i<len;i++){const{h,l}=fromBig(lst[i],le);[Ah[i],Al[i]]=[h,l]}return[Ah,Al]}const toBig=(h,l)=>BigInt(h>>>0)<<_32n|BigInt(l>>>0);exports.toBig=toBig;const shrSH=(h,_l,s)=>h>>>s;exports.shrSH=shrSH;const shrSL=(h,l,s)=>h<<32-s|l>>>s;exports.shrSL=shrSL;const rotrSH=(h,l,s)=>h>>>s|l<<32-s;exports.rotrSH=rotrSH;const rotrSL=(h,l,s)=>h<<32-s|l>>>s;exports.rotrSL=rotrSL;const rotrBH=(h,l,s)=>h<<64-s|l>>>s-32;exports.rotrBH=rotrBH;const rotrBL=(h,l,s)=>h>>>s-32|l<<64-s;exports.rotrBL=rotrBL;const rotr32H=(_h,l)=>l;exports.rotr32H=rotr32H;const rotr32L=(h,_l)=>h;exports.rotr32L=rotr32L;const rotlSH=(h,l,s)=>h<<s|l>>>32-s;exports.rotlSH=rotlSH;const rotlSL=(h,l,s)=>l<<s|h>>>32-s;exports.rotlSL=rotlSL;const rotlBH=(h,l,s)=>l<<s-32|h>>>64-s;exports.rotlBH=rotlBH;const rotlBL=(h,l,s)=>h<<s-32|l>>>64-s;function add(Ah,Al,Bh,Bl){const l=(Al>>>0)+(Bl>>>0);return{h:Ah+Bh+(l/2**32|0)|0,l:0|l}}exports.rotlBL=rotlBL;const add3L=(Al,Bl,Cl)=>(Al>>>0)+(Bl>>>0)+(Cl>>>0);exports.add3L=add3L;const add3H=(low,Ah,Bh,Ch)=>Ah+Bh+Ch+(low/2**32|0)|0;exports.add3H=add3H;const add4L=(Al,Bl,Cl,Dl)=>(Al>>>0)+(Bl>>>0)+(Cl>>>0)+(Dl>>>0);exports.add4L=add4L;const add4H=(low,Ah,Bh,Ch,Dh)=>Ah+Bh+Ch+Dh+(low/2**32|0)|0;exports.add4H=add4H;const add5L=(Al,Bl,Cl,Dl,El)=>(Al>>>0)+(Bl>>>0)+(Cl>>>0)+(Dl>>>0)+(El>>>0);exports.add5L=add5L;const add5H=(low,Ah,Bh,Ch,Dh,Eh)=>Ah+Bh+Ch+Dh+Eh+(low/2**32|0)|0;exports.add5H=add5H;const u64={fromBig,split,toBig,shrSH,shrSL,rotrSH,rotrSL,rotrBH,rotrBL,rotr32H,rotr32L,rotlSH,rotlSL,rotlBH,rotlBL,add,add3L,add3H,add4L,add4H,add5H,add5L};exports.default=u64},"./node_modules/@noble/hashes/crypto.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.crypto=void 0,exports.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},"./node_modules/@noble/hashes/sha3.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shake256=exports.shake128=exports.keccak_512=exports.keccak_384=exports.keccak_256=exports.keccak_224=exports.sha3_512=exports.sha3_384=exports.sha3_256=exports.sha3_224=exports.Keccak=void 0,exports.keccakP=keccakP;const _u64_ts_1=__webpack_require__("./node_modules/@noble/hashes/_u64.js"),utils_ts_1=__webpack_require__("./node_modules/@noble/hashes/utils.js"),_0n=BigInt(0),_1n=BigInt(1),_2n=BigInt(2),_7n=BigInt(7),_256n=BigInt(256),_0x71n=BigInt(113),SHA3_PI=[],SHA3_ROTL=[],_SHA3_IOTA=[];for(let round=0,R=_1n,x=1,y=0;round<24;round++){[x,y]=[y,(2*x+3*y)%5],SHA3_PI.push(2*(5*y+x)),SHA3_ROTL.push((round+1)*(round+2)/2%64);let t=_0n;for(let j=0;j<7;j++)R=(R<<_1n^(R>>_7n)*_0x71n)%_256n,R&_2n&&(t^=_1n<<(_1n<<BigInt(j))-_1n);_SHA3_IOTA.push(t)}const IOTAS=(0,_u64_ts_1.split)(_SHA3_IOTA,!0),SHA3_IOTA_H=IOTAS[0],SHA3_IOTA_L=IOTAS[1],rotlH=(h,l,s)=>s>32?(0,_u64_ts_1.rotlBH)(h,l,s):(0,_u64_ts_1.rotlSH)(h,l,s),rotlL=(h,l,s)=>s>32?(0,_u64_ts_1.rotlBL)(h,l,s):(0,_u64_ts_1.rotlSL)(h,l,s);function keccakP(s,rounds=24){const B=new Uint32Array(10);for(let round=24-rounds;round<24;round++){for(let x=0;x<10;x++)B[x]=s[x]^s[x+10]^s[x+20]^s[x+30]^s[x+40];for(let x=0;x<10;x+=2){const idx1=(x+8)%10,idx0=(x+2)%10,B0=B[idx0],B1=B[idx0+1],Th=rotlH(B0,B1,1)^B[idx1],Tl=rotlL(B0,B1,1)^B[idx1+1];for(let y=0;y<50;y+=10)s[x+y]^=Th,s[x+y+1]^=Tl}let curH=s[2],curL=s[3];for(let t=0;t<24;t++){const shift=SHA3_ROTL[t],Th=rotlH(curH,curL,shift),Tl=rotlL(curH,curL,shift),PI=SHA3_PI[t];curH=s[PI],curL=s[PI+1],s[PI]=Th,s[PI+1]=Tl}for(let y=0;y<50;y+=10){for(let x=0;x<10;x++)B[x]=s[y+x];for(let x=0;x<10;x++)s[y+x]^=~B[(x+2)%10]&B[(x+4)%10]}s[0]^=SHA3_IOTA_H[round],s[1]^=SHA3_IOTA_L[round]}(0,utils_ts_1.clean)(B)}class Keccak extends utils_ts_1.Hash{constructor(blockLen,suffix,outputLen,enableXOF=!1,rounds=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=blockLen,this.suffix=suffix,this.outputLen=outputLen,this.enableXOF=enableXOF,this.rounds=rounds,(0,utils_ts_1.anumber)(outputLen),!(0<blockLen&&blockLen<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,utils_ts_1.u32)(this.state)}clone(){return this._cloneInto()}keccak(){(0,utils_ts_1.swap32IfBE)(this.state32),keccakP(this.state32,this.rounds),(0,utils_ts_1.swap32IfBE)(this.state32),this.posOut=0,this.pos=0}update(data){(0,utils_ts_1.aexists)(this),data=(0,utils_ts_1.toBytes)(data),(0,utils_ts_1.abytes)(data);const{blockLen,state}=this,len=data.length;for(let pos=0;pos<len;){const take=Math.min(blockLen-this.pos,len-pos);for(let i=0;i<take;i++)state[this.pos++]^=data[pos++];this.pos===blockLen&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state,suffix,pos,blockLen}=this;state[pos]^=suffix,128&suffix&&pos===blockLen-1&&this.keccak(),state[blockLen-1]^=128,this.keccak()}writeInto(out){(0,utils_ts_1.aexists)(this,!1),(0,utils_ts_1.abytes)(out),this.finish();const bufferOut=this.state,{blockLen}=this;for(let pos=0,len=out.length;pos<len;){this.posOut>=blockLen&&this.keccak();const take=Math.min(blockLen-this.posOut,len-pos);out.set(bufferOut.subarray(this.posOut,this.posOut+take),pos),this.posOut+=take,pos+=take}return out}xofInto(out){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(out)}xof(bytes){return(0,utils_ts_1.anumber)(bytes),this.xofInto(new Uint8Array(bytes))}digestInto(out){if((0,utils_ts_1.aoutput)(out,this),this.finished)throw new Error("digest() was already called");return this.writeInto(out),this.destroy(),out}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,utils_ts_1.clean)(this.state)}_cloneInto(to){const{blockLen,suffix,outputLen,rounds,enableXOF}=this;return to||(to=new Keccak(blockLen,suffix,outputLen,enableXOF,rounds)),to.state32.set(this.state32),to.pos=this.pos,to.posOut=this.posOut,to.finished=this.finished,to.rounds=rounds,to.suffix=suffix,to.outputLen=outputLen,to.enableXOF=enableXOF,to.destroyed=this.destroyed,to}}exports.Keccak=Keccak;const gen=(suffix,blockLen,outputLen)=>(0,utils_ts_1.createHasher)(()=>new Keccak(blockLen,suffix,outputLen));exports.sha3_224=gen(6,144,28),exports.sha3_256=gen(6,136,32),exports.sha3_384=gen(6,104,48),exports.sha3_512=gen(6,72,64),exports.keccak_224=gen(1,144,28),exports.keccak_256=gen(1,136,32),exports.keccak_384=gen(1,104,48),exports.keccak_512=gen(1,72,64);const genShake=(suffix,blockLen,outputLen)=>(0,utils_ts_1.createXOFer)((opts={})=>new Keccak(blockLen,suffix,void 0===opts.dkLen?outputLen:opts.dkLen,!0));exports.shake128=genShake(31,168,16),exports.shake256=genShake(31,136,32)},"./node_modules/@noble/hashes/utils.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapXOFConstructorWithOpts=exports.wrapConstructorWithOpts=exports.wrapConstructor=exports.Hash=exports.nextTick=exports.swap32IfBE=exports.byteSwapIfBE=exports.swap8IfBE=exports.isLE=void 0,exports.isBytes=isBytes,exports.anumber=anumber,exports.abytes=abytes,exports.ahash=function ahash(h){if("function"!=typeof h||"function"!=typeof h.create)throw new Error("Hash should be wrapped by utils.createHasher");anumber(h.outputLen),anumber(h.blockLen)},exports.aexists=function aexists(instance,checkFinished=!0){if(instance.destroyed)throw new Error("Hash instance has been destroyed");if(checkFinished&&instance.finished)throw new Error("Hash#digest() has already been called")},exports.aoutput=function aoutput(out,instance){abytes(out);const min=instance.outputLen;if(out.length<min)throw new Error("digestInto() expects output buffer of length at least "+min)},exports.u8=function u8(arr){return new Uint8Array(arr.buffer,arr.byteOffset,arr.byteLength)},exports.u32=function u32(arr){return new Uint32Array(arr.buffer,arr.byteOffset,Math.floor(arr.byteLength/4))},exports.clean=function clean(...arrays){for(let i=0;i<arrays.length;i++)arrays[i].fill(0)},exports.createView=function createView(arr){return new DataView(arr.buffer,arr.byteOffset,arr.byteLength)},exports.rotr=function rotr(word,shift){return word<<32-shift|word>>>shift},exports.rotl=function rotl(word,shift){return word<<shift|word>>>32-shift>>>0},exports.byteSwap=byteSwap,exports.byteSwap32=byteSwap32,exports.bytesToHex=function bytesToHex(bytes){if(abytes(bytes),hasHexBuiltin)return bytes.toHex();let hex="";for(let i=0;i<bytes.length;i++)hex+=hexes[bytes[i]];return hex},exports.hexToBytes=function hexToBytes(hex){if("string"!=typeof hex)throw new Error("hex string expected, got "+typeof hex);if(hasHexBuiltin)return Uint8Array.fromHex(hex);const hl=hex.length,al=hl/2;if(hl%2)throw new Error("hex string expected, got unpadded hex of length "+hl);const array=new Uint8Array(al);for(let ai=0,hi=0;ai<al;ai++,hi+=2){const n1=asciiToBase16(hex.charCodeAt(hi)),n2=asciiToBase16(hex.charCodeAt(hi+1));if(void 0===n1||void 0===n2){const char=hex[hi]+hex[hi+1];throw new Error('hex string expected, got non-hex character "'+char+'" at index '+hi)}array[ai]=16*n1+n2}return array},exports.asyncLoop=async function asyncLoop(iters,tick,cb){let ts=Date.now();for(let i=0;i<iters;i++){cb(i);const diff=Date.now()-ts;diff>=0&&diff<tick||(await(0,exports.nextTick)(),ts+=diff)}},exports.utf8ToBytes=utf8ToBytes,exports.bytesToUtf8=function bytesToUtf8(bytes){return(new TextDecoder).decode(bytes)},exports.toBytes=toBytes,exports.kdfInputToBytes=function kdfInputToBytes(data){"string"==typeof data&&(data=utf8ToBytes(data));return abytes(data),data},exports.concatBytes=function concatBytes(...arrays){let sum=0;for(let i=0;i<arrays.length;i++){const a=arrays[i];abytes(a),sum+=a.length}const res=new Uint8Array(sum);for(let i=0,pad=0;i<arrays.length;i++){const a=arrays[i];res.set(a,pad),pad+=a.length}return res},exports.checkOpts=function checkOpts(defaults,opts){if(void 0!==opts&&"[object Object]"!=={}.toString.call(opts))throw new Error("options should be object or undefined");return Object.assign(defaults,opts)},exports.createHasher=createHasher,exports.createOptHasher=createOptHasher,exports.createXOFer=createXOFer,exports.randomBytes=function randomBytes(bytesLength=32){if(crypto_1.crypto&&"function"==typeof crypto_1.crypto.getRandomValues)return crypto_1.crypto.getRandomValues(new Uint8Array(bytesLength));if(crypto_1.crypto&&"function"==typeof crypto_1.crypto.randomBytes)return Uint8Array.from(crypto_1.crypto.randomBytes(bytesLength));throw new Error("crypto.getRandomValues must be defined")};const crypto_1=__webpack_require__("./node_modules/@noble/hashes/crypto.js");function isBytes(a){return a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name}function anumber(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function abytes(b,...lengths){if(!isBytes(b))throw new Error("Uint8Array expected");if(lengths.length>0&&!lengths.includes(b.length))throw new Error("Uint8Array expected of length "+lengths+", got length="+b.length)}function byteSwap(word){return word<<24&4278190080|word<<8&16711680|word>>>8&65280|word>>>24&255}function byteSwap32(arr){for(let i=0;i<arr.length;i++)arr[i]=byteSwap(arr[i]);return arr}exports.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],exports.swap8IfBE=exports.isLE?n=>n:n=>byteSwap(n),exports.byteSwapIfBE=exports.swap8IfBE,exports.swap32IfBE=exports.isLE?u=>u:byteSwap32;const hasHexBuiltin=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),hexes=Array.from({length:256},(_,i)=>i.toString(16).padStart(2,"0"));const asciis={_0:48,_9:57,A:65,F:70,a:97,f:102};function asciiToBase16(ch){return ch>=asciis._0&&ch<=asciis._9?ch-asciis._0:ch>=asciis.A&&ch<=asciis.F?ch-(asciis.A-10):ch>=asciis.a&&ch<=asciis.f?ch-(asciis.a-10):void 0}function utf8ToBytes(str){if("string"!=typeof str)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(str))}function toBytes(data){return"string"==typeof data&&(data=utf8ToBytes(data)),abytes(data),data}exports.nextTick=async()=>{};function createHasher(hashCons){const hashC=msg=>hashCons().update(toBytes(msg)).digest(),tmp=hashCons();return hashC.outputLen=tmp.outputLen,hashC.blockLen=tmp.blockLen,hashC.create=()=>hashCons(),hashC}function createOptHasher(hashCons){const hashC=(msg,opts)=>hashCons(opts).update(toBytes(msg)).digest(),tmp=hashCons({});return hashC.outputLen=tmp.outputLen,hashC.blockLen=tmp.blockLen,hashC.create=opts=>hashCons(opts),hashC}function createXOFer(hashCons){const hashC=(msg,opts)=>hashCons(opts).update(toBytes(msg)).digest(),tmp=hashCons({});return hashC.outputLen=tmp.outputLen,hashC.blockLen=tmp.blockLen,hashC.create=opts=>hashCons(opts),hashC}exports.Hash=class Hash{},exports.wrapConstructor=createHasher,exports.wrapConstructorWithOpts=createOptHasher,exports.wrapXOFConstructorWithOpts=createXOFer},"./node_modules/preact/dist/preact.module.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Component:()=>x,Fragment:()=>k,cloneElement:()=>K,createContext:()=>Q,createElement:()=>_,createRef:()=>b,h:()=>_,hydrate:()=>J,isValidElement:()=>t,options:()=>l,render:()=>G,toChildArray:()=>H});var n,l,u,t,i,r,o,e,f,c,s,a,h,p={},v=[],y=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,w=Array.isArray;function d(n,l){for(var u in l)n[u]=l[u];return n}function g(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function _(l,u,t){var i,r,o,e={};for(o in u)"key"==o?i=u[o]:"ref"==o?r=u[o]:e[o]=u[o];if(arguments.length>2&&(e.children=arguments.length>3?n.call(arguments,2):t),"function"==typeof l&&null!=l.defaultProps)for(o in l.defaultProps)void 0===e[o]&&(e[o]=l.defaultProps[o]);return m(l,e,i,r,null)}function m(n,t,i,r,o){var e={type:n,props:t,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==o?++u:o,__i:-1,__u:0};return null==o&&null!=l.vnode&&l.vnode(e),e}function b(){return{current:null}}function k(n){return n.children}function x(n,l){this.props=n,this.context=l}function S(n,l){if(null==l)return n.__?S(n.__,n.__i+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return"function"==typeof n.type?S(n):null}function C(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return C(n)}}function M(n){(!n.__d&&(n.__d=!0)&&i.push(n)&&!$.__r++||r!=l.debounceRendering)&&((r=l.debounceRendering)||o)($)}function $(){for(var n,u,t,r,o,f,c,s=1;i.length;)i.length>s&&i.sort(e),n=i.shift(),s=i.length,n.__d&&(t=void 0,r=void 0,o=(r=(u=n).__v).__e,f=[],c=[],u.__P&&((t=d({},r)).__v=r.__v+1,l.vnode&&l.vnode(t),O(u.__P,t,r,u.__n,u.__P.namespaceURI,32&r.__u?[o]:null,f,null==o?S(r):o,!!(32&r.__u),c),t.__v=r.__v,t.__.__k[t.__i]=t,N(f,t,c),r.__e=r.__=null,t.__e!=o&&C(t)));$.__r=0}function I(n,l,u,t,i,r,o,e,f,c,s){var a,h,y,w,d,g,_,m=t&&t.__k||v,b=l.length;for(f=P(u,l,m,f,b),a=0;a<b;a++)null!=(y=u.__k[a])&&(h=-1==y.__i?p:m[y.__i]||p,y.__i=a,g=O(n,y,h,i,r,o,e,f,c,s),w=y.__e,y.ref&&h.ref!=y.ref&&(h.ref&&B(h.ref,null,y),s.push(y.ref,y.__c||w,y)),null==d&&null!=w&&(d=w),(_=!!(4&y.__u))||h.__k===y.__k?f=A(y,f,n,_):"function"==typeof y.type&&void 0!==g?f=g:w&&(f=w.nextSibling),y.__u&=-7);return u.__e=d,f}function P(n,l,u,t,i){var r,o,e,f,c,s=u.length,a=s,h=0;for(n.__k=new Array(i),r=0;r<i;r++)null!=(o=l[r])&&"boolean"!=typeof o&&"function"!=typeof o?("string"==typeof o||"number"==typeof o||"bigint"==typeof o||o.constructor==String?o=n.__k[r]=m(null,o,null,null,null):w(o)?o=n.__k[r]=m(k,{children:o},null,null,null):null==o.constructor&&o.__b>0?o=n.__k[r]=m(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):n.__k[r]=o,f=r+h,o.__=n,o.__b=n.__b+1,-1!=(c=o.__i=L(o,u,f,a))&&(a--,(e=u[c])&&(e.__u|=2)),null==e||null==e.__v?(-1==c&&(i>s?h--:i<s&&h++),"function"!=typeof o.type&&(o.__u|=4)):c!=f&&(c==f-1?h--:c==f+1?h++:(c>f?h--:h++,o.__u|=4))):n.__k[r]=null;if(a)for(r=0;r<s;r++)null!=(e=u[r])&&!(2&e.__u)&&(e.__e==t&&(t=S(e)),D(e,e));return t}function A(n,l,u,t){var i,r;if("function"==typeof n.type){for(i=n.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=n,l=A(i[r],l,u,t));return l}n.__e!=l&&(t&&(l&&n.type&&!l.parentNode&&(l=S(n)),u.insertBefore(n.__e,l||null)),l=n.__e);do{l=l&&l.nextSibling}while(null!=l&&8==l.nodeType);return l}function H(n,l){return l=l||[],null==n||"boolean"==typeof n||(w(n)?n.some(function(n){H(n,l)}):l.push(n)),l}function L(n,l,u,t){var i,r,o,e=n.key,f=n.type,c=l[u],s=null!=c&&!(2&c.__u);if(null===c&&null==e||s&&e==c.key&&f==c.type)return u;if(t>(s?1:0))for(i=u-1,r=u+1;i>=0||r<l.length;)if(null!=(c=l[o=i>=0?i--:r++])&&!(2&c.__u)&&e==c.key&&f==c.type)return o;return-1}function T(n,l,u){"-"==l[0]?n.setProperty(l,null==u?"":u):n[l]=null==u?"":"number"!=typeof u||y.test(l)?u:u+"px"}function j(n,l,u,t,i){var r,o;n:if("style"==l)if("string"==typeof u)n.style.cssText=u;else{if("string"==typeof t&&(n.style.cssText=t=""),t)for(l in t)u&&l in u||T(n.style,l,"");if(u)for(l in u)t&&u[l]==t[l]||T(n.style,l,u[l])}else if("o"==l[0]&&"n"==l[1])r=l!=(l=l.replace(f,"$1")),o=l.toLowerCase(),l=o in n||"onFocusOut"==l||"onFocusIn"==l?o.slice(2):l.slice(2),n.l||(n.l={}),n.l[l+r]=u,u?t?u.u=t.u:(u.u=c,n.addEventListener(l,r?a:s,r)):n.removeEventListener(l,r?a:s,r);else{if("http://www.w3.org/2000/svg"==i)l=l.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=l&&"height"!=l&&"href"!=l&&"list"!=l&&"form"!=l&&"tabIndex"!=l&&"download"!=l&&"rowSpan"!=l&&"colSpan"!=l&&"role"!=l&&"popover"!=l&&l in n)try{n[l]=null==u?"":u;break n}catch(n){}"function"==typeof u||(null==u||!1===u&&"-"!=l[4]?n.removeAttribute(l):n.setAttribute(l,"popover"==l&&1==u?"":u))}}function F(n){return function(u){if(this.l){var t=this.l[u.type+n];if(null==u.t)u.t=c++;else if(u.t<t.u)return;return t(l.event?l.event(u):u)}}}function O(n,u,t,i,r,o,e,f,c,s){var a,h,p,v,y,_,m,b,S,C,M,$,P,A,H,L,T,j=u.type;if(null!=u.constructor)return null;128&t.__u&&(c=!!(32&t.__u),o=[f=u.__e=t.__e]),(a=l.__b)&&a(u);n:if("function"==typeof j)try{if(b=u.props,S="prototype"in j&&j.prototype.render,C=(a=j.contextType)&&i[a.__c],M=a?C?C.props.value:a.__:i,t.__c?m=(h=u.__c=t.__c).__=h.__E:(S?u.__c=h=new j(b,M):(u.__c=h=new x(b,M),h.constructor=j,h.render=E),C&&C.sub(h),h.state||(h.state={}),h.__n=i,p=h.__d=!0,h.__h=[],h._sb=[]),S&&null==h.__s&&(h.__s=h.state),S&&null!=j.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=d({},h.__s)),d(h.__s,j.getDerivedStateFromProps(b,h.__s))),v=h.props,y=h.state,h.__v=u,p)S&&null==j.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),S&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(S&&null==j.getDerivedStateFromProps&&b!==v&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(b,M),u.__v==t.__v||!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(b,h.__s,M)){for(u.__v!=t.__v&&(h.props=b,h.state=h.__s,h.__d=!1),u.__e=t.__e,u.__k=t.__k,u.__k.some(function(n){n&&(n.__=u)}),$=0;$<h._sb.length;$++)h.__h.push(h._sb[$]);h._sb=[],h.__h.length&&e.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(b,h.__s,M),S&&null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(v,y,_)})}if(h.context=M,h.props=b,h.__P=n,h.__e=!1,P=l.__r,A=0,S){for(h.state=h.__s,h.__d=!1,P&&P(u),a=h.render(h.props,h.state,h.context),H=0;H<h._sb.length;H++)h.__h.push(h._sb[H]);h._sb=[]}else do{h.__d=!1,P&&P(u),a=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++A<25);h.state=h.__s,null!=h.getChildContext&&(i=d(d({},i),h.getChildContext())),S&&!p&&null!=h.getSnapshotBeforeUpdate&&(_=h.getSnapshotBeforeUpdate(v,y)),L=a,null!=a&&a.type===k&&null==a.key&&(L=V(a.props.children)),f=I(n,w(L)?L:[L],u,t,i,r,o,e,f,c,s),h.base=u.__e,u.__u&=-161,h.__h.length&&e.push(h),m&&(h.__E=h.__=null)}catch(n){if(u.__v=null,c||null!=o)if(n.then){for(u.__u|=c?160:128;f&&8==f.nodeType&&f.nextSibling;)f=f.nextSibling;o[o.indexOf(f)]=null,u.__e=f}else{for(T=o.length;T--;)g(o[T]);z(u)}else u.__e=t.__e,u.__k=t.__k,n.then||z(u);l.__e(n,u,t)}else null==o&&u.__v==t.__v?(u.__k=t.__k,u.__e=t.__e):f=u.__e=q(t.__e,u,t,i,r,o,e,c,s);return(a=l.diffed)&&a(u),128&u.__u?void 0:f}function z(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(z)}function N(n,u,t){for(var i=0;i<t.length;i++)B(t[i],t[++i],t[++i]);l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function V(n){return"object"!=typeof n||null==n||n.__b&&n.__b>0?n:w(n)?n.map(V):d({},n)}function q(u,t,i,r,o,e,f,c,s){var a,h,v,y,d,_,m,b=i.props||p,k=t.props,x=t.type;if("svg"==x?o="http://www.w3.org/2000/svg":"math"==x?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),null!=e)for(a=0;a<e.length;a++)if((d=e[a])&&"setAttribute"in d==!!x&&(x?d.localName==x:3==d.nodeType)){u=d,e[a]=null;break}if(null==u){if(null==x)return document.createTextNode(k);u=document.createElementNS(o,x,k.is&&k),c&&(l.__m&&l.__m(t,e),c=!1),e=null}if(null==x)b===k||c&&u.data==k||(u.data=k);else{if(e=e&&n.call(u.childNodes),!c&&null!=e)for(b={},a=0;a<u.attributes.length;a++)b[(d=u.attributes[a]).name]=d.value;for(a in b)if(d=b[a],"children"==a);else if("dangerouslySetInnerHTML"==a)v=d;else if(!(a in k)){if("value"==a&&"defaultValue"in k||"checked"==a&&"defaultChecked"in k)continue;j(u,a,null,d,o)}for(a in k)d=k[a],"children"==a?y=d:"dangerouslySetInnerHTML"==a?h=d:"value"==a?_=d:"checked"==a?m=d:c&&"function"!=typeof d||b[a]===d||j(u,a,d,b[a],o);if(h)c||v&&(h.__html==v.__html||h.__html==u.innerHTML)||(u.innerHTML=h.__html),t.__k=[];else if(v&&(u.innerHTML=""),I("template"==t.type?u.content:u,w(y)?y:[y],t,i,r,"foreignObject"==x?"http://www.w3.org/1999/xhtml":o,e,f,e?e[0]:i.__k&&S(i,0),c,s),null!=e)for(a=e.length;a--;)g(e[a]);c||(a="value","progress"==x&&null==_?u.removeAttribute("value"):null!=_&&(_!==u[a]||"progress"==x&&!_||"option"==x&&_!=b[a])&&j(u,a,_,b[a],o),a="checked",null!=m&&m!=u[a]&&j(u,a,m,b[a],o))}return u}function B(n,u,t){try{if("function"==typeof n){var i="function"==typeof n.__u;i&&n.__u(),i&&null==u||(n.__u=n(u))}else n.current=u}catch(n){l.__e(n,t)}}function D(n,u,t){var i,r;if(l.unmount&&l.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||B(i,null,u)),null!=(i=n.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(n){l.__e(n,u)}i.base=i.__P=null}if(i=n.__k)for(r=0;r<i.length;r++)i[r]&&D(i[r],u,t||"function"!=typeof n.type);t||g(n.__e),n.__c=n.__=n.__e=void 0}function E(n,l,u){return this.constructor(n,u)}function G(u,t,i){var r,o,e,f;t==document&&(t=document.documentElement),l.__&&l.__(u,t),o=(r="function"==typeof i)?null:i&&i.__k||t.__k,e=[],f=[],O(t,u=(!r&&i||t).__k=_(k,null,[u]),o||p,p,t.namespaceURI,!r&&i?[i]:o?null:t.firstChild?n.call(t.childNodes):null,e,!r&&i?i:o?o.__e:t.firstChild,r,f),N(e,u,f)}function J(n,l){G(n,l,J)}function K(l,u,t){var i,r,o,e,f=d({},l.props);for(o in l.type&&l.type.defaultProps&&(e=l.type.defaultProps),u)"key"==o?i=u[o]:"ref"==o?r=u[o]:f[o]=void 0===u[o]&&null!=e?e[o]:u[o];return arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):t),m(l.type,f,i||l.key,r||l.ref,null)}function Q(n){function l(n){var u,t;return this.getChildContext||(u=new Set,(t={})[l.__c]=this,this.getChildContext=function(){return t},this.componentWillUnmount=function(){u=null},this.shouldComponentUpdate=function(n){this.props.value!=n.value&&u.forEach(function(n){n.__e=!0,M(n)})},this.sub=function(n){u.add(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u&&u.delete(n),l&&l.call(n)}}),n.children}return l.__c="__cC"+h++,l.__=n,l.Provider=l.__l=(l.Consumer=function(n,l){return n.children(l)}).contextType=l,l}n=v.slice,l={__e:function(n,l,u,t){for(var i,r,o;l=l.__;)if((i=l.__c)&&!i.__)try{if((r=i.constructor)&&null!=r.getDerivedStateFromError&&(i.setState(r.getDerivedStateFromError(n)),o=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(n,t||{}),o=i.__d),o)return i.__E=i}catch(l){n=l}throw n}},u=0,t=function(n){return null!=n&&null==n.constructor},x.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=d({},this.state),"function"==typeof n&&(n=n(d({},u),this.props)),n&&d(u,n),null!=n&&this.__v&&(l&&this._sb.push(l),M(this))},x.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),M(this))},x.prototype.render=k,i=[],o="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,e=function(n,l){return n.__v.__b-l.__v.__b},$.__r=0,f=/(PointerCapture)$|Capture$/i,c=0,s=F(!1),a=F(!0),h=0},"./node_modules/preact/hooks/dist/hooks.module.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{useCallback:()=>q,useContext:()=>x,useDebugValue:()=>P,useEffect:()=>y,useErrorBoundary:()=>b,useId:()=>g,useImperativeHandle:()=>F,useLayoutEffect:()=>_,useMemo:()=>T,useReducer:()=>h,useRef:()=>A,useState:()=>d});var t,r,u,i,preact__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/preact/dist/preact.module.js"),o=0,f=[],c=preact__WEBPACK_IMPORTED_MODULE_0__.options,e=c.__b,a=c.__r,v=c.diffed,l=c.__c,m=c.unmount,s=c.__;function p(n,t){c.__h&&c.__h(r,n,o||t),o=0;var u=r.__H||(r.__H={__:[],__h:[]});return n>=u.__.length&&u.__.push({}),u.__[n]}function d(n){return o=1,h(D,n)}function h(n,u,i){var o=p(t++,2);if(o.t=n,!o.__c&&(o.__=[i?i(u):D(void 0,u),function(n){var t=o.__N?o.__N[0]:o.__[0],r=o.t(t,n);t!==r&&(o.__N=[r,o.__[1]],o.__c.setState({}))}],o.__c=r,!r.__f)){var f=function(n,t,r){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(n){return!!n.__c});if(u.every(function(n){return!n.__N}))return!c||c.call(this,n,t,r);var i=o.__c.props!==n;return u.forEach(function(n){if(n.__N){var t=n.__[0];n.__=n.__N,n.__N=void 0,t!==n.__[0]&&(i=!0)}}),c&&c.call(this,n,t,r)||i};r.__f=!0;var c=r.shouldComponentUpdate,e=r.componentWillUpdate;r.componentWillUpdate=function(n,t,r){if(this.__e){var u=c;c=void 0,f(n,t,r),c=u}e&&e.call(this,n,t,r)},r.shouldComponentUpdate=f}return o.__N||o.__}function y(n,u){var i=p(t++,3);!c.__s&&C(i.__H,u)&&(i.__=n,i.u=u,r.__H.__h.push(i))}function _(n,u){var i=p(t++,4);!c.__s&&C(i.__H,u)&&(i.__=n,i.u=u,r.__h.push(i))}function A(n){return o=5,T(function(){return{current:n}},[])}function F(n,t,r){o=6,_(function(){if("function"==typeof n){var r=n(t());return function(){n(null),r&&"function"==typeof r&&r()}}if(n)return n.current=t(),function(){return n.current=null}},null==r?r:r.concat(n))}function T(n,r){var u=p(t++,7);return C(u.__H,r)&&(u.__=n(),u.__H=r,u.__h=n),u.__}function q(n,t){return o=8,T(function(){return n},t)}function x(n){var u=r.context[n.__c],i=p(t++,9);return i.c=n,u?(null==i.__&&(i.__=!0,u.sub(r)),u.props.value):n.__}function P(n,t){c.useDebugValue&&c.useDebugValue(t?t(n):n)}function b(n){var u=p(t++,10),i=d();return u.__=n,r.componentDidCatch||(r.componentDidCatch=function(n,t){u.__&&u.__(n,t),i[1](n)}),[i[0],function(){i[1](void 0)}]}function g(){var n=p(t++,11);if(!n.__){for(var u=r.__v;null!==u&&!u.__m&&null!==u.__;)u=u.__;var i=u.__m||(u.__m=[0,0]);n.__="P"+i[0]+"-"+i[1]++}return n.__}function j(){for(var n;n=f.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(z),n.__H.__h.forEach(B),n.__H.__h=[]}catch(t){n.__H.__h=[],c.__e(t,n.__v)}}c.__b=function(n){r=null,e&&e(n)},c.__=function(n,t){n&&t.__k&&t.__k.__m&&(n.__m=t.__k.__m),s&&s(n,t)},c.__r=function(n){a&&a(n),t=0;var i=(r=n.__c).__H;i&&(u===r?(i.__h=[],r.__h=[],i.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(i.__h.forEach(z),i.__h.forEach(B),i.__h=[],t=0)),u=r},c.diffed=function(n){v&&v(n);var t=n.__c;t&&t.__H&&(t.__H.__h.length&&(1!==f.push(t)&&i===c.requestAnimationFrame||((i=c.requestAnimationFrame)||w)(j)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),u=r=null},c.__c=function(n,t){t.some(function(n){try{n.__h.forEach(z),n.__h=n.__h.filter(function(n){return!n.__||B(n)})}catch(r){t.some(function(n){n.__h&&(n.__h=[])}),t=[],c.__e(r,n.__v)}}),l&&l(n,t)},c.unmount=function(n){m&&m(n);var t,r=n.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{z(n)}catch(n){t=n}}),r.__H=void 0,t&&c.__e(t,r.__v))};var k="function"==typeof requestAnimationFrame;function w(n){var t,r=function(){clearTimeout(u),k&&cancelAnimationFrame(t),setTimeout(n)},u=setTimeout(r,35);k&&(t=requestAnimationFrame(r))}function z(n){var t=r,u=n.__c;"function"==typeof u&&(n.__c=void 0,u()),r=t}function B(n){var t=r;n.__c=n.__(),r=t}function C(n,t){return!n||n.length!==t.length||t.some(function(t,r){return t!==n[r]})}function D(n,t){return"function"==typeof t?t(n):t}}}]);