/*! For license information please see 418.46ef2350.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunklayerswap=self.webpackChunklayerswap||[]).push([[418],{"./node_modules/starknetkit/dist/Modal-b083f70f.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L:()=>Q,M:()=>yl,a:()=>R1,d:()=>I1,g:()=>kl});__webpack_require__("./node_modules/starknetkit/dist/connector-4bc69b15.js"),__webpack_require__("./node_modules/starknet/dist/index.mjs"),__webpack_require__("./node_modules/starknetkit/dist/trpc-d914d822.js");var _index_76832d25_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/starknetkit/dist/index-76832d25.js"),_argentX_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/starknetkit/dist/argentX.js"),_braavos_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/starknetkit/dist/braavos.js"),console=__webpack_require__("./node_modules/console-browserify/index.js"),process=__webpack_require__("./node_modules/process/browser.js"),xr=Object.defineProperty,Mt=(l,e,o)=>(((l,e,o)=>{e in l?xr(l,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[e]=o})(l,"symbol"!=typeof e?e+"":e,o),o),Q=(l=>(l.walletList="walletList",l.connecting="connecting",l.success="success",l.loginFailure="loginFailure",l.requestFailure="requestFailure",l.qrCode="qrCode",l.download="download",l.approval="approval",l))(Q||{});const $r='@import"https://fonts.googleapis.com/css2?family=Barlow:wght@500;600&display=swap";.visible{visibility:visible}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{inset:0}.left-0{left:0}.right-0{right:0}.top-0{top:0}.z-\\[9998\\]{z-index:9998}.z-\\[9999\\]{z-index:9999}.mx-6{margin-left:1.5rem;margin-right:1.5rem}.mb-4{margin-bottom:1rem}.ml-\\[-32px\\]{margin-left:-32px}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.hidden{display:none}.h-12{height:3rem}.h-8{height:2rem}.h-\\[245px\\]{height:245px}.h-\\[32px\\]{height:32px}.h-\\[60px\\]{height:60px}.h-full{height:100%}.min-h-12{min-height:3rem}.min-h-8{min-height:2rem}.min-h-\\[26px\\]{min-height:26px}.min-h-\\[570px\\]{min-height:570px}.w-12{width:3rem}.w-8{width:2rem}.w-full{width:100%}.min-w-\\[140px\\]{min-width:140px}.max-w-\\[240px\\]{max-width:240px}.max-w-\\[32px\\]{max-width:32px}.max-w-\\[380px\\]{max-width:380px}.flex-shrink{flex-shrink:1}.flex-grow{flex-grow:1}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-pointer{cursor:pointer}.resize{resize:both}.flex-row{flex-direction:row}.flex-row-reverse{flex-direction:row-reverse}.flex-col{flex-direction:column}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.gap-8{gap:2rem}.overflow-hidden{overflow:hidden}.text-ellipsis{text-overflow:ellipsis}.whitespace-nowrap{white-space:nowrap}.rounded{border-radius:.25rem}.rounded-3xl{border-radius:1.5rem}.rounded-\\[12px\\]{border-radius:12px}.rounded-full{border-radius:9999px}.rounded-xl{border-radius:.75rem}.border{border-width:1px}.border-stroke-default{border-color:var(--color-stroke-default)}.border-stroke-focused{border-color:var(--color-stroke-focused)}.bg-black\\/25{background-color:#00000040}.bg-button-danger{background-color:var(--color-button-danger)}.bg-button-primary{background-color:var(--color-button-primary)}.bg-button-secondary{background-color:var(--color-button-secondary)}.bg-button-tertiary{background-color:var(--color-button-tertiary)}.bg-surface-default{background-color:var(--color-surface-default)}.bg-surface-elevated{background-color:var(--color-surface-elevated)}.bg-surface-elevated-web{background-color:var(--color-surface-elevated-web)}.stroke-brand{stroke:var(--color-text-brand)}.stroke-danger{stroke:var(--color-text-danger)}.stroke-subtle{stroke:var(--color-text-subtle)}.stroke-success{stroke:var(--color-text-success)}.stroke-warning{stroke:var(--color-text-warning)}.p-2{padding:.5rem}.p-5{padding:1.25rem}.p-6{padding:1.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-8{padding-left:2rem;padding-right:2rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.text-left{text-align:left}.text-center{text-align:center}.text-\\[13px\\]{font-size:13px}.text-\\[15px\\]{font-size:15px}.text-\\[16px\\]{font-size:16px}.text-\\[24px\\]{font-size:24px}.text-b1{font-size:1.125rem;line-height:1.125rem;font-weight:600}.text-b2{font-size:.9375rem;line-height:1rem;font-weight:600}.text-b3{font-size:.8125rem;line-height:.875rem;font-weight:600}.text-h4{font-size:1.375rem;line-height:1.5625rem;font-weight:700}.text-h5,.text-heading5{font-size:1.125rem;line-height:1.375rem;font-weight:600}.text-l1{font-size:.875rem;line-height:1.125rem;font-weight:400}.text-l2{font-size:.75rem;line-height:1rem;font-weight:400}.text-p3{font-size:1rem;line-height:1.3125rem;font-weight:400}.font-\\[400\\]{font-weight:400}.font-bold{font-weight:700}.font-semibold{font-weight:600}.capitalize{text-transform:capitalize}.text-adaptive{color:var(--color-text-adaptive)}.text-brand{color:var(--color-text-brand)}.text-danger{color:var(--color-text-danger)}.text-danger-accessible{color:var(--color-text-danger-accessible)}.text-info{color:var(--color-text-info)}.text-info-accessible{color:var(--color-text-info-accessible)}.text-link{color:var(--color-text-link)}.text-link-pressed{color:var(--color-text-link-pressed)}.text-primary{color:var(--color-text-primary)}.text-secondary{color:var(--color-text-secondary)}.text-secondary-web{color:var(--color-text-secondary-web)}.text-stable{color:var(--color-text-stable)}.text-subtle{color:var(--color-text-subtle)}.text-success{color:var(--color-text-success)}.text-success-accessible{color:var(--color-text-success-accessible)}.text-warning{color:var(--color-text-warning)}.text-warning-accessible{color:var(--color-text-warning-accessible)}.underline{text-decoration-line:underline}.line-through{text-decoration-line:line-through}.accent-brand{accent-color:var(--color-text-brand)}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-list-item{--tw-shadow: 0px 4px 12px 0px rgba(0, 0, 0, .06);--tw-shadow-colored: 0px 4px 12px 0px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-modal{--tw-shadow: 0px 4px 20px rgba(0, 0, 0, .5);--tw-shadow-colored: 0px 4px 20px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline{outline-style:solid}.blur{--tw-blur: blur(8px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow{--tw-drop-shadow: drop-shadow(0 1px 2px rgb(0 0 0 / .1)) drop-shadow(0 1px 1px rgb(0 0 0 / .06));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-100{transition-duration:.1s}.ease-in{transition-timing-function:cubic-bezier(.4,0,1,1)}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}:root,:host{--color-black-0: 0, 0, 0, 0;--color-black-4: 0, 0, 0, .04;--color-black-6: 0, 0, 0, .06;--color-black-12: 0, 0, 0, .12;--color-black-30: 0, 0, 0, .3;--color-black-50: 0, 0, 0, .5;--color-black-100: 0 0 0;--color-deprecated-accent-accessible-green: 2 161 122;--color-deprecated-accent-accessible-sky-blue: 0 157 214;--color-deprecated-accent-accessible-yellow: 255 171 0;--color-deprecated-accent-blue: 0 120 164;--color-deprecated-accent-coral: 255 103 92;--color-deprecated-accent-green: 44 211 169;--color-deprecated-accent-hot-pink: 255 91 129;--color-deprecated-accent-light-orange: 255 168 92;--color-deprecated-accent-red-text-on-black: 219 59 78;--color-deprecated-accent-red-text-on-white: 193 32 38;--color-deprecated-accent-sky-blue: 41 197 255;--color-deprecated-accent-yellow: 255 191 61;--color-deprecated-black: 0 0 0;--color-deprecated-black-3: 0, 0, 0, .03;--color-deprecated-black-8: 0, 0, 0, .08;--color-deprecated-black-30: 0, 0, 0, .3;--color-deprecated-black-50: 0, 0, 0, .5;--color-deprecated-dark-green-shade: 55 129 118;--color-deprecated-darker-blue-shade: 33 83 112;--color-deprecated-darker-orange: 72 42 30;--color-deprecated-experimental-vault: 0 48 77;--color-deprecated-lighter-blue-shade: 232 242 246;--color-deprecated-lighter-sky-blue: 241 251 255;--color-deprecated-neutrals-100: 249 249 249;--color-deprecated-neutrals-200: 240 240 240;--color-deprecated-neutrals-300: 191 191 191;--color-deprecated-neutrals-400: 140 140 140;--color-deprecated-neutrals-500: 102 102 102;--color-deprecated-neutrals-600: 89 89 89;--color-deprecated-neutrals-700: 64 64 64;--color-deprecated-neutrals-800: 38 38 38;--color-deprecated-neutrals-900: 31 31 31;--color-deprecated-neutrals-1000: 15 15 15;--color-deprecated-primary-accessible-orange: 243 106 61;--color-deprecated-primary-orange: 255 135 91;--color-deprecated-white: 255 255 255;--color-deprecated-white-12: 255, 255, 255, .12;--color-deprecated-white-30: 255, 255, 255, .3;--color-deprecated-white-50: 255, 255, 255, .5;--color-neutrals-100: 249 249 249;--color-neutrals-200: 240 240 240;--color-neutrals-300: 191 191 191;--color-neutrals-400: 140 140 140;--color-neutrals-500: 102 102 102;--color-neutrals-600: 89 89 89;--color-neutrals-700: 64 64 64;--color-neutrals-800: 46 46 46;--color-neutrals-900: 36 36 36;--color-neutrals-1000: 23 23 23;--color-primary-blue-200: 203 241 255;--color-primary-blue-400: 41 197 255;--color-primary-blue-600: 0 157 214;--color-primary-blue-800: 0 120 164;--color-primary-blue-1000: 7 49 68;--color-primary-green-200: 206 255 243;--color-primary-green-400: 44 211 169;--color-primary-green-600: 2 161 122;--color-primary-green-800: 10 77 59;--color-primary-green-1000: 4 36 16;--color-primary-orange-6: 255, 135, 91, .06;--color-primary-orange-18: 255, 135, 91, .18;--color-primary-orange-200: 255 203 184;--color-primary-orange-300: 255 158 122;--color-primary-orange-400: 255 135 91;--color-primary-orange-600: 243 106 61;--color-primary-orange-800: 128 56 32;--color-primary-orange-1000: 55 23 9;--color-primary-red-200: 255 221 225;--color-primary-red-400: 233 95 114;--color-primary-red-600: 219 59 78;--color-primary-red-800: 99 9 21;--color-primary-red-1000: 75 1 7;--color-primary-red-dark: 193 32 38;--color-primary-yellow-200: 252 239 211;--color-primary-yellow-400: 255 191 61;--color-primary-yellow-600: 255 171 0;--color-primary-yellow-800: 233 129 1;--color-primary-yellow-1000: 63 45 12;--color-screen-border: 255, 255, 255, .2;--color-secondary-clementine: 255 168 92;--color-secondary-coral: 255 103 92;--color-secondary-hot-pink: 255 91 129;--color-secondary-sky-blue: 41 197 255;--color-white-0: 255, 255, 255, 0;--color-white-6: 255, 255, 255, .06;--color-white-12: 255, 255, 255, .12;--color-white-18: 255, 255, 255, .18;--color-white-30: 255, 255, 255, .3;--color-white-50: 255, 255, 255, .5;--color-white-100: 255 255 255;--color-accent-blue: rgba(var(--color-primary-blue-600));--color-accent-brand: rgba(var(--color-primary-orange-400));--color-accent-coral: rgba(var(--color-secondary-coral));--color-accent-green: rgba(var(--color-primary-green-400));--color-accent-hot-pink: rgba(var(--color-secondary-hot-pink));--color-accent-orange: rgba(var(--color-secondary-clementine));--color-accent-red: rgba(var(--color-primary-red-600));--color-accent-sky-blue: rgba(var(--color-secondary-sky-blue));--color-accent-yellow: rgba(var(--color-primary-yellow-400));--color-button-danger: rgba(var(--color-primary-red-600));--color-button-danger-hover: rgba(var(--color-primary-red-400));--color-button-info: rgba(var(--color-primary-blue-800));--color-button-info-hover: rgba(var(--color-primary-blue-600));--color-button-pressed-ghost-overlay: rgba(var(--color-black-12));--color-button-pressed-overlay: rgba(var(--color-black-12));--color-button-primary: rgba(var(--color-primary-orange-600));--color-button-primary-hover: rgba(var(--color-primary-orange-400));--color-button-secondary: rgba(var(--color-black-6));--color-button-secondary-hover: rgba(var(--color-black-12));--color-button-tertiary: rgba(var(--color-black-0));--color-button-tertiary-hover: rgba(var(--color-primary-orange-6));--color-button-tertiary-pressed: rgba(var(--color-primary-orange-18));--color-button-warning: rgba(var(--color-primary-yellow-800));--color-button-warning-hover: rgba(var(--color-primary-yellow-600));--color-icon-adaptive: rgba(var(--color-white-100));--color-icon-background: rgba(var(--color-black-6));--color-icon-background-brand: rgba(var(--color-primary-orange-400));--color-icon-brand: rgba(var(--color-primary-orange-600));--color-icon-danger: rgba(var(--color-primary-red-600));--color-icon-default: rgba(var(--color-neutrals-700));--color-icon-info: rgba(var(--color-primary-blue-600));--color-icon-secondary: rgba(var(--color-neutrals-400));--color-icon-stable: rgba(var(--color-white-100));--color-icon-subtle: rgba(var(--color-neutrals-300));--color-icon-success: rgba(var(--color-primary-green-600));--color-icon-warning: rgba(var(--color-primary-yellow-800));--color-ios-icon: rgb(80, 85, 92);--color-ios-keyboard-button: rgb(0, 122, 255);--color-ios-primary: rgb(0, 122, 255);--color-ios-surface-dark: rgb(172, 180, 190);--color-ios-surface-default: rgba(210, 213, 219, .9);--color-ios-surface-elevated: rgb(255, 255, 255);--color-ios-text: rgb(0, 0, 0);--color-ios-text-inverted: rgb(255, 255, 255);--color-shadow-default: rgba(var(--color-black-6));--color-shadow-medium: rgba(var(--color-black-12));--color-shadow-strong: rgba(var(--color-black-30));--color-stroke-brand: rgba(var(--color-primary-orange-600));--color-stroke-danger: rgba(var(--color-primary-red-600));--color-stroke-default: rgba(var(--color-neutrals-200));--color-stroke-default-web: rgba(var(--color-neutrals-200));--color-stroke-focused: rgba(var(--color-black-30));--color-stroke-subtle: rgba(var(--color-black-6));--color-stroke-success: rgba(var(--color-primary-green-600));--color-stroke-warning: rgba(var(--color-primary-yellow-800));--color-surface-brand: rgba(var(--color-primary-orange-400));--color-surface-danger-default: rgba(var(--color-primary-red-200));--color-surface-danger-vibrant: rgba(var(--color-primary-red-600));--color-surface-default: rgba(var(--color-neutrals-100));--color-surface-default-web: rgba(var(--color-neutrals-100));--color-surface-elevated: rgba(var(--color-white-100));--color-surface-elevated-web: rgba(var(--color-neutrals-200));--color-surface-info-default: rgba(var(--color-primary-blue-200));--color-surface-info-vibrant: rgba(var(--color-primary-blue-400));--color-surface-input: rgba(var(--color-black-4));--color-surface-inverted: rgba(var(--color-black-100));--color-surface-match-mode: rgba(var(--color-white-100));--color-surface-pressed-overlay: rgba(var(--color-black-12));--color-surface-scrimedge: rgb(219, 219, 219);--color-surface-stable-dark: rgba(var(--color-black-100));--color-surface-stable-light: rgba(var(--color-white-100));--color-surface-success-default: rgba(var(--color-primary-green-200));--color-surface-success-vibrant: rgba(var(--color-primary-green-600));--color-surface-sunken: rgba(var(--color-neutrals-200));--color-surface-text: rgba(var(--color-primary-orange-200));--color-surface-transparent: rgba(var(--color-black-6));--color-surface-warning-default: rgba(var(--color-primary-yellow-200));--color-surface-warning-vibrant: rgba(var(--color-primary-yellow-800));--color-text-adaptive: rgba(var(--color-white-100));--color-text-brand: rgba(var(--color-primary-orange-600));--color-text-danger: rgba(var(--color-primary-red-600));--color-text-danger-accessible: rgba(var(--color-primary-red-1000));--color-text-info: rgba(var(--color-primary-blue-600));--color-text-info-accessible: rgba(var(--color-primary-blue-1000));--color-text-link: rgba(var(--color-primary-blue-600));--color-text-link-pressed: rgba(var(--color-primary-blue-800));--color-text-primary: rgba(var(--color-neutrals-700));--color-text-secondary: rgba(var(--color-neutrals-400));--color-text-secondary-web: rgba(var(--color-neutrals-500));--color-text-stable: rgba(var(--color-white-100));--color-text-subtle: rgba(var(--color-neutrals-300));--color-text-success: rgba(var(--color-primary-green-600));--color-text-success-accessible: rgba(var(--color-primary-green-1000));--color-text-warning: rgba(var(--color-primary-yellow-800));--color-text-warning-accessible: rgba(var(--color-primary-yellow-1000))}.dark:root{--color-accent-blue: rgba(var(--color-primary-blue-600));--color-accent-brand: rgba(var(--color-primary-orange-600));--color-accent-coral: rgba(var(--color-secondary-coral));--color-accent-green: rgba(var(--color-primary-green-600));--color-accent-hot-pink: rgba(var(--color-secondary-hot-pink));--color-accent-orange: rgba(var(--color-secondary-clementine));--color-accent-red: rgba(var(--color-primary-red-dark));--color-accent-sky-blue: rgba(var(--color-primary-blue-400));--color-accent-yellow: rgba(var(--color-primary-yellow-600));--color-button-danger: rgba(var(--color-primary-red-600));--color-button-danger-hover: rgba(var(--color-primary-red-400));--color-button-info: rgba(var(--color-primary-blue-800));--color-button-info-hover: rgba(var(--color-primary-blue-600));--color-button-pressed-ghost-overlay: rgba(var(--color-white-12));--color-button-pressed-overlay: rgba(var(--color-black-30));--color-button-primary: rgba(var(--color-primary-orange-600));--color-button-primary-hover: rgba(var(--color-primary-orange-400));--color-button-secondary: rgba(var(--color-white-12));--color-button-secondary-hover: rgba(var(--color-white-18));--color-button-tertiary: rgba(var(--color-white-0));--color-button-tertiary-hover: rgba(var(--color-primary-orange-6));--color-button-tertiary-pressed: rgba(var(--color-primary-orange-18));--color-button-warning: rgba(var(--color-primary-yellow-800));--color-button-warning-hover: rgba(var(--color-primary-yellow-600));--color-icon-adaptive: rgba(var(--color-neutrals-1000));--color-icon-background: rgba(var(--color-white-12));--color-icon-background-brand: rgba(var(--color-primary-orange-600));--color-icon-brand: rgba(var(--color-primary-orange-400));--color-icon-danger: rgba(var(--color-primary-red-400));--color-icon-default: rgba(var(--color-white-100));--color-icon-info: rgba(var(--color-primary-blue-400));--color-icon-secondary: rgba(var(--color-neutrals-400));--color-icon-stable: rgba(var(--color-white-100));--color-icon-subtle: rgba(var(--color-neutrals-500));--color-icon-success: rgba(var(--color-primary-green-400));--color-icon-warning: rgba(var(--color-primary-yellow-600));--color-ios-icon: rgb(231, 231, 231);--color-ios-keyboard-button: rgb(36, 36, 36);--color-ios-primary: rgb(0, 122, 255);--color-ios-surface-dark: rgb(36, 36, 36);--color-ios-surface-default: rgba(32, 32, 32, .92);--color-ios-surface-elevated: rgb(67, 67, 67);--color-ios-text: rgb(255, 255, 255);--color-ios-text-inverted: rgb(255, 255, 255);--color-shadow-default: rgba(var(--color-black-30));--color-shadow-medium: rgba(var(--color-black-50));--color-shadow-strong: rgba(var(--color-black-100));--color-stroke-brand: rgba(var(--color-primary-orange-600));--color-stroke-danger: rgba(var(--color-primary-red-400));--color-stroke-default: rgba(var(--color-neutrals-1000));--color-stroke-default-web: rgba(var(--color-neutrals-700));--color-stroke-focused: rgba(var(--color-white-30));--color-stroke-subtle: rgba(var(--color-white-12));--color-stroke-success: rgba(var(--color-primary-green-400));--color-stroke-warning: rgba(var(--color-primary-yellow-600));--color-surface-brand: rgba(var(--color-primary-orange-600));--color-surface-danger-default: rgba(var(--color-primary-red-1000));--color-surface-danger-vibrant: rgba(var(--color-primary-red-600));--color-surface-default: rgba(var(--color-neutrals-1000));--color-surface-default-web: rgba(var(--color-black-100));--color-surface-elevated: rgba(var(--color-neutrals-900));--color-surface-elevated-web: rgba(var(--color-neutrals-900));--color-surface-info-default: rgba(var(--color-primary-blue-1000));--color-surface-info-vibrant: rgba(var(--color-primary-blue-400));--color-surface-input: rgba(var(--color-white-12));--color-surface-inverted: rgba(var(--color-white-100));--color-surface-match-mode: rgba(var(--color-black-100));--color-surface-pressed-overlay: rgba(var(--color-white-18));--color-surface-scrimedge: rgb(34, 34, 36);--color-surface-stable-dark: rgba(var(--color-black-100));--color-surface-stable-light: rgba(var(--color-white-100));--color-surface-success-default: rgba(var(--color-primary-green-800));--color-surface-success-vibrant: rgba(var(--color-primary-green-400));--color-surface-sunken: rgba(var(--color-black-100));--color-surface-text: rgba(var(--color-primary-orange-800));--color-surface-transparent: rgba(var(--color-white-12));--color-surface-warning-default: rgba(var(--color-primary-yellow-1000));--color-surface-warning-vibrant: rgba(var(--color-primary-yellow-600));--color-text-adaptive: rgba(var(--color-neutrals-1000));--color-text-brand: rgba(var(--color-primary-orange-400));--color-text-danger: rgba(var(--color-primary-red-400));--color-text-danger-accessible: rgba(var(--color-primary-red-200));--color-text-info: rgba(var(--color-primary-blue-400));--color-text-info-accessible: rgba(var(--color-primary-blue-200));--color-text-link: rgba(var(--color-primary-blue-400));--color-text-link-pressed: rgba(var(--color-primary-blue-600));--color-text-primary: rgba(var(--color-white-100));--color-text-secondary: rgba(var(--color-neutrals-400));--color-text-secondary-web: rgba(var(--color-neutrals-300));--color-text-stable: rgba(var(--color-white-100));--color-text-subtle: rgba(var(--color-neutrals-500));--color-text-success: rgba(var(--color-primary-green-400));--color-text-success-accessible: rgba(var(--color-primary-green-200));--color-text-warning: rgba(var(--color-primary-yellow-600));--color-text-warning-accessible: rgba(var(--color-primary-yellow-200))}.modal-font{font-family:Barlow,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;text-size-adjust:100%;font-feature-settings:"kern"}.l2{color:#8c8c8c;font-size:12px;font-weight:500;line-height:14px;letter-spacing:0;text-align:left}.p{margin:0}.hover\\:bg-button-danger-hover:hover{background-color:var(--color-button-danger-hover)}.hover\\:bg-button-primary-hover:hover{background-color:var(--color-button-primary-hover)}.hover\\:bg-button-secondary-hover:hover{background-color:var(--color-button-secondary-hover)}.hover\\:bg-button-tertiary-hover:hover{background-color:var(--color-button-tertiary-hover)}.hover\\:bg-surface-elevated:hover{background-color:var(--color-surface-elevated)}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\\:ring-neutral-200:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(229 229 229 / var(--tw-ring-opacity, 1))}.focus-visible\\:outline-none:focus-visible{outline:2px solid transparent;outline-offset:2px}.focus-visible\\:ring-2:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\\:ring-offset-2:focus-visible{--tw-ring-offset-width: 2px}.disabled\\:pointer-events-none:disabled{pointer-events:none}.disabled\\:opacity-50:disabled{opacity:.5}.dark\\:shadow-none:is(.dark *){--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.dark\\:focus\\:ring-neutral-700:focus:is(.dark *){--tw-ring-opacity: 1;--tw-ring-color: rgb(64 64 64 / var(--tw-ring-opacity, 1))}\n',kl=()=>{const l="starknetkit-modal-container",e=document.getElementById(l);if(e){if(e.shadowRoot)return e.shadowRoot;e.remove()}const o=document.createElement("div");o.id=l,document.body.appendChild(o);const r=o.attachShadow({mode:"open"}),a=document.createElement("style");return a.textContent=$r.replace(/\.dark:root/g,":host-context(.dark), .dark"),r.appendChild(a),r};function M(){}function Ft(l,e){for(const o in e)l[o]=e[o];return l}function ur(l){return l()}function jt(){return Object.create(null)}function ve(l){l.forEach(ur)}function me(l){return"function"==typeof l}function W(l,e){return l!=l?e==e:l!==e||l&&"object"==typeof l||"function"==typeof l}let kt;function be(l,e,o,r){if(l){const a=dr(l,e,o,r);return l[0](a)}}function dr(l,e,o,r){return l[1]&&r?Ft(o.ctx.slice(),l[1](r(e))):o.ctx}function we(l,e,o,r){if(l[2]&&r){const a=l[2](r(o));if(void 0===e.dirty)return a;if("object"==typeof a){const n=[],s=Math.max(e.dirty.length,a.length);for(let u=0;u<s;u+=1)n[u]=e.dirty[u]|a[u];return n}return e.dirty|a}return e.dirty}function Ce(l,e,o,r,a,n){if(a){const s=dr(e,o,r,n);l.p(s,a)}}function _e(l){if(l.ctx.length>32){const e=[],o=l.ctx.length/32;for(let r=0;r<o;r++)e[r]=-1;return e}return-1}function i(l,e){l.appendChild(e)}function zr(l,e,o){const r=function Or(l){if(!l)return document;const e=l.getRootNode?l.getRootNode():l.ownerDocument;return e&&e.host?e:l.ownerDocument}(l);if(!r.getElementById(e)){const a=y("style");a.id=e,a.textContent=o,function Ur(l,e){return i(l.head||l,e),e.sheet}(r,a)}}function B(l,e,o){l.insertBefore(e,o||null)}function L(l){l.parentNode&&l.parentNode.removeChild(l)}function pr(l,e){for(let o=0;o<l.length;o+=1)l[o]&&l[o].d(e)}function y(l){return document.createElement(l)}function f(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function P(l){return document.createTextNode(l)}function K(){return P(" ")}function ke(){return P("")}function Ne(l,e,o,r){return l.addEventListener(e,o,r),()=>l.removeEventListener(e,o,r)}function t(l,e,o){null==o?l.removeAttribute(e):l.getAttribute(e)!==o&&l.setAttribute(e,o)}const Wr=["width","height"];function Gr(l,e){const o=Object.getOwnPropertyDescriptors(l.__proto__);for(const r in e)null==e[r]?l.removeAttribute(r):"style"===r?l.style.cssText=e[r]:"__value"===r?l.value=l[r]=e[r]:o[r]&&o[r].set&&-1===Wr.indexOf(r)?l[r]=e[r]:t(l,r,e[r])}function Ir(l,e){Object.keys(e).forEach(o=>{!function jr(l,e,o){const r=e.toLowerCase();r in l?l[r]="boolean"==typeof l[r]&&""===o||o:e in l?l[e]="boolean"==typeof l[e]&&""===o||o:t(l,e,o)}(l,o,e[o])})}function Ee(l){return/-/.test(l)?Ir:Gr}function ge(l,e){e=""+e,l.data!==e&&(l.data=e)}function xe(l,e,o,r){null==o?l.style.removeProperty(e):l.style.setProperty(e,o,r?"important":"")}function Dt(l,e){return new l(e)}let je;function Ie(l){je=l}function Tr(l){(function Vr(){if(!je)throw new Error("Function called outside component initialization");return je})().$$.on_mount.push(l)}const Me=[],Zt=[];let Se=[];const Vt=[],Rr=Promise.resolve();let At=!1;function zt(l){Se.push(l)}const St=new Set;let Be=0;function hr(){if(0!==Be)return;const l=je;do{try{for(;Be<Me.length;){const e=Me[Be];Be++,Ie(e),Kr(e.$$)}}catch(e){throw Me.length=0,Be=0,e}for(Ie(null),Me.length=0,Be=0;Zt.length;)Zt.pop()();for(let e=0;e<Se.length;e+=1){const o=Se[e];St.has(o)||(St.add(o),o())}Se.length=0}while(Me.length);for(;Vt.length;)Vt.pop()();At=!1,St.clear(),Ie(l)}function Kr(l){if(null!==l.fragment){l.update(),ve(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(zt)}}const yt=new Set;let ye;function ie(){ye={r:0,c:[],p:ye}}function se(){ye.r||ve(ye.c),ye=ye.p}function w(l,e){l&&l.i&&(yt.delete(l),l.i(e))}function C(l,e,o,r){if(l&&l.o){if(yt.has(l))return;yt.add(l),ye.c.push(()=>{yt.delete(l),r&&(o&&l.d(1),r())}),l.o(e)}else r&&r()}function xt(l){return void 0!==l?.length?l:Array.from(l)}function Ot(l,e){const o={},r={},a={$$scope:1};let n=l.length;for(;n--;){const s=l[n],u=e[n];if(u){for(const d in s)d in u||(r[d]=1);for(const d in u)a[d]||(o[d]=u[d],a[d]=1);l[n]=u}else for(const d in s)a[d]=1}for(const s in r)s in o||(o[s]=void 0);return o}function Z(l){l&&l.c()}function E(l,e,o){const{fragment:r,after_update:a}=l.$$;r&&r.m(e,o),zt(()=>{const n=l.$$.on_mount.map(ur).filter(me);l.$$.on_destroy?l.$$.on_destroy.push(...n):ve(n),l.$$.on_mount=[]}),a.forEach(zt)}function $(l,e){const o=l.$$;null!==o.fragment&&(function Pr(l){const e=[],o=[];Se.forEach(r=>-1===l.indexOf(r)?e.push(r):o.push(r)),o.forEach(r=>r()),Se=e}(o.after_update),ve(o.on_destroy),o.fragment&&o.fragment.d(e),o.on_destroy=o.fragment=null,o.ctx=[])}function qr(l,e){-1===l.$$.dirty[0]&&(Me.push(l),function Hr(){At||(At=!0,Rr.then(hr))}(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function j(l,e,o,r,a,n,s=null,u=[-1]){const d=je;Ie(l);const p=l.$$={fragment:null,ctx:[],props:n,update:M,not_equal:a,bound:jt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:jt(),dirty:u,skip_bound:!1,root:e.target||d.$$.root};s&&s(p.root);let h=!1;if(p.ctx=o?o(l,e.props||{},(c,g,...m)=>{const b=m.length?m[0]:g;return p.ctx&&a(p.ctx[c],p.ctx[c]=b)&&(!p.skip_bound&&p.bound[c]&&p.bound[c](b),h&&qr(l,c)),g}):[],p.update(),h=!0,ve(p.before_update),p.fragment=!!r&&r(p.ctx),e.target){if(e.hydrate){const c=function Dr(l){return Array.from(l.childNodes)}(e.target);p.fragment&&p.fragment.l(c),c.forEach(L)}else p.fragment&&p.fragment.c();e.intro&&w(l.$$.fragment),E(l,e.target,e.anchor),hr()}Ie(d)}class D{constructor(){Mt(this,"$$"),Mt(this,"$$set")}$destroy(){$(this,1),this.$destroy=M}$on(e,o){if(!me(o))return M;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(o),()=>{const a=r.indexOf(o);-1!==a&&r.splice(a,1)}}$set(e){this.$$set&&!function Ar(l){return 0===Object.keys(l).length}(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Nt(l){let e,o,r,a,n;const s=l[7].default,u=be(s,l,l[6],null);let d=[{href:l[0]},{class:o=`\n    p-2 cursor-pointer text-primary rounded-full bg-surface-elevated-web\n\t\tfocus:outline-none focus:ring-2 focus:ring-neutral-200 dark:focus:ring-neutral-700\n\t\ttransition-colors ${l[2]}\n  `},{rel:"noreferrer noopener"},{target:"_blank"},{role:"button"},{tabindex:"0"},{"aria-label":l[1]}],p={};for(let h=0;h<d.length;h+=1)p=Ft(p,d[h]);return{c(){e=y(l[3]),u&&u.c(),Ee(l[3])(e,p)},m(h,c){B(h,e,c),u&&u.m(e,null),r=!0,a||(n=[Ne(e,"click",function(){me(l[4])&&l[4].apply(this,arguments)}),Ne(e,"keyup",function(){me(l[5])&&l[5].apply(this,arguments)})],a=!0)},p(h,c){l=h,u&&u.p&&(!r||64&c)&&Ce(u,s,l,l[6],r?we(s,l[6],c,null):_e(l[6]),null),Ee(l[3])(e,p=Ot(d,[(!r||1&c)&&{href:l[0]},(!r||4&c&&o!==(o=`\n    p-2 cursor-pointer text-primary rounded-full bg-surface-elevated-web\n\t\tfocus:outline-none focus:ring-2 focus:ring-neutral-200 dark:focus:ring-neutral-700\n\t\ttransition-colors ${l[2]}\n  `))&&{class:o},{rel:"noreferrer noopener"},{target:"_blank"},{role:"button"},{tabindex:"0"},(!r||2&c)&&{"aria-label":l[1]}]))},i(h){r||(w(u,h),r=!0)},o(h){C(u,h),r=!1},d(h){h&&L(e),u&&u.d(h),a=!1,ve(n)}}}function Qr(l){let o,r,e=l[3],a=l[3]&&Nt(l);return{c(){a&&a.c(),o=ke()},m(n,s){a&&a.m(n,s),B(n,o,s),r=!0},p(n,[s]){n[3]?e?W(e,n[3])?(a.d(1),a=Nt(n),e=n[3],a.c(),a.m(o.parentNode,o)):a.p(n,s):(a=Nt(n),e=n[3],a.c(),a.m(o.parentNode,o)):e&&(a.d(1),a=null,e=n[3])},i(n){r||(w(a,n),r=!0)},o(n){C(a,n),r=!1},d(n){n&&L(o),a&&a.d(n)}}}function Yr(l,e,o){let{$$slots:r={},$$scope:a}=e,{href:n=""}=e,{ariaLabel:s}=e,{className:u}=e,{as:d="button"}=e,{handleClick:p=c=>console.log("click",c)}=e,{handleKeyup:h=c=>console.log("keyup",c)}=e;return l.$$set=c=>{"href"in c&&o(0,n=c.href),"ariaLabel"in c&&o(1,s=c.ariaLabel),"className"in c&&o(2,u=c.className),"as"in c&&o(3,d=c.as),"handleClick"in c&&o(4,p=c.handleClick),"handleKeyup"in c&&o(5,h=c.handleKeyup),"$$scope"in c&&o(6,a=c.$$scope)},[n,s,u,d,p,h,a,r]}typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");class gr extends D{constructor(e){super(),j(this,e,Yr,Qr,W,{href:0,ariaLabel:1,className:2,as:3,handleClick:4,handleKeyup:5})}}function Jr(l){let e,o;return{c(){e=f("svg"),o=f("path"),t(o,"d","M9.77275 3.02275C9.99242 2.80308 9.99242 2.44692 9.77275 2.22725C9.55308 2.00758 9.19692 2.00758 8.97725 2.22725L6 5.20451L3.02275 2.22725C2.80308 2.00758 2.44692 2.00758 2.22725 2.22725C2.00758 2.44692 2.00758 2.80308 2.22725 3.02275L5.20451 6L2.22725 8.97725C2.00758 9.19692 2.00758 9.55308 2.22725 9.77275C2.44692 9.99242 2.80308 9.99242 3.02275 9.77275L6 6.79549L8.97725 9.77275C9.19692 9.99242 9.55308 9.99242 9.77275 9.77275C9.99242 9.55308 9.99242 9.19692 9.77275 8.97725L6.79549 6L9.77275 3.02275Z"),t(o,"fill","currentColor"),t(e,"width","12"),t(e,"height","12"),t(e,"viewBox","0 0 12 12"),t(e,"fill","none"),t(e,"xmlns","http://www.w3.org/2000/svg")},m(r,a){B(r,e,a),i(e,o)},p:M,i:M,o:M,d(r){r&&L(e)}}}class e1 extends D{constructor(e){super(),j(this,e,null,Jr,W,{})}}function t1(l){let e,o;return{c(){e=f("svg"),o=f("path"),t(o,"fill-rule","evenodd"),t(o,"clip-rule","evenodd"),t(o,"d","M8.55383 1.24376C8.83406 1.54808 8.81134 2.01905 8.50309 2.2957L4.37567 6L8.50309 9.7043C8.81134 9.98095 8.83406 10.4519 8.55383 10.7562C8.2736 11.0606 7.79654 11.083 7.48828 10.8063L2.74691 6.55102C2.58965 6.40989 2.5 6.20981 2.5 6C2.5 5.79019 2.58965 5.59012 2.74691 5.44898L7.48828 1.19367C7.79654 0.917013 8.2736 0.93944 8.55383 1.24376Z"),t(o,"fill","currentColor"),t(e,"xmlns","http://www.w3.org/2000/svg"),t(e,"width","12"),t(e,"height","12"),t(e,"viewBox","0 0 12 12"),t(e,"fill","none")},m(r,a){B(r,e,a),i(e,o)},p:M,i:M,o:M,d(r){r&&L(e)}}}class r1 extends D{constructor(e){super(),j(this,e,null,t1,W,{})}}function Tt(l){let e,o;return e=new gr({props:{handleClick:l[4],handleKeyup:l[6],ariaLabel:"Go back",className:"absolute top-0 left-0",$$slots:{default:[o1]},$$scope:{ctx:l}}}),{c(){Z(e.$$.fragment)},m(r,a){E(e,r,a),o=!0},p(r,a){const n={};16&a&&(n.handleClick=r[4]),16&a&&(n.handleKeyup=r[6]),256&a&&(n.$$scope={dirty:a,ctx:r}),e.$set(n)},i(r){o||(w(e.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),o=!1},d(r){$(e,r)}}}function o1(l){let e,o;return e=new r1({}),{c(){Z(e.$$.fragment)},m(r,a){E(e,r,a),o=!0},i(r){o||(w(e.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),o=!1},d(r){$(e,r)}}}function Rt(l){let e,o;return{c(){e=y("h1"),o=P(l[0]),t(e,"class","text-[24px] text-primary font-semibold max-w-[240px] overflow-hidden whitespace-nowrap text-ellipsis")},m(r,a){B(r,e,a),i(e,o)},p(r,a){1&a&&ge(o,r[0])},d(r){r&&L(e)}}}function Ht(l){let e,o;return e=new gr({props:{handleClick:l[5],handleKeyup:l[7],ariaLabel:"Close",className:"absolute top-0 right-0",$$slots:{default:[l1]},$$scope:{ctx:l}}}),{c(){Z(e.$$.fragment)},m(r,a){E(e,r,a),o=!0},p(r,a){const n={};32&a&&(n.handleClick=r[5]),32&a&&(n.handleKeyup=r[7]),256&a&&(n.$$scope={dirty:a,ctx:r}),e.$set(n)},i(r){o||(w(e.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),o=!1},d(r){$(e,r)}}}function l1(l){let e,o;return e=new e1({}),{c(){Z(e.$$.fragment)},m(r,a){E(e,r,a),o=!0},i(r){o||(w(e.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),o=!1},d(r){$(e,r)}}}function a1(l){let e,o,r,a,n,s,u,d,p=l[2]&&Tt(l),h=!!l[0]&&Rt(l),c=l[3]&&Ht(l);return{c(){e=y("header"),p&&p.c(),o=K(),r=y("hgroup"),a=y("h2"),n=P(l[1]),s=K(),h&&h.c(),u=K(),c&&c.c(),t(a,"class","text-p3 text-secondary font-semibold"),t(e,"class","flex items-center justify-center flex-col relative")},m(g,m){B(g,e,m),p&&p.m(e,null),i(e,o),i(e,r),i(r,a),i(a,n),i(r,s),h&&h.m(r,null),i(e,u),c&&c.m(e,null),d=!0},p(g,[m]){g[2]?p?(p.p(g,m),4&m&&w(p,1)):(p=Tt(g),p.c(),w(p,1),p.m(e,o)):p&&(ie(),C(p,1,1,()=>{p=null}),se()),(!d||2&m)&&ge(n,g[1]),g[0]?h?h.p(g,m):(h=Rt(g),h.c(),h.m(r,null)):h&&(h.d(1),h=null),g[3]?c?(c.p(g,m),8&m&&w(c,1)):(c=Ht(g),c.c(),w(c,1),c.m(e,null)):c&&(ie(),C(c,1,1,()=>{c=null}),se())},i(g){d||(w(p),w(c),d=!0)},o(g){C(p),C(c),d=!1},d(g){g&&L(e),p&&p.d(),h&&h.d(),c&&c.d()}}}function n1(l,e,o){let{title:r}=e,{subtitle:a="Connect to"}=e,{showBackButton:n=!0}=e,{showCloseButton:s=!0}=e,{handleBack:u=()=>{}}=e,{handleClose:d=()=>{}}=e;return l.$$set=c=>{"title"in c&&o(0,r=c.title),"subtitle"in c&&o(1,a=c.subtitle),"showBackButton"in c&&o(2,n=c.showBackButton),"showCloseButton"in c&&o(3,s=c.showCloseButton),"handleBack"in c&&o(4,u=c.handleBack),"handleClose"in c&&o(5,d=c.handleClose)},[r,a,n,s,u,d,c=>{"Enter"===c.key&&u()},c=>{"Enter"===c.key&&d()}]}class i1 extends D{constructor(e){super(),j(this,e,n1,a1,W,{title:0,subtitle:1,showBackButton:2,showCloseButton:3,handleBack:4,handleClose:5})}}function Et(l){let e,o,r,a,n;const s=l[7].default,u=be(s,l,l[6],null);let d=[{href:l[0]},{rel:"noreferrer noopener"},{target:"_blank"},{role:"button"},{"aria-label":l[1]},{tabindex:"0"},{class:o=`\n\t\tflex justify-center items-center w-full px-3 h-[60px] rounded-[12px] cursor-pointer shadow-list-item\n\t\tdark:shadow-none bg-surface-elevated focus:outline-none focus:ring-2 text-primary\n\t\tfocus:ring-neutral-200 dark:focus:ring-neutral-700 transition-colors ${l[2]}\n\t`}],p={};for(let h=0;h<d.length;h+=1)p=Ft(p,d[h]);return{c(){e=y(l[3]),u&&u.c(),Ee(l[3])(e,p)},m(h,c){B(h,e,c),u&&u.m(e,null),r=!0,a||(n=[Ne(e,"click",function(){me(l[4])&&l[4].apply(this,arguments)}),Ne(e,"keyup",function(){me(l[5])&&l[5].apply(this,arguments)})],a=!0)},p(h,c){l=h,u&&u.p&&(!r||64&c)&&Ce(u,s,l,l[6],r?we(s,l[6],c,null):_e(l[6]),null),Ee(l[3])(e,p=Ot(d,[(!r||1&c)&&{href:l[0]},{rel:"noreferrer noopener"},{target:"_blank"},{role:"button"},(!r||2&c)&&{"aria-label":l[1]},{tabindex:"0"},(!r||4&c&&o!==(o=`\n\t\tflex justify-center items-center w-full px-3 h-[60px] rounded-[12px] cursor-pointer shadow-list-item\n\t\tdark:shadow-none bg-surface-elevated focus:outline-none focus:ring-2 text-primary\n\t\tfocus:ring-neutral-200 dark:focus:ring-neutral-700 transition-colors ${l[2]}\n\t`))&&{class:o}]))},i(h){r||(w(u,h),r=!0)},o(h){C(u,h),r=!1},d(h){h&&L(e),u&&u.d(h),a=!1,ve(n)}}}function s1(l){let o,r,e=l[3],a=l[3]&&Et(l);return{c(){a&&a.c(),o=ke()},m(n,s){a&&a.m(n,s),B(n,o,s),r=!0},p(n,[s]){n[3]?e?W(e,n[3])?(a.d(1),a=Et(n),e=n[3],a.c(),a.m(o.parentNode,o)):a.p(n,s):(a=Et(n),e=n[3],a.c(),a.m(o.parentNode,o)):e&&(a.d(1),a=null,e=n[3])},i(n){r||(w(a,n),r=!0)},o(n){C(a,n),r=!1},d(n){n&&L(o),a&&a.d(n)}}}function c1(l,e,o){let{$$slots:r={},$$scope:a}=e,{href:n=""}=e,{ariaLabel:s=""}=e,{className:u=""}=e,{as:d="button"}=e,{handleClick:p=c=>console.log("click",c)}=e,{handleKeyup:h=c=>console.log("keyup",c)}=e;return l.$$set=c=>{"href"in c&&o(0,n=c.href),"ariaLabel"in c&&o(1,s=c.ariaLabel),"className"in c&&o(2,u=c.className),"as"in c&&o(3,d=c.as),"handleClick"in c&&o(4,p=c.handleClick),"handleKeyup"in c&&o(5,h=c.handleKeyup),"$$scope"in c&&o(6,a=c.$$scope)},[n,s,u,d,p,h,a,r]}class Ut extends D{constructor(e){super(),j(this,e,c1,s1,W,{href:0,ariaLabel:1,className:2,as:3,handleClick:4,handleKeyup:5})}}function f1(l){let e,o;return{c(){e=y("img"),function Zr(l,e){return l===e||(kt||(kt=document.createElement("a")),kt.href=e,l===kt.href)}(e.src,o=l[0])||t(e,"src",o),t(e,"class","w-8 h-8 rounded"),t(e,"alt","")},m(r,a){B(r,e,a)},p:M,d(r){r&&L(e)}}}function u1(l){let e;return{c(){e=y("div"),t(e,"class","flex flex-shrink items-center max-w-[32px]"),xe(e,"position","relative")},m(o,r){B(o,e,r),e.innerHTML=l[0]},p:M,d(o){o&&L(e)}}}function d1(l){let e;let a=function o(n,s){return n[0].trimStart()?.startsWith("<svg")?u1:f1}(l)(l);return{c(){a.c(),e=ke()},m(n,s){a.m(n,s),B(n,e,s)},p(n,[s]){a.p(n,s)},i:M,o:M,d(n){n&&L(e),a.d(n)}}}function p1(l,e,o){let{theme:r}=e,{icon:a}=e;const n="string"==typeof a?a:"dark"===r?a.dark:a.light;return l.$$set=s=>{"theme"in s&&o(1,r=s.theme),"icon"in s&&o(2,a=s.icon)},[n,r,a]}class mr extends D{constructor(e){super(),j(this,e,p1,d1,W,{theme:1,icon:2})}}function Kt(l){let e,r,o=l[0].subtitle+"";return{c(){e=y("p"),r=P(o),t(e,"class","text-l2 text-subtle"),xe(e,"text-align","center")},m(a,n){B(a,e,n),i(e,r)},p(a,n){1&n&&o!==(o=a[0].subtitle+"")&&ge(r,o)},d(a){a&&L(e)}}}function h1(l){let e,o,r,a,s,u,d,p,h,n=(l[0].title??l[0].name)+"",c=l[0].subtitle&&Kt(l);return p=new mr({props:{icon:l[0].icon,theme:l[1]}}),{c(){e=y("div"),o=y("div"),r=y("div"),a=y("p"),s=P(n),u=K(),c&&c.c(),d=K(),Z(p.$$.fragment),t(a,"class","font-semibold text-[15px] text-primary"),t(r,"class","ml-[-32px]"),t(o,"class","flex flex-grow flex-col justify-center items-center"),t(e,"class","w-full flex flex-row-reverse justify-between")},m(g,m){B(g,e,m),i(e,o),i(o,r),i(r,a),i(a,s),i(r,u),c&&c.m(r,null),i(e,d),E(p,e,null),h=!0},p(g,m){(!h||1&m)&&n!==(n=(g[0].title??g[0].name)+"")&&ge(s,n),g[0].subtitle?c?c.p(g,m):(c=Kt(g),c.c(),c.m(r,null)):c&&(c.d(1),c=null);const b={};1&m&&(b.icon=g[0].icon),2&m&&(b.theme=g[1]),p.$set(b)},i(g){h||(w(p.$$.fragment,g),h=!0)},o(g){C(p.$$.fragment,g),h=!1},d(g){g&&L(e),c&&c.d(),$(p)}}}function g1(l){let e,o;return e=new Ut({props:{handleClick:l[3],handleKeyup:l[4],$$slots:{default:[h1]},$$scope:{ctx:l}}}),{c(){Z(e.$$.fragment)},m(r,a){E(e,r,a),o=!0},p(r,[a]){const n={};5&a&&(n.handleClick=r[3]),5&a&&(n.handleKeyup=r[4]),35&a&&(n.$$scope={dirty:a,ctx:r}),e.$set(n)},i(r){o||(w(e.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),o=!1},d(r){$(e,r)}}}function m1(l,e,o){let{wallet:r}=e,{theme:a}=e,{callback:n=async()=>{}}=e;return l.$$set=d=>{"wallet"in d&&o(0,r=d.wallet),"theme"in d&&o(1,a=d.theme),"callback"in d&&o(2,n=d.callback)},[r,a,n,()=>n(r),d=>{"Enter"===d.key&&n(r)}]}class b1 extends D{constructor(e){super(),j(this,e,m1,g1,W,{wallet:0,theme:1,callback:2})}}function Pt(l,e,o){const r=l.slice();return r[3]=e[o],r}function qt(l){let e,o,r;return o=new b1({props:{wallet:l[3],theme:l[0],callback:l[1]}}),{c(){e=y("li"),Z(o.$$.fragment)},m(a,n){B(a,e,n),E(o,e,null),r=!0},p(a,n){const s={};4&n&&(s.wallet=a[3]),1&n&&(s.theme=a[0]),2&n&&(s.callback=a[1]),o.$set(s)},i(a){r||(w(o.$$.fragment,a),r=!0)},o(a){C(o.$$.fragment,a),r=!1},d(a){a&&L(e),$(o)}}}function w1(l){let e,o,r,a=xt(l[2]),n=[];for(let u=0;u<a.length;u+=1)n[u]=qt(Pt(l,a,u));const s=u=>C(n[u],1,1,()=>{n[u]=null});return{c(){e=y("section"),o=y("ul");for(let u=0;u<n.length;u+=1)n[u].c();t(o,"class","flex flex-col gap-3")},m(u,d){B(u,e,d),i(e,o);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(o,null);r=!0},p(u,[d]){if(7&d){let p;for(a=xt(u[2]),p=0;p<a.length;p+=1){const h=Pt(u,a,p);n[p]?(n[p].p(h,d),w(n[p],1)):(n[p]=qt(h),n[p].c(),w(n[p],1),n[p].m(o,null))}for(ie(),p=a.length;p<n.length;p+=1)s(p);se()}},i(u){if(!r){for(let d=0;d<a.length;d+=1)w(n[d]);r=!0}},o(u){n=n.filter(Boolean);for(let d=0;d<n.length;d+=1)C(n[d]);r=!1},d(u){u&&L(e),pr(n,u)}}}function C1(l,e,o){let{theme:r}=e,{callback:a=async()=>{}}=e,{walletList:n}=e;return l.$$set=s=>{"theme"in s&&o(0,r=s.theme),"callback"in s&&o(1,a=s.callback),"walletList"in s&&o(2,n=s.walletList)},[r,a,n]}class _1 extends D{constructor(e){super(),j(this,e,C1,w1,W,{theme:0,callback:1,walletList:2})}}function v1(l){let e,o;return{c(){e=y("hr"),t(e,"class",o=`border-stroke-default w-full ${l[0]}`)},m(r,a){B(r,e,a)},p(r,[a]){1&a&&o!==(o=`border-stroke-default w-full ${r[0]}`)&&t(e,"class",o)},i:M,o:M,d(r){r&&L(e)}}}function k1(l,e,o){let{className:r=""}=e;return l.$$set=a=>{"className"in a&&o(0,r=a.className)},[r]}class Wt extends D{constructor(e){super(),j(this,e,k1,v1,W,{className:0})}}function y1(l){let e;return{c(){e=y("div"),e.innerHTML='<span class="text-primary">Connect to Ready mobile instead</span> <svg xmlns="http://www.w3.org/2000/svg" width="27" height="48" viewBox="0 0 27 48" fill="none"><path d="M10.9682 45.7174L3.14321 13.0668C2.75958 11.4692 3.43225 9.79803 4.82488 8.91515L15.5876 2.07812C16.2077 1.68398 16.9539 1.72077 17.5162 2.06761C16.3548 0.81687 14.8098 0.795849 14.1319 1.33714L2.86994 8.48948C1.26184 9.50899 0.484071 11.4377 0.925509 13.2875L8.40368 44.5034C8.78205 46.0905 12.014 47.6303 13.3751 46.7264V46.7159C12.4449 47.2782 11.2257 46.779 10.9682 45.7069V45.7174Z" fill="#8C8C8C" stroke="#0F0F0F" stroke-width="0.262761" stroke-miterlimit="10"></path><path d="M12.8282 43.2841L14.0632 46.164L13.3748 46.7315C12.0137 47.6354 8.78696 46.0957 8.40333 44.5086L7.67285 41.4658L12.8282 43.2841Z" fill="#0F0F0F" stroke="#0F0F0F" stroke-width="0.315313" stroke-miterlimit="10"></path><path d="M26.0828 35.1019L18.3313 3.18697C18.037 1.97827 16.6391 1.41596 15.5881 2.07812L4.82542 8.91515C3.43805 9.79802 2.76012 11.4639 3.14375 13.0668L10.9635 45.7174C11.2263 46.8105 12.4928 47.3097 13.4335 46.6896L24.3958 39.4111C25.8095 38.4705 26.4822 36.752 26.0828 35.1019Z" fill="#8C8C8C" stroke="#0F0F0F" stroke-width="0.262761" stroke-miterlimit="10"></path><path d="M25.3354 34.6552L18.1252 4.10667C17.852 2.95052 16.5644 2.40398 15.6027 3.03986L14.2627 3.92274L13.7739 5.66747C13.6846 5.98803 13.4849 6.26131 13.2064 6.44524L8.79724 9.39867C8.4031 9.66143 7.90386 9.70872 7.47293 9.51954L6.44291 9.0781L5.72294 9.55632C4.44593 10.3972 3.83106 11.9895 4.18842 13.524L11.4669 44.782C11.7139 45.8278 12.8805 46.3113 13.7424 45.7174L23.8061 38.7858C25.1042 37.8924 25.719 36.2423 25.3459 34.6657L25.3354 34.6552Z" fill="#FF875B" stroke="#0F0F0F" stroke-width="0.315313" stroke-miterlimit="10"></path><path d="M9.23809 7.71168C9.26962 7.80627 9.37998 7.82729 9.48508 7.75372L12.6802 5.60434C12.7854 5.53602 12.8432 5.39938 12.8116 5.30479C12.7801 5.2102 12.6697 5.18917 12.5646 5.26275L9.36947 7.41213C9.26436 7.48045 9.20655 7.61708 9.23809 7.71168Z" fill="#0F0F0F"></path><path d="M8.51836 8.563C8.68127 8.55249 8.80214 8.38432 8.78637 8.19513C8.77061 8.00069 8.62872 7.85354 8.47106 7.86406C8.30815 7.87457 8.18728 8.04273 8.20304 8.23192C8.21881 8.42636 8.3607 8.57351 8.51836 8.563Z" fill="#0F0F0F"></path><path d="M8.93919 33.951L10.6629 8.14795L8.79204 9.39869C8.4452 9.62992 8.01427 9.69298 7.62013 9.57737L6.46924 23.3723L8.93393 33.9563L8.93919 33.951Z" fill="#FFCBB8"></path><path d="M5.69775 20.0089L5.97103 21.1755L7.01681 9.31975L6.68048 9.17261L5.69775 20.0036V20.0089Z" fill="#FFCBB8"></path><path d="M25.3354 34.6552L18.1252 4.10667C17.852 2.95052 16.5644 2.40398 15.6027 3.03986L14.2627 3.92274L13.7739 5.66747C13.6846 5.98803 13.4849 6.26131 13.2064 6.44524L8.79724 9.39867C8.4031 9.66143 7.90385 9.70872 7.47293 9.51954L6.44291 9.0781L5.72294 9.55632C4.44593 10.3972 3.83106 11.9895 4.18842 13.524L11.4669 44.782C11.7139 45.8278 12.8805 46.3113 13.7424 45.7174L23.8061 38.7858C25.1042 37.8924 25.719 36.2423 25.3459 34.6657L25.3354 34.6552Z" stroke="#0F0F0F" stroke-width="0.262761" stroke-miterlimit="10"></path><path d="M7.28408 39.5635L9.71724 40.2257L3.94702 16.4038L1.56641 15.9729L7.28408 39.5688V39.5635Z" fill="#0F0F0F" stroke="#0F0F0F" stroke-width="0.315313" stroke-miterlimit="10"></path><path d="M2.99527 13.1299C2.6747 11.7741 3.01629 10.3447 4.1304 9.25683L2.51705 8.94678C1.32411 9.93476 0.824868 11.4167 1.00355 12.8514L2.99527 13.1299Z" fill="#F8F8F8"></path><path d="M14.7094 20.855L13.5585 21.4804C13.5217 21.5014 13.5007 21.5592 13.5165 21.6065C13.9422 23.0149 13.7898 24.6492 13.0698 26.1207C13.0488 26.168 13.0593 26.2258 13.0961 26.2573L14.2207 27.0929C14.2575 27.1192 14.31 27.1087 14.3363 27.0614C14.783 26.147 15.0563 25.1748 15.1509 24.2026C15.7867 24.7911 16.5487 25.2273 17.3948 25.4796C17.4369 25.4901 17.4789 25.4585 17.4894 25.406L17.7259 23.8347C17.7312 23.7821 17.7049 23.7296 17.6629 23.7191C16.3385 23.3092 15.3033 22.2949 14.8145 20.9075C14.7988 20.8602 14.7515 20.834 14.7147 20.855H14.7094Z" fill="white"></path></svg>',t(e,"class","flex flex-row-reverse items-center gap-2")},m(o,r){B(o,e,r)},p:M,d(o){o&&L(e)}}}function x1(l){let e,o,r,a,n;return o=new Wt({}),a=new Ut({props:{handleClick:l[0],handleKeyup:l[1],$$slots:{default:[y1]},$$scope:{ctx:l}}}),{c(){e=y("footer"),Z(o.$$.fragment),r=K(),Z(a.$$.fragment),t(e,"class","flex flex-col gap-4 w-full")},m(s,u){B(s,e,u),E(o,e,null),i(e,r),E(a,e,null),n=!0},p(s,[u]){const d={};1&u&&(d.handleClick=s[0]),1&u&&(d.handleKeyup=s[1]),4&u&&(d.$$scope={dirty:u,ctx:s}),a.$set(d)},i(s){n||(w(o.$$.fragment,s),w(a.$$.fragment,s),n=!0)},o(s){C(o.$$.fragment,s),C(a.$$.fragment,s),n=!1},d(s){s&&L(e),$(o),$(a)}}}function F1(l,e,o){let{handleClick:r=()=>{}}=e;return l.$$set=n=>{"handleClick"in n&&o(0,r=n.handleClick)},[r,n=>{"Enter"===n.key&&r()}]}class br extends D{constructor(e){super(),j(this,e,F1,x1,W,{handleClick:0})}}function Xt(l){let e,o;return e=new br({props:{handleClick:l[2]}}),{c(){Z(e.$$.fragment)},m(r,a){E(e,r,a),o=!0},p(r,a){const n={};4&a&&(n.handleClick=r[2]),e.$set(n)},i(r){o||(w(e.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),o=!1},d(r){$(e,r)}}}function L1(l){let e,o,r,a,n,s,u,d,p,h;const c=l[4].default,g=be(c,l,l[3],null);let m=l[1]&&Xt(l);return{c(){e=y("section"),o=y("div"),r=y("div"),g&&g.c(),a=K(),n=y("h3"),s=P("Connecting to "),u=P(l[0]),d=P("..."),p=K(),m&&m.c(),t(r,"class","bg-button-secondary rounded-full p-5"),t(n,"class","text-primary text-h4 font-bold"),t(o,"class","flex flex-col h-full justify-center items-center gap-4 w-full flex-grow"),t(e,"class","flex flex-col justify-center items-center flex-grow")},m(b,_){B(b,e,_),i(e,o),i(o,r),g&&g.m(r,null),i(o,a),i(o,n),i(n,s),i(n,u),i(n,d),i(e,p),m&&m.m(e,null),h=!0},p(b,[_]){g&&g.p&&(!h||8&_)&&Ce(g,c,b,b[3],h?we(c,b[3],_,null):_e(b[3]),null),(!h||1&_)&&ge(u,b[0]),b[1]?m?(m.p(b,_),2&_&&w(m,1)):(m=Xt(b),m.c(),w(m,1),m.m(e,null)):m&&(ie(),C(m,1,1,()=>{m=null}),se())},i(b){h||(w(g,b),w(m),h=!0)},o(b){C(g,b),C(m),h=!1},d(b){b&&L(e),g&&g.d(b),m&&m.d()}}}function B1(l,e,o){let{$$slots:r={},$$scope:a}=e,{walletName:n=""}=e,{showFallback:s=!1}=e,{handleFallback:u=async()=>{}}=e;return l.$$set=d=>{"walletName"in d&&o(0,n=d.walletName),"showFallback"in d&&o(1,s=d.showFallback),"handleFallback"in d&&o(2,u=d.handleFallback),"$$scope"in d&&o(3,a=d.$$scope)},[n,s,u,a,r]}class M1 extends D{constructor(e){super(),j(this,e,B1,L1,W,{walletName:0,showFallback:1,handleFallback:2})}}function S1(l){let e;return{c(){e=y("section"),e.innerHTML='<div class="flex flex-col h-full justify-center items-center gap-8 w-full flex-grow"><div><svg width="140" height="141" viewBox="0 0 140 141" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="mask0_82_210" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="140" height="141"><path d="M69.9639 140.094C108.42 140.094 139.595 108.92 139.595 70.4639C139.595 32.008 108.42 0.833313 69.9639 0.833313C31.508 0.833313 0.333344 32.008 0.333344 70.4639C0.333344 108.92 31.508 140.094 69.9639 140.094Z" fill="#BFBFBF"></path></mask><g mask="url(#mask0_82_210)"><path d="M69.9639 140.094C108.42 140.094 139.595 108.92 139.595 70.4639C139.595 32.008 108.42 0.833313 69.9639 0.833313C31.508 0.833313 0.333344 32.008 0.333344 70.4639C0.333344 108.92 31.508 140.094 69.9639 140.094Z" fill="#BFBFBF" fill-opacity="0.2"></path><circle opacity="0.5" cx="69.6835" cy="70.1833" r="28.5" stroke="#FF7A52" stroke-width="0.633333"></circle><circle opacity="0.4" cx="69.6835" cy="70.1833" r="36.1" stroke="#FF7A52" stroke-width="0.633333"></circle><circle opacity="0.2" cx="69.6834" cy="70.1833" r="50.0333" stroke="#FF7A52" stroke-width="0.633333"></circle><path d="M71.63 64.1667H68.3704C68.2614 64.1667 68.1742 64.2607 68.1718 64.3775C68.1059 67.6613 66.5044 70.7781 63.7479 72.9857C63.6603 73.0557 63.6404 73.1874 63.7044 73.2823L65.6115 76.1111C65.6764 76.2074 65.8028 76.2291 65.8918 76.1584C67.6154 74.7871 69.0018 73.1327 70.0002 71.2991C70.9985 73.1327 72.385 74.7871 74.1086 76.1584C74.1975 76.2291 74.3239 76.2074 74.3889 76.1111L76.296 73.2823C76.3599 73.1874 76.34 73.0557 76.2525 72.9857C73.4959 70.7781 71.8944 67.6613 71.8286 64.3775C71.8262 64.2607 71.7389 64.1667 71.63 64.1667Z" fill="#FF875B"></path><path d="M42.2656 41.1541L97.3366 41.1541C102.578 41.1541 106.827 45.4032 106.827 50.6448L106.827 170.156C106.827 175.398 102.578 179.647 97.3366 179.647L42.2656 179.647C37.0241 179.647 32.775 175.398 32.775 170.156L32.775 50.6447C32.775 45.4032 37.0241 41.1541 42.2656 41.1541Z" fill="#FF875B" stroke="black" stroke-width="3.51504"></path><path d="M44.6111 139.224L38.2837 139.224L31.9568 139.224L32.6599 47.1296L37.5617 41.0012L94.5247 40.803L44.6111 139.224Z" fill="white" fill-opacity="0.3"></path><path d="M42.266 41.1541L97.337 41.1541C102.578 41.1541 106.828 45.4032 106.828 50.6448L106.828 170.156C106.828 175.398 102.578 179.647 97.3369 179.647L42.2659 179.647C37.0244 179.647 32.7753 175.398 32.7753 170.156L32.7753 50.6447C32.7753 45.4032 37.0244 41.1541 42.266 41.1541Z" stroke="black" stroke-width="3.51504"></path><path d="M53.6909 39.3966L87.1044 39.3966L87.1044 40.9326C87.1044 44.0387 84.5865 46.5567 81.4804 46.5567L59.3149 46.5567C56.2088 46.5567 53.6909 44.0387 53.6909 40.9326L53.6909 39.3966Z" fill="black"></path><path d="M73.0967 82.5333H66.9034C66.6965 82.5333 66.5307 82.7164 66.5262 82.9439C66.401 89.3387 63.3581 95.4081 58.1207 99.7072C57.9544 99.8436 57.9165 100.1 58.0381 100.285L61.6616 105.793C61.7849 105.981 62.0251 106.023 62.1942 105.886C65.469 103.215 68.1031 99.9935 70 96.4228C71.897 99.9935 74.5312 103.215 77.8061 105.886C77.975 106.023 78.2152 105.981 78.3386 105.793L81.9622 100.285C82.0836 100.1 82.0457 99.8436 81.8796 99.7072C76.642 95.4081 73.5991 89.3387 73.4741 82.9439C73.4696 82.7164 73.3036 82.5333 73.0967 82.5333Z" fill="white"></path></g></svg></div> <hgroup class="flex flex-col gap-1"><h3 class="text-primary text-h4 font-bold">Approve the transaction</h3> <h4 class="text-primary text-p3">Open Ready on your phone to <br/> approve the transaction</h4></hgroup></div>',t(e,"class","flex flex-col justify-center items-center flex-grow")},m(o,r){B(o,e,r)},p:M,i:M,o:M,d(o){o&&L(e)}}}function N1(l){return[]}class E1 extends D{constructor(e){super(),j(this,e,N1,S1,W,{})}}var Qt=globalThis&&globalThis.__spreadArray||function(l,e,o){if(o||2===arguments.length)for(var n,r=0,a=e.length;r<a;r++)(n||!(r in e))&&(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return l.concat(n||Array.prototype.slice.call(e))},$1=function l(e,o,r){this.name=e,this.version=o,this.os=r,this.type="browser"},Z1=function l(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},A1=function l(e,o,r,a){this.name=e,this.version=o,this.os=r,this.bot=a,this.type="bot-device"},z1=function l(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},O1=function l(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},W1=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Yt=3,G1=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],Jt=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function I1(l){return l?er(l):typeof document>"u"&&typeof navigator<"u"&&"ReactNative"===navigator.product?new O1:typeof navigator<"u"?er(navigator.userAgent):function V1(){var l=typeof process<"u"&&process.version;return l?new Z1(process.version.slice(1)):null}()}function er(l){var e=function j1(l){return""!==l&&G1.reduce(function(e,o){var r=o[0],a=o[1];if(e)return e;var n=a.exec(l);return!!n&&[r,n]},!1)}(l);if(!e)return null;var o=e[0],r=e[1];if("searchbot"===o)return new z1;var a=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);a?a.length<Yt&&(a=Qt(Qt([],a,!0),function T1(l){for(var e=[],o=0;o<l;o++)e.push("0");return e}(Yt-a.length),!0)):a=[];var n=a.join("."),s=function D1(l){for(var e=0,o=Jt.length;e<o;e++){var r=Jt[e],a=r[0];if(r[1].exec(l))return a}return null}(l),u=W1.exec(l);return u&&u[1]?new A1(o,n,s,u[1]):new $1(o,n,s)}const R1=()=>{const e=I1()?.os?.toLowerCase();return e?.includes("android")?"android":e?.toLowerCase().includes("ios")||e?.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1?"ios":"desktop"};function H1(l){let e,o,r,a,n,s,u,d,p,h,c,g,m,b,_,F,A,O,S,v,x,N,G,z,k,U,V;return{c(){e=f("svg"),o=f("path"),r=f("path"),a=f("path"),n=f("path"),s=f("defs"),u=f("linearGradient"),d=f("stop"),p=f("stop"),h=f("stop"),c=f("stop"),g=f("stop"),m=f("stop"),b=f("linearGradient"),_=f("stop"),F=f("stop"),A=f("stop"),O=f("stop"),S=f("linearGradient"),v=f("stop"),x=f("stop"),N=f("linearGradient"),G=f("stop"),z=f("stop"),k=f("stop"),U=f("stop"),V=f("stop"),t(o,"d","M0.467777 0.822764C0.216151 1.08602 0.0705566 1.49585 0.0705566 2.02664V20.9585C0.0705566 21.4892 0.216151 21.8991 0.467777 22.1623L0.529877 22.2201L11.1456 11.6156V11.3652L0.529877 0.760742L0.467777 0.822764Z"),t(o,"fill","url(#paint0_linear_6328_20701)"),t(r,"d","M14.6806 15.1527L11.146 11.6161V11.3657L14.6849 7.8291L14.7642 7.87512L18.9551 10.2582C20.1512 10.9345 20.1512 12.0474 18.9551 12.728L14.7642 15.1067L14.6806 15.1527Z"),t(r,"fill","url(#paint1_linear_6328_20701)"),t(a,"d","M14.7646 15.1065L11.1464 11.4907L0.468628 22.1626C0.865912 22.58 1.51368 22.6302 2.25039 22.2129L14.7646 15.1065Z"),t(a,"fill","url(#paint2_linear_6328_20701)"),t(n,"d","M14.7646 7.87514L2.25039 0.768742C1.51368 0.355689 0.865912 0.405984 0.468628 0.823338L11.1464 11.4909L14.7646 7.87514Z"),t(n,"fill","url(#paint3_linear_6328_20701)"),t(d,"stop-color","#00A0FF"),t(p,"offset","0.0066"),t(p,"stop-color","#00A1FF"),t(h,"offset","0.2601"),t(h,"stop-color","#00BEFF"),t(c,"offset","0.5122"),t(c,"stop-color","#00D2FF"),t(g,"offset","0.7604"),t(g,"stop-color","#00DFFF"),t(m,"offset","1"),t(m,"stop-color","#00E3FF"),t(u,"id","paint0_linear_6328_20701"),t(u,"x1","10.2031"),t(u,"y1","21.1557"),t(u,"x2","-4.16375"),t(u,"y2","6.77945"),t(u,"gradientUnits","userSpaceOnUse"),t(_,"stop-color","#FFE000"),t(F,"offset","0.4087"),t(F,"stop-color","#FFBD00"),t(A,"offset","0.7754"),t(A,"stop-color","#FFA500"),t(O,"offset","1"),t(O,"stop-color","#FF9C00"),t(b,"id","paint1_linear_6328_20701"),t(b,"x1","20.5126"),t(b,"y1","11.4897"),t(b,"x2","-0.214967"),t(b,"y2","11.4897"),t(b,"gradientUnits","userSpaceOnUse"),t(v,"stop-color","#FF3A44"),t(x,"offset","1"),t(x,"stop-color","#C31162"),t(S,"id","paint2_linear_6328_20701"),t(S,"x1","12.7972"),t(S,"y1","9.52511"),t(S,"x2","-6.68541"),t(S,"y2","-9.97016"),t(S,"gradientUnits","userSpaceOnUse"),t(G,"stop-color","#32A071"),t(z,"offset","0.0685"),t(z,"stop-color","#2DA771"),t(k,"offset","0.4762"),t(k,"stop-color","#15CF74"),t(U,"offset","0.8009"),t(U,"stop-color","#06E775"),t(V,"offset","1"),t(V,"stop-color","#00F076"),t(N,"id","paint3_linear_6328_20701"),t(N,"x1","-2.2192"),t(N,"y1","28.4614"),t(N,"x2","6.48066"),t(N,"y2","19.756"),t(N,"gradientUnits","userSpaceOnUse"),t(e,"xmlns","http://www.w3.org/2000/svg"),t(e,"width","20"),t(e,"height","23"),t(e,"viewBox","0 0 20 23"),t(e,"fill","none")},m(R,X){B(R,e,X),i(e,o),i(e,r),i(e,a),i(e,n),i(e,s),i(s,u),i(u,d),i(u,p),i(u,h),i(u,c),i(u,g),i(u,m),i(s,b),i(b,_),i(b,F),i(b,A),i(b,O),i(s,S),i(S,v),i(S,x),i(s,N),i(N,G),i(N,z),i(N,k),i(N,U),i(N,V)},p:M,i:M,o:M,d(R){R&&L(e)}}}class wr extends D{constructor(e){super(),j(this,e,null,H1,W,{})}}function K1(l){let e,o,r,a,n,s,u,d,p;return{c(){e=f("svg"),o=f("mask"),r=f("path"),a=f("g"),n=f("path"),s=f("path"),u=f("path"),d=f("path"),p=f("path"),t(r,"d","M0.147583 10.7547C0.147583 4.81908 4.97505 0.00732422 10.93 0.00732422C16.885 0.00732422 21.7125 4.81908 21.7125 10.7547C21.7125 16.6903 16.885 21.502 10.93 21.502C4.97505 21.502 0.147583 16.6903 0.147583 10.7547Z"),t(r,"fill","#F1F1F1"),t(o,"id","mask0_6328_20691"),xe(o,"mask-type","alpha"),t(o,"maskUnits","userSpaceOnUse"),t(o,"x","0"),t(o,"y","0"),t(o,"width",l[0]),t(o,"height",l[0]),t(n,"d","M1.85962 0.00787449V13.1973H6.68474L10.9296 5.86942H21.712V0.00787449H1.85962ZM1.85962 0.00787449V13.1973H6.68474L10.9296 5.86942H21.712V0.00787449H1.85962Z"),t(n,"fill","#EA4335"),t(s,"d","M0.147583 21.502H10.4107L15.1749 16.7533V13.1981L6.68507 13.1967L0.147583 2.02082V21.502ZM0.147583 21.502H10.4107L15.1749 16.7533V13.1981L6.68507 13.1967L0.147583 2.02082V21.502Z"),t(s,"fill","#34A853"),t(u,"d","M10.9289 5.86867L15.1738 13.1965L10.411 21.502H21.7113V5.86867H10.9289ZM10.9289 5.86867L15.1738 13.1965L10.411 21.502H21.7113V5.86867H10.9289Z"),t(u,"fill","#FBBC05"),t(d,"d","M10.9297 5.86791C13.6369 5.86791 15.8314 8.05549 15.8314 10.7537C15.8314 13.4521 13.6369 15.6396 10.9297 15.6396C8.22245 15.6396 6.02795 13.4521 6.02795 10.7537C6.02795 8.05549 8.22245 5.86791 10.9297 5.86791Z"),t(d,"fill","#F1F1F1"),t(p,"d","M10.9286 6.84588C13.0943 6.84588 14.8499 8.59581 14.8499 10.7545C14.8499 12.9132 13.0943 14.6631 10.9286 14.6631C8.76284 14.6631 7.0072 12.9132 7.0072 10.7545C7.0072 8.59581 8.76284 6.84588 10.9286 6.84588Z"),t(p,"fill","#4285F4"),t(a,"mask","url(#mask0_6328_20691)"),t(e,"xmlns","http://www.w3.org/2000/svg"),t(e,"width",l[0]),t(e,"height",l[0]),t(e,"viewBox","0 0 22 22"),t(e,"fill","none")},m(h,c){B(h,e,c),i(e,o),i(o,r),i(e,a),i(a,n),i(a,s),i(a,u),i(a,d),i(a,p)},p(h,[c]){1&c&&t(o,"width",h[0]),1&c&&t(o,"height",h[0]),1&c&&t(e,"width",h[0]),1&c&&t(e,"height",h[0])},i:M,o:M,d(h){h&&L(e)}}}function P1(l,e,o){let{size:r="22"}=e;return l.$$set=a=>{"size"in a&&o(0,r=a.size)},[r]}class Cr extends D{constructor(e){super(),j(this,e,P1,K1,W,{size:0})}}function q1(l){let e,o,r;return{c(){e=f("svg"),o=f("path"),r=f("path"),t(o,"d","M17.71 13.7971C17.6815 10.6387 20.296 9.10219 20.4156 9.03069C18.9349 6.87185 16.6399 6.57692 15.8334 6.5534C13.9059 6.35052 12.0362 7.70675 11.0543 7.70675C10.0528 7.70675 8.54067 6.573 6.91107 6.60632C4.814 6.63862 2.85216 7.8528 1.77619 9.7382C-0.444353 13.5825 1.21174 19.2319 3.33916 22.3392C4.40337 23.8611 5.64695 25.5603 7.27459 25.5005C8.86703 25.4349 9.46182 24.4853 11.3835 24.4853C13.2875 24.4853 13.8461 25.5005 15.5061 25.4623C17.2151 25.4349 18.2911 23.9336 19.318 22.398C20.5479 20.6537 21.0418 18.9359 21.0614 18.8477C21.0212 18.834 17.7423 17.5826 17.71 13.7971Z"),t(o,"fill","currentColor"),t(r,"d","M14.5762 4.5089C15.4327 3.43787 16.0187 1.98066 15.856 0.501953C14.6164 0.55683 13.0662 1.3594 12.1734 2.40697C11.3836 3.33007 10.678 4.8431 10.8603 6.26597C12.2528 6.36984 13.6825 5.56332 14.5762 4.5089Z"),t(r,"fill","currentColor"),t(e,"xmlns","http://www.w3.org/2000/svg"),t(e,"width","22"),t(e,"height","26"),t(e,"viewBox","0 0 22 26"),t(e,"fill","none")},m(a,n){B(a,e,n),i(e,o),i(e,r)},p:M,i:M,o:M,d(a){a&&L(e)}}}class _r extends D{constructor(e){super(),j(this,e,null,q1,W,{})}}function X1(l){let e,o,r,a,n,s,u,d,p,h;return n=new Cr({}),u=new _r({}),p=new wr({}),{c(){e=y("div"),o=y("p"),o.textContent="Get it",r=K(),a=y("div"),Z(n.$$.fragment),s=K(),Z(u.$$.fragment),d=K(),Z(p.$$.fragment),t(o,"class","font-semibold text-p3 text-primary"),t(a,"class","flex gap-3 items-end"),xe(a,"position","relative"),t(e,"class","flex flex-row-reverse justify-center items-center gap-2")},m(c,g){B(c,e,g),i(e,o),i(e,r),i(e,a),E(n,a,null),i(a,s),E(u,a,null),i(a,d),E(p,a,null),h=!0},p:M,i(c){h||(w(n.$$.fragment,c),w(u.$$.fragment,c),w(p.$$.fragment,c),h=!0)},o(c){C(n.$$.fragment,c),C(u.$$.fragment,c),C(p.$$.fragment,c),h=!1},d(c){c&&L(e),$(n),$(u),$(p)}}}function Q1(l){let e,o,r,a,n,s,u,d,p,h;return o=new Wt({}),p=new Ut({props:{handleClick:l[1],handleKeyup:l[2],$$slots:{default:[X1]},$$scope:{ctx:l}}}),{c(){e=y("footer"),Z(o.$$.fragment),r=K(),a=y("p"),n=P("Don't have "),s=P(l[0]),u=P("?"),d=K(),Z(p.$$.fragment),t(a,"class","text-h5 text-primary"),t(e,"class","flex flex-col gap-4")},m(c,g){B(c,e,g),E(o,e,null),i(e,r),i(e,a),i(a,n),i(a,s),i(a,u),i(e,d),E(p,e,null),h=!0},p(c,[g]){(!h||1&g)&&ge(s,c[0]);const m={};2&g&&(m.handleClick=c[1]),2&g&&(m.handleKeyup=c[2]),8&g&&(m.$$scope={dirty:g,ctx:c}),p.$set(m)},i(c){h||(w(o.$$.fragment,c),w(p.$$.fragment,c),h=!0)},o(c){C(o.$$.fragment,c),C(p.$$.fragment,c),h=!1},d(c){c&&L(e),$(o),$(p)}}}function Y1(l,e,o){let{walletName:r=""}=e,{handleClick:a=()=>{}}=e;return l.$$set=s=>{"walletName"in s&&o(0,r=s.walletName),"handleClick"in s&&o(1,a=s.handleClick)},[r,a,s=>{"Enter"===s.key&&a()}]}class J1 extends D{constructor(e){super(),j(this,e,Y1,Q1,W,{walletName:0,handleClick:1})}}function eo(l){zr(l,"svelte-roekpq","@keyframes svelte-roekpq-dash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;transform:rotate(135deg)}100%{stroke-dashoffset:187;transform:rotate(450deg)}}@keyframes svelte-roekpq-rotator{0%{transform:rotate(0deg)}100%{transform:rotate(270deg)}}.spinner.svelte-roekpq.svelte-roekpq{color:#ff875b;animation:svelte-roekpq-rotator 1.4s linear infinite}.spinner.svelte-roekpq circle.svelte-roekpq{stroke:currentColor;stroke-dasharray:187;stroke-dashoffset:0;transform-origin:center;animation:svelte-roekpq-dash 1.4s ease-in-out infinite}")}function to(l){let e;return{c(){e=y("h3"),e.innerHTML="Connect Ready mobile by<br/>scanning QR code:",t(e,"class","mb-4 text-h5 text-primary font-semibold")},m(o,r){B(o,e,r)},d(o){o&&L(e)}}}function ro(l){let e;return{c(){e=y("h3"),e.textContent="Connecting to Ready mobile...",t(e,"class","mb-4 text-h5 text-primary font-semibold")},m(o,r){B(o,e,r)},d(o){o&&L(e)}}}function oo(l){let e,o,r,a,n,s,u;let h=function d(c,g){return c[1]?ro:to}(l)(l);return s=new J1({props:{walletName:"Ready",handleClick:l[0]}}),{c(){e=y("section"),o=y("div"),h.c(),r=K(),a=y("div"),a.innerHTML='<svg class="spinner svelte-roekpq" viewBox="0 0 66 66" width="100px" height="100px" xmlns="http://www.w3.org/2000/svg"><circle fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30" class="svelte-roekpq"></circle></svg>',n=K(),Z(s.$$.fragment),t(a,"class","w-full flex justify-center items-center qr-code-slot h-[245px]"),t(e,"class","flex flex-col gap-4")},m(c,g){B(c,e,g),i(e,o),h.m(o,null),i(o,r),i(o,a),i(e,n),E(s,e,null),u=!0},p(c,[g]){const m={};1&g&&(m.handleClick=c[0]),s.$set(m)},i(c){u||(w(s.$$.fragment,c),u=!0)},o(c){C(s.$$.fragment,c),u=!1},d(c){c&&L(e),h.d(),$(s)}}}function lo(l,e,o){const r=R1(),a=["android","ios"].includes(r);let{handleInstallClick:n=()=>{}}=e;return l.$$set=s=>{"handleInstallClick"in s&&o(0,n=s.handleInstallClick)},[n,a,r]}class ao extends D{constructor(e){super(),j(this,e,lo,oo,W,{device:2,handleInstallClick:0},eo)}get device(){return this.$$.ctx[2]}}function no(l){let e,o;return{c(){e=f("svg"),o=f("path"),t(o,"d","M37.5407 29.0784L23.8767 5.34867C23.4809 4.67181 22.9148 4.11038 22.2347 3.72021C21.5546 3.33005 20.7842 3.12476 20.0001 3.12476C19.216 3.12476 18.4456 3.33005 17.7655 3.72021C17.0854 4.11038 16.5193 4.67181 16.1235 5.34867L2.45947 29.0784C2.07544 29.7352 1.87305 30.4823 1.87305 31.2432C1.87305 32.0041 2.07544 32.7512 2.45947 33.408C2.85086 34.0883 3.41618 34.6521 4.09741 35.0418C4.77865 35.4314 5.55128 35.6328 6.33604 35.6252H33.6642C34.4484 35.6322 35.2204 35.4306 35.901 35.041C36.5817 34.6514 37.1465 34.0878 37.5376 33.408C37.9221 32.7515 38.125 32.0045 38.1256 31.2436C38.1261 30.4828 37.9243 29.7355 37.5407 29.0784ZM34.2907 31.5315C34.2272 31.6398 34.1356 31.7289 34.0255 31.7894C33.9155 31.8499 33.7912 31.8795 33.6657 31.8752H6.33604C6.21055 31.8795 6.08624 31.8499 5.97622 31.7894C5.86621 31.7289 5.77458 31.6398 5.71104 31.5315C5.65713 31.4438 5.6286 31.343 5.6286 31.2401C5.6286 31.1372 5.65713 31.0363 5.71104 30.9487L19.3751 7.21898C19.4428 7.11483 19.5354 7.02925 19.6445 6.96999C19.7537 6.91074 19.8759 6.87971 20.0001 6.87971C20.1243 6.87971 20.2465 6.91074 20.3557 6.96999C20.4648 7.02925 20.5574 7.11483 20.6251 7.21898L34.2876 30.9487C34.342 31.036 34.3711 31.1367 34.3716 31.2396C34.3722 31.3425 34.3442 31.4436 34.2907 31.5315ZM18.1251 21.2502V16.2502C18.1251 15.753 18.3226 15.276 18.6743 14.9244C19.0259 14.5728 19.5028 14.3752 20.0001 14.3752C20.4974 14.3752 20.9743 14.5728 21.3259 14.9244C21.6776 15.276 21.8751 15.753 21.8751 16.2502V21.2502C21.8751 21.7475 21.6776 22.2244 21.3259 22.5761C20.9743 22.9277 20.4974 23.1252 20.0001 23.1252C19.5028 23.1252 19.0259 22.9277 18.6743 22.5761C18.3226 22.2244 18.1251 21.7475 18.1251 21.2502ZM22.5001 27.5002C22.5001 27.9947 22.3535 28.478 22.0788 28.8892C21.8041 29.3003 21.4136 29.6207 20.9568 29.8099C20.5 29.9991 19.9973 30.0487 19.5124 29.9522C19.0274 29.8557 18.582 29.6176 18.2323 29.268C17.8827 28.9184 17.6446 28.4729 17.5481 27.988C17.4517 27.503 17.5012 27.0003 17.6904 26.5435C17.8796 26.0867 18.2001 25.6963 18.6112 25.4216C19.0223 25.1469 19.5056 25.0002 20.0001 25.0002C20.6631 25.0002 21.299 25.2636 21.7679 25.7325C22.2367 26.2013 22.5001 26.8372 22.5001 27.5002Z"),t(o,"fill","#DB3B4E"),t(e,"xmlns","http://www.w3.org/2000/svg"),t(e,"width","40"),t(e,"height","40"),t(e,"viewBox","0 0 40 40"),t(e,"fill","none")},m(r,a){B(r,e,a),i(e,o)},p:M,i:M,o:M,d(r){r&&L(e)}}}class vr extends D{constructor(e){super(),j(this,e,null,no,W,{})}}function $t(l){let e,o,r,a;const n=l[6].default,s=be(n,l,l[5],null);let u=[{class:l[0]},{href:l[1]},{rel:"noreferrer noopener"},{target:"_blank"},{role:"button"},{tabindex:"0"}],d={};for(let p=0;p<u.length;p+=1)d=Ft(d,u[p]);return{c(){e=y(l[2]),s&&s.c(),Ee(l[2])(e,d)},m(p,h){B(p,e,h),s&&s.m(e,null),o=!0,r||(a=[Ne(e,"click",function(){me(l[3])&&l[3].apply(this,arguments)}),Ne(e,"keyup",function(){me(l[4])&&l[4].apply(this,arguments)})],r=!0)},p(p,h){l=p,s&&s.p&&(!o||32&h)&&Ce(s,n,l,l[5],o?we(n,l[5],h,null):_e(l[5]),null),Ee(l[2])(e,d=Ot(u,[(!o||1&h)&&{class:l[0]},(!o||2&h)&&{href:l[1]},{rel:"noreferrer noopener"},{target:"_blank"},{role:"button"},{tabindex:"0"}]))},i(p){o||(w(s,p),o=!0)},o(p){C(s,p),o=!1},d(p){p&&L(e),s&&s.d(p),r=!1,ve(a)}}}function io(l){let o,r,e=l[2],a=l[2]&&$t(l);return{c(){a&&a.c(),o=ke()},m(n,s){a&&a.m(n,s),B(n,o,s),r=!0},p(n,[s]){n[2]?e?W(e,n[2])?(a.d(1),a=$t(n),e=n[2],a.c(),a.m(o.parentNode,o)):a.p(n,s):(a=$t(n),e=n[2],a.c(),a.m(o.parentNode,o)):e&&(a.d(1),a=null,e=n[2])},i(n){r||(w(a,n),r=!0)},o(n){C(a,n),r=!1},d(n){n&&L(o),a&&a.d(n)}}}function so(l,e,o){let{$$slots:r={},$$scope:a}=e,{className:n}=e,{href:s}=e,{as:u="a"}=e,{handleClick:d}=e,{handleKeyup:p}=e;return l.$$set=h=>{"className"in h&&o(0,n=h.className),"href"in h&&o(1,s=h.href),"as"in h&&o(2,u=h.as),"handleClick"in h&&o(3,d=h.handleClick),"handleKeyup"in h&&o(4,p=h.handleKeyup),"$$scope"in h&&o(5,a=h.$$scope)},[n,s,u,d,p,a,r]}class Gt extends D{constructor(e){super(),j(this,e,so,io,W,{className:0,href:1,as:2,handleClick:3,handleKeyup:4})}}function co(l){let e;const o=l[7].default,r=be(o,l,l[8],null);return{c(){r&&r.c()},m(a,n){r&&r.m(a,n),e=!0},p(a,n){r&&r.p&&(!e||256&n)&&Ce(r,o,a,a[8],e?we(o,a[8],n,null):_e(a[8]),null)},i(a){e||(w(r,a),e=!0)},o(a){C(r,a),e=!1},d(a){r&&r.d(a)}}}function fo(l){let e,o;return e=new Gt({props:{handleClick:l[3],handleKeyup:l[4],as:l[2],href:l[1],className:`\n        ${l[0]} ${l[5]} px-4\n        bg-button-secondary text-primary hover:bg-button-secondary-hover flex\n        min-w-[140px] text-b3 rounded-3xl justify-center items-center\n    `,$$slots:{default:[co]},$$scope:{ctx:l}}}),{c(){Z(e.$$.fragment)},m(r,a){E(e,r,a),o=!0},p(r,[a]){const n={};8&a&&(n.handleClick=r[3]),16&a&&(n.handleKeyup=r[4]),4&a&&(n.as=r[2]),2&a&&(n.href=r[1]),1&a&&(n.className=`\n        ${r[0]} ${r[5]} px-4\n        bg-button-secondary text-primary hover:bg-button-secondary-hover flex\n        min-w-[140px] text-b3 rounded-3xl justify-center items-center\n    `),256&a&&(n.$$scope={dirty:a,ctx:r}),e.$set(n)},i(r){o||(w(e.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),o=!1},d(r){$(e,r)}}}function uo(l,e,o){let{$$slots:r={},$$scope:a}=e,{className:n=""}=e,{href:s}=e,{as:u="button"}=e,{isLarge:d=!1}=e;const p=d?"min-h-12":"min-h-8";let{handleClick:h=g=>console.log("click",g)}=e,{handleKeyup:c=g=>console.log("keyup",g)}=e;return l.$$set=g=>{"className"in g&&o(0,n=g.className),"href"in g&&o(1,s=g.href),"as"in g&&o(2,u=g.as),"isLarge"in g&&o(6,d=g.isLarge),"handleClick"in g&&o(3,h=g.handleClick),"handleKeyup"in g&&o(4,c=g.handleKeyup),"$$scope"in g&&o(8,a=g.$$scope)},[n,s,u,h,c,p,d,r,a]}class kr extends D{constructor(e){super(),j(this,e,uo,fo,W,{className:0,href:1,as:2,isLarge:6,handleClick:3,handleKeyup:4})}}function po(l){let e,o;return{c(){e=f("svg"),o=f("path"),t(o,"d","M15.25 3.50011V6.50011C15.25 6.69902 15.171 6.88979 15.0303 7.03044C14.8897 7.17109 14.6989 7.25011 14.5 7.25011H11.5C11.3011 7.25011 11.1103 7.17109 10.9697 7.03044C10.829 6.88979 10.75 6.69902 10.75 6.50011C10.75 6.3012 10.829 6.11043 10.9697 5.96978C11.1103 5.82913 11.3011 5.75011 11.5 5.75011H12.5687L11.3812 4.66386C11.3731 4.65636 11.365 4.64886 11.3575 4.64074C10.8069 4.09046 10.1295 3.68394 9.38483 3.45695C8.64022 3.22996 7.85122 3.18945 7.08728 3.33899C6.32333 3.48853 5.60784 3.82353 5.00377 4.31452C4.39969 4.80552 3.92555 5.43745 3.62305 6.15472C3.32055 6.87199 3.19898 7.65261 3.26902 8.4279C3.33906 9.20319 3.59857 9.94938 4.02471 10.6008C4.45086 11.2523 5.03058 11.789 5.71287 12.1638C6.39516 12.5386 7.1591 12.7399 7.93748 12.7501H7.99998C9.21243 12.753 10.3795 12.2893 11.2594 11.4551C11.404 11.3184 11.597 11.2448 11.7959 11.2504C11.9948 11.2561 12.1833 11.3405 12.32 11.4851C12.4566 11.6297 12.5303 11.8227 12.5246 12.0216C12.519 12.2205 12.4346 12.4091 12.29 12.5457C11.1318 13.6435 9.59575 14.2537 7.99998 14.2501H7.91436C6.89126 14.2357 5.88735 13.9703 4.99078 13.4773C4.09421 12.9842 3.3324 12.2786 2.77224 11.4224C2.21208 10.5661 1.87071 9.58543 1.7781 8.56644C1.68548 7.54744 1.84447 6.52129 2.24108 5.57809C2.63769 4.63489 3.25981 3.80349 4.05281 3.15688C4.8458 2.51028 5.78541 2.06826 6.78915 1.86963C7.79288 1.671 8.83003 1.72184 9.80952 2.01768C10.789 2.31352 11.6809 2.84531 12.4069 3.56636L13.75 4.79511V3.50011C13.75 3.3012 13.829 3.11043 13.9697 2.96978C14.1103 2.82913 14.3011 2.75011 14.5 2.75011C14.6989 2.75011 14.8897 2.82913 15.0303 2.96978C15.171 3.11043 15.25 3.3012 15.25 3.50011Z"),t(o,"fill","currentColor"),t(e,"xmlns","http://www.w3.org/2000/svg"),t(e,"width","16"),t(e,"height","16"),t(e,"viewBox","0 0 16 16"),t(e,"fill","none")},m(r,a){B(r,e,a),i(e,o)},p:M,i:M,o:M,d(r){r&&L(e)}}}class ho extends D{constructor(e){super(),j(this,e,null,po,W,{})}}function go(l){let e,o,r,a,n;return o=new ho({}),{c(){e=y("div"),Z(o.$$.fragment),r=P(" Retry connecting to "),a=P(l[0]),t(e,"class","flex gap-2")},m(s,u){B(s,e,u),E(o,e,null),i(e,r),i(e,a),n=!0},p(s,u){(!n||1&u)&&ge(a,s[0])},i(s){n||(w(o.$$.fragment,s),n=!0)},o(s){C(o.$$.fragment,s),n=!1},d(s){s&&L(e),$(o)}}}function tr(l){let e,o;return e=new br({props:{handleClick:l[3]}}),{c(){Z(e.$$.fragment)},m(r,a){E(e,r,a),o=!0},p(r,a){const n={};8&a&&(n.handleClick=r[3]),e.$set(n)},i(r){o||(w(e.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),o=!1},d(r){$(e,r)}}}function mo(l){let e,o,r,a,n,s,u,d,p,h;a=new vr({}),d=new kr({props:{handleClick:l[2],handleKeyup:l[4],isLarge:!0,$$slots:{default:[go]},$$scope:{ctx:l}}});let c=l[1]&&tr(l);return{c(){e=y("section"),o=y("div"),r=y("div"),Z(a.$$.fragment),n=K(),s=y("div"),s.innerHTML='<h3 class="text-primary text-h4 font-bold">Couldn&#39;t connect</h3> <p class="text-primary text-p3 font-[400]">Please try connecting again.</p>',u=K(),Z(d.$$.fragment),p=K(),c&&c.c(),t(r,"class","bg-button-secondary rounded-full p-5"),t(o,"class","flex flex-col h-full justify-center items-center gap-4 w-full flex-grow"),t(e,"class","flex flex-col justify-center items-center flex-grow")},m(g,m){B(g,e,m),i(e,o),i(o,r),E(a,r,null),i(o,n),i(o,s),i(o,u),E(d,o,null),i(e,p),c&&c.m(e,null),h=!0},p(g,[m]){const b={};4&m&&(b.handleClick=g[2]),4&m&&(b.handleKeyup=g[4]),33&m&&(b.$$scope={dirty:m,ctx:g}),d.$set(b),g[1]?c?(c.p(g,m),2&m&&w(c,1)):(c=tr(g),c.c(),w(c,1),c.m(e,null)):c&&(ie(),C(c,1,1,()=>{c=null}),se())},i(g){h||(w(a.$$.fragment,g),w(d.$$.fragment,g),w(c),h=!0)},o(g){C(a.$$.fragment,g),C(d.$$.fragment,g),C(c),h=!1},d(g){g&&L(e),$(a),$(d),c&&c.d()}}}function bo(l,e,o){let{walletName:r=""}=e,{showFallback:a=!1}=e,{handleCallback:n=async()=>{}}=e,{handleFallback:s=async()=>{}}=e;return l.$$set=d=>{"walletName"in d&&o(0,r=d.walletName),"showFallback"in d&&o(1,a=d.showFallback),"handleCallback"in d&&o(2,n=d.handleCallback),"handleFallback"in d&&o(3,s=d.handleFallback)},[r,a,n,s,d=>{"Enter"===d.key&&n()}]}class wo extends D{constructor(e){super(),j(this,e,bo,mo,W,{walletName:0,showFallback:1,handleCallback:2,handleFallback:3})}}function Co(l){let e,o,r;return{c(){e=f("svg"),o=f("path"),r=f("path"),t(o,"d","M28.7868 15.1583C29.5186 13.9874 29.1627 12.445 27.9918 11.7133C26.821 10.9815 25.2786 11.3374 24.5468 12.5083L17.656 23.5335L13.1668 20.1666C12.0622 19.3382 10.4952 19.562 9.66681 20.6666C8.83839 21.7712 9.06224 23.3382 10.1668 24.1666L16.8335 29.1666C17.3934 29.5865 18.1037 29.7525 18.7917 29.6242C19.4798 29.4959 20.0825 29.0851 20.4535 28.4916L28.7868 15.1583Z"),t(o,"fill","#02A17A"),t(r,"fill-rule","evenodd"),t(r,"clip-rule","evenodd"),t(r,"d","M40 20.5C40 31.5457 31.0457 40.5 20 40.5C8.9543 40.5 0 31.5457 0 20.5C0 9.4543 8.9543 0.5 20 0.5C31.0457 0.5 40 9.4543 40 20.5ZM36.6667 20.5C36.6667 29.7047 29.2047 37.1667 20 37.1667C10.7953 37.1667 3.33333 29.7047 3.33333 20.5C3.33333 11.2953 10.7953 3.83333 20 3.83333C29.2047 3.83333 36.6667 11.2953 36.6667 20.5Z"),t(r,"fill","#02A17A"),t(e,"xmlns","http://www.w3.org/2000/svg"),t(e,"width","40"),t(e,"height","41"),t(e,"viewBox","0 0 40 41"),t(e,"fill","none")},m(a,n){B(a,e,n),i(e,o),i(e,r)},p:M,i:M,o:M,d(a){a&&L(e)}}}class _o extends D{constructor(e){super(),j(this,e,null,Co,W,{})}}function vo(l){let e,o,r,a,n,s;return r=new _o({}),{c(){e=y("section"),o=y("div"),Z(r.$$.fragment),a=K(),n=y("h3"),n.textContent="Success!",t(o,"class","bg-button-secondary rounded-full p-5"),t(n,"class","text-primary text-h4 font-bold"),t(e,"class","flex flex-col justify-center items-center gap-4 flex-grow")},m(u,d){B(u,e,d),i(e,o),E(r,o,null),i(e,a),i(e,n),s=!0},p:M,i(u){s||(w(r.$$.fragment,u),s=!0)},o(u){C(r.$$.fragment,u),s=!1},d(u){u&&L(e),$(r)}}}class ko extends D{constructor(e){super(),j(this,e,null,vo,W,{})}}function yo(l){let e,o,r,a,n,s,u,d,p,h,c,g,m,b,_,F,A,O,S,v,x,N,G,z,k,U,V,R,X,I,q,T,Y;return{c(){e=f("svg"),o=f("path"),r=f("path"),a=f("path"),n=f("path"),s=f("path"),u=f("path"),d=f("defs"),p=f("linearGradient"),h=f("stop"),c=f("stop"),g=f("radialGradient"),m=f("stop"),b=f("stop"),_=f("stop"),F=f("linearGradient"),A=f("stop"),O=f("stop"),S=f("stop"),v=f("stop"),x=f("radialGradient"),N=f("stop"),G=f("stop"),z=f("stop"),k=f("radialGradient"),U=f("stop"),V=f("stop"),R=f("stop"),X=f("stop"),I=f("stop"),q=f("radialGradient"),T=f("stop"),Y=f("stop"),t(o,"d","M18.9432 15.0009C18.6742 15.1415 18.3969 15.2653 18.1127 15.3717C17.208 15.7099 16.2497 15.8822 15.2839 15.8803C11.5552 15.8803 8.30719 13.3178 8.30719 10.0294C8.31196 9.58835 8.43446 9.15656 8.66205 8.77861C8.88963 8.40066 9.21405 8.09024 9.60182 7.87939C6.22931 8.0211 5.36255 11.5323 5.36255 13.5894C5.36255 19.4056 10.7278 19.9953 11.8838 19.9953C12.5071 19.9953 13.4471 19.8142 14.0113 19.6363L14.1145 19.6017C16.2856 18.8518 18.1364 17.3858 19.3624 15.4449C19.3999 15.3858 19.4167 15.3159 19.41 15.2462C19.4034 15.1765 19.3736 15.111 19.3256 15.0601C19.2775 15.0092 19.2138 14.9757 19.1445 14.965C19.0753 14.9543 19.0044 14.9669 18.9432 15.0009Z"),t(o,"fill","url(#paint0_linear_6297_45099)"),t(r,"opacity","0.35"),t(r,"d","M18.9432 15.0009C18.6742 15.1415 18.3969 15.2653 18.1127 15.3717C17.208 15.7099 16.2497 15.8822 15.2839 15.8803C11.5552 15.8803 8.30719 13.3178 8.30719 10.0294C8.31196 9.58835 8.43446 9.15656 8.66205 8.77861C8.88963 8.40066 9.21405 8.09024 9.60182 7.87939C6.22931 8.0211 5.36255 11.5323 5.36255 13.5894C5.36255 19.4056 10.7278 19.9953 11.8838 19.9953C12.5071 19.9953 13.4471 19.8142 14.0113 19.6363L14.1145 19.6017C16.2856 18.8518 18.1364 17.3858 19.3624 15.4449C19.3999 15.3858 19.4167 15.3159 19.41 15.2462C19.4034 15.1765 19.3736 15.111 19.3256 15.0601C19.2775 15.0092 19.2138 14.9757 19.1445 14.965C19.0753 14.9543 19.0044 14.9669 18.9432 15.0009Z"),t(r,"fill","url(#paint1_radial_6297_45099)"),t(a,"d","M9.06695 19.0054C8.36414 18.5696 7.75505 17.9985 7.27511 17.3254C6.7281 16.5766 6.35167 15.7174 6.17224 14.8078C5.99281 13.8983 6.01472 12.9606 6.23643 12.0605C6.45815 11.1603 6.8743 10.3195 7.45569 9.59705C8.03708 8.87459 8.76964 8.28797 9.60198 7.87832C9.84783 7.7626 10.2678 7.55319 10.8265 7.56342C11.2201 7.56628 11.6077 7.66017 11.9589 7.83773C12.3101 8.01529 12.6154 8.2717 12.8508 8.58685C13.169 9.01133 13.3444 9.5256 13.3519 10.0559C13.3519 10.0393 15.2793 3.78931 7.04818 3.78931C3.589 3.78931 0.74443 7.06902 0.74443 9.94645C0.730785 11.4686 1.05676 12.9746 1.69866 14.3551C2.7477 16.5914 4.5822 18.3649 6.85378 19.3388C9.12536 20.3128 11.6758 20.4194 14.0209 19.6384C13.1998 19.897 12.3323 19.9747 11.4783 19.8659C10.6243 19.7572 9.80398 19.4647 9.07405 19.0086L9.06695 19.0054Z"),t(a,"fill","url(#paint2_linear_6297_45099)"),t(n,"opacity","0.41"),t(n,"d","M9.06695 19.0054C8.36414 18.5696 7.75505 17.9985 7.27511 17.3254C6.7281 16.5766 6.35167 15.7174 6.17224 14.8078C5.99281 13.8983 6.01472 12.9606 6.23643 12.0605C6.45815 11.1603 6.8743 10.3195 7.45569 9.59705C8.03708 8.87459 8.76964 8.28797 9.60198 7.87832C9.84783 7.7626 10.2678 7.55319 10.8265 7.56342C11.2201 7.56628 11.6077 7.66017 11.9589 7.83773C12.3101 8.01529 12.6154 8.2717 12.8508 8.58685C13.169 9.01133 13.3444 9.5256 13.3519 10.0559C13.3519 10.0393 15.2793 3.78931 7.04818 3.78931C3.589 3.78931 0.74443 7.06902 0.74443 9.94645C0.730785 11.4686 1.05676 12.9746 1.69866 14.3551C2.7477 16.5914 4.5822 18.3649 6.85378 19.3388C9.12536 20.3128 11.6758 20.4194 14.0209 19.6384C13.1998 19.897 12.3323 19.9747 11.4783 19.8659C10.6243 19.7572 9.80398 19.4647 9.07405 19.0086L9.06695 19.0054Z"),t(n,"fill","url(#paint3_radial_6297_45099)"),t(s,"d","M12.7387 11.7191C12.6749 11.8018 12.4787 11.9159 12.4787 12.1647C12.4787 12.3702 12.6126 12.5678 12.8506 12.7339C13.9837 13.5211 16.1199 13.4172 16.1254 13.4172C16.965 13.4152 17.7887 13.1882 18.5106 12.7599C19.2388 12.335 19.8432 11.7273 20.2639 10.9971C20.6845 10.2668 20.9067 9.43939 20.9084 8.59685C20.9289 6.83261 20.278 5.6596 20.0148 5.14001C18.3451 1.87682 14.741 4.93329e-08 10.8216 4.93329e-08C8.17102 -0.000261808 5.62686 1.04193 3.7394 2.90118C1.85193 4.76042 0.772869 7.28727 0.735596 9.93519C0.773418 7.05855 3.63532 4.73535 7.03935 4.73535C7.31513 4.73535 8.88792 4.76212 10.3488 5.52812C11.6364 6.20359 12.3109 7.01919 12.7797 7.8277C13.2667 8.66771 13.3533 9.72893 13.3533 10.1517C13.3533 10.5744 13.1374 11.2011 12.7387 11.7191Z"),t(s,"fill","url(#paint4_radial_6297_45099)"),t(u,"d","M12.7387 11.7191C12.6749 11.8018 12.4787 11.9159 12.4787 12.1647C12.4787 12.3702 12.6126 12.5678 12.8506 12.7339C13.9837 13.5211 16.1199 13.4172 16.1254 13.4172C16.965 13.4152 17.7887 13.1882 18.5106 12.7599C19.2388 12.335 19.8432 11.7273 20.2639 10.9971C20.6845 10.2668 20.9067 9.43939 20.9084 8.59685C20.9289 6.83261 20.278 5.6596 20.0148 5.14001C18.3451 1.87682 14.741 4.93329e-08 10.8216 4.93329e-08C8.17102 -0.000261808 5.62686 1.04193 3.7394 2.90118C1.85193 4.76042 0.772869 7.28727 0.735596 9.93519C0.773418 7.05855 3.63532 4.73535 7.03935 4.73535C7.31513 4.73535 8.88792 4.76212 10.3488 5.52812C11.6364 6.20359 12.3109 7.01919 12.7797 7.8277C13.2667 8.66771 13.3533 9.72893 13.3533 10.1517C13.3533 10.5744 13.1374 11.2011 12.7387 11.7191Z"),t(u,"fill","url(#paint5_radial_6297_45099)"),t(h,"stop-color","#0C59A4"),t(c,"offset","1"),t(c,"stop-color","#114A8B"),t(p,"id","paint0_linear_6297_45099"),t(p,"x1","5.36255"),t(p,"y1","13.9389"),t(p,"x2","19.4152"),t(p,"y2","13.9389"),t(p,"gradientUnits","userSpaceOnUse"),t(m,"offset","0.72"),t(m,"stop-opacity","0"),t(b,"offset","0.95"),t(b,"stop-opacity","0.53"),t(_,"offset","1"),t(g,"id","paint1_radial_6297_45099"),t(g,"cx","0"),t(g,"cy","0"),t(g,"r","1"),t(g,"gradientUnits","userSpaceOnUse"),t(g,"gradientTransform","translate(13.124 14.0496) scale(7.51564 7.13342)"),t(A,"stop-color","#1B9DE2"),t(O,"offset","0.16"),t(O,"stop-color","#1595DF"),t(S,"offset","0.67"),t(S,"stop-color","#0680D7"),t(v,"offset","1"),t(v,"stop-color","#0078D4"),t(F,"id","paint2_linear_6297_45099"),t(F,"x1","12.7712"),t(F,"y1","7.84762"),t(F,"x2","4.00261"),t(F,"y2","17.4073"),t(F,"gradientUnits","userSpaceOnUse"),t(N,"offset","0.76"),t(N,"stop-opacity","0"),t(G,"offset","0.95"),t(G,"stop-opacity","0.5"),t(z,"offset","1"),t(x,"id","paint3_radial_6297_45099"),t(x,"cx","0"),t(x,"cy","0"),t(x,"r","1"),t(x,"gradientUnits","userSpaceOnUse"),t(x,"gradientTransform","translate(6.29839 15.6665) rotate(-81.3767) scale(11.2916 9.13031)"),t(U,"stop-color","#35C1F1"),t(V,"offset","0.11"),t(V,"stop-color","#34C1ED"),t(R,"offset","0.23"),t(R,"stop-color","#2FC2DF"),t(X,"offset","0.31"),t(X,"stop-color","#2BC3D2"),t(I,"offset","0.67"),t(I,"stop-color","#36C752"),t(k,"id","paint4_radial_6297_45099"),t(k,"cx","0"),t(k,"cy","0"),t(k,"r","1"),t(k,"gradientUnits","userSpaceOnUse"),t(k,"gradientTransform","translate(2.77348 3.72978) rotate(92.2927) scale(15.9492 33.9991)"),t(T,"stop-color","#66EB6E"),t(Y,"offset","1"),t(Y,"stop-color","#66EB6E"),t(Y,"stop-opacity","0"),t(q,"id","paint5_radial_6297_45099"),t(q,"cx","0"),t(q,"cy","0"),t(q,"r","1"),t(q,"gradientUnits","userSpaceOnUse"),t(q,"gradientTransform","translate(19.6525 6.09385) rotate(73.7259) scale(7.66371 6.23687)"),t(e,"xmlns","http://www.w3.org/2000/svg"),t(e,"width",l[0]),t(e,"height",l[0]),t(e,"viewBox","0 0 21 21"),t(e,"fill","none")},m(H,J){B(H,e,J),i(e,o),i(e,r),i(e,a),i(e,n),i(e,s),i(e,u),i(e,d),i(d,p),i(p,h),i(p,c),i(d,g),i(g,m),i(g,b),i(g,_),i(d,F),i(F,A),i(F,O),i(F,S),i(F,v),i(d,x),i(x,N),i(x,G),i(x,z),i(d,k),i(k,U),i(k,V),i(k,R),i(k,X),i(k,I),i(d,q),i(q,T),i(q,Y)},p(H,[J]){1&J&&t(e,"width",H[0]),1&J&&t(e,"height",H[0])},i:M,o:M,d(H){H&&L(e)}}}function xo(l,e,o){let{size:r="21"}=e;return l.$$set=a=>{"size"in a&&o(0,r=a.size)},[r]}class Fo extends D{constructor(e){super(),j(this,e,xo,yo,W,{size:0})}}function Lo(l){let e,o,r,a,n,s,u,d,p,h,c,g,m,b,_,F,A,O,S,v,x,N,G,z,k,U,V,R,X,I,q,T,Y,H,J,oe,ee,le,ae,te,Fe,De,Ve,Te,ue,Re,He,Ke,Pe,de,$e,Ze,Ae,ze,ne,Lt,qe,Xe,Qe,Ye,Je,ce,et,tt,rt,ot,lt,re,Bt,at,nt,it,st,ct,ft,ut,fe,dt,pt,ht,gt,mt,pe,bt,wt,Ct,_t,he,Oe,Ue,We,Ge;return{c(){e=f("svg"),o=f("path"),r=f("path"),a=f("path"),n=f("path"),s=f("path"),u=f("path"),d=f("path"),p=f("path"),h=f("path"),c=f("path"),g=f("path"),m=f("path"),b=f("defs"),_=f("linearGradient"),F=f("stop"),A=f("stop"),O=f("stop"),S=f("stop"),v=f("stop"),x=f("stop"),N=f("stop"),G=f("stop"),z=f("radialGradient"),k=f("stop"),U=f("stop"),V=f("stop"),R=f("stop"),X=f("stop"),I=f("stop"),q=f("stop"),T=f("stop"),Y=f("stop"),H=f("radialGradient"),J=f("stop"),oe=f("stop"),ee=f("stop"),le=f("stop"),ae=f("stop"),te=f("radialGradient"),Fe=f("stop"),De=f("stop"),Ve=f("stop"),Te=f("stop"),ue=f("radialGradient"),Re=f("stop"),He=f("stop"),Ke=f("stop"),Pe=f("stop"),de=f("radialGradient"),$e=f("stop"),Ze=f("stop"),Ae=f("stop"),ze=f("stop"),ne=f("radialGradient"),Lt=f("stop"),qe=f("stop"),Xe=f("stop"),Qe=f("stop"),Ye=f("stop"),Je=f("stop"),ce=f("radialGradient"),et=f("stop"),tt=f("stop"),rt=f("stop"),ot=f("stop"),lt=f("stop"),re=f("radialGradient"),Bt=f("stop"),at=f("stop"),nt=f("stop"),it=f("stop"),st=f("stop"),ct=f("stop"),ft=f("stop"),ut=f("stop"),fe=f("radialGradient"),dt=f("stop"),pt=f("stop"),ht=f("stop"),gt=f("stop"),mt=f("stop"),pe=f("radialGradient"),bt=f("stop"),wt=f("stop"),Ct=f("stop"),_t=f("stop"),he=f("linearGradient"),Oe=f("stop"),Ue=f("stop"),We=f("stop"),Ge=f("stop"),t(o,"d","M19.0292 6.76185C18.6047 5.74052 17.7437 4.63778 17.0694 4.28919C17.5504 5.22056 17.8841 6.22082 18.0588 7.25436L18.0605 7.27075C16.956 4.51705 15.083 3.40675 13.5533 0.989041C13.4759 0.866794 13.3985 0.744296 13.3232 0.614992C13.2801 0.54114 13.2455 0.474597 13.2155 0.413348C13.1521 0.290485 13.1032 0.160639 13.0698 0.0264442C13.0699 0.0202518 13.0677 0.0142596 13.0636 0.0096107C13.0595 0.00496183 13.0538 0.00198167 13.0477 0.00123872C13.0416 -0.000412908 13.0353 -0.000412908 13.0293 0.00123872C13.028 0.00123872 13.026 0.00350722 13.0245 0.00401132C13.023 0.00451543 13.0197 0.00678392 13.0174 0.00779214L13.0212 0.00123872C10.5674 1.43795 9.73491 4.09763 9.65828 5.42798C8.67837 5.49533 7.7415 5.85643 6.96987 6.46417C6.88936 6.39598 6.80522 6.3322 6.71781 6.27311C6.49522 5.494 6.48573 4.66943 6.69034 3.8854C5.78923 4.32194 4.98854 4.94076 4.33892 5.70271H4.33439C3.94723 5.21196 3.97445 3.59377 3.99663 3.25577C3.8821 3.3018 3.77277 3.35984 3.67047 3.42893C3.3287 3.67286 3.00919 3.94657 2.71569 4.24685C2.38124 4.58594 2.07578 4.95245 1.8025 5.34253V5.34404V5.34228C1.17444 6.23267 0.728971 7.23866 0.491813 8.30216L0.478706 8.36668C0.460306 8.45263 0.394016 8.88314 0.382674 8.97665C0.382674 8.98396 0.381161 8.99077 0.380405 8.99808C0.294893 9.44254 0.241905 9.89264 0.221863 10.3448L0.221863 10.3952C0.224005 12.8412 1.14363 15.1974 2.799 16.9982C4.45436 18.799 6.72502 19.9132 9.16221 20.1208C11.5994 20.3284 14.0258 19.6141 15.9618 18.1193C17.8979 16.6244 19.2027 14.4576 19.6185 12.0472C19.6349 11.9212 19.6482 11.7964 19.6628 11.6691C19.864 10.0061 19.6462 8.31919 19.0292 6.76185ZM7.76989 14.4087C7.81551 14.4306 7.85836 14.4543 7.90524 14.4752L7.91205 14.4795C7.86466 14.4568 7.81728 14.4332 7.76989 14.4087ZM18.0613 7.27302V7.26369L18.063 7.27402L18.0613 7.27302Z"),t(o,"fill","url(#paint0_linear_6297_45086)"),t(r,"d","M19.029 6.76123C18.6045 5.7399 17.7435 4.63717 17.0693 4.28857C17.5502 5.21995 17.8839 6.2202 18.0586 7.25374V7.26307L18.0603 7.2734C18.8133 9.42808 18.7044 11.7904 17.7564 13.8667C16.6367 16.269 13.9266 18.7313 9.68457 18.6116C5.10095 18.4818 1.0643 15.0805 0.309647 10.6257C0.172277 9.92326 0.309647 9.5671 0.37871 8.9962C0.284499 9.43966 0.231927 9.89095 0.22168 10.3442L0.22168 10.3946C0.223821 12.8406 1.14345 15.1968 2.79882 16.9976C4.45418 18.7983 6.72484 19.9126 9.16203 20.1202C11.5992 20.3278 14.0256 19.6135 15.9616 18.1186C17.8977 16.6237 19.2025 14.457 19.6183 12.0466C19.6347 11.9205 19.648 11.7958 19.6627 11.6685C19.8639 10.0055 19.646 8.31857 19.029 6.76123Z"),t(r,"fill","url(#paint1_radial_6297_45086)"),t(a,"d","M19.029 6.76123C18.6045 5.7399 17.7435 4.63717 17.0693 4.28857C17.5502 5.21995 17.8839 6.2202 18.0586 7.25374V7.26307L18.0603 7.2734C18.8133 9.42808 18.7044 11.7904 17.7564 13.8667C16.6367 16.269 13.9266 18.7313 9.68457 18.6116C5.10095 18.4818 1.0643 15.0805 0.309647 10.6257C0.172277 9.92326 0.309647 9.5671 0.37871 8.9962C0.284499 9.43966 0.231927 9.89095 0.22168 10.3442L0.22168 10.3946C0.223821 12.8406 1.14345 15.1968 2.79882 16.9976C4.45418 18.7983 6.72484 19.9126 9.16203 20.1202C11.5992 20.3278 14.0256 19.6135 15.9616 18.1186C17.8977 16.6237 19.2025 14.457 19.6183 12.0466C19.6347 11.9205 19.648 11.7958 19.6627 11.6685C19.8639 10.0055 19.646 8.31857 19.029 6.76123Z"),t(a,"fill","url(#paint2_radial_6297_45086)"),t(n,"d","M14.2817 7.91068C14.3029 7.92555 14.3225 7.94042 14.3425 7.95529C14.0971 7.52017 13.7916 7.12179 13.4351 6.7719C10.3988 3.73514 12.6393 0.187473 13.0172 0.00725419L13.0209 0.00170898C10.5672 1.43842 9.73464 4.0981 9.65802 5.42844C9.77195 5.42063 9.88487 5.41105 10.0013 5.41105C10.872 5.41265 11.7267 5.64477 12.4785 6.08382C13.2303 6.52287 13.8525 7.15319 14.2817 7.91068Z"),t(n,"fill","url(#paint3_radial_6297_45086)"),t(s,"d","M10.0075 8.5172C9.9914 8.76018 9.1329 9.59826 8.8327 9.59826C6.05481 9.59826 5.60388 11.2787 5.60388 11.2787C5.72688 12.6937 6.71292 13.8592 7.90489 14.4758C7.95933 14.504 8.01453 14.5295 8.06973 14.5544C8.16535 14.5968 8.26096 14.6359 8.35657 14.6719C8.76565 14.8166 9.19411 14.8993 9.62768 14.9171C14.4966 15.1455 15.4398 9.09466 11.9262 7.33885C12.7551 7.23099 13.5945 7.43481 14.2816 7.91076C13.8524 7.15327 13.2302 6.52295 12.4784 6.0839C11.7266 5.64485 10.8719 5.41273 10.0012 5.41113C9.88528 5.41113 9.77186 5.42071 9.65793 5.42852C8.67802 5.49588 7.74115 5.85698 6.96951 6.46472C7.11848 6.59075 7.2866 6.75912 7.64074 7.10822C8.30364 7.76129 10.0037 8.4378 10.0075 8.5172Z"),t(s,"fill","url(#paint4_radial_6297_45086)"),t(u,"d","M10.0075 8.5172C9.9914 8.76018 9.1329 9.59826 8.8327 9.59826C6.05481 9.59826 5.60388 11.2787 5.60388 11.2787C5.72688 12.6937 6.71292 13.8592 7.90489 14.4758C7.95933 14.504 8.01453 14.5295 8.06973 14.5544C8.16535 14.5968 8.26096 14.6359 8.35657 14.6719C8.76565 14.8166 9.19411 14.8993 9.62768 14.9171C14.4966 15.1455 15.4398 9.09466 11.9262 7.33885C12.7551 7.23099 13.5945 7.43481 14.2816 7.91076C13.8524 7.15327 13.2302 6.52295 12.4784 6.0839C11.7266 5.64485 10.8719 5.41273 10.0012 5.41113C9.88528 5.41113 9.77186 5.42071 9.65793 5.42852C8.67802 5.49588 7.74115 5.85698 6.96951 6.46472C7.11848 6.59075 7.2866 6.75912 7.64074 7.10822C8.30364 7.76129 10.0037 8.4378 10.0075 8.5172Z"),t(u,"fill","url(#paint5_radial_6297_45086)"),t(d,"d","M6.51447 6.1401C6.59361 6.19051 6.65889 6.23437 6.71611 6.27394C6.49352 5.49483 6.48403 4.67026 6.68864 3.88623C5.78753 4.32277 4.98683 4.94159 4.33722 5.70354C4.38486 5.70228 5.80191 5.67683 6.51447 6.1401Z"),t(d,"fill","url(#paint6_radial_6297_45086)"),t(p,"d","M0.310452 10.6269C1.06435 15.0817 5.10176 18.4829 9.68537 18.6127C13.9275 18.7327 16.6375 16.2701 17.7572 13.8678C18.7052 11.7915 18.8141 9.4292 18.0611 7.27452V7.2652C18.0611 7.25789 18.0596 7.2536 18.0611 7.25587L18.0629 7.27225C18.4095 9.53495 17.2586 11.7271 15.4594 13.2094L15.4539 13.222C11.9483 16.077 8.59347 14.9445 7.91443 14.4823C7.86705 14.4596 7.81966 14.436 7.77228 14.4115C5.72837 13.4345 4.88398 11.5723 5.06496 9.97529C4.57978 9.98245 4.10294 9.84875 3.6922 9.59039C3.28147 9.33204 2.95448 8.96011 2.75084 8.51967C3.28737 8.19098 3.89913 8.00516 4.52783 7.97992C5.15653 7.95468 5.78122 8.09087 6.34237 8.3755C7.49926 8.90069 8.81572 8.95244 10.0103 8.51967C10.0065 8.44028 8.30638 7.76351 7.64348 7.11069C7.28934 6.76159 7.12122 6.59347 6.97226 6.46719C6.89175 6.399 6.80761 6.33522 6.7202 6.27614C6.66223 6.23656 6.59695 6.19371 6.51856 6.14229C5.806 5.67902 4.38895 5.70448 4.34207 5.70574H4.33753C3.95037 5.21499 3.97759 3.59679 3.99978 3.25879C3.88524 3.30482 3.77591 3.36286 3.67362 3.43195C3.33184 3.67588 3.01233 3.94959 2.71883 4.24987C2.38319 4.58801 2.07645 4.95367 1.80186 5.34303V5.34454V5.34278C1.1738 6.23317 0.728333 7.23916 0.491175 8.30265C0.486386 8.32257 0.139307 9.83994 0.310452 10.6269Z"),t(p,"fill","url(#paint7_radial_6297_45086)"),t(h,"d","M13.435 6.77143C13.7917 7.12171 14.0972 7.52052 14.3424 7.95608C14.3961 7.99666 14.4463 8.03699 14.4889 8.07606C16.7037 10.1177 15.5432 13.0037 15.4568 13.2092C17.2559 11.7268 18.4058 9.5347 18.0603 7.27201C16.9552 4.51705 15.0822 3.40675 13.5525 0.989041C13.4751 0.866794 13.3977 0.744296 13.3224 0.614992C13.2793 0.54114 13.2447 0.474597 13.2148 0.413348C13.1513 0.290485 13.1024 0.160639 13.0691 0.0264442C13.0691 0.0202518 13.0669 0.0142596 13.0628 0.0096107C13.0587 0.00496183 13.053 0.00198167 13.0469 0.00123872C13.0409 -0.000412908 13.0345 -0.000412908 13.0285 0.00123872C13.0272 0.00123872 13.0252 0.00350721 13.0237 0.00401132C13.0222 0.00451543 13.0189 0.00678392 13.0166 0.00779214C12.6388 0.187003 10.3983 3.73467 13.435 6.77143Z"),t(h,"fill","url(#paint8_radial_6297_45086)"),t(c,"d","M14.488 8.07354C14.4454 8.03447 14.3952 7.99414 14.3415 7.95356C14.3216 7.93869 14.302 7.92382 14.2808 7.90895C13.5936 7.433 12.7542 7.22919 11.9253 7.33704C15.439 9.09386 14.4963 15.1437 9.62685 14.9153C9.19327 14.8975 8.76481 14.8148 8.35573 14.6701C8.26012 14.6343 8.16451 14.5951 8.0689 14.5526C8.0137 14.5274 7.9585 14.5022 7.90405 14.474L7.91086 14.4782C8.58989 14.9418 11.9437 16.0743 15.4503 13.218L15.4559 13.2054C15.5433 13.0012 16.7038 10.1144 14.488 8.07354Z"),t(c,"fill","url(#paint9_radial_6297_45086)"),t(g,"d","M5.60413 11.2781C5.60413 11.2781 6.05506 9.59766 8.83295 9.59766C9.13315 9.59766 9.9924 8.75958 10.0078 8.51659C8.81323 8.94936 7.49677 8.89761 6.33988 8.37242C5.77873 8.08779 5.15404 7.9516 4.52534 7.97684C3.89664 8.00208 3.28488 8.1879 2.74835 8.51659C2.95199 8.95703 3.27898 9.32896 3.68971 9.58731C4.10044 9.84567 4.57729 9.97937 5.06247 9.97221C4.88149 11.5695 5.72587 13.4317 7.76978 14.4084C7.81541 14.4303 7.85825 14.454 7.90514 14.4749C6.71216 13.8586 5.72713 12.6931 5.60413 11.2781Z"),t(g,"fill","url(#paint10_radial_6297_45086)"),t(m,"d","M19.0292 6.76185C18.6047 5.74052 17.7437 4.63778 17.0694 4.28919C17.5504 5.22056 17.8841 6.22082 18.0588 7.25436L18.0605 7.27075C16.956 4.51705 15.083 3.40675 13.5533 0.989041C13.4759 0.866794 13.3985 0.744296 13.3232 0.614992C13.2801 0.54114 13.2455 0.474597 13.2155 0.413348C13.1521 0.290485 13.1032 0.160639 13.0698 0.0264442C13.0699 0.0202518 13.0677 0.0142596 13.0636 0.0096107C13.0595 0.00496183 13.0538 0.00198167 13.0477 0.00123872C13.0416 -0.000412908 13.0353 -0.000412908 13.0293 0.00123872C13.028 0.00123872 13.026 0.00350722 13.0245 0.00401132C13.023 0.00451543 13.0197 0.00678392 13.0174 0.00779214L13.0212 0.00123872C10.5674 1.43795 9.73491 4.09763 9.65828 5.42798C9.77221 5.42016 9.88513 5.41058 10.0016 5.41058C10.8722 5.41218 11.7269 5.6443 12.4788 6.08335C13.2306 6.5224 13.8527 7.15272 14.282 7.91021C13.5948 7.43426 12.7554 7.23044 11.9265 7.3383C15.4402 9.09512 14.4975 15.1449 9.62804 14.9166C9.19446 14.8988 8.766 14.8161 8.35693 14.6713C8.26131 14.6355 8.1657 14.5964 8.07009 14.5539C8.01489 14.5287 7.95969 14.5035 7.90524 14.4752L7.91205 14.4795C7.86466 14.4568 7.81728 14.4332 7.76989 14.4087C7.81551 14.4306 7.85836 14.4543 7.90524 14.4752C6.71227 13.8587 5.72724 12.6932 5.60424 11.2782C5.60424 11.2782 6.05516 9.59772 8.83306 9.59772C9.13325 9.59772 9.99251 8.75963 10.0079 8.51665C10.0041 8.43726 8.30399 7.76049 7.64109 7.10767C7.28695 6.75857 7.11883 6.59045 6.96987 6.46417C6.88936 6.39598 6.80522 6.3322 6.71781 6.27311C6.49522 5.494 6.48573 4.66943 6.69034 3.8854C5.78923 4.32194 4.98854 4.94076 4.33892 5.70271H4.33439C3.94723 5.21196 3.97445 3.59377 3.99663 3.25577C3.8821 3.3018 3.77277 3.35984 3.67047 3.42893C3.3287 3.67286 3.00919 3.94657 2.71569 4.24685C2.38124 4.58594 2.07578 4.95245 1.8025 5.34253V5.34404V5.34228C1.17444 6.23267 0.728971 7.23866 0.491813 8.30216L0.478706 8.36668C0.460306 8.45263 0.377885 8.88919 0.366038 8.98295C0.366038 8.97565 0.366038 8.99001 0.366038 8.98295C0.290651 9.43359 0.242505 9.88837 0.221863 10.3448L0.221863 10.3952C0.224005 12.8412 1.14363 15.1974 2.799 16.9982C4.45436 18.799 6.72502 19.9132 9.16221 20.1208C11.5994 20.3284 14.0258 19.6141 15.9618 18.1193C17.8979 16.6244 19.2027 14.4576 19.6185 12.0472C19.6349 11.9212 19.6482 11.7964 19.6628 11.6691C19.864 10.0061 19.6462 8.31919 19.0292 6.76185ZM18.06 7.26369L18.0618 7.27402L18.06 7.26369Z"),t(m,"fill","url(#paint11_linear_6297_45086)"),t(F,"offset","0.048"),t(F,"stop-color","#FFF44F"),t(A,"offset","0.111"),t(A,"stop-color","#FFE847"),t(O,"offset","0.225"),t(O,"stop-color","#FFC830"),t(S,"offset","0.368"),t(S,"stop-color","#FF980E"),t(v,"offset","0.401"),t(v,"stop-color","#FF8B16"),t(x,"offset","0.462"),t(x,"stop-color","#FF672A"),t(N,"offset","0.534"),t(N,"stop-color","#FF3647"),t(G,"offset","0.705"),t(G,"stop-color","#E31587"),t(_,"id","paint0_linear_6297_45086"),t(_,"x1","17.7361"),t(_,"y1","3.12268"),t(_,"x2","1.51918"),t(_,"y2","18.769"),t(_,"gradientUnits","userSpaceOnUse"),t(k,"offset","0.129"),t(k,"stop-color","#FFBD4F"),t(U,"offset","0.186"),t(U,"stop-color","#FFAC31"),t(V,"offset","0.247"),t(V,"stop-color","#FF9D17"),t(R,"offset","0.283"),t(R,"stop-color","#FF980E"),t(X,"offset","0.403"),t(X,"stop-color","#FF563B"),t(I,"offset","0.467"),t(I,"stop-color","#FF3750"),t(q,"offset","0.71"),t(q,"stop-color","#F5156C"),t(T,"offset","0.782"),t(T,"stop-color","#EB0878"),t(Y,"offset","0.86"),t(Y,"stop-color","#E50080"),t(z,"id","paint1_radial_6297_45086"),t(z,"cx","0"),t(z,"cy","0"),t(z,"r","1"),t(z,"gradientUnits","userSpaceOnUse"),t(z,"gradientTransform","translate(16.9866 2.23629) scale(20.3653 20.3653)"),t(J,"offset","0.3"),t(J,"stop-color","#960E18"),t(oe,"offset","0.351"),t(oe,"stop-color","#B11927"),t(oe,"stop-opacity","0.74"),t(ee,"offset","0.435"),t(ee,"stop-color","#DB293D"),t(ee,"stop-opacity","0.343"),t(le,"offset","0.497"),t(le,"stop-color","#F5334B"),t(le,"stop-opacity","0.094"),t(ae,"offset","0.53"),t(ae,"stop-color","#FF3750"),t(ae,"stop-opacity","0"),t(H,"id","paint2_radial_6297_45086"),t(H,"cx","0"),t(H,"cy","0"),t(H,"r","1"),t(H,"gradientUnits","userSpaceOnUse"),t(H,"gradientTransform","translate(9.54495 10.5622) scale(20.3653 20.3653)"),t(Fe,"offset","0.132"),t(Fe,"stop-color","#FFF44F"),t(De,"offset","0.252"),t(De,"stop-color","#FFDC3E"),t(Ve,"offset","0.506"),t(Ve,"stop-color","#FF9D12"),t(Te,"offset","0.526"),t(Te,"stop-color","#FF980E"),t(te,"id","paint3_radial_6297_45086"),t(te,"cx","0"),t(te,"cy","0"),t(te,"r","1"),t(te,"gradientUnits","userSpaceOnUse"),t(te,"gradientTransform","translate(12.0001 -2.38427) scale(14.7538 14.7538)"),t(Re,"offset","0.353"),t(Re,"stop-color","#3A8EE6"),t(He,"offset","0.472"),t(He,"stop-color","#5C79F0"),t(Ke,"offset","0.669"),t(Ke,"stop-color","#9059FF"),t(Pe,"offset","1"),t(Pe,"stop-color","#C139E6"),t(ue,"id","paint4_radial_6297_45086"),t(ue,"cx","0"),t(ue,"cy","0"),t(ue,"r","1"),t(ue,"gradientUnits","userSpaceOnUse"),t(ue,"gradientTransform","translate(7.29217 15.8829) scale(9.6968 9.69679)"),t($e,"offset","0.206"),t($e,"stop-color","#9059FF"),t($e,"stop-opacity","0"),t(Ze,"offset","0.278"),t(Ze,"stop-color","#8C4FF3"),t(Ze,"stop-opacity","0.064"),t(Ae,"offset","0.747"),t(Ae,"stop-color","#7716A8"),t(Ae,"stop-opacity","0.45"),t(ze,"offset","0.975"),t(ze,"stop-color","#6E008B"),t(ze,"stop-opacity","0.6"),t(de,"id","paint5_radial_6297_45086"),t(de,"cx","0"),t(de,"cy","0"),t(de,"r","1"),t(de,"gradientUnits","userSpaceOnUse"),t(de,"gradientTransform","translate(10.6576 8.89437) rotate(-13.5916) scale(5.14118 6.01904)"),t(Lt,"stop-color","#FFE226"),t(qe,"offset","0.121"),t(qe,"stop-color","#FFDB27"),t(Xe,"offset","0.295"),t(Xe,"stop-color","#FFC82A"),t(Qe,"offset","0.502"),t(Qe,"stop-color","#FFA930"),t(Ye,"offset","0.732"),t(Ye,"stop-color","#FF7E37"),t(Je,"offset","0.792"),t(Je,"stop-color","#FF7139"),t(ne,"id","paint6_radial_6297_45086"),t(ne,"cx","0"),t(ne,"cy","0"),t(ne,"r","1"),t(ne,"gradientUnits","userSpaceOnUse"),t(ne,"gradientTransform","translate(9.28808 1.40453) scale(6.97586)"),t(et,"offset","0.113"),t(et,"stop-color","#FFF44F"),t(tt,"offset","0.456"),t(tt,"stop-color","#FF980E"),t(rt,"offset","0.622"),t(rt,"stop-color","#FF5634"),t(ot,"offset","0.716"),t(ot,"stop-color","#FF3647"),t(lt,"offset","0.904"),t(lt,"stop-color","#E31587"),t(ce,"id","paint7_radial_6297_45086"),t(ce,"cx","0"),t(ce,"cy","0"),t(ce,"r","1"),t(ce,"gradientUnits","userSpaceOnUse"),t(ce,"gradientTransform","translate(14.7705 -3.02052) scale(29.7629 29.7629)"),t(Bt,"stop-color","#FFF44F"),t(at,"offset","0.06"),t(at,"stop-color","#FFE847"),t(nt,"offset","0.168"),t(nt,"stop-color","#FFC830"),t(it,"offset","0.304"),t(it,"stop-color","#FF980E"),t(st,"offset","0.356"),t(st,"stop-color","#FF8B16"),t(ct,"offset","0.455"),t(ct,"stop-color","#FF672A"),t(ft,"offset","0.57"),t(ft,"stop-color","#FF3647"),t(ut,"offset","0.737"),t(ut,"stop-color","#E31587"),t(re,"id","paint8_radial_6297_45086"),t(re,"cx","0"),t(re,"cy","0"),t(re,"r","1"),t(re,"gradientUnits","userSpaceOnUse"),t(re,"gradientTransform","translate(12.262 -1.36605) rotate(83.976) scale(21.8139 14.3163)"),t(dt,"offset","0.137"),t(dt,"stop-color","#FFF44F"),t(pt,"offset","0.48"),t(pt,"stop-color","#FF980E"),t(ht,"offset","0.592"),t(ht,"stop-color","#FF5634"),t(gt,"offset","0.655"),t(gt,"stop-color","#FF3647"),t(mt,"offset","0.904"),t(mt,"stop-color","#E31587"),t(fe,"id","paint9_radial_6297_45086"),t(fe,"cx","0"),t(fe,"cy","0"),t(fe,"r","1"),t(fe,"gradientUnits","userSpaceOnUse"),t(fe,"gradientTransform","translate(9.12354 3.98625) scale(18.5815 18.5815)"),t(bt,"offset","0.094"),t(bt,"stop-color","#FFF44F"),t(wt,"offset","0.231"),t(wt,"stop-color","#FFE141"),t(Ct,"offset","0.509"),t(Ct,"stop-color","#FFAF1E"),t(_t,"offset","0.626"),t(_t,"stop-color","#FF980E"),t(pe,"id","paint10_radial_6297_45086"),t(pe,"cx","0"),t(pe,"cy","0"),t(pe,"r","1"),t(pe,"gradientUnits","userSpaceOnUse"),t(pe,"gradientTransform","translate(14.0286 5.07494) scale(20.3373 20.3373)"),t(Oe,"offset","0.167"),t(Oe,"stop-color","#FFF44F"),t(Oe,"stop-opacity","0.8"),t(Ue,"offset","0.266"),t(Ue,"stop-color","#FFF44F"),t(Ue,"stop-opacity","0.634"),t(We,"offset","0.489"),t(We,"stop-color","#FFF44F"),t(We,"stop-opacity","0.217"),t(Ge,"offset","0.6"),t(Ge,"stop-color","#FFF44F"),t(Ge,"stop-opacity","0"),t(he,"id","paint11_linear_6297_45086"),t(he,"x1","17.5413"),t(he,"y1","3.039"),t(he,"x2","3.74231"),t(he,"y2","16.8377"),t(he,"gradientUnits","userSpaceOnUse"),t(e,"xmlns","http://www.w3.org/2000/svg"),t(e,"width",l[0]),t(e,"height",l[0]),t(e,"viewBox","0 0 20 21"),t(e,"fill","none")},m(Le,vt){B(Le,e,vt),i(e,o),i(e,r),i(e,a),i(e,n),i(e,s),i(e,u),i(e,d),i(e,p),i(e,h),i(e,c),i(e,g),i(e,m),i(e,b),i(b,_),i(_,F),i(_,A),i(_,O),i(_,S),i(_,v),i(_,x),i(_,N),i(_,G),i(b,z),i(z,k),i(z,U),i(z,V),i(z,R),i(z,X),i(z,I),i(z,q),i(z,T),i(z,Y),i(b,H),i(H,J),i(H,oe),i(H,ee),i(H,le),i(H,ae),i(b,te),i(te,Fe),i(te,De),i(te,Ve),i(te,Te),i(b,ue),i(ue,Re),i(ue,He),i(ue,Ke),i(ue,Pe),i(b,de),i(de,$e),i(de,Ze),i(de,Ae),i(de,ze),i(b,ne),i(ne,Lt),i(ne,qe),i(ne,Xe),i(ne,Qe),i(ne,Ye),i(ne,Je),i(b,ce),i(ce,et),i(ce,tt),i(ce,rt),i(ce,ot),i(ce,lt),i(b,re),i(re,Bt),i(re,at),i(re,nt),i(re,it),i(re,st),i(re,ct),i(re,ft),i(re,ut),i(b,fe),i(fe,dt),i(fe,pt),i(fe,ht),i(fe,gt),i(fe,mt),i(b,pe),i(pe,bt),i(pe,wt),i(pe,Ct),i(pe,_t),i(b,he),i(he,Oe),i(he,Ue),i(he,We),i(he,Ge)},p(Le,[vt]){1&vt&&t(e,"width",Le[0]),1&vt&&t(e,"height",Le[0])},i:M,o:M,d(Le){Le&&L(e)}}}function Bo(l,e,o){let{size:r="21"}=e;return l.$$set=a=>{"size"in a&&o(0,r=a.size)},[r]}class Mo extends D{constructor(e){super(),j(this,e,Bo,Lo,W,{size:0})}}function So(l){let e,o,r,a,n,s,u,d,p,h,c,g,m,b,_,F,A,O,S,v,x;return{c(){e=f("svg"),o=f("g"),r=f("mask"),a=f("circle"),n=f("g"),s=f("path"),u=f("path"),d=f("path"),p=f("path"),h=f("path"),c=f("path"),g=f("path"),m=f("path"),b=f("path"),_=f("path"),F=f("path"),A=f("path"),O=f("path"),S=f("defs"),v=f("clipPath"),x=f("rect"),t(a,"cx","59.2004"),t(a,"cy","53.9996"),t(a,"r","53.9"),t(a,"fill","#F2F2F2"),t(r,"id","mask0_6297_45055"),xe(r,"mask-type","alpha"),t(r,"maskUnits","userSpaceOnUse"),t(r,"x","5"),t(r,"y","0"),t(r,"width","109"),t(r,"height","108"),t(s,"d","M59.4166 107.844C89.1694 107.844 113.289 83.7244 113.289 53.9717C113.289 24.219 89.1694 0.0996094 59.4166 0.0996094C29.6639 0.0996094 5.54456 24.219 5.54456 53.9717C5.54456 83.7244 29.6639 107.844 59.4166 107.844Z"),t(s,"fill","#BFBFBF"),t(s,"fill-opacity","0.2"),t(n,"mask","url(#mask0_6297_45055)"),t(u,"d","M54.8457 95.6447L39.8764 33.1839C39.1425 30.1277 40.4294 26.9308 43.0935 25.2418L63.6825 12.1625C64.8688 11.4086 66.2964 11.4789 67.3721 12.1424C65.1503 9.74977 62.1946 9.70956 60.8978 10.745L39.3537 24.4275C36.2774 26.3778 34.7895 30.0674 35.634 33.6061L49.9397 93.3224C50.6636 96.3585 56.8463 99.3041 59.4501 97.5749V97.5548C57.6707 98.6305 55.3383 97.6754 54.8457 95.6246V95.6447Z"),t(u,"fill","#8C8C8C"),t(u,"stroke","#0F0F0F"),t(u,"stroke-width","0.502662"),t(u,"stroke-miterlimit","10"),t(d,"d","M58.4029 90.9901L60.7654 96.4993L59.4484 97.5851C56.8446 99.3142 50.6719 96.3686 49.938 93.3325L48.5406 87.5117L58.4029 90.9901Z"),t(d,"fill","#0F0F0F"),t(d,"stroke","#0F0F0F"),t(d,"stroke-width","0.603195"),t(d,"stroke-miterlimit","10"),t(p,"d","M83.7591 75.3371L68.9305 14.2838C68.3676 11.9715 65.6934 10.8958 63.6827 12.1625L43.0937 25.2418C40.4396 26.9307 39.1428 30.1176 39.8767 33.1839L54.8359 95.6447C55.3385 97.7357 57.7614 98.6908 59.5609 97.5045L80.532 83.5808C83.2363 81.7812 84.5231 78.4938 83.7591 75.3371Z"),t(p,"fill","#8C8C8C"),t(p,"stroke","#0F0F0F"),t(p,"stroke-width","0.502662"),t(p,"stroke-miterlimit","10"),t(h,"d","M82.3298 74.4824L68.5367 16.0429C68.014 13.8312 65.5509 12.7857 63.7112 14.0021L61.1476 15.6911L60.2127 19.0288C60.0418 19.642 59.6597 20.1648 59.1269 20.5166L50.6922 26.1666C49.9382 26.6692 48.9832 26.7597 48.1588 26.3978L46.1884 25.5533L44.8111 26.4682C42.3681 28.0767 41.1919 31.1228 41.8755 34.0584L55.7993 93.855C56.2718 95.8556 58.5036 96.7805 60.1523 95.6445L79.4043 82.3843C81.8875 80.6752 83.0637 77.5185 82.3499 74.5026L82.3298 74.4824Z"),t(h,"fill","#FF875B"),t(h,"stroke","#0F0F0F"),t(h,"stroke-width","0.603195"),t(h,"stroke-miterlimit","10"),t(c,"d","M51.5376 22.9399C51.5979 23.1208 51.809 23.161 52.0101 23.0203L58.1224 18.9085C58.3235 18.7778 58.4341 18.5164 58.3738 18.3355C58.3134 18.1545 58.1023 18.1143 57.9013 18.255L51.7889 22.3668C51.5878 22.4975 51.4772 22.7589 51.5376 22.9399Z"),t(c,"fill","#0F0F0F"),t(g,"d","M50.1602 24.5681C50.4718 24.548 50.703 24.2263 50.6729 23.8643C50.6427 23.4924 50.3713 23.2109 50.0697 23.231C49.758 23.2511 49.5268 23.5728 49.557 23.9347C49.5871 24.3067 49.8586 24.5882 50.1602 24.5681Z"),t(g,"fill","#0F0F0F"),t(m,"d","M50.9649 73.1354L54.2624 23.7739L50.6834 26.1666C50.0199 26.6089 49.1955 26.7296 48.4415 26.5084L46.2399 52.8982L50.9548 73.1454L50.9649 73.1354Z"),t(m,"fill","#FFCBB8"),t(b,"d","M44.7614 46.4642L45.2841 48.696L47.2847 26.0159L46.6413 25.7344L44.7614 46.4541V46.4642Z"),t(b,"fill","#FFCBB8"),t(_,"d","M82.3298 74.4824L68.5367 16.0429C68.014 13.8312 65.5509 12.7857 63.7112 14.0021L61.1476 15.6911L60.2127 19.0288C60.0418 19.642 59.6597 20.1648 59.1269 20.5166L50.6922 26.1666C49.9382 26.6692 48.9832 26.7597 48.1588 26.3978L46.1884 25.5533L44.8111 26.4682C42.3681 28.0767 41.1919 31.1228 41.8755 34.0584L55.7993 93.8551C56.2718 95.8556 58.5036 96.7805 60.1523 95.6445L79.4043 82.3843C81.8875 80.6752 83.0637 77.5185 82.3499 74.5026L82.3298 74.4824Z"),t(_,"stroke","#0F0F0F"),t(_,"stroke-width","0.502662"),t(_,"stroke-miterlimit","10"),t(F,"d","M47.7989 83.8722L52.4535 85.1389L41.4151 39.5675L36.861 38.7432L47.7989 83.8822V83.8722Z"),t(F,"fill","#0F0F0F"),t(F,"stroke","#0F0F0F"),t(F,"stroke-width","0.603195"),t(F,"stroke-miterlimit","10"),t(A,"d","M39.5939 33.3041C38.9806 30.7104 39.6341 27.9759 41.7654 25.8949L38.679 25.3018C36.3969 27.1918 35.4419 30.0268 35.7837 32.7713L39.5939 33.3041Z"),t(A,"fill","#F8F8F8"),t(O,"d","M62.0044 48.0829L59.8027 49.2792C59.7324 49.3194 59.6921 49.43 59.7223 49.5205C60.5366 52.2147 60.2451 55.3413 58.8678 58.1562C58.8276 58.2467 58.8477 58.3573 58.9181 58.4176L61.0694 60.0161C61.1398 60.0663 61.2404 60.0462 61.2906 59.9557C62.1451 58.2065 62.6679 56.3466 62.8489 54.4868C64.0653 55.6127 65.523 56.4472 67.1416 56.9297C67.222 56.9498 67.3025 56.8895 67.3226 56.789L67.775 53.783C67.785 53.6825 67.7347 53.582 67.6543 53.5619C65.1209 52.7777 63.1404 50.8374 62.2055 48.1834C62.1753 48.0929 62.0848 48.0426 62.0145 48.0829H62.0044Z"),t(O,"fill","white"),t(o,"clip-path","url(#clip0_6297_45055)"),t(x,"width","117.6"),t(x,"height","107.8"),t(x,"fill","white"),t(x,"transform","translate(0.400024 0.100098)"),t(v,"id","clip0_6297_45055"),t(e,"xmlns","http://www.w3.org/2000/svg"),t(e,"width","118"),t(e,"height","108"),t(e,"viewBox","0 0 118 108"),t(e,"fill","none")},m(N,G){B(N,e,G),i(e,o),i(o,r),i(r,a),i(o,n),i(n,s),i(o,u),i(o,d),i(o,p),i(o,h),i(o,c),i(o,g),i(o,m),i(o,b),i(o,_),i(o,F),i(o,A),i(o,O),i(e,S),i(S,v),i(v,x)},p:M,i:M,o:M,d(N){N&&L(e)}}}class No extends D{constructor(e){super(),j(this,e,null,So,W,{})}}function Eo(l){let e,o,r,a,n,s,u,d,p,h,c,g,m,b,_,F,A,O,S,v,x,N,G,z,k,U,V,R,X,I,q,T,Y,H,J,oe,ee,le,ae;return{c(){e=f("svg"),o=f("mask"),r=f("ellipse"),a=f("g"),n=f("path"),s=f("rect"),u=f("ellipse"),d=f("rect"),p=f("rect"),h=f("rect"),c=f("rect"),g=f("rect"),m=f("rect"),b=f("path"),_=f("g"),F=f("path"),A=f("path"),O=f("rect"),S=f("rect"),v=f("path"),x=f("rect"),N=f("rect"),G=f("rect"),z=f("path"),k=f("rect"),U=f("rect"),V=f("rect"),R=f("rect"),X=f("path"),I=f("path"),q=f("defs"),T=f("filter"),Y=f("feFlood"),H=f("feColorMatrix"),J=f("feOffset"),oe=f("feGaussianBlur"),ee=f("feColorMatrix"),le=f("feBlend"),ae=f("feBlend"),t(r,"cx","59.2004"),t(r,"cy","55.0779"),t(r,"rx","53.9"),t(r,"ry","54.2667"),t(r,"fill","#F2F2F2"),t(o,"id","mask0_6297_45112"),xe(o,"mask-type","alpha"),t(o,"maskUnits","userSpaceOnUse"),t(o,"x","5"),t(o,"y","0"),t(o,"width","109"),t(o,"height","110"),t(n,"d","M59.4166 109.288C89.1694 109.288 113.289 85.005 113.289 55.0498C113.289 25.0947 89.1694 0.811279 59.4166 0.811279C29.6639 0.811279 5.54456 25.0947 5.54456 55.0498C5.54456 85.005 29.6639 109.288 59.4166 109.288Z"),t(n,"fill","#BFBFBF"),t(n,"fill-opacity","0.2"),t(s,"x","21.4704"),t(s,"y","22.5181"),t(s,"width","75.46"),t(s,"height","105.573"),t(s,"rx","4.9"),t(s,"fill","black"),t(u,"opacity","0.4"),t(u,"cx","59.2004"),t(u,"cy","45.2112"),t(u,"rx","9.31"),t(u,"ry","9.37333"),t(u,"fill","#FF875B"),t(d,"x","54.7904"),t(d,"y","44.2246"),t(d,"width","5.39"),t(d,"height","1.97333"),t(d,"rx","0.986666"),t(d,"fill","#8C8C8C"),t(p,"x","61.65"),t(p,"y","44.2244"),t(p,"width","1.96"),t(p,"height","1.97333"),t(p,"rx","0.98"),t(p,"fill","#8C8C8C"),t(h,"x","54.3004"),t(h,"y","28.438"),t(h,"width","10.29"),t(h,"height","1.48"),t(h,"rx","0.74"),t(h,"fill","#595959"),t(c,"x","26.3708"),t(c,"y","70.3047"),t(c,"width","65.66"),t(c,"height","11.76"),t(c,"rx","1.96"),t(c,"fill","#595959"),t(g,"x","36.1716"),t(g,"y","74.2246"),t(g,"width","18.62"),t(g,"height","1.47"),t(g,"rx","0.735"),t(g,"fill","#F9F9F9"),t(m,"x","36.1716"),t(m,"y","76.6748"),t(m,"width","34.3"),t(m,"height","1.47"),t(m,"rx","0.735"),t(m,"fill","#8C8C8C"),t(b,"fill-rule","evenodd"),t(b,"clip-rule","evenodd"),t(b,"d","M88.5198 76.1844C88.5198 74.8313 87.4229 73.7344 86.0698 73.7344H83.2114C81.8583 73.7344 80.7614 74.8313 80.7614 76.1844C80.7614 77.5375 81.8583 78.6344 83.2114 78.6344H86.0698C87.4229 78.6344 88.5198 77.5375 88.5198 76.1844Z"),t(b,"fill","#FF875B"),t(F,"fill-rule","evenodd"),t(F,"clip-rule","evenodd"),t(F,"d","M86.0698 78.2262C84.9422 78.2262 84.0281 77.3121 84.0281 76.1845C84.0281 75.0569 84.9422 74.1428 86.0698 74.1428C87.1974 74.1428 88.1115 75.0569 88.1115 76.1845C88.1115 77.3121 87.1974 78.2262 86.0698 78.2262Z"),t(F,"fill","black"),t(_,"filter","url(#filter0_d_6297_45112)"),t(A,"d","M29.8866 74.895C29.9417 74.8416 30.0165 74.8115 30.0945 74.8115H32.4465C32.5244 74.8115 32.5992 74.8416 32.6544 74.895C32.7095 74.9485 32.7405 75.021 32.7405 75.0966V75.9334C32.7405 77.2483 31.5889 77.6834 31.365 77.7557C31.3038 77.7768 31.2371 77.7768 31.176 77.7557C30.952 77.6834 29.8005 77.2483 29.8005 75.9334V75.0966C29.8005 75.021 29.8315 74.9485 29.8866 74.895Z"),t(A,"fill","white"),t(O,"x","26.3708"),t(O,"y","87.9446"),t(O,"width","65.66"),t(O,"height","6.86"),t(O,"rx","1.96"),t(O,"fill","#262626"),t(S,"x","35.6814"),t(S,"y","90.8845"),t(S,"width","34.79"),t(S,"height","1.47"),t(S,"rx","0.735"),t(S,"fill","#595959"),t(v,"d","M86.1501 90.3948L87.1301 91.3748L86.1501 92.3548"),t(v,"stroke","#595959"),t(v,"stroke-width","0.98"),t(v,"stroke-linecap","round"),t(v,"stroke-linejoin","round"),t(x,"x","30.7809"),t(x,"y","90.3945"),t(x,"width","2.45"),t(x,"height","2.45"),t(x,"rx","0.49"),t(x,"fill","#595959"),t(N,"x","26.3708"),t(N,"y","97.7446"),t(N,"width","65.66"),t(N,"height","6.86"),t(N,"rx","1.96"),t(N,"fill","#262626"),t(G,"x","35.6814"),t(G,"y","100.685"),t(G,"width","34.79"),t(G,"height","1.47"),t(G,"rx","0.735"),t(G,"fill","#595959"),t(z,"d","M86.1501 100.195L87.1301 101.175L86.1501 102.155"),t(z,"stroke","#595959"),t(z,"stroke-width","0.98"),t(z,"stroke-linecap","round"),t(z,"stroke-linejoin","round"),t(k,"x","30.7809"),t(k,"y","100.195"),t(k,"width","2.45"),t(k,"height","2.45"),t(k,"rx","0.49"),t(k,"fill","#595959"),t(U,"x","26.3707"),t(U,"y","60.5046"),t(U,"width","65.66"),t(U,"height","6.86"),t(U,"rx","1.96"),t(U,"fill","#0F0F0F"),t(V,"x","44.0114"),t(V,"y","63.4446"),t(V,"width","30.87"),t(V,"height","1.47"),t(V,"rx","0.735"),t(V,"fill","#595959"),t(R,"x","85.1715"),t(R,"y","62.9548"),t(R,"width","2.45"),t(R,"height","2.45"),t(R,"rx","0.49"),t(R,"fill","#595959"),t(a,"mask","url(#mask0_6297_45112)"),t(X,"d","M27.8414 29.7214L26.8614 28.7414L27.8414 27.7614"),t(X,"stroke","#595959"),t(X,"stroke-width","0.98"),t(X,"stroke-linecap","round"),t(X,"stroke-linejoin","round"),t(I,"d","M27.3512 28.7415L29.5562 28.7415"),t(I,"stroke","#595959"),t(I,"stroke-width","0.98"),t(I,"stroke-linecap","round"),t(Y,"flood-opacity","0"),t(Y,"result","BackgroundImageFix"),t(H,"in","SourceAlpha"),t(H,"type","matrix"),t(H,"values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"),t(H,"result","hardAlpha"),t(J,"dy","0.326667"),t(oe,"stdDeviation","0.163333"),t(ee,"type","matrix"),t(ee,"values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"),t(le,"mode","normal"),t(le,"in2","BackgroundImageFix"),t(le,"result","effect1_dropShadow_6297_45112"),t(ae,"mode","normal"),t(ae,"in","SourceGraphic"),t(ae,"in2","effect1_dropShadow_6297_45112"),t(ae,"result","shape"),t(T,"id","filter0_d_6297_45112"),t(T,"x","83.7014"),t(T,"y","74.1428"),t(T,"width","4.73671"),t(T,"height","4.73659"),t(T,"filterUnits","userSpaceOnUse"),t(T,"color-interpolation-filters","sRGB"),t(e,"width","118"),t(e,"height","110"),t(e,"viewBox","0 0 118 110"),t(e,"fill","none"),t(e,"xmlns","http://www.w3.org/2000/svg")},m(te,Fe){B(te,e,Fe),i(e,o),i(o,r),i(e,a),i(a,n),i(a,s),i(a,u),i(a,d),i(a,p),i(a,h),i(a,c),i(a,g),i(a,m),i(a,b),i(a,_),i(_,F),i(a,A),i(a,O),i(a,S),i(a,v),i(a,x),i(a,N),i(a,G),i(a,z),i(a,k),i(a,U),i(a,V),i(a,R),i(e,X),i(e,I),i(e,q),i(q,T),i(T,Y),i(T,H),i(T,J),i(T,oe),i(T,ee),i(T,le),i(T,ae)},p:M,i:M,o:M,d(te){te&&L(e)}}}class $o extends D{constructor(e){super(),j(this,e,null,Eo,W,{})}}function Zo(l){let e,o,r,a,n,s,u,d,p,h,c,g,m,b,_,F,A,O,S,v,x,N,G,z,k,U,V,R,X,I,q,T,Y,H,J,oe,ee;return{c(){e=f("svg"),o=f("mask"),r=f("ellipse"),a=f("g"),n=f("path"),s=f("rect"),u=f("ellipse"),d=f("rect"),p=f("rect"),h=f("rect"),c=f("rect"),g=f("rect"),m=f("rect"),b=f("path"),_=f("g"),F=f("path"),A=f("path"),O=f("rect"),S=f("rect"),v=f("path"),x=f("rect"),N=f("rect"),G=f("rect"),z=f("path"),k=f("rect"),U=f("rect"),V=f("rect"),R=f("rect"),X=f("defs"),I=f("filter"),q=f("feFlood"),T=f("feColorMatrix"),Y=f("feOffset"),H=f("feGaussianBlur"),J=f("feColorMatrix"),oe=f("feBlend"),ee=f("feBlend"),t(r,"cx","54.201"),t(r,"cy","54.2667"),t(r,"rx","53.9"),t(r,"ry","54.2667"),t(r,"fill","#F2F2F2"),t(o,"id","mask0_697_1274"),xe(o,"mask-type","alpha"),t(o,"maskUnits","userSpaceOnUse"),t(o,"x","0"),t(o,"y","0"),t(o,"width","109"),t(o,"height","109"),t(n,"d","M54.4182 108.477C84.171 108.477 108.29 84.1937 108.29 54.2386C108.29 24.2834 84.171 0 54.4182 0C24.6655 0 0.546143 24.2834 0.546143 54.2386C0.546143 84.1937 24.6655 108.477 54.4182 108.477Z"),t(n,"fill","#BFBFBF"),t(n,"fill-opacity","0.2"),t(s,"x","16.4709"),t(s,"y","21.7067"),t(s,"width","75.46"),t(s,"height","105.573"),t(s,"rx","4.9"),t(s,"fill","black"),t(u,"opacity","0.4"),t(u,"cx","54.2011"),t(u,"cy","44.3999"),t(u,"rx","9.31"),t(u,"ry","9.37333"),t(u,"fill","#6D6D6D"),t(d,"x","49.791"),t(d,"y","43.4133"),t(d,"width","5.39"),t(d,"height","1.97333"),t(d,"rx","0.986666"),t(d,"fill","#8C8C8C"),t(p,"x","56.6511"),t(p,"y","43.4133"),t(p,"width","1.96"),t(p,"height","1.97333"),t(p,"rx","0.98"),t(p,"fill","#8C8C8C"),t(h,"x","49.301"),t(h,"y","27.6266"),t(h,"width","10.29"),t(h,"height","1.48"),t(h,"rx","0.74"),t(h,"fill","#595959"),t(c,"x","21.3711"),t(c,"y","69.4933"),t(c,"width","65.66"),t(c,"height","11.76"),t(c,"rx","1.96"),t(c,"fill","#3A3A3A"),t(g,"x","31.1711"),t(g,"y","73.4133"),t(g,"width","18.62"),t(g,"height","1.47"),t(g,"rx","0.735"),t(g,"fill","#CDCDCD"),t(m,"x","31.1711"),t(m,"y","75.8633"),t(m,"width","34.3"),t(m,"height","1.47"),t(m,"rx","0.735"),t(m,"fill","#8C8C8C"),t(b,"fill-rule","evenodd"),t(b,"clip-rule","evenodd"),t(b,"d","M83.52 75.373C83.52 74.0199 82.4231 72.923 81.07 72.923H78.2117C76.8586 72.923 75.7617 74.0199 75.7617 75.373C75.7617 76.7261 76.8586 77.823 78.2117 77.823H81.07C82.4231 77.823 83.52 76.7261 83.52 75.373Z"),t(b,"fill","#919191"),t(F,"fill-rule","evenodd"),t(F,"clip-rule","evenodd"),t(F,"d","M81.0701 77.4147C79.9426 77.4147 79.0285 76.5006 79.0285 75.373C79.0285 74.2454 79.9426 73.3314 81.0701 73.3314C82.1977 73.3314 83.1118 74.2454 83.1118 75.373C83.1118 76.5006 82.1977 77.4147 81.0701 77.4147Z"),t(F,"fill","#CDCDCD"),t(_,"filter","url(#filter0_d_697_1274)"),t(A,"d","M24.8874 74.0835C24.9425 74.03 25.0173 74 25.0953 74H27.4473C27.5252 74 27.6 74.03 27.6552 74.0835C27.7103 74.137 27.7413 74.2095 27.7413 74.2851V75.1219C27.7413 76.4368 26.5897 76.8719 26.3658 76.9442C26.3046 76.9653 26.2379 76.9653 26.1768 76.9442C25.9528 76.8719 24.8013 76.4368 24.8013 75.1219V74.2851C24.8013 74.2095 24.8322 74.137 24.8874 74.0835Z"),t(A,"fill","#CDCDCD"),t(O,"x","21.3711"),t(O,"y","87.1334"),t(O,"width","65.66"),t(O,"height","6.86"),t(O,"rx","1.96"),t(O,"fill","#262626"),t(S,"x","30.6812"),t(S,"y","90.0734"),t(S,"width","34.79"),t(S,"height","1.47"),t(S,"rx","0.735"),t(S,"fill","#595959"),t(v,"d","M81.1511 89.5834L82.1311 90.5634L81.1511 91.5434"),t(v,"stroke","#595959"),t(v,"stroke-width","0.98"),t(v,"stroke-linecap","round"),t(v,"stroke-linejoin","round"),t(x,"x","25.7812"),t(x,"y","89.5834"),t(x,"width","2.45"),t(x,"height","2.45"),t(x,"rx","0.49"),t(x,"fill","#595959"),t(N,"x","21.3711"),t(N,"y","96.9333"),t(N,"width","65.66"),t(N,"height","6.86"),t(N,"rx","1.96"),t(N,"fill","#262626"),t(G,"x","30.6812"),t(G,"y","99.8734"),t(G,"width","34.79"),t(G,"height","1.47"),t(G,"rx","0.735"),t(G,"fill","#595959"),t(z,"d","M81.1511 99.3834L82.1311 100.363L81.1511 101.343"),t(z,"stroke","#595959"),t(z,"stroke-width","0.98"),t(z,"stroke-linecap","round"),t(z,"stroke-linejoin","round"),t(k,"x","25.7812"),t(k,"y","99.3834"),t(k,"width","2.45"),t(k,"height","2.45"),t(k,"rx","0.49"),t(k,"fill","#595959"),t(U,"x","21.3711"),t(U,"y","59.6934"),t(U,"width","65.66"),t(U,"height","6.86"),t(U,"rx","1.96"),t(U,"fill","#0F0F0F"),t(V,"x","39.0112"),t(V,"y","62.6334"),t(V,"width","30.87"),t(V,"height","1.47"),t(V,"rx","0.735"),t(V,"fill","#595959"),t(R,"x","80.1711"),t(R,"y","62.1434"),t(R,"width","2.45"),t(R,"height","2.45"),t(R,"rx","0.49"),t(R,"fill","#595959"),t(a,"mask","url(#mask0_697_1274)"),t(q,"flood-opacity","0"),t(q,"result","BackgroundImageFix"),t(T,"in","SourceAlpha"),t(T,"type","matrix"),t(T,"values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"),t(T,"result","hardAlpha"),t(Y,"dy","0.326667"),t(H,"stdDeviation","0.163333"),t(J,"type","matrix"),t(J,"values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"),t(oe,"mode","normal"),t(oe,"in2","BackgroundImageFix"),t(oe,"result","effect1_dropShadow_697_1274"),t(ee,"mode","normal"),t(ee,"in","SourceGraphic"),t(ee,"in2","effect1_dropShadow_697_1274"),t(ee,"result","shape"),t(I,"id","filter0_d_697_1274"),t(I,"x","78.7019"),t(I,"y","73.3314"),t(I,"width","4.73659"),t(I,"height","4.73665"),t(I,"filterUnits","userSpaceOnUse"),t(I,"color-interpolation-filters","sRGB"),t(e,"width","109"),t(e,"height","109"),t(e,"viewBox","0 0 109 109"),t(e,"fill","none"),t(e,"xmlns","http://www.w3.org/2000/svg")},m(le,ae){B(le,e,ae),i(e,o),i(o,r),i(e,a),i(a,n),i(a,s),i(a,u),i(a,d),i(a,p),i(a,h),i(a,c),i(a,g),i(a,m),i(a,b),i(a,_),i(_,F),i(a,A),i(a,O),i(a,S),i(a,v),i(a,x),i(a,N),i(a,G),i(a,z),i(a,k),i(a,U),i(a,V),i(a,R),i(e,X),i(X,I),i(I,q),i(I,T),i(I,Y),i(I,H),i(I,J),i(I,oe),i(I,ee)},p:M,i:M,o:M,d(le){le&&L(e)}}}class Ao extends D{constructor(e){super(),j(this,e,null,Zo,W,{})}}const zo=l=>({}),rr=l=>({}),Oo=l=>({}),or=l=>({}),Uo=l=>({}),lr=l=>({});function Wo(l){let e;const o=l[4].button,r=be(o,l,l[6],or);return{c(){r&&r.c()},m(a,n){r&&r.m(a,n),e=!0},p(a,n){r&&r.p&&(!e||64&n)&&Ce(r,o,a,a[6],e?we(o,a[6],n,Oo):_e(a[6]),or)},i(a){e||(w(r,a),e=!0)},o(a){C(r,a),e=!1},d(a){r&&r.d(a)}}}function Go(l){let e,o,r,a,n,s,u,d,p,h,c,g,m,b,_;const F=l[4].icons,A=be(F,l,l[6],lr);g=new kr({props:{as:l[3]?"button":"a",href:l[2],handleClick:l[3],handleKeyup:l[5],className:"bg-button-secondary text-primary hover:bg-button-secondary-hover flex w-full h-[32px] text-b3 rounded-3xl justify-center items-center",$$slots:{default:[Wo]},$$scope:{ctx:l}}});const O=l[4].graphic,S=be(O,l,l[6],rr);return{c(){e=y("div"),o=y("div"),r=y("div"),a=y("h4"),n=P(l[0]),s=K(),u=y("p"),d=P(l[1]),p=K(),h=y("div"),A&&A.c(),c=K(),Z(g.$$.fragment),m=K(),b=y("div"),S&&S.c(),t(a,"class","text-heading5 text-primary capitalize"),t(u,"class","text-l1 text-secondary-web"),t(r,"class","flex flex-col gap-1 text-left"),t(h,"class","flex gap-3 text-primary"),t(o,"class","flex flex-col gap-3"),t(b,"class","flex items-center"),t(e,"class","flex flex-row gap-3 px-4 py-3 rounded-xl bg-surface-elevated")},m(v,x){B(v,e,x),i(e,o),i(o,r),i(r,a),i(a,n),i(r,s),i(r,u),i(u,d),i(o,p),i(o,h),A&&A.m(h,null),i(o,c),E(g,o,null),i(e,m),i(e,b),S&&S.m(b,null),_=!0},p(v,[x]){(!_||1&x)&&ge(n,v[0]),(!_||2&x)&&ge(d,v[1]),A&&A.p&&(!_||64&x)&&Ce(A,F,v,v[6],_?we(F,v[6],x,Uo):_e(v[6]),lr);const N={};8&x&&(N.as=v[3]?"button":"a"),4&x&&(N.href=v[2]),8&x&&(N.handleClick=v[3]),8&x&&(N.handleKeyup=v[5]),64&x&&(N.$$scope={dirty:x,ctx:v}),g.$set(N),S&&S.p&&(!_||64&x)&&Ce(S,O,v,v[6],_?we(O,v[6],x,zo):_e(v[6]),rr)},i(v){_||(w(A,v),w(g.$$.fragment,v),w(S,v),_=!0)},o(v){C(A,v),C(g.$$.fragment,v),C(S,v),_=!1},d(v){v&&L(e),A&&A.d(v),$(g),S&&S.d(v)}}}function Io(l,e,o){let{$$slots:r={},$$scope:a}=e,{title:n}=e,{subtitle:s}=e,{link:u}=e,{handleClick:d}=e;return l.$$set=h=>{"title"in h&&o(0,n=h.title),"subtitle"in h&&o(1,s=h.subtitle),"link"in h&&o(2,u=h.link),"handleClick"in h&&o(3,d=h.handleClick),"$$scope"in h&&o(6,a=h.$$scope)},[n,s,u,d,r,h=>{d&&"Enter"===h.key&&d()},a]}class yr extends D{constructor(e){super(),j(this,e,Io,Go,W,{title:0,subtitle:1,link:2,handleClick:3})}}function ar(l,e,o){const r=l.slice();return r[9]=e[o],r[11]=o,r}function nr(l){let e,o;return e=new yr({props:{title:"Ready mobile",subtitle:"Download Ready wallet on your mobile.",link:"https://www.argent.xyz/app",$$slots:{graphic:[Vo],button:[Do],icons:[jo]},$$scope:{ctx:l}}}),{c(){Z(e.$$.fragment)},m(r,a){E(e,r,a),o=!0},i(r){o||(w(e.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),o=!1},d(r){$(e,r)}}}function jo(l){let e,o,r,a;return e=new _r({}),r=new wr({}),{c(){Z(e.$$.fragment),o=K(),Z(r.$$.fragment)},m(n,s){E(e,n,s),B(n,o,s),E(r,n,s),a=!0},i(n){a||(w(e.$$.fragment,n),w(r.$$.fragment,n),a=!0)},o(n){C(e.$$.fragment,n),C(r.$$.fragment,n),a=!1},d(n){n&&L(o),$(e,n),$(r,n)}}}function Do(l){let e;return{c(){e=P("Download")},m(o,r){B(o,e,r)},d(o){o&&L(e)}}}function Vo(l){let e,o;return e=new No({}),{c(){Z(e.$$.fragment)},m(r,a){E(e,r,a),o=!0},i(r){o||(w(e.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),o=!1},d(r){$(e,r)}}}function To(l){let e,o,r,a,n,s,u,d,p=l[4].length>0&&function Ho(l){let e,r,a,n,s,o=" ",u=xt(l[4]),d=[];for(let h=0;h<u.length;h+=1)d[h]=ir(ar(l,u,h));const p=h=>C(d[h],1,1,()=>{d[h]=null});return{c(){e=P("Try on other browsers:"),r=P(o),a=K();for(let h=0;h<d.length;h+=1)d[h].c();n=ke()},m(h,c){B(h,e,c),B(h,r,c),B(h,a,c);for(let g=0;g<d.length;g+=1)d[g]&&d[g].m(h,c);B(h,n,c),s=!0},p(h,c){if(16&c){let g;for(u=xt(h[4]),g=0;g<u.length;g+=1){const m=ar(h,u,g);d[g]?(d[g].p(m,c),w(d[g],1)):(d[g]=ir(m),d[g].c(),w(d[g],1),d[g].m(n.parentNode,n))}for(ie(),g=u.length;g<d.length;g+=1)p(g);se()}},i(h){if(!s){for(let c=0;c<u.length;c+=1)w(d[c]);s=!0}},o(h){d=d.filter(Boolean);for(let c=0;c<d.length;c+=1)C(d[c]);s=!1},d(h){h&&(L(e),L(r),L(a),L(n)),pr(d,h)}}}(l);return{c(){e=y("p"),o=y("span"),r=P(l[1]),a=P(" is not available on your browser."),n=y("br"),s=y("br"),u=K(),p&&p.c(),t(o,"class","capitalize"),t(e,"class","text-[16px] text-primary")},m(h,c){B(h,e,c),i(e,o),i(o,r),i(e,a),i(e,n),i(e,s),i(e,u),p&&p.m(e,null),d=!0},p(h,c){(!d||2&c)&&ge(r,h[1]),h[4].length>0&&p.p(h,c)},i(h){d||(w(p),d=!0)},o(h){C(p),d=!1},d(h){h&&L(e),p&&p.d()}}}function Ro(l){let e,o;return e=new yr({props:{title:l[1],subtitle:`Install ${l[1]} extension.`,link:l[3],$$slots:{graphic:[Qo],button:[Po]},$$scope:{ctx:l}}}),{c(){Z(e.$$.fragment)},m(r,a){E(e,r,a),o=!0},p(r,a){const n={};2&a&&(n.title=r[1]),2&a&&(n.subtitle=`Install ${r[1]} extension.`),8&a&&(n.link=r[3]),4101&a&&(n.$$scope={dirty:a,ctx:r}),e.$set(n)},i(r){o||(w(e.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),o=!1},d(r){$(e,r)}}}function Ko(l){let o,e=l[9][0]+"";return{c(){o=P(e)},m(r,a){B(r,o,a)},p:M,d(r){r&&L(o)}}}function ir(l){let e,r,a,o=l[11]+1===l[4].length?".":", ";return e=new Gt({props:{as:"a",className:"capitalize",href:l[9][1],$$slots:{default:[Ko]},$$scope:{ctx:l}}}),{c(){Z(e.$$.fragment),r=P(o)},m(n,s){E(e,n,s),B(n,r,s),a=!0},p(n,s){const u={};4096&s&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){a||(w(e.$$.fragment,n),a=!0)},o(n){C(e.$$.fragment,n),a=!1},d(n){n&&L(r),$(e,n)}}}function Po(l){let e,o,r,n,s,a=l[5][l[2]].name+"";var u=l[5][l[2]].icon;return u&&(o=Dt(u,{})),{c(){e=y("div"),o&&Z(o.$$.fragment),r=P(" Install for "),n=P(a),t(e,"class","flex gap-1 items-center whitespace-nowrap")},m(p,h){B(p,e,h),o&&E(o,e,null),i(e,r),i(e,n),s=!0},p(p,h){if(4&h&&u!==(u=p[5][p[2]].icon)){if(o){ie();const c=o;C(c.$$.fragment,1,0,()=>{$(c,1)}),se()}u?(o=Dt(u,{}),Z(o.$$.fragment),w(o.$$.fragment,1),E(o,e,r)):o=null}(!s||4&h)&&a!==(a=p[5][p[2]].name+"")&&ge(n,a)},i(p){s||(o&&w(o.$$.fragment,p),s=!0)},o(p){o&&C(o.$$.fragment,p),s=!1},d(p){p&&L(e),o&&$(o)}}}function qo(l){let e,o;return e=new Ao({}),{c(){Z(e.$$.fragment)},m(r,a){E(e,r,a),o=!0},i(r){o||(w(e.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),o=!1},d(r){$(e,r)}}}function Xo(l){let e,o;return e=new $o({}),{c(){Z(e.$$.fragment)},m(r,a){E(e,r,a),o=!0},i(r){o||(w(e.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),o=!1},d(r){$(e,r)}}}function Qo(l){let e,o,r,a;const n=[Xo,qo],s=[];function u(d,p){return d[0]?0:1}return e=u(l),o=s[e]=n[e](l),{c(){o.c(),r=ke()},m(d,p){s[e].m(d,p),B(d,r,p),a=!0},p(d,p){let h=e;e=u(d),e!==h&&(ie(),C(s[h],1,1,()=>{s[h]=null}),se(),o=s[e],o||(o=s[e]=n[e](d),o.c()),w(o,1),o.m(r.parentNode,r))},i(d){a||(w(o),a=!0)},o(d){C(o),a=!1},d(d){d&&L(r),s[e].d(d)}}}function sr(l){let e,o,r,a,n,s;return e=new Wt({}),n=new Gt({props:{as:"a",className:"text-brand",href:"https://www.ready.co/",$$slots:{default:[Yo]},$$scope:{ctx:l}}}),{c(){Z(e.$$.fragment),o=K(),r=y("p"),a=P("If you want to learn more about Ready visit our site:\n        "),Z(n.$$.fragment),t(r,"class","text-[13px] text-secondary")},m(u,d){E(e,u,d),B(u,o,d),B(u,r,d),i(r,a),E(n,r,null),s=!0},i(u){s||(w(e.$$.fragment,u),w(n.$$.fragment,u),s=!0)},o(u){C(e.$$.fragment,u),C(n.$$.fragment,u),s=!1},d(u){u&&(L(o),L(r)),$(e,u),$(n)}}}function Yo(l){let e;return{c(){e=P("www.ready.co")},m(o,r){B(o,e,r)},d(o){o&&L(e)}}}function Jo(l){let e,o,r,a,n,s,u,d,p=l[0]&&nr(l);const h=[Ro,To],c=[];function g(b,_){return b[2]&&b[3]?0:b[0]?-1:1}~(a=g(l))&&(n=c[a]=h[a](l));let m=l[0]&&sr(l);return{c(){e=y("section"),o=y("div"),p&&p.c(),r=K(),n&&n.c(),s=K(),u=y("footer"),m&&m.c(),t(o,"class","flex flex-col gap-2"),t(u,"class","flex flex-col gap-4"),t(e,"class","flex flex-col flex-grow justify-between")},m(b,_){B(b,e,_),i(e,o),p&&p.m(o,null),i(o,r),~a&&c[a].m(o,null),i(e,s),i(e,u),m&&m.m(u,null),d=!0},p(b,[_]){b[0]?p?1&_&&w(p,1):(p=nr(b),p.c(),w(p,1),p.m(o,r)):p&&(ie(),C(p,1,1,()=>{p=null}),se());let F=a;a=g(b),a===F?~a&&c[a].p(b,_):(n&&(ie(),C(c[F],1,1,()=>{c[F]=null}),se()),~a?(n=c[a],n?n.p(b,_):(n=c[a]=h[a](b),n.c()),w(n,1),n.m(o,null)):n=null),b[0]?m?1&_&&w(m,1):(m=sr(b),m.c(),w(m,1),m.m(u,null)):m&&(ie(),C(m,1,1,()=>{m=null}),se())},i(b){d||(w(p),w(n),w(m),d=!0)},o(b){C(p),C(n),C(m),d=!1},d(b){b&&L(e),p&&p.d(),~a&&c[a].d(),m&&m.d()}}}function el(l,e,o){let{isArgent:r=!1}=e,{extensionId:a=""}=e,{extensionName:n=""}=e,{store:s}=e,{storeLink:u}=e,{discoveryWallets:d}=e;const p=d.find(g=>g.id.toLowerCase()===a.toLowerCase()),h=Object.entries(p?.downloads||{}),c={chrome:{name:"Chrome",icon:Cr},edge:{name:"Edge",icon:Fo},firefox:{name:"Firefox",icon:Mo}};return l.$$set=g=>{"isArgent"in g&&o(0,r=g.isArgent),"extensionId"in g&&o(6,a=g.extensionId),"extensionName"in g&&o(1,n=g.extensionName),"store"in g&&o(2,s=g.store),"storeLink"in g&&o(3,u=g.storeLink),"discoveryWallets"in g&&o(7,d=g.discoveryWallets)},[r,n,s,u,h,c,a,d]}class tl extends D{constructor(e){super(),j(this,e,el,Jo,W,{isArgent:0,extensionId:6,extensionName:1,store:2,storeLink:3,discoveryWallets:7})}}function rl(l){let e,o,r,a,n,s,u;return a=new vr({}),{c(){e=y("section"),o=y("div"),r=y("div"),Z(a.$$.fragment),n=K(),s=y("div"),s.innerHTML='<h3 class="text-primary text-h4 font-bold">Couldn&#39;t perform the action</h3> <p class="text-primary text-p3 font-[400]">Please try again.</p>',t(r,"class","bg-button-secondary rounded-full p-5"),t(o,"class","flex flex-col h-full justify-center items-center gap-4 w-full flex-grow"),t(e,"class","flex flex-col justify-center items-center flex-grow")},m(d,p){B(d,e,p),i(e,o),i(o,r),E(a,r,null),i(o,n),i(o,s),u=!0},p:M,i(d){u||(w(a.$$.fragment,d),u=!0)},o(d){C(a.$$.fragment,d),u=!1},d(d){d&&L(e),$(a)}}}class ol extends D{constructor(e){super(),j(this,e,null,rl,W,{})}}function cr(l){let e,o,r,a,n,s,u,d,p;r=new i1({props:{handleBack:l[15],handleClose:l[16],title:l[2],showBackButton:l[6]&&![Q.walletList,Q.success].includes(l[0])}});const h=[ul,fl,cl,sl,il,nl,al,ll],c=[];function g(m,b){return m[0]===Q.walletList?0:m[0]===Q.connecting?1:m[0]===Q.success?2:m[0]===Q.loginFailure?3:m[0]===Q.requestFailure?4:m[0]===Q.qrCode?5:m[0]===Q.approval?6:m[0]===Q.download?7:-1}return~(n=g(l))&&(s=c[n]=h[n](l)),{c(){e=y("div"),o=y("main"),Z(r.$$.fragment),a=K(),s&&s.c(),t(o,"role","dialog"),t(o,"class",u=`\n        rounded-3xl bg-surface-default shadow-modal dark:shadow-none flex flex-col\n        z-[9999] w-full max-w-[380px] mx-6 p-6 text-center gap-8\n        ${l[0]!==Q.walletList?"min-h-[570px]":""}\n      `),t(e,"part","starknetkit-modal"),t(e,"class",d=`${l[1]} modal-font fixed inset-0 z-[9998] flex items-center justify-center backdrop-blur-sm bg-black/25`)},m(m,b){B(m,e,b),i(e,o),E(r,o,null),i(o,a),~n&&c[n].m(o,null),l[21](e),p=!0},p(m,b){const _={};256&b&&(_.handleClose=m[16]),4&b&&(_.title=m[2]),65&b&&(_.showBackButton=m[6]&&![Q.walletList,Q.success].includes(m[0])),r.$set(_);let F=n;n=g(m),n===F?~n&&c[n].p(m,b):(s&&(ie(),C(c[F],1,1,()=>{c[F]=null}),se()),~n?(s=c[n],s?s.p(m,b):(s=c[n]=h[n](m),s.c()),w(s,1),s.m(o,null)):s=null),(!p||1&b&&u!==(u=`\n        rounded-3xl bg-surface-default shadow-modal dark:shadow-none flex flex-col\n        z-[9999] w-full max-w-[380px] mx-6 p-6 text-center gap-8\n        ${m[0]!==Q.walletList?"min-h-[570px]":""}\n      `))&&t(o,"class",u),(!p||2&b&&d!==(d=`${m[1]} modal-font fixed inset-0 z-[9998] flex items-center justify-center backdrop-blur-sm bg-black/25`))&&t(e,"class",d)},i(m){p||(w(r.$$.fragment,m),w(s),p=!0)},o(m){C(r.$$.fragment,m),C(s),p=!1},d(m){m&&L(e),$(r),~n&&c[n].d(),l[21](null)}}}function ll(l){let e,o;return e=new tl({props:{store:(0,_index_76832d25_js__WEBPACK_IMPORTED_MODULE_3__.g)(),isArgent:!(!l[10]||"argentMobile"!==l[10]?.id&&"argentX"!==l[10]?.id),storeLink:l[5]?.download,extensionName:l[5]?.name.includes("Ready")?"Ready Wallet (formerly Argent)":l[10]?.name,extensionId:l[5]?.id,discoveryWallets:l[3]}}),{c(){Z(e.$$.fragment)},m(r,a){E(e,r,a),o=!0},p(r,a){const n={};1024&a&&(n.isArgent=!(!r[10]||"argentMobile"!==r[10]?.id&&"argentX"!==r[10]?.id)),32&a&&(n.storeLink=r[5]?.download),1056&a&&(n.extensionName=r[5]?.name.includes("Ready")?"Ready Wallet (formerly Argent)":r[10]?.name),32&a&&(n.extensionId=r[5]?.id),8&a&&(n.discoveryWallets=r[3]),e.$set(n)},i(r){o||(w(e.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),o=!1},d(r){$(e,r)}}}function al(l){let e,o;return e=new E1({}),{c(){Z(e.$$.fragment)},m(r,a){E(e,r,a),o=!0},p:M,i(r){o||(w(e.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),o=!1},d(r){$(e,r)}}}function nl(l){let e,o;return e=new ao({props:{handleInstallClick:l[20]}}),{c(){Z(e.$$.fragment)},m(r,a){E(e,r,a),o=!0},p:M,i(r){o||(w(e.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),o=!1},d(r){$(e,r)}}}function il(l){let e,o;return e=new ol({}),{c(){Z(e.$$.fragment)},m(r,a){E(e,r,a),o=!0},p:M,i(r){o||(w(e.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),o=!1},d(r){$(e,r)}}}function sl(l){let e,o;return e=new wo({props:{walletName:l[10]?.name,handleCallback:l[18],showFallback:l[9],handleFallback:l[19]}}),{c(){Z(e.$$.fragment)},m(r,a){E(e,r,a),o=!0},p(r,a){const n={};1024&a&&(n.walletName=r[10]?.name),160&a&&(n.handleCallback=r[18]),512&a&&(n.showFallback=r[9]),160&a&&(n.handleFallback=r[19]),e.$set(n)},i(r){o||(w(e.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),o=!1},d(r){$(e,r)}}}function cl(l){let e,o;return e=new ko({}),{c(){Z(e.$$.fragment)},m(r,a){E(e,r,a),o=!0},p:M,i(r){o||(w(e.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),o=!1},d(r){$(e,r)}}}function fl(l){let e,o;return e=new M1({props:{walletName:l[10]?.name,showFallback:l[9],handleFallback:l[17],$$slots:{default:[dl]},$$scope:{ctx:l}}}),{c(){Z(e.$$.fragment)},m(r,a){E(e,r,a),o=!0},p(r,a){const n={};1024&a&&(n.walletName=r[10]?.name),512&a&&(n.showFallback=r[9]),160&a&&(n.handleFallback=r[17]),4195330&a&&(n.$$scope={dirty:a,ctx:r}),e.$set(n)},i(r){o||(w(e.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),o=!1},d(r){$(e,r)}}}function ul(l){let e,o;return e=new _1({props:{walletList:l[4],theme:l[1],callback:l[7]}}),{c(){Z(e.$$.fragment)},m(r,a){E(e,r,a),o=!0},p(r,a){const n={};16&a&&(n.walletList=r[4]),2&a&&(n.theme=r[1]),128&a&&(n.callback=r[7]),e.$set(n)},i(r){o||(w(e.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),o=!1},d(r){$(e,r)}}}function fr(l){let e,o;return e=new mr({props:{icon:l[10].icon,theme:l[1]}}),{c(){Z(e.$$.fragment)},m(r,a){E(e,r,a),o=!0},p(r,a){const n={};1024&a&&(n.icon=r[10].icon),2&a&&(n.theme=r[1]),e.$set(n)},i(r){o||(w(e.$$.fragment,r),o=!0)},o(r){C(e.$$.fragment,r),o=!1},d(r){$(e,r)}}}function dl(l){let e,o,r=l[10]?.icon&&fr(l);return{c(){r&&r.c(),e=ke()},m(a,n){r&&r.m(a,n),B(a,e,n),o=!0},p(a,n){a[10]?.icon?r?(r.p(a,n),1024&n&&w(r,1)):(r=fr(a),r.c(),w(r,1),r.m(e.parentNode,e)):r&&(ie(),C(r,1,1,()=>{r=null}),se())},i(a){o||(w(r),o=!0)},o(a){C(r),o=!1},d(a){a&&L(e),r&&r.d(a)}}}function pl(l){let e,o,r=!l[12]&&(l[0]!==Q.walletList||l[4].length>1)&&cr(l);return{c(){r&&r.c(),e=ke()},m(a,n){r&&r.m(a,n),B(a,e,n),o=!0},p(a,[n]){!a[12]&&(a[0]!==Q.walletList||a[4].length>1)?r?(r.p(a,n),17&n&&w(r,1)):(r=cr(a),r.c(),w(r,1),r.m(e.parentNode,e)):r&&(ie(),C(r,1,1,()=>{r=null}),se())},i(a){o||(w(r),o=!0)},o(a){C(r),o=!1},d(a){a&&L(e),r&&r.d(a)}}}function hl(l,e,o){let r,a,n,{dappName:s=window?.document.title??""}=e,{layout:u=Q.walletList}=e;function d(k){o(0,u=k)}let{discoveryWallets:h}=e,{modalWallets:c=[]}=e,{selectedWallet:g=null}=e,{showBackButton:m=!0}=e,{callback:b=async()=>{}}=e,_=(0,_index_76832d25_js__WEBPACK_IMPORTED_MODULE_3__.a)(),{theme:F="dark"}=e,{darkModeControlClass:A=("dark"===F?"dark":"")}=e;Tr(async()=>{if("dark"===F||null==F&&window.matchMedia("(prefers-color-scheme: dark)").matches?o(1,A="dark"):o(1,A="light"),_)try{setTimeout(()=>{b((0,_index_76832d25_js__WEBPACK_IMPORTED_MODULE_3__.b)(new _argentX_js__WEBPACK_IMPORTED_MODULE_4__.q))})}catch(U){console.error(U)}else if(navigator?.userAgent?.toLowerCase()?.includes("braavos")&&window?.starknet_braavos)try{setTimeout(()=>{b((0,_index_76832d25_js__WEBPACK_IMPORTED_MODULE_3__.b)(new _braavos_js__WEBPACK_IMPORTED_MODULE_5__.D))})}catch(U){console.error(U)}else if(1===c.length)try{setTimeout(()=>{b(c[0])})}catch(U){console.error(U)}});return l.$$set=k=>{"dappName"in k&&o(2,s=k.dappName),"layout"in k&&o(0,u=k.layout),"discoveryWallets"in k&&o(3,h=k.discoveryWallets),"modalWallets"in k&&o(4,c=k.modalWallets),"selectedWallet"in k&&o(5,g=k.selectedWallet),"showBackButton"in k&&o(6,m=k.showBackButton),"callback"in k&&o(7,b=k.callback),"theme"in k&&o(14,F=k.theme),"darkModeControlClass"in k&&o(1,A=k.darkModeControlClass)},l.$$.update=()=>{32&l.$$.dirty&&o(10,r=g?.connector&&(0,_index_76832d25_js__WEBPACK_IMPORTED_MODULE_3__.e)(g.connector)),32&l.$$.dirty&&o(9,a=!!(g&&(0,_index_76832d25_js__WEBPACK_IMPORTED_MODULE_3__.i)(g?.connector)&&g?.connector?.fallbackConnector))},[u,A,s,h,c,g,m,b,n,a,r,d,_,function p(){return u},F,()=>d(Q.walletList),()=>n?.parentNode?.removeChild(n),()=>b(g,!0),()=>b(g),()=>b(g,!0),()=>d(Q.download),function z(k){Zt[k?"unshift":"push"](()=>{n=k,o(8,n)})}]}class yl extends D{constructor(e){super(),j(this,e,hl,pl,W,{dappName:2,layout:0,getLayout:13,discoveryWallets:3,modalWallets:4,selectedWallet:5,showBackButton:6,callback:7,theme:14,darkModeControlClass:1})}get getLayout(){return this.$$.ctx[13]}}},"./node_modules/starknetkit/dist/braavos.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>i});var _index_40f0fb49_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/starknetkit/dist/index-40f0fb49.js");__webpack_require__("./node_modules/starknet/dist/index.mjs"),__webpack_require__("./node_modules/starknetkit/dist/connector-4bc69b15.js"),__webpack_require__("./node_modules/starknetkit/dist/lastConnected-c0cae438.js");class i extends _index_40f0fb49_js__WEBPACK_IMPORTED_MODULE_0__.I{constructor(o){super({options:{id:"braavos",...o}})}}},"./node_modules/starknetkit/dist/index-74f7e392.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>ww,a:()=>Ic,b:()=>Mr,c:()=>CD,d:()=>lw,e:()=>hl,f:()=>mw,g:()=>TD,h:()=>Bs,i:()=>RD,j:()=>FD,k:()=>VD,r:()=>PD,t:()=>ll});var _s,_connector_4bc69b15_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/starknetkit/dist/connector-4bc69b15.js"),_Modal_b083f70f_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/starknetkit/dist/Modal-b083f70f.js"),starknet__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/starknet/dist/index.mjs"),_index_76832d25_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/starknetkit/dist/index-76832d25.js"),console=__webpack_require__("./node_modules/console-browserify/index.js"),Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,process=__webpack_require__("./node_modules/process/browser.js"),Ed=Object.defineProperty,W=(t,e,i)=>(((t,e,i)=>{e in t?Ed(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!=typeof e?e+"":e,i),i),zo={exports:{}},Gi="object"==typeof Reflect?Reflect:null,Fa=Gi&&"function"==typeof Gi.apply?Gi.apply:function(e,i,r){return Function.prototype.apply.call(e,i,r)};_s=Gi&&"function"==typeof Gi.ownKeys?Gi.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var hh=Number.isNaN||function(e){return e!=e};function oe(){oe.init.call(this)}zo.exports=oe,zo.exports.once=function Ud(t,e){return new Promise(function(i,r){function s(o){t.removeListener(e,n),r(o)}function n(){"function"==typeof t.removeListener&&t.removeListener("error",s),i([].slice.call(arguments))}wh(t,e,n,{once:!0}),"error"!==e&&function Bd(t,e,i){"function"==typeof t.on&&wh(t,"error",e,i)}(t,s,{once:!0})})},oe.EventEmitter=oe,oe.prototype._events=void 0,oe.prototype._eventsCount=0,oe.prototype._maxListeners=void 0;var Ua=10;function Ys(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function lh(t){return void 0===t._maxListeners?oe.defaultMaxListeners:t._maxListeners}function fh(t,e,i,r){var s,n,o;if(Ys(i),void 0===(n=t._events)?(n=t._events=Object.create(null),t._eventsCount=0):(void 0!==n.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),n=t._events),o=n[e]),void 0===o)o=n[e]=i,++t._eventsCount;else if("function"==typeof o?o=n[e]=r?[i,o]:[o,i]:r?o.unshift(i):o.push(i),(s=lh(t))>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,function Cd(t){console&&console.warn&&console.warn(t)}(a)}return t}function Pd(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function dh(t,e,i){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},s=Pd.bind(r);return s.listener=i,r.wrapFn=s,s}function ph(t,e,i){var r=t._events;if(void 0===r)return[];var s=r[e];return void 0===s?[]:"function"==typeof s?i?[s.listener||s]:[s]:i?function Fd(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(s):yh(s,s.length)}function gh(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function yh(t,e){for(var i=new Array(e),r=0;r<e;++r)i[r]=t[r];return i}function wh(t,e,i,r){if("function"==typeof t.on)r.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,function s(n){r.once&&t.removeEventListener(e,s),i(n)})}}Object.defineProperty(oe,"defaultMaxListeners",{enumerable:!0,get:function(){return Ua},set:function(t){if("number"!=typeof t||t<0||hh(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Ua=t}}),oe.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},oe.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||hh(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},oe.prototype.getMaxListeners=function(){return lh(this)},oe.prototype.emit=function(e){for(var i=[],r=1;r<arguments.length;r++)i.push(arguments[r]);var s="error"===e,n=this._events;if(void 0!==n)s=s&&void 0===n.error;else if(!s)return!1;if(s){var o;if(i.length>0&&(o=i[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=n[e];if(void 0===c)return!1;if("function"==typeof c)Fa(c,this,i);else{var u=c.length,h=yh(c,u);for(r=0;r<u;++r)Fa(h[r],this,i)}return!0},oe.prototype.addListener=function(e,i){return fh(this,e,i,!1)},oe.prototype.on=oe.prototype.addListener,oe.prototype.prependListener=function(e,i){return fh(this,e,i,!0)},oe.prototype.once=function(e,i){return Ys(i),this.on(e,dh(this,e,i)),this},oe.prototype.prependOnceListener=function(e,i){return Ys(i),this.prependListener(e,dh(this,e,i)),this},oe.prototype.removeListener=function(e,i){var r,s,n,o,a;if(Ys(i),void 0===(s=this._events))return this;if(void 0===(r=s[e]))return this;if(r===i||r.listener===i)0===--this._eventsCount?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||i));else if("function"!=typeof r){for(n=-1,o=r.length-1;o>=0;o--)if(r[o]===i||r[o].listener===i){a=r[o].listener,n=o;break}if(n<0)return this;0===n?r.shift():function Rd(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,n),1===r.length&&(s[e]=r[0]),void 0!==s.removeListener&&this.emit("removeListener",e,a||i)}return this},oe.prototype.off=oe.prototype.removeListener,oe.prototype.removeAllListeners=function(e){var i,r,s;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,n=Object.keys(r);for(s=0;s<n.length;++s)"removeListener"!==(o=n[s])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(i=r[e]))this.removeListener(e,i);else if(void 0!==i)for(s=i.length-1;s>=0;s--)this.removeListener(e,i[s]);return this},oe.prototype.listeners=function(e){return ph(this,e,!0)},oe.prototype.rawListeners=function(e){return ph(this,e,!1)},oe.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):gh.call(t,e)},oe.prototype.listenerCount=gh,oe.prototype.eventNames=function(){return this._eventsCount>0?_s(this._events):[]};var rt=zo.exports;const mh=(0,_connector_4bc69b15_js__WEBPACK_IMPORTED_MODULE_0__.f)(rt);var L={},eo=function(t,e){return(eo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])})(t,e)};var to=function(){return to=Object.assign||function(e){for(var i,r=1,s=arguments.length;r<s;r++)for(var n in i=arguments[r])Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);return e},to.apply(this,arguments)};function io(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bh(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var s,o,r=i.call(t),n=[];try{for(;(void 0===e||e-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return n}function Br(t){return this instanceof Br?(this.v=t,this):new Br(t)}const ip=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return to},__asyncDelegator:function Yd(t){var e,i;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,n){e[s]=t[s]?function(o){return(i=!i)?{value:Br(t[s](o)),done:"return"===s}:n?n(o):o}:n}},__asyncGenerator:function Gd(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,r=i.apply(t,e||[]),n=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){r[f]&&(s[f]=function(p){return new Promise(function(d,g){n.push([f,p,d,g])>1||a(f,p)})})}function a(f,p){try{!function c(f){f.value instanceof Br?Promise.resolve(f.value.v).then(u,h):l(n[0][2],f)}(r[f](p))}catch(d){l(n[0][3],d)}}function u(f){a("next",f)}function h(f){a("throw",f)}function l(f,p){f(p),n.shift(),n.length&&a(n[0][0],n[0][1])}},__asyncValues:function Jd(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,e=t[Symbol.asyncIterator];return e?e.call(t):(t=io(t),i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i);function r(n){i[n]=t[n]&&function(o){return new Promise(function(a,c){(function s(n,o,a,c){Promise.resolve(c).then(function(u){n({value:u,done:a})},o)})(a,c,(o=t[n](o)).done,o.value)})}}},__await:Br,__awaiter:function jd(t,e,i,r){return new(i||(i=Promise))(function(n,o){function a(h){try{u(r.next(h))}catch(l){o(l)}}function c(h){try{u(r.throw(h))}catch(l){o(l)}}function u(h){h.done?n(h.value):function s(n){return n instanceof i?n:new i(function(o){o(n)})}(h.value).then(a,c)}u((r=r.apply(t,e||[])).next())})},__classPrivateFieldGet:function ep(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},__classPrivateFieldSet:function tp(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},__createBinding:function Kd(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]},__decorate:function Ld(t,e,i,r){var o,s=arguments.length,n=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(n=(s<3?o(n):s>3?o(e,i,n):o(e,i))||n);return s>3&&n&&Object.defineProperty(e,i,n),n},__exportStar:function Vd(t,e){for(var i in t)"default"!==i&&!e.hasOwnProperty(i)&&(e[i]=t[i])},__extends:function Nd(t,e){function i(){this.constructor=t}eo(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},__generator:function zd(t,e){var r,s,n,o,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(h){return function c(u){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,s&&(n=2&u[0]?s.return:u[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,u[1])).done)return n;switch(s=0,n&&(u=[2&u[0],n.value]),u[0]){case 0:case 1:n=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,s=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(n=(n=i.trys).length>0&&n[n.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!n||u[1]>n[0]&&u[1]<n[3])){i.label=u[1];break}if(6===u[0]&&i.label<n[1]){i.label=n[1],n=u;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(u);break}n[2]&&i.ops.pop(),i.trys.pop();continue}u=e.call(t,i)}catch(h){u=[6,h],s=0}finally{r=n=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,h])}}},__importDefault:function Xd(t){return t&&t.__esModule?t:{default:t}},__importStar:function Qd(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e},__makeTemplateObject:function Zd(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__metadata:function qd(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__param:function Md(t,e){return function(i,r){e(i,r,t)}},__read:bh,__rest:function kd(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i},__spread:function Hd(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(bh(arguments[e]));return t},__spreadArrays:function Wd(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var r=Array(t),s=0;for(e=0;e<i;e++)for(var n=arguments[e],o=0,a=n.length;o<a;o++,s++)r[s]=n[o];return r},__values:io},Symbol.toStringTag,{value:"Module"})),Wr=(0,_connector_4bc69b15_js__WEBPACK_IMPORTED_MODULE_0__.g)(ip);var Ba,wn={},ar={};var Na,li={},mn={},fi={};var ka,La,Ma,qa,bn={};function vh(){return La||(La=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wr;e.__exportStar(function sp(){return Na||(Na=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.ONE_THOUSAND=fi.ONE_HUNDRED=void 0,fi.ONE_HUNDRED=100,fi.ONE_THOUSAND=1e3),fi}(),t),e.__exportStar(function np(){return ka||(ka=1,t=bn,Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=5*t.ONE_MINUTE,t.TEN_MINUTES=10*t.ONE_MINUTE,t.THIRTY_MINUTES=30*t.ONE_MINUTE,t.SIXTY_MINUTES=60*t.ONE_MINUTE,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=3*t.ONE_HOUR,t.SIX_HOURS=6*t.ONE_HOUR,t.TWELVE_HOURS=12*t.ONE_HOUR,t.TWENTY_FOUR_HOURS=24*t.ONE_HOUR,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=3*t.ONE_DAY,t.FIVE_DAYS=5*t.ONE_DAY,t.SEVEN_DAYS=7*t.ONE_DAY,t.THIRTY_DAYS=30*t.ONE_DAY,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=2*t.ONE_WEEK,t.THREE_WEEKS=3*t.ONE_WEEK,t.FOUR_WEEKS=4*t.ONE_WEEK,t.ONE_YEAR=365*t.ONE_DAY),bn;var t}(),t)}(mn)),mn}function ap(){return qa||(qa=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wr;e.__exportStar(function rp(){return Ba||(Ba=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.delay=void 0,ar.delay=function t(e){return new Promise(i=>{setTimeout(()=>{i(!0)},e)})}),ar}(),t),e.__exportStar(function op(){if(Ma)return li;Ma=1,Object.defineProperty(li,"__esModule",{value:!0}),li.fromMiliseconds=li.toMiliseconds=void 0;const t=vh();return li.toMiliseconds=function e(r){return r*t.ONE_THOUSAND},li.fromMiliseconds=function i(r){return Math.floor(r/t.ONE_THOUSAND)},li}(),t)}(wn)),wn}var ja,Bi={};var za,Ka,vn={},cr={};function hp(){return Ka||(Ka=1,t=vn,Object.defineProperty(t,"__esModule",{value:!0}),Wr.__exportStar(function up(){return za||(za=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.IWatch=void 0,cr.IWatch=class t{}),cr}(),t)),vn;var t}!function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wr;e.__exportStar(ap(),t),e.__exportStar(function cp(){if(ja)return Bi;ja=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(i){if(this.timestamps.has(i))throw new Error(`Watch already started for label: ${i}`);this.timestamps.set(i,{started:Date.now()})}stop(i){const r=this.get(i);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${i}`);const s=Date.now()-r.started;this.timestamps.set(i,{started:r.started,elapsed:s})}get(i){const r=this.timestamps.get(i);if(typeof r>"u")throw new Error(`No timestamp found for label: ${i}`);return r}elapsed(i){const r=this.get(i);return r.elapsed||Date.now()-r.started}}return Bi.Watch=t,Bi.default=t,Bi}(),t),e.__exportStar(hp(),t),e.__exportStar(vh(),t)}(L);class Oi{}let lp=class extends Oi{constructor(e){super()}};const Va=L.FIVE_SECONDS,Ti_pulse="heartbeat_pulse";let fp=class Eh extends lp{constructor(e){super(e),this.events=new rt.EventEmitter,this.interval=Va,this.interval=e?.interval||Va}static async init(e){const i=new Eh(e);return await i.init(),i}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,i){this.events.on(e,i)}once(e,i){this.events.once(e,i)}off(e,i){this.events.off(e,i)}removeListener(e,i){this.events.removeListener(e,i)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),L.toMiliseconds(this.interval))}pulse(){this.events.emit(Ti_pulse)}};const dp=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,pp=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,gp=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function yp(t,e){if(!("__proto__"===t||"constructor"===t&&e&&"object"==typeof e&&"prototype"in e))return e;(function wp(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)})(t)}function ns(t,e={}){if("string"!=typeof t)return t;if('"'===t[0]&&'"'===t[t.length-1]&&-1===t.indexOf("\\"))return t.slice(1,-1);const i=t.trim();if(i.length<=9)switch(i.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!gp.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(dp.test(t)||pp.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,yp)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function _e(t,...e){try{return function mp(t){return t&&"function"==typeof t.then?t:Promise.resolve(t)}(t(...e))}catch(i){return Promise.reject(i)}}function xs(t){if(function bp(t){const e=typeof t;return null===t||"object"!==e&&"function"!==e}(t))return String(t);if(function vp(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}(t)||Array.isArray(t))return JSON.stringify(t);if("function"==typeof t.toJSON)return xs(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const ro="base64:";function Ep(t){return"string"==typeof t?t:ro+function Ip(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}(t)}function _p(t){return"string"==typeof t&&t.startsWith(ro)?function xp(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}(t.slice(7)):t}function Ve(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function Sp(...t){return Ve(t.join(":"))}function os(t){return(t=Ve(t))?t+":":""}const Op=()=>{const t=new Map;return{name:"memory",getInstance:()=>t,hasItem:e=>t.has(e),getItem:e=>t.get(e)??null,getItemRaw:e=>t.get(e)??null,setItem(e,i){t.set(e,i)},setItemRaw(e,i){t.set(e,i)},removeItem(e){t.delete(e)},getKeys:()=>[...t.keys()],clear(){t.clear()},dispose(){t.clear()}}};function Tp(t={}){const e={mounts:{"":t.driver||Op()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},i=u=>{for(const h of e.mountpoints)if(u.startsWith(h))return{base:h,relativeKey:u.slice(h.length),driver:e.mounts[h]};return{base:"",relativeKey:u,driver:e.mounts[""]}},r=(u,h)=>e.mountpoints.filter(l=>l.startsWith(u)||h&&u.startsWith(l)).map(l=>({relativeBase:u.length>l.length?u.slice(l.length):void 0,mountpoint:l,driver:e.mounts[l]})),s=(u,h)=>{if(e.watching){h=Ve(h);for(const l of e.watchListeners)l(u,h)}},o=async()=>{if(e.watching){for(const u in e.unwatch)await e.unwatch[u]();e.unwatch={},e.watching=!1}},a=(u,h,l)=>{const f=new Map,p=d=>{let g=f.get(d.base);return g||(g={driver:d.driver,base:d.base,items:[]},f.set(d.base,g)),g};for(const d of u){const g="string"==typeof d,y=Ve(g?d:d.key),E=g?void 0:d.value,v=g||!d.options?h:{...h,...d.options},m=i(y);p(m).items.push({key:y,value:E,relativeKey:m.relativeKey,options:v})}return Promise.all([...f.values()].map(d=>l(d))).then(d=>d.flat())},c={hasItem(u,h={}){u=Ve(u);const{relativeKey:l,driver:f}=i(u);return _e(f.hasItem,l,h)},getItem(u,h={}){u=Ve(u);const{relativeKey:l,driver:f}=i(u);return _e(f.getItem,l,h).then(p=>ns(p))},getItems:(u,h={})=>a(u,h,l=>l.driver.getItems?_e(l.driver.getItems,l.items.map(f=>({key:f.relativeKey,options:f.options})),h).then(f=>f.map(p=>({key:Sp(l.base,p.key),value:ns(p.value)}))):Promise.all(l.items.map(f=>_e(l.driver.getItem,f.relativeKey,f.options).then(p=>({key:f.key,value:ns(p)}))))),getItemRaw(u,h={}){u=Ve(u);const{relativeKey:l,driver:f}=i(u);return f.getItemRaw?_e(f.getItemRaw,l,h):_e(f.getItem,l,h).then(p=>_p(p))},async setItem(u,h,l={}){if(void 0===h)return c.removeItem(u);u=Ve(u);const{relativeKey:f,driver:p}=i(u);p.setItem&&(await _e(p.setItem,f,xs(h),l),p.watch||s("update",u))},async setItems(u,h){await a(u,h,async l=>{if(l.driver.setItems)return _e(l.driver.setItems,l.items.map(f=>({key:f.relativeKey,value:xs(f.value),options:f.options})),h);l.driver.setItem&&await Promise.all(l.items.map(f=>_e(l.driver.setItem,f.relativeKey,xs(f.value),f.options)))})},async setItemRaw(u,h,l={}){if(void 0===h)return c.removeItem(u,l);u=Ve(u);const{relativeKey:f,driver:p}=i(u);if(p.setItemRaw)await _e(p.setItemRaw,f,h,l);else{if(!p.setItem)return;await _e(p.setItem,f,Ep(h),l)}p.watch||s("update",u)},async removeItem(u,h={}){"boolean"==typeof h&&(h={removeMeta:h}),u=Ve(u);const{relativeKey:l,driver:f}=i(u);f.removeItem&&(await _e(f.removeItem,l,h),(h.removeMeta||h.removeMata)&&await _e(f.removeItem,l+"$",h),f.watch||s("remove",u))},async getMeta(u,h={}){"boolean"==typeof h&&(h={nativeOnly:h}),u=Ve(u);const{relativeKey:l,driver:f}=i(u),p=Object.create(null);if(f.getMeta&&Object.assign(p,await _e(f.getMeta,l,h)),!h.nativeOnly){const d=await _e(f.getItem,l+"$",h).then(g=>ns(g));d&&"object"==typeof d&&("string"==typeof d.atime&&(d.atime=new Date(d.atime)),"string"==typeof d.mtime&&(d.mtime=new Date(d.mtime)),Object.assign(p,d))}return p},setMeta(u,h,l={}){return this.setItem(u+"$",h,l)},removeMeta(u,h={}){return this.removeItem(u+"$",h)},async getKeys(u,h={}){u=os(u);const l=r(u,!0);let f=[];const p=[];let d=!0;for(const y of l){y.driver.flags?.maxDepth||(d=!1);const E=await _e(y.driver.getKeys,y.relativeBase,h);for(const v of E){const m=y.mountpoint+Ve(v);f.some(D=>m.startsWith(D))||p.push(m)}f=[y.mountpoint,...f.filter(v=>!v.startsWith(y.mountpoint))]}const g=void 0!==h.maxDepth&&!d;return p.filter(y=>(!g||function Dp(t,e){if(void 0===e)return!0;let i=0,r=t.indexOf(":");for(;r>-1;)i++,r=t.indexOf(":",r+1);return i<=e}(y,h.maxDepth))&&function Ap(t,e){return e?t.startsWith(e)&&"$"!==t[t.length-1]:"$"!==t[t.length-1]}(y,u))},async clear(u,h={}){u=os(u),await Promise.all(r(u,!1).map(async l=>{if(l.driver.clear)return _e(l.driver.clear,l.relativeBase,h);if(l.driver.removeItem){const f=await l.driver.getKeys(l.relativeBase||"",h);return Promise.all(f.map(p=>l.driver.removeItem(p,h)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(u=>Wa(u)))},watch:async u=>(await(async()=>{if(!e.watching){e.watching=!0;for(const u in e.mounts)e.unwatch[u]=await Ha(e.mounts[u],s,u)}})(),e.watchListeners.push(u),async()=>{e.watchListeners=e.watchListeners.filter(h=>h!==u),0===e.watchListeners.length&&await o()}),async unwatch(){e.watchListeners=[],await o()},mount(u,h){if((u=os(u))&&e.mounts[u])throw new Error(`already mounted at ${u}`);return u&&(e.mountpoints.push(u),e.mountpoints.sort((l,f)=>f.length-l.length)),e.mounts[u]=h,e.watching&&Promise.resolve(Ha(h,s,u)).then(l=>{e.unwatch[u]=l}).catch(console.error),c},async unmount(u,h=!0){(u=os(u))&&e.mounts[u]&&(e.watching&&u in e.unwatch&&(e.unwatch[u]?.(),delete e.unwatch[u]),h&&await Wa(e.mounts[u]),e.mountpoints=e.mountpoints.filter(l=>l!==u),delete e.mounts[u])},getMount(u=""){u=Ve(u)+":";const h=i(u);return{driver:h.driver,base:h.base}},getMounts:(u="",h={})=>(u=Ve(u),r(u,h.parents).map(f=>({driver:f.driver,base:f.mountpoint}))),keys:(u,h={})=>c.getKeys(u,h),get:(u,h={})=>c.getItem(u,h),set:(u,h,l={})=>c.setItem(u,h,l),has:(u,h={})=>c.hasItem(u,h),del:(u,h={})=>c.removeItem(u,h),remove:(u,h={})=>c.removeItem(u,h)};return c}function Ha(t,e,i){return t.watch?t.watch((r,s)=>e(r,i+s)):()=>{}}async function Wa(t){"function"==typeof t.dispose&&await _e(t.dispose)}function Ci(t){return new Promise((e,i)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>i(t.error)})}function _h(t,e){let i;return(s,n)=>(()=>{if(i)return i;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),i=Ci(s),i.then(n=>{n.onclose=()=>i=void 0},()=>{}),i})().then(o=>n(o.transaction(e,s).objectStore(e)))}let En;function Gr(){return En||(En=_h("keyval-store","keyval")),En}function Ga(t,e=Gr()){return e("readonly",i=>Ci(i.get(t)))}function Up(t=Gr()){return t("readonly",e=>{if(e.getAllKeys)return Ci(e.getAllKeys());const i=[];return function Fp(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Ci(t.transaction)}(e,r=>i.push(r.key)).then(()=>i)})}function Yi(t){if("string"!=typeof t)throw new Error("Cannot safe json parse value of type "+typeof t);try{return(t=>{const i=t.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(i,(r,s)=>"string"==typeof s&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)})(t)}catch{return t}}function Ii(t){return"string"==typeof t?t:(t=>JSON.stringify(t,(e,i)=>"bigint"==typeof i?i.toString()+"n":i))(t)||""}var Lp=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",i=s=>e+s;let r;return t.dbName&&t.storeName&&(r=_h(t.dbName,t.storeName)),{name:"idb-keyval",options:t,hasItem:async s=>!(typeof await Ga(i(s),r)>"u"),getItem:async s=>await Ga(i(s),r)??null,setItem:(s,n)=>function Cp(t,e,i=Gr()){return i("readwrite",r=>(r.put(e,t),Ci(r.transaction)))}(i(s),n,r),removeItem:s=>function Pp(t,e=Gr()){return e("readwrite",i=>(i.delete(t),Ci(i.transaction)))}(i(s),r),getKeys:()=>Up(r),clear:()=>function Rp(t=Gr()){return t("readwrite",e=>(e.clear(),Ci(e.transaction)))}(r)}};let jp=class{constructor(){this.indexedDb=Tp({driver:Lp({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const i=await this.indexedDb.getItem(e);if(null!==i)return i}async setItem(e,i){await this.indexedDb.setItem(e,Ii(i))}async removeItem(e){await this.indexedDb.removeItem(e)}};var _n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof __webpack_require__.g<"u"?__webpack_require__.g:typeof self<"u"?self:{},Is={exports:{}};function zp(t){var e;return[t[0],Yi(null!=(e=t[1])?e:"")]}!function(){let t;function e(){}t=e,t.prototype.getItem=function(i){return this.hasOwnProperty(i)?String(this[i]):null},t.prototype.setItem=function(i,r){this[i]=String(r)},t.prototype.removeItem=function(i){delete this[i]},t.prototype.clear=function(){const i=this;Object.keys(i).forEach(function(r){i[r]=void 0,delete i[r]})},t.prototype.key=function(i){return i=i||0,Object.keys(this)[i]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof _n<"u"&&_n.localStorage?Is.exports=_n.localStorage:typeof window<"u"&&window.localStorage?Is.exports=window.localStorage:Is.exports=new e}();let Kp=class{constructor(){this.localStorage=Is.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(zp)}async getItem(e){const i=this.localStorage.getItem(e);if(null!==i)return Yi(i)}async setItem(e,i){this.localStorage.setItem(e,Ii(i))}async removeItem(e){this.localStorage.removeItem(e)}};const Wp=async(t,e)=>{e.length&&e.forEach(async i=>{await t.removeItem(i)})};let Gp=class{constructor(){this.initialized=!1,this.setInitialized=i=>{this.storage=i,this.initialized=!0};const e=new Kp;this.storage=e;try{(async(t,e,i)=>{const r="wc_storage_version",s=await e.getItem(r);if(s&&s>=1)return void i(e);const n=await t.getKeys();if(!n.length)return void i(e);const o=[];for(;n.length;){const a=n.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const u=await t.getItem(a);await e.setItem(a,u),o.push(a)}}await e.setItem(r,1),i(e),Wp(t,o)})(e,new jp,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,i){return await this.initialize(),this.storage.setItem(e,i)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const i=setInterval(()=>{this.initialized&&(clearInterval(i),e())},20)})}};function Yp(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var Jp=function Zp(t,e,i){var r=i&&i.stringify||Yp;if("object"==typeof t&&null!==t){var n=e.length+1;if(1===n)return t;var o=new Array(n);o[0]=r(t);for(var a=1;a<n;a++)o[a]=r(e[a]);return o.join(" ")}if("string"!=typeof t)return t;var c=e.length;if(0===c)return t;for(var u="",h=0,l=-1,f=t&&t.length||0,p=0;p<f;){if(37===t.charCodeAt(p)&&p+1<f){switch(l=l>-1?l:0,t.charCodeAt(p+1)){case 100:case 102:if(h>=c||null==e[h])break;l<p&&(u+=t.slice(l,p)),u+=Number(e[h]),l=p+2,p++;break;case 105:if(h>=c||null==e[h])break;l<p&&(u+=t.slice(l,p)),u+=Math.floor(Number(e[h])),l=p+2,p++;break;case 79:case 111:case 106:if(h>=c||void 0===e[h])break;l<p&&(u+=t.slice(l,p));var d=typeof e[h];if("string"===d){u+="'"+e[h]+"'",l=p+2,p++;break}if("function"===d){u+=e[h].name||"<anonymous>",l=p+2,p++;break}u+=r(e[h]),l=p+2,p++;break;case 115:if(h>=c)break;l<p&&(u+=t.slice(l,p)),u+=String(e[h]),l=p+2,p++;break;case 37:l<p&&(u+=t.slice(l,p)),u+="%",l=p+2,p++,h--}++h}++p}return-1===l?t:(l<f&&(u+=t.slice(l)),u)};const Ja=Jp;var Hi=$t;const Nr=function ag(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}().console||{},Qp={mapHttpRequest:as,mapHttpResponse:as,wrapRequestSerializer:xn,wrapResponseSerializer:xn,wrapErrorSerializer:xn,req:as,res:as,err:function rg(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const i in t)void 0===e[i]&&(e[i]=t[i]);return e}};function $t(t){(t=t||{}).browser=t.browser||{};const e=t.browser.transmit;if(e&&"function"!=typeof e.send)throw Error("pino: transmit option must have a send function");const i=t.browser.write||Nr;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=function Xp(t,e){return Array.isArray(t)?t.filter(function(r){return"!stdSerializers.err"!==r}):!0===t&&Object.keys(e)}(t.browser.serialize,r);let n=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(n=!1);"function"==typeof i&&(i.error=i.fatal=i.warn=i.info=i.debug=i.trace=i),!1===t.enabled&&(t.level="silent");const a=t.level||"info",c=Object.create(i);c.log||(c.log=kr),Object.defineProperty(c,"levelVal",{get:function h(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(c,"level",{get:function l(){return this._level},set:function f(d){if("silent"!==d&&!this.levels.values[d])throw Error("unknown level "+d);this._level=d,Ni(u,c,"error","log"),Ni(u,c,"fatal","error"),Ni(u,c,"warn","error"),Ni(u,c,"info","log"),Ni(u,c,"debug","log"),Ni(u,c,"trace","log")}});const u={transmit:e,serialize:s,asObject:t.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:sg(t)};return c.levels=$t.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=kr,c.serializers=r,c._serialize=s,c._stdErrSerialize=n,c.child=function p(d,g){if(!d)throw new Error("missing bindings for child Pino");g=g||{},s&&d.serializers&&(g.serializers=d.serializers);const y=g.serializers;if(s&&y){var E=Object.assign({},r,y),v=!0===t.browser.serialize?Object.keys(E):s;delete d.serializers,Js([d],v,E,this._stdErrSerialize)}function m(D){this._childLevel=1+(0|D._childLevel),this.error=ki(D,d,"error"),this.fatal=ki(D,d,"fatal"),this.warn=ki(D,d,"warn"),this.info=ki(D,d,"info"),this.debug=ki(D,d,"debug"),this.trace=ki(D,d,"trace"),E&&(this.serializers=E,this._serialize=v),e&&(this._logEvent=so([].concat(D._logEvent.bindings,d)))}return m.prototype=this,new m(this)},e&&(c._logEvent=so()),c}function Ni(t,e,i,r){const s=Object.getPrototypeOf(e);e[i]=e.levelVal>e.levels.values[i]?kr:s[i]?s[i]:Nr[i]||Nr[r]||kr,function eg(t,e,i){!t.transmit&&e[i]===kr||(e[i]=function(r){return function(){const n=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Nr?Nr:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&Js(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,function tg(t,e,i,r){t._serialize&&Js(i,t._serialize,t.serializers,t._stdErrSerialize);const s=i.slice();let n=s[0];const o={};r&&(o.time=r),o.level=$t.levels.values[e];let a=1+(0|t._childLevel);if(a<1&&(a=1),null!==n&&"object"==typeof n){for(;a--&&"object"==typeof s[0];)Object.assign(o,s.shift());n=s.length?Ja(s.shift(),s):void 0}else"string"==typeof n&&(n=Ja(s.shift(),s));return void 0!==n&&(o.msg=n),o}(this,i,o,n)):r.apply(a,o),t.transmit){const u=t.transmit.level||e.level,h=$t.levels.values[u],l=$t.levels.values[i];if(l<h)return;!function ig(t,e,i){const r=e.send,s=e.ts,n=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;Js(i,t._serialize||Object.keys(t.serializers),t.serializers,void 0===t._stdErrSerialize||t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=i.filter(function(u){return-1===c.indexOf(u)}),t._logEvent.level.label=n,t._logEvent.level.value=o,r(n,t._logEvent,a),t._logEvent=so(c)}(this,{ts:n,methodLevel:i,methodValue:l,transmitLevel:u,transmitValue:$t.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[i]))}(t,e,i)}function Js(t,e,i,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=$t.stdSerializers.err(t[s]);else if("object"==typeof t[s]&&!Array.isArray(t[s]))for(const n in t[s])e&&e.indexOf(n)>-1&&n in i&&(t[s][n]=i[n](t[s][n]))}function ki(t,e,i){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[i].apply(this,r)}}function so(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function sg(t){return"function"==typeof t.timestamp?t.timestamp:!1===t.timestamp?xh:Ih}function as(){return{}}function xn(t){return t}function kr(){}function xh(){return!1}function Ih(){return Date.now()}$t.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},$t.stdSerializers=Qp,$t.stdTimeFunctions=Object.assign({},{nullTime:xh,epochTime:Ih,unixTime:function ng(){return Math.round(Date.now()/1e3)},isoTime:function og(){return new Date(Date.now()).toISOString()}});const Zs=(0,_connector_4bc69b15_js__WEBPACK_IMPORTED_MODULE_0__.f)(Hi),cg_level="info",Yr="custom_context",Ko=1024e3;let ug=class{constructor(e){this.nodeValue=e,this.sizeInBytes=(new TextEncoder).encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Za=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const i=new ug(e);if(i.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${i.size}`);for(;this.size+i.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=i),this.tail=i):(this.head=i,this.tail=i),this.lengthInNodes++,this.sizeInBytes+=i.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let i=this.head;for(;null!==i;)e.push(i.value),i=i.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const i=e.value;return e=e.next,{done:!1,value:i}}}}};class Sh{constructor(e,i=Ko){this.level=e??"error",this.levelValue=Hi.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=i,this.logs=new Za(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,i){i===Hi.levels.values.error?console.error(e):i===Hi.levels.values.warn?console.warn(e):i===Hi.levels.values.debug?console.debug(e):i===Hi.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Ii({timestamp:(new Date).toISOString(),log:e}));const i="string"==typeof e?JSON.parse(e).level:e.level;i>=this.levelValue&&this.forwardToConsole(e,i)}getLogs(){return this.logs}clearLogs(){this.logs=new Za(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const i=this.getLogArray();return i.push(Ii({extraMetadata:e})),new Blob(i,{type:"application/json"})}}let hg=class{constructor(e,i=Ko){this.baseChunkLogger=new Sh(e,i)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const i=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=i,r.download=`walletconnect-logs-${(new Date).toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(i)}},lg=class{constructor(e,i=Ko){this.baseChunkLogger=new Sh(e,i)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var fg=Object.defineProperty,dg=Object.defineProperties,pg=Object.getOwnPropertyDescriptors,Qa=Object.getOwnPropertySymbols,gg=Object.prototype.hasOwnProperty,yg=Object.prototype.propertyIsEnumerable,Xa=(t,e,i)=>e in t?fg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Ps=(t,e)=>{for(var i in e||(e={}))gg.call(e,i)&&Xa(t,i,e[i]);if(Qa)for(var i of Qa(e))yg.call(e,i)&&Xa(t,i,e[i]);return t},Rs=(t,e)=>dg(t,pg(e));function Vo(t){return Rs(Ps({},t),{level:t?.level||cg_level})}function Qe(t,e=Yr){let i="";return i=typeof t.bindings>"u"?function wg(t,e=Yr){return t[e]||""}(t,e):t.bindings().context||"",i}function je(t,e,i=Yr){const r=function bg(t,e,i=Yr){const r=Qe(t,i);return r.trim()?`${r}/${e}`:e}(t,e,i);return function mg(t,e,i=Yr){return t[i]=e,t}(t.child({context:r}),r,i)}function _g(t){return typeof t.loggerOverride<"u"&&"string"!=typeof t.loggerOverride?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?function vg(t){var e,i;const r=new hg(null==(e=t.opts)?void 0:e.level,t.maxSizeInBytes);return{logger:Zs(Rs(Ps({},t.opts),{level:"trace",browser:Rs(Ps({},null==(i=t.opts)?void 0:i.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}(t):function Eg(t){var e;const i=new lg(null==(e=t.opts)?void 0:e.level,t.maxSizeInBytes);return{logger:Zs(Rs(Ps({},t.opts),{level:"trace"}),i),chunkLoggerController:i}}(t)}var xg=Object.defineProperty,ec=(t,e,i)=>((t,e,i)=>e in t?xg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);let Sg=class extends Oi{constructor(e){super(),this.opts=e,ec(this,"protocol","wc"),ec(this,"version",2)}};var Dg=Object.defineProperty,$g=(t,e,i)=>((t,e,i)=>e in t?Dg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);class Og extends Oi{constructor(e,i){super(),this.core=e,this.logger=i,$g(this,"records",new Map)}}let Tg=class{constructor(e,i){this.logger=e,this.core=i}},Cg=class extends Oi{constructor(e,i){super(),this.relayer=e,this.logger=i}},Pg=class extends Oi{constructor(e){super()}},Rg=class{constructor(e,i,r,s){this.core=e,this.logger=i,this.name=r}},Fg=class extends Oi{constructor(e,i){super(),this.relayer=e,this.logger=i}};class Ug extends Oi{constructor(e,i){super(),this.core=e,this.logger=i}}let Bg=class{constructor(e,i,r){this.core=e,this.logger=i,this.store=r}},Ng=class{constructor(e,i){this.projectId=e,this.logger=i}},kg=class{constructor(e,i,r){this.core=e,this.logger=i,this.telemetryEnabled=r}};var Lg=Object.defineProperty,tc=(t,e,i)=>((t,e,i)=>e in t?Lg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);let qg=class{constructor(e){this.opts=e,tc(this,"protocol","wc"),tc(this,"version",2)}},jg=class{constructor(e){this.client=e}};function Dh(t,...e){if(!function zg(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function ic(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}const Li="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,In=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function Ah(t){return"string"==typeof t&&(t=function Vg(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),Dh(t),t}let Hg=class{clone(){return this._cloneInto()}};function $h(t=32){if(Li&&"function"==typeof Li.getRandomValues)return Li.getRandomValues(new Uint8Array(t));if(Li&&"function"==typeof Li.randomBytes)return Li.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}let Yg=class extends Hg{constructor(e,i,r,s){super(),this.blockLen=e,this.outputLen=i,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=In(this.buffer)}update(e){ic(this);const{view:i,buffer:r,blockLen:s}=this,n=(e=Ah(e)).length;for(let o=0;o<n;){const a=Math.min(s-this.pos,n-o);if(a===s){const c=In(e);for(;s<=n-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(i,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ic(this),function Kg(t,e){Dh(t);const i=e.outputLen;if(t.length<i)throw new Error("digestInto() expects output buffer of length at least "+i)}(e,this),this.finished=!0;const{buffer:i,view:r,blockLen:s,isLE:n}=this;let{pos:o}=this;i[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let l=o;l<s;l++)i[l]=0;(function Gg(t,e,i,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,i,r);const s=BigInt(32),n=BigInt(4294967295),o=Number(i>>s&n),a=Number(i&n),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)})(r,s-8,BigInt(8*this.length),n),this.process(r,0);const a=In(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,h[l],n)}digest(){const{buffer:e,outputLen:i}=this;this.digestInto(e);const r=e.slice(0,i);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:i,buffer:r,length:s,finished:n,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=n,e.destroyed=o,s%i&&e.buffer.set(r),e}};const cs=BigInt(2**32-1),no=BigInt(32);function Oh(t,e=!1){return e?{h:Number(t&cs),l:Number(t>>no&cs)}:{h:0|Number(t>>no&cs),l:0|Number(t&cs)}}const Y={fromBig:Oh,split:function Jg(t,e=!1){let i=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:n,l:o}=Oh(t[s],e);[i[s],r[s]]=[n,o]}return[i,r]},toBig:(t,e)=>BigInt(t>>>0)<<no|BigInt(e>>>0),shrSH:(t,e,i)=>t>>>i,shrSL:(t,e,i)=>t<<32-i|e>>>i,rotrSH:(t,e,i)=>t>>>i|e<<32-i,rotrSL:(t,e,i)=>t<<32-i|e>>>i,rotrBH:(t,e,i)=>t<<64-i|e>>>i-32,rotrBL:(t,e,i)=>t>>>i-32|e<<64-i,rotr32H:(t,e)=>e,rotr32L:(t,e)=>t,rotlSH:(t,e,i)=>t<<i|e>>>32-i,rotlSL:(t,e,i)=>e<<i|t>>>32-i,rotlBH:(t,e,i)=>e<<i-32|t>>>64-i,rotlBL:(t,e,i)=>t<<i-32|e>>>64-i,add:function h0(t,e,i,r){const s=(e>>>0)+(r>>>0);return{h:t+i+(s/2**32|0)|0,l:0|s}},add3L:(t,e,i)=>(t>>>0)+(e>>>0)+(i>>>0),add3H:(t,e,i,r)=>e+i+r+(t/2**32|0)|0,add4L:(t,e,i,r)=>(t>>>0)+(e>>>0)+(i>>>0)+(r>>>0),add4H:(t,e,i,r,s)=>e+i+r+s+(t/2**32|0)|0,add5H:(t,e,i,r,s,n)=>e+i+r+s+n+(t/2**32|0)|0,add5L:(t,e,i,r,s)=>(t>>>0)+(e>>>0)+(i>>>0)+(r>>>0)+(s>>>0)},[w0,m0]=Y.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),jt=new Uint32Array(80),zt=new Uint32Array(80);let b0=class extends Yg{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:i,Bh:r,Bl:s,Ch:n,Cl:o,Dh:a,Dl:c,Eh:u,El:h,Fh:l,Fl:f,Gh:p,Gl:d,Hh:g,Hl:y}=this;return[e,i,r,s,n,o,a,c,u,h,l,f,p,d,g,y]}set(e,i,r,s,n,o,a,c,u,h,l,f,p,d,g,y){this.Ah=0|e,this.Al=0|i,this.Bh=0|r,this.Bl=0|s,this.Ch=0|n,this.Cl=0|o,this.Dh=0|a,this.Dl=0|c,this.Eh=0|u,this.El=0|h,this.Fh=0|l,this.Fl=0|f,this.Gh=0|p,this.Gl=0|d,this.Hh=0|g,this.Hl=0|y}process(e,i){for(let m=0;m<16;m++,i+=4)jt[m]=e.getUint32(i),zt[m]=e.getUint32(i+=4);for(let m=16;m<80;m++){const D=0|jt[m-15],I=0|zt[m-15],R=Y.rotrSH(D,I,1)^Y.rotrSH(D,I,8)^Y.shrSH(D,I,7),B=Y.rotrSL(D,I,1)^Y.rotrSL(D,I,8)^Y.shrSL(D,I,7),C=0|jt[m-2],w=0|zt[m-2],O=Y.rotrSH(C,w,19)^Y.rotrBH(C,w,61)^Y.shrSH(C,w,6),_=Y.rotrSL(C,w,19)^Y.rotrBL(C,w,61)^Y.shrSL(C,w,6),$=Y.add4L(B,_,zt[m-7],zt[m-16]),P=Y.add4H($,R,O,jt[m-7],jt[m-16]);jt[m]=0|P,zt[m]=0|$}let{Ah:r,Al:s,Bh:n,Bl:o,Ch:a,Cl:c,Dh:u,Dl:h,Eh:l,El:f,Fh:p,Fl:d,Gh:g,Gl:y,Hh:E,Hl:v}=this;for(let m=0;m<80;m++){const D=Y.rotrSH(l,f,14)^Y.rotrSH(l,f,18)^Y.rotrBH(l,f,41),I=Y.rotrSL(l,f,14)^Y.rotrSL(l,f,18)^Y.rotrBL(l,f,41),R=l&p^~l&g,B=f&d^~f&y,C=Y.add5L(v,I,B,m0[m],zt[m]),w=Y.add5H(C,E,D,R,w0[m],jt[m]),O=0|C,_=Y.rotrSH(r,s,28)^Y.rotrBH(r,s,34)^Y.rotrBH(r,s,39),$=Y.rotrSL(r,s,28)^Y.rotrBL(r,s,34)^Y.rotrBL(r,s,39),P=r&n^r&a^n&a,k=s&o^s&c^o&c;E=0|g,v=0|y,g=0|p,y=0|d,p=0|l,d=0|f,({h:l,l:f}=Y.add(0|u,0|h,0|w,0|O)),u=0|a,h=0|c,a=0|n,c=0|o,n=0|r,o=0|s;const x=Y.add3L(O,$,k);r=Y.add3H(x,w,_,P),s=0|x}({h:r,l:s}=Y.add(0|this.Ah,0|this.Al,0|r,0|s)),({h:n,l:o}=Y.add(0|this.Bh,0|this.Bl,0|n,0|o)),({h:a,l:c}=Y.add(0|this.Ch,0|this.Cl,0|a,0|c)),({h:u,l:h}=Y.add(0|this.Dh,0|this.Dl,0|u,0|h)),({h:l,l:f}=Y.add(0|this.Eh,0|this.El,0|l,0|f)),({h:p,l:d}=Y.add(0|this.Fh,0|this.Fl,0|p,0|d)),({h:g,l:y}=Y.add(0|this.Gh,0|this.Gl,0|g,0|y)),({h:E,l:v}=Y.add(0|this.Hh,0|this.Hl,0|E,0|v)),this.set(r,s,n,o,a,c,u,h,l,f,p,d,g,y,E,v)}roundClean(){jt.fill(0),zt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const v0=function Wg(t){const e=r=>t().update(Ah(r)).digest(),i=t();return e.outputLen=i.outputLen,e.blockLen=i.blockLen,e.create=()=>t(),e}(()=>new b0),Ho=BigInt(0),Th=BigInt(1),E0=BigInt(2);function Wo(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function Go(t){if(!Wo(t))throw new Error("Uint8Array expected")}function Sn(t,e){if("boolean"!=typeof e)throw new Error(t+" boolean expected, got "+e)}const _0=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Yo(t){Go(t);let e="";for(let i=0;i<t.length;i++)e+=_0[t[i]];return e}function Ch(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return""===t?Ho:BigInt("0x"+t)}const Tt__0=48,Tt__9=57,Tt_A=65,Tt_F=70,Tt_a=97,Tt_f=102;function rc(t){return t>=Tt__0&&t<=Tt__9?t-Tt__0:t>=Tt_A&&t<=Tt_F?t-(Tt_A-10):t>=Tt_a&&t<=Tt_f?t-(Tt_a-10):void 0}function Ph(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,i=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(i);for(let s=0,n=0;s<i;s++,n+=2){const o=rc(t.charCodeAt(n)),a=rc(t.charCodeAt(n+1));if(void 0===o||void 0===a){const c=t[n]+t[n+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+n)}r[s]=16*o+a}return r}function Ss(t){return Go(t),Ch(Yo(Uint8Array.from(t).reverse()))}function Rh(t,e){return Ph(t.toString(16).padStart(2*e,"0"))}function oo(t,e){return Rh(t,e).reverse()}function Ct(t,e,i){let r;if("string"==typeof e)try{r=Ph(e)}catch(n){throw new Error(t+" must be hex string or Uint8Array, cause: "+n)}else{if(!Wo(e))throw new Error(t+" must be hex string or Uint8Array");r=Uint8Array.from(e)}const s=r.length;if("number"==typeof i&&s!==i)throw new Error(t+" of length "+i+" expected, got "+s);return r}function sc(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Go(s),e+=s.length}const i=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const n=t[r];i.set(n,s),s+=n.length}return i}const Dn=t=>"bigint"==typeof t&&Ho<=t;function ur(t,e,i,r){if(!function I0(t,e,i){return Dn(t)&&Dn(e)&&Dn(i)&&e<=t&&t<i}(e,i,r))throw new Error("expected valid "+t+": "+i+" <= n < "+r+", got "+e)}const D0=t=>(E0<<BigInt(t-1))-Th,A0={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||Wo(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function Jo(t,e,i={}){const r=(s,n,o)=>{const a=A0[n];if("function"!=typeof a)throw new Error("invalid validator function");const c=t[s];if(!(o&&void 0===c||a(c,t)))throw new Error("param "+String(s)+" is invalid. Expected "+n+", got "+c)};for(const[s,n]of Object.entries(e))r(s,n,!1);for(const[s,n]of Object.entries(i))r(s,n,!0);return t}function nc(t){const e=new WeakMap;return(i,...r)=>{const s=e.get(i);if(void 0!==s)return s;const n=t(i,...r);return e.set(i,n),n}}const xe=BigInt(0),pe=BigInt(1),wi=BigInt(2),$0=BigInt(3),ao=BigInt(4),oc=BigInt(5),ac=BigInt(8);function be(t,e){const i=t%e;return i>=xe?i:e+i}function O0(t,e,i){if(e<xe)throw new Error("invalid exponent, negatives unsupported");if(i<=xe)throw new Error("invalid modulus");if(i===pe)return xe;let r=pe;for(;e>xe;)e&pe&&(r=r*t%i),t=t*t%i,e>>=pe;return r}function bt(t,e,i){let r=t;for(;e-- >xe;)r*=r,r%=i;return r}function cc(t,e){if(t===xe)throw new Error("invert: expected non-zero number");if(e<=xe)throw new Error("invert: expected positive modulus, got "+e);let i=be(t,e),r=e,s=xe,n=pe;for(;i!==xe;){const a=r%i,c=s-n*(r/i);r=i,i=a,s=n,n=c}if(r!==pe)throw new Error("invert: does not exist");return be(s,e)}function C0(t){if(t%ao===$0){const e=(t+pe)/ao;return function(i,r){const s=i.pow(r,e);if(!i.eql(i.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%ac===oc){const e=(t-oc)/ac;return function(i,r){const s=i.mul(r,wi),n=i.pow(s,e),o=i.mul(r,n),a=i.mul(i.mul(o,wi),n),c=i.mul(o,i.sub(a,i.ONE));if(!i.eql(i.sqr(c),r))throw new Error("Cannot find square root");return c}}return function T0(t){const e=(t-pe)/wi;let i,r,s;for(i=t-pe,r=0;i%wi===xe;i/=wi,r++);for(s=wi;s<t&&O0(s,e,t)!==t-pe;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===r){const o=(t+pe)/ao;return function(a,c){const u=a.pow(c,o);if(!a.eql(a.sqr(u),c))throw new Error("Cannot find square root");return u}}const n=(i+pe)/wi;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,u=o.pow(o.mul(o.ONE,s),i),h=o.pow(a,n),l=o.pow(a,i);for(;!o.eql(l,o.ONE);){if(o.eql(l,o.ZERO))return o.ZERO;let f=1;for(let d=o.sqr(l);f<c&&!o.eql(d,o.ONE);f++)d=o.sqr(d);const p=o.pow(u,pe<<BigInt(c-f-1));u=o.sqr(p),h=o.mul(h,p),l=o.mul(l,u),c=f}return h}}(t)}const R0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Fh(t,e){const i=void 0!==e?e:t.toString(2).length;return{nBitLength:i,nByteLength:Math.ceil(i/8)}}function Uh(t,e,i=!1,r={}){if(t<=xe)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:n}=Fh(t,e);if(n>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:i,BITS:s,BYTES:n,MASK:D0(s),ZERO:xe,ONE:pe,create:c=>be(c,t),isValid:c=>{if("bigint"!=typeof c)throw new Error("invalid field element: expected bigint, got "+typeof c);return xe<=c&&c<t},is0:c=>c===xe,isOdd:c=>(c&pe)===pe,neg:c=>be(-c,t),eql:(c,u)=>c===u,sqr:c=>be(c*c,t),add:(c,u)=>be(c+u,t),sub:(c,u)=>be(c-u,t),mul:(c,u)=>be(c*u,t),pow:(c,u)=>function U0(t,e,i){if(i<xe)throw new Error("invalid exponent, negatives unsupported");if(i===xe)return t.ONE;if(i===pe)return e;let r=t.ONE,s=e;for(;i>xe;)i&pe&&(r=t.mul(r,s)),s=t.sqr(s),i>>=pe;return r}(a,c,u),div:(c,u)=>be(c*cc(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>cc(c,t),sqrt:r.sqrt||(c=>(o||(o=C0(t)),o(a,c))),invertBatch:c=>function B0(t,e){const i=new Array(e.length),r=e.reduce((n,o,a)=>t.is0(o)?n:(i[a]=n,t.mul(n,o)),t.ONE),s=t.inv(r);return e.reduceRight((n,o,a)=>t.is0(o)?n:(i[a]=t.mul(n,i[a]),t.mul(n,o)),s),i}(a,c),cmov:(c,u,h)=>h?u:c,toBytes:c=>i?oo(c,n):Rh(c,n),fromBytes:c=>{if(c.length!==n)throw new Error("Field.fromBytes: expected "+n+" bytes, got "+c.length);return i?Ss(c):function x0(t){return Ch(Yo(t))}(c)}});return Object.freeze(a)}const uc=BigInt(0),us=BigInt(1);function An(t,e){const i=e.negate();return t?i:e}function Bh(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function $n(t,e){Bh(t,e);return{windows:Math.ceil(e/t)+1,windowSize:2**(t-1)}}const On=new WeakMap,Nh=new WeakMap;function Tn(t){return Nh.get(t)||1}function M0(t,e,i,r){if(function N0(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((i,r)=>{if(!(i instanceof e))throw new Error("invalid point at index "+r)})}(i,t),function k0(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((i,r)=>{if(!e.isValid(i))throw new Error("invalid scalar at index "+r)})}(r,e),i.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,n=function S0(t){let e;for(e=0;t>Ho;t>>=Th,e+=1);return e}(BigInt(i.length)),o=n>12?n-3:n>4?n-2:n?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s);let h=s;for(let l=Math.floor((e.BITS-1)/o)*o;l>=0;l-=o){c.fill(s);for(let p=0;p<r.length;p++){const d=r[p],g=Number(d>>BigInt(l)&BigInt(a));c[g]=c[g].add(i[p])}let f=s;for(let p=c.length-1,d=s;p>0;p--)d=d.add(c[p]),f=f.add(d);if(h=h.add(f),0!==l)for(let p=0;p<o;p++)h=h.double()}return h}function q0(t){return function F0(t){return Jo(t,R0.reduce((r,s)=>(r[s]="function",r),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}(t.Fp),Jo(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Fh(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const dt=BigInt(0),ze=BigInt(1),hs=BigInt(2),j0=BigInt(8),z0={zip215:!0};function V0(t){const e=function K0(t){const e=q0(t);return Jo(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}(t),{Fp:i,n:r,prehash:s,hash:n,randomBytes:o,nByteLength:a,h:c}=e,u=hs<<BigInt(8*a)-ze,h=i.create,l=Uh(e.n,e.nBitLength),f=e.uvRatio||((x,b)=>{try{return{isValid:!0,value:i.sqrt(x*i.inv(b))}}catch{return{isValid:!1,value:dt}}}),p=e.adjustScalarBytes||(x=>x),d=e.domain||((x,b,S)=>{if(Sn("phflag",S),b.length||S)throw new Error("Contexts/pre-hash are not supported");return x});function g(x,b){ur("coordinate "+x,b,dt,u)}function y(x){if(!(x instanceof m))throw new Error("ExtendedPoint expected")}const E=nc((x,b)=>{const{ex:S,ey:T,ez:A}=x,U=x.is0();null==b&&(b=U?j0:i.inv(A));const N=h(S*b),j=h(T*b),z=h(A*b);if(U)return{x:dt,y:ze};if(z!==ze)throw new Error("invZ was invalid");return{x:N,y:j}}),v=nc(x=>{const{a:b,d:S}=e;if(x.is0())throw new Error("bad point: ZERO");const{ex:T,ey:A,ez:U,et:N}=x,j=h(T*T),z=h(A*A),K=h(U*U),V=h(K*K),H=h(j*b);if(h(K*h(H+z))!==h(V+h(S*h(j*z))))throw new Error("bad point: equation left != right (1)");if(h(T*A)!==h(U*N))throw new Error("bad point: equation left != right (2)");return!0});class m{constructor(b,S,T,A){this.ex=b,this.ey=S,this.ez=T,this.et=A,g("x",b),g("y",S),g("z",T),g("t",A),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(b){if(b instanceof m)throw new Error("extended point not allowed");const{x:S,y:T}=b||{};return g("x",S),g("y",T),new m(S,T,ze,h(S*T))}static normalizeZ(b){const S=i.invertBatch(b.map(T=>T.ez));return b.map((T,A)=>T.toAffine(S[A])).map(m.fromAffine)}static msm(b,S){return M0(m,l,b,S)}_setWindowSize(b){R.setWindowSize(this,b)}assertValidity(){v(this)}equals(b){y(b);const{ex:S,ey:T,ez:A}=this,{ex:U,ey:N,ez:j}=b,z=h(S*j),K=h(U*A),V=h(T*j),H=h(N*A);return z===K&&V===H}is0(){return this.equals(m.ZERO)}negate(){return new m(h(-this.ex),this.ey,this.ez,h(-this.et))}double(){const{a:b}=e,{ex:S,ey:T,ez:A}=this,U=h(S*S),N=h(T*T),j=h(hs*h(A*A)),z=h(b*U),K=S+T,V=h(h(K*K)-U-N),H=z+N,re=H-j,ie=z-N,J=h(V*re),fe=h(H*ie),Ie=h(V*ie),ui=h(re*H);return new m(J,fe,ui,Ie)}add(b){y(b);const{a:S,d:T}=e,{ex:A,ey:U,ez:N,et:j}=this,{ex:z,ey:K,ez:V,et:H}=b;if(S===BigInt(-1)){const Aa=h((U-A)*(K+z)),$a=h((U+A)*(K-z)),yn=h($a-Aa);if(yn===dt)return this.double();const Oa=h(N*hs*H),Ta=h(j*hs*V),Ca=Ta+Oa,Pa=$a+Aa,Ra=Ta-Oa,wd=h(Ca*yn),md=h(Pa*Ra),bd=h(Ca*Ra),vd=h(yn*Pa);return new m(wd,md,vd,bd)}const re=h(A*z),ie=h(U*K),J=h(j*T*H),fe=h(N*V),Ie=h((A+U)*(z+K)-re-ie),ui=fe-J,ss=fe+J,Fi=h(ie-S*re),gn=h(Ie*ui),pd=h(ss*Fi),gd=h(Ie*Fi),yd=h(ui*ss);return new m(gn,pd,yd,gd)}subtract(b){return this.add(b.negate())}wNAF(b){return R.wNAFCached(this,b,m.normalizeZ)}multiply(b){const S=b;ur("scalar",S,ze,r);const{p:T,f:A}=this.wNAF(S);return m.normalizeZ([T,A])[0]}multiplyUnsafe(b,S=m.ZERO){const T=b;return ur("scalar",T,dt,r),T===dt?I:this.is0()||T===ze?this:R.wNAFCachedUnsafe(this,T,m.normalizeZ,S)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return R.unsafeLadder(this,r).is0()}toAffine(b){return E(this,b)}clearCofactor(){const{h:b}=e;return b===ze?this:this.multiplyUnsafe(b)}static fromHex(b,S=!1){const{d:T,a:A}=e,U=i.BYTES;b=Ct("pointHex",b,U),Sn("zip215",S);const N=b.slice(),j=b[U-1];N[U-1]=-129&j;const z=Ss(N),K=S?u:i.ORDER;ur("pointHex.y",z,dt,K);const V=h(z*z),H=h(V-ze),re=h(T*V-A);let{isValid:ie,value:J}=f(H,re);if(!ie)throw new Error("Point.fromHex: invalid y coordinate");const fe=(J&ze)===ze,Ie=!!(128&j);if(!S&&J===dt&&Ie)throw new Error("Point.fromHex: x=0 and x_0=1");return Ie!==fe&&(J=h(-J)),m.fromAffine({x:J,y:z})}static fromPrivateKey(b){return w(b).point}toRawBytes(){const{x:b,y:S}=this.toAffine(),T=oo(S,i.BYTES);return T[T.length-1]|=b&ze?128:0,T}toHex(){return Yo(this.toRawBytes())}}m.BASE=new m(e.Gx,e.Gy,ze,h(e.Gx*e.Gy)),m.ZERO=new m(dt,ze,ze,dt);const{BASE:D,ZERO:I}=m,R=function L0(t,e){return{constTimeNegate:An,hasPrecomputes:i=>1!==Tn(i),unsafeLadder(i,r,s=t.ZERO){let n=i;for(;r>uc;)r&us&&(s=s.add(n)),n=n.double(),r>>=us;return s},precomputeWindow(i,r){const{windows:s,windowSize:n}=$n(r,e),o=[];let a=i,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let h=1;h<n;h++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(i,r,s){const{windows:n,windowSize:o}=$n(i,e);let a=t.ZERO,c=t.BASE;const u=BigInt(2**i-1),h=2**i,l=BigInt(i);for(let f=0;f<n;f++){const p=f*o;let d=Number(s&u);s>>=l,d>o&&(d-=h,s+=us);const g=p,y=p+Math.abs(d)-1,E=f%2!=0,v=d<0;0===d?c=c.add(An(E,r[g])):a=a.add(An(v,r[y]))}return{p:a,f:c}},wNAFUnsafe(i,r,s,n=t.ZERO){const{windows:o,windowSize:a}=$n(i,e),c=BigInt(2**i-1),u=2**i,h=BigInt(i);for(let l=0;l<o;l++){const f=l*a;if(s===uc)break;let p=Number(s&c);if(s>>=h,p>a&&(p-=u,s+=us),0===p)continue;let d=r[f+Math.abs(p)-1];p<0&&(d=d.negate()),n=n.add(d)}return n},getPrecomputes(i,r,s){let n=On.get(r);return n||(n=this.precomputeWindow(r,i),1!==i&&On.set(r,s(n))),n},wNAFCached(i,r,s){const n=Tn(i);return this.wNAF(n,this.getPrecomputes(n,i,s),r)},wNAFCachedUnsafe(i,r,s,n){const o=Tn(i);return 1===o?this.unsafeLadder(i,r,n):this.wNAFUnsafe(o,this.getPrecomputes(o,i,s),r,n)},setWindowSize(i,r){Bh(r,e),Nh.set(i,r),On.delete(i)}}}(m,8*a);function B(x){return be(x,r)}function C(x){return B(Ss(x))}function w(x){const b=i.BYTES;x=Ct("private key",x,b);const S=Ct("hashed private key",n(x),2*b),T=p(S.slice(0,b)),A=S.slice(b,2*b),U=C(T),N=D.multiply(U),j=N.toRawBytes();return{head:T,prefix:A,scalar:U,point:N,pointBytes:j}}function _(x=new Uint8Array,...b){const S=sc(...b);return C(n(d(S,Ct("context",x),!!s)))}const P=z0;return D._setWindowSize(8),{CURVE:e,getPublicKey:function O(x){return w(x).pointBytes},sign:function $(x,b,S={}){x=Ct("message",x),s&&(x=s(x));const{prefix:T,scalar:A,pointBytes:U}=w(b),N=_(S.context,T,x),j=D.multiply(N).toRawBytes(),K=B(N+_(S.context,j,U,x)*A);return ur("signature.s",K,dt,r),Ct("result",sc(j,oo(K,i.BYTES)),2*i.BYTES)},verify:function k(x,b,S,T=P){const{context:A,zip215:U}=T,N=i.BYTES;x=Ct("signature",x,2*N),b=Ct("message",b),S=Ct("publicKey",S,N),void 0!==U&&Sn("zip215",U),s&&(b=s(b));const j=Ss(x.slice(N,2*N));let z,K,V;try{z=m.fromHex(S,U),K=m.fromHex(x.slice(0,N),U),V=D.multiplyUnsafe(j)}catch{return!1}if(!U&&z.isSmallOrder())return!1;const H=_(A,K.toRawBytes(),z.toRawBytes(),b);return K.add(z.multiplyUnsafe(H)).subtract(V).clearCofactor().equals(m.ZERO)},ExtendedPoint:m,utils:{getExtendedPublicKey:w,randomPrivateKey:()=>o(i.BYTES),precompute:(x=8,b=m.BASE)=>(b._setWindowSize(x),b.multiply(BigInt(3)),b)}}}BigInt(0),BigInt(1);const Zo=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),hc=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const H0=BigInt(1),lc=BigInt(2);BigInt(3);const W0=BigInt(5),G0=BigInt(8);function J0(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Z0(t,e){const i=Zo,r=be(e*e*e,i),n=function Y0(t){const e=BigInt(10),i=BigInt(20),r=BigInt(40),s=BigInt(80),n=Zo,o=t*t%n*t%n,a=bt(o,lc,n)*o%n,c=bt(a,H0,n)*t%n,u=bt(c,W0,n)*c%n,h=bt(u,e,n)*u%n,l=bt(h,i,n)*h%n,f=bt(l,r,n)*l%n,p=bt(f,s,n)*f%n,d=bt(p,s,n)*f%n,g=bt(d,e,n)*u%n;return{pow_p_5_8:bt(g,lc,n)*t%n,b2:o}}(t*be(r*r*e,i)).pow_p_5_8;let o=be(t*r*n,i);const a=be(e*o*o,i),c=o,u=be(o*hc,i),h=a===t,l=a===be(-t,i),f=a===be(-t*hc,i);return h&&(o=c),(l||f)&&(o=u),((t,e)=>(be(t,e)&pe)===pe)(o,i)&&(o=be(-o,i)),{isValid:h||l,value:o}}const Q0=Uh(Zo,void 0,!0),kh=V0({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Q0,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:G0,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:v0,randomBytes:$h,adjustScalarBytes:J0,uvRatio:Z0}),Qs="base64url",ry="did",sy="key",fc="base58btc";function Qo(t){return null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function qh(t=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?Qo(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function jh(t,e){e||(e=t.reduce((s,n)=>s+n.length,0));const i=qh(e);let r=0;for(const s of t)i.set(s,r),r+=s.length;return Qo(i)}var uy=function cy(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var i=new Uint8Array(256),r=0;r<i.length;r++)i[r]=255;for(var s=0;s<t.length;s++){var n=t.charAt(s),o=n.charCodeAt(0);if(255!==i[o])throw new TypeError(n+" is ambiguous");i[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function f(d){if("string"!=typeof d)throw new TypeError("Expected String");if(0===d.length)return new Uint8Array;var g=0;if(" "!==d[g]){for(var y=0,E=0;d[g]===c;)y++,g++;for(var v=(d.length-g)*u+1>>>0,m=new Uint8Array(v);d[g];){var D=i[d.charCodeAt(g)];if(255===D)return;for(var I=0,R=v-1;(0!==D||I<E)&&-1!==R;R--,I++)D+=a*m[R]>>>0,m[R]=D%256>>>0,D=D/256>>>0;if(0!==D)throw new Error("Non-zero carry");E=I,g++}if(" "!==d[g]){for(var B=v-E;B!==v&&0===m[B];)B++;for(var C=new Uint8Array(y+(v-B)),w=y;B!==v;)C[w++]=m[B++];return C}}}return{encode:function l(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===d.length)return"";for(var g=0,y=0,E=0,v=d.length;E!==v&&0===d[E];)E++,g++;for(var m=(v-E)*h+1>>>0,D=new Uint8Array(m);E!==v;){for(var I=d[E],R=0,B=m-1;(0!==I||R<y)&&-1!==B;B--,R++)I+=256*D[B]>>>0,D[B]=I%a>>>0,I=I/a>>>0;if(0!==I)throw new Error("Non-zero carry");y=R,E++}for(var C=m-y;C!==m&&0===D[C];)C++;for(var w=c.repeat(g);C<m;++C)w+=t.charAt(D[C]);return w},decodeUnsafe:f,decode:function p(d){var g=f(d);if(g)return g;throw new Error(`Non-${e} character`)}}},hy=uy;const zh=t=>{if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};let dy=class{constructor(e,i,r){this.name=e,this.prefix=i,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},py=class{constructor(e,i,r){if(this.name=e,this.prefix=i,void 0===i.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=i.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Kh(this,e)}},gy=class{constructor(e){this.decoders=e}or(e){return Kh(this,e)}decode(e){const i=e[0],r=this.decoders[i];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const Kh=(t,e)=>new gy({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let yy=class{constructor(e,i,r,s){this.name=e,this.prefix=i,this.baseEncode=r,this.baseDecode=s,this.encoder=new dy(e,i,r),this.decoder=new py(e,i,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Xs=({name:t,prefix:e,encode:i,decode:r})=>new yy(t,e,i,r),Jr=({prefix:t,name:e,alphabet:i})=>{const{encode:r,decode:s}=hy(i,e);return Xs({prefix:t,name:e,encode:r,decode:n=>zh(s(n))})},Te=({name:t,prefix:e,bitsPerChar:i,alphabet:r})=>Xs({prefix:e,name:t,encode:s=>((t,e,i)=>{const r="="===e[e.length-1],s=(1<<i)-1;let n="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>i;)o-=i,n+=e[s&a>>o];if(o&&(n+=e[s&a<<i-o]),r)for(;n.length*i&7;)n+="=";return n})(s,r,i),decode:s=>((t,e,i,r)=>{const s={};for(let h=0;h<e.length;++h)s[e[h]]=h;let n=t.length;for(;"="===t[n-1];)--n;const o=new Uint8Array(n*i/8|0);let a=0,c=0,u=0;for(let h=0;h<n;++h){const l=s[t[h]];if(void 0===l)throw new SyntaxError(`Non-${r} character`);c=c<<i|l,a+=i,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=i||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(s,r,i,t)}),by=Xs({prefix:"\0",name:"identity",encode:t=>(t=>(new TextDecoder).decode(t))(t),decode:t=>(t=>(new TextEncoder).encode(t))(t)});var vy=Object.freeze({__proto__:null,identity:by});const Ey=Te({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var _y=Object.freeze({__proto__:null,base2:Ey});const xy=Te({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Iy=Object.freeze({__proto__:null,base8:xy});const Sy=Jr({prefix:"9",name:"base10",alphabet:"0123456789"});var Dy=Object.freeze({__proto__:null,base10:Sy});const Ay=Te({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),$y=Te({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Oy=Object.freeze({__proto__:null,base16:Ay,base16upper:$y});const Ty=Te({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Cy=Te({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Py=Te({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ry=Te({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Fy=Te({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Uy=Te({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),By=Te({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ny=Te({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ky=Te({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Ly=Object.freeze({__proto__:null,base32:Ty,base32upper:Cy,base32pad:Py,base32padupper:Ry,base32hex:Fy,base32hexupper:Uy,base32hexpad:By,base32hexpadupper:Ny,base32z:ky});const My=Jr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),qy=Jr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var jy=Object.freeze({__proto__:null,base36:My,base36upper:qy});const zy=Jr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ky=Jr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Vy=Object.freeze({__proto__:null,base58btc:zy,base58flickr:Ky});const Hy=Te({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Wy=Te({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Gy=Te({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Yy=Te({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Jy=Object.freeze({__proto__:null,base64:Hy,base64pad:Wy,base64url:Gy,base64urlpad:Yy});const Vh=Array.from(""),Zy=Vh.reduce((t,e,i)=>(t[i]=e,t),[]),Qy=Vh.reduce((t,e,i)=>(t[e.codePointAt(0)]=i,t),[]);const t1=Xs({prefix:"",name:"base256emoji",encode:function Xy(t){return t.reduce((e,i)=>e+=Zy[i],"")},decode:function e1(t){const e=[];for(const i of t){const r=Qy[i.codePointAt(0)];if(void 0===r)throw new Error(`Non-base256emoji character: ${i}`);e.push(r)}return new Uint8Array(e)}});var i1=Object.freeze({__proto__:null,base256emoji:t1}),r1=function Hh(t,e,i){e=e||[];for(var r=i=i||0;t>=o1;)e[i++]=255&t|dc,t/=128;for(;t&n1;)e[i++]=255&t|dc,t>>>=7;return e[i]=0|t,Hh.bytes=i-r+1,e},dc=128,n1=-128,o1=Math.pow(2,31);var a1=function co(t,r){var o,i=0,s=0,n=r=r||0,a=t.length;do{if(n>=a)throw co.bytes=0,new RangeError("Could not decode varint");o=t[n++],i+=s<28?(o&pc)<<s:(o&pc)*Math.pow(2,s),s+=7}while(o>=c1);return co.bytes=n-r,i},c1=128,pc=127;var u1=Math.pow(2,7),h1=Math.pow(2,14),l1=Math.pow(2,21),f1=Math.pow(2,28),d1=Math.pow(2,35),p1=Math.pow(2,42),g1=Math.pow(2,49),y1=Math.pow(2,56),w1=Math.pow(2,63),b1={encode:r1,decode:a1,encodingLength:function(t){return t<u1?1:t<h1?2:t<l1?3:t<f1?4:t<d1?5:t<p1?6:t<g1?7:t<y1?8:t<w1?9:10}},Wh=b1;const gc=(t,e,i=0)=>(Wh.encode(t,e,i),e),yc=t=>Wh.encodingLength(t),uo=(t,e)=>{const i=e.byteLength,r=yc(t),s=r+yc(i),n=new Uint8Array(s+i);return gc(t,n,0),gc(i,n,r),n.set(e,s),new v1(t,i,e,n)};let v1=class{constructor(e,i,r,s){this.code=e,this.size=i,this.digest=r,this.bytes=s}};const Gh=({name:t,code:e,encode:i})=>new E1(t,e,i);let E1=class{constructor(e,i,r){this.name=e,this.code=i,this.encode=r}digest(e){if(e instanceof Uint8Array){const i=this.encode(e);return i instanceof Uint8Array?uo(this.code,i):i.then(r=>uo(this.code,r))}throw Error("Unknown type, must be binary type")}};const Yh=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),_1=Gh({name:"sha2-256",code:18,encode:Yh("SHA-256")}),x1=Gh({name:"sha2-512",code:19,encode:Yh("SHA-512")});Object.freeze({__proto__:null,sha256:_1,sha512:x1});const Zh=zh,A1={code:0,name:"identity",encode:Zh,digest:t=>uo(0,Zh(t))};Object.freeze({__proto__:null,identity:A1});new TextEncoder,new TextDecoder;const wc={...vy,..._y,...Iy,...Dy,...Oy,...Ly,...jy,...Vy,...Jy,...i1};function Qh(t,e,i,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:i},decoder:{decode:r}}}const mc=Qh("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>(new TextEncoder).encode(t.substring(1))),Cn=Qh("ascii","a",t=>{let e="a";for(let i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return e},t=>{const e=qh((t=t.substring(1)).length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}),Xh={utf8:mc,"utf-8":mc,hex:wc.base16,latin1:Cn,ascii:Cn,binary:Cn,...wc};function en(t,e="utf8"){const i=Xh[e];if(!i)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?i.encoder.encode(t).substring(1):globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8")}function Xi(t,e="utf8"){const i=Xh[e];if(!i)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?i.decoder.decode(`${i.prefix}${t}`):Qo(globalThis.Buffer.from(t,"utf-8"))}function bc(t){return Yi(en(Xi(t,Qs),"utf8"))}function Us(t){return en(Xi(Ii(t),"utf8"),Qs)}function el(t){const i="z"+en(jh([Xi("K36",fc),t]),fc);return[ry,sy,i].join(":")}function O1(t){return en(t,Qs)}function ho(t){const e=t.split("."),i=bc(e[0]),r=bc(e[1]),s=function T1(t){return Xi(t,Qs)}(e[2]);return{header:i,payload:r,signature:s,data:Xi(e.slice(0,2).join("."),"utf8")}}function vc(t=$h(32)){const e=kh.getPublicKey(t);return{secretKey:jh([t,e]),publicKey:e}}async function R1(t,e,i,r,s=L.fromMiliseconds(Date.now())){const n={alg:"EdDSA",typ:"JWT"},c={iss:el(r.publicKey),sub:t,aud:e,iat:s,exp:s+i},u=function C1(t){return Xi([Us(t.header),Us(t.payload)].join("."),"utf8")}({header:n,payload:c});return function P1(t){return[Us(t.header),Us(t.payload),O1(t.signature)].join(".")}({header:n,payload:c,signature:kh.sign(u,r.secretKey.slice(0,32))})}var ue={};function Pi(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}function er(t){const e=Pi(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Object.defineProperty(ue,"__esModule",{value:!0}),ue.getLocalStorage=ue.getLocalStorageOrThrow=ue.getCrypto=ue.getCryptoOrThrow=tl=ue.getLocation=ue.getLocationOrThrow=Xo=ue.getNavigator=ue.getNavigatorOrThrow=Si=ue.getDocument=ue.getDocumentOrThrow=ue.getFromWindowOrThrow=ue.getFromWindow=void 0,ue.getFromWindow=Pi,ue.getFromWindowOrThrow=er,ue.getDocumentOrThrow=function F1(){return er("document")};var Si=ue.getDocument=function U1(){return Pi("document")};ue.getNavigatorOrThrow=function B1(){return er("navigator")};var Xo=ue.getNavigator=function N1(){return Pi("navigator")};ue.getLocationOrThrow=function k1(){return er("location")};var tl=ue.getLocation=function L1(){return Pi("location")};ue.getCryptoOrThrow=function M1(){return er("crypto")},ue.getCrypto=function q1(){return Pi("crypto")},ue.getLocalStorageOrThrow=function j1(){return er("localStorage")},ue.getLocalStorage=function z1(){return Pi("localStorage")};var ea={};Object.defineProperty(ea,"__esModule",{value:!0});var il=ea.getWindowMetadata=void 0;const Ec=ue;function Lr(t,{strict:e=!0}={}){return!(!t||"string"!=typeof t)&&(e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x"))}function lo(t){return Lr(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}il=ea.getWindowMetadata=function K1(){let t,e;try{t=Ec.getDocumentOrThrow(),e=Ec.getLocationOrThrow()}catch{return null}function r(...l){const f=t.getElementsByTagName("meta");for(let p=0;p<f.length;p++){const d=f[p],g=["itemprop","property","name"].map(y=>d.getAttribute(y)).filter(y=>!!y&&l.includes(y));if(g.length&&g){const y=d.getAttribute("content");if(y)return y}}return""}const o=function s(){let l=r("name","og:site_name","og:title","twitter:title");return l||(l=t.title),l}();return{description:function n(){return r("description","og:description","twitter:description","keywords")}(),url:e.origin,icons:function i(){const l=t.getElementsByTagName("link"),f=[];for(let p=0;p<l.length;p++){const d=l[p],g=d.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const y=d.getAttribute("href");if(y)if(-1===y.toLowerCase().indexOf("https:")&&-1===y.toLowerCase().indexOf("http:")&&0!==y.indexOf("//")){let E=e.protocol+"//"+e.host;if(0===y.indexOf("/"))E+=y;else{const v=e.pathname.split("/");v.pop();E+=v.join("/")+"/"+y}f.push(E)}else if(0===y.indexOf("//")){const E=e.protocol+y;f.push(E)}else f.push(y)}}return f}(),name:o}};let Pn_getDocsUrl=({docsBaseUrl:t,docsPath:e="",docsSlug:i})=>e?`${t??"https://viem.sh"}${e}${i?`#${i}`:""}`:void 0,Pn_version="viem@2.31.0";class Di extends Error{constructor(e,i={}){const r=i.cause instanceof Di?i.cause.details:i.cause?.message?i.cause.message:i.details,s=i.cause instanceof Di&&i.cause.docsPath||i.docsPath,n=Pn_getDocsUrl?.({...i,docsPath:s});super([e||"An error occurred.","",...i.metaMessages?[...i.metaMessages,""]:[],...n?[`Docs: ${n}`]:[],...r?[`Details: ${r}`]:[],...Pn_version?[`Version: ${Pn_version}`]:[]].join("\n"),i.cause?{cause:i.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=i.metaMessages,this.name=i.name??this.name,this.shortMessage=e,this.version="2.31.0"}walk(e){return sl(this,e)}}function sl(t,e){return e?.(t)?t:t&&"object"==typeof t&&"cause"in t&&void 0!==t.cause?sl(t.cause,e):e?null:t}class nl extends Di{constructor({size:e,targetSize:i,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${i}).`,{name:"SizeExceedsPaddingSizeError"})}}function tr(t,{dir:e,size:i=32}={}){return"string"==typeof t?function V1(t,{dir:e,size:i=32}={}){if(null===i)return t;const r=t.replace("0x","");if(r.length>2*i)throw new nl({size:Math.ceil(r.length/2),targetSize:i,type:"hex"});return`0x${r["right"===e?"padEnd":"padStart"](2*i,"0")}`}(t,{dir:e,size:i}):function H1(t,{dir:e,size:i=32}={}){if(null===i)return t;if(t.length>i)throw new nl({size:t.length,targetSize:i,type:"bytes"});const r=new Uint8Array(i);for(let s=0;s<i;s++){const n="right"===e;r[n?s:i-s-1]=t[n?s:t.length-s-1]}return r}(t,{dir:e,size:i})}class W1 extends Di{constructor({max:e,min:i,signed:r,size:s,value:n}){super(`Number "${n}" is not in safe ${s?`${8*s}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${i} to ${e})`:`(above ${i})`}`,{name:"IntegerOutOfRangeError"})}}class G1 extends Di{constructor({givenSize:e,maxSize:i}){super(`Size cannot exceed ${i} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function ir(t,{size:e}){if(lo(t)>e)throw new G1({givenSize:lo(t),maxSize:e})}function fo(t,e={}){const{signed:i}=e;e.size&&ir(t,{size:e.size});const r=BigInt(t);if(!i)return r;const s=(t.length-2)/2;return r<=(1n<<8n*BigInt(s)-1n)-1n?r:r-BigInt(`0x${"f".padStart(2*s,"f")}`)-1n}const J1=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function po(t,e={}){return"number"==typeof t||"bigint"==typeof t?al(t,e):"string"==typeof t?function X1(t,e={}){const i=Q1.encode(t);return ol(i,e)}(t,e):"boolean"==typeof t?function Z1(t,e={}){const i=`0x${Number(t)}`;return"number"==typeof e.size?(ir(i,{size:e.size}),tr(i,{size:e.size})):i}(t,e):ol(t,e)}function ol(t,e={}){let i="";for(let s=0;s<t.length;s++)i+=J1[t[s]];const r=`0x${i}`;return"number"==typeof e.size?(ir(r,{size:e.size}),tr(r,{dir:"right",size:e.size})):r}function al(t,e={}){const{signed:i,size:r}=e,s=BigInt(t);let n;r?n=i?(1n<<8n*BigInt(r)-1n)-1n:2n**(8n*BigInt(r))-1n:"number"==typeof t&&(n=BigInt(Number.MAX_SAFE_INTEGER));const o="bigint"==typeof n&&i?-n-1n:0;if(n&&s>n||s<o){const c="bigint"==typeof t?"n":"";throw new W1({max:n?`${n}${c}`:void 0,min:`${o}${c}`,signed:i,size:r,value:`${t}${c}`})}const a=`0x${(i&&s<0?(1n<<BigInt(8*r))+BigInt(s):s).toString(16)}`;return r?tr(a,{size:r}):a}const Q1=new TextEncoder;const ew=new TextEncoder;function tw(t,e={}){return"number"==typeof t||"bigint"==typeof t?function rw(t,e){const i=al(t,e);return cl(i)}(t,e):"boolean"==typeof t?function iw(t,e={}){const i=new Uint8Array(1);return i[0]=Number(t),"number"==typeof e.size?(ir(i,{size:e.size}),tr(i,{size:e.size})):i}(t,e):Lr(t)?cl(t,e):ul(t,e)}const Pt={zero:48,nine:57,A:65,F:70,a:97,f:102};function _c(t){return t>=Pt.zero&&t<=Pt.nine?t-Pt.zero:t>=Pt.A&&t<=Pt.F?t-(Pt.A-10):t>=Pt.a&&t<=Pt.f?t-(Pt.a-10):void 0}function cl(t,e={}){let i=t;e.size&&(ir(i,{size:e.size}),i=tr(i,{dir:"right",size:e.size}));let r=i.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,n=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=_c(r.charCodeAt(a++)),u=_c(r.charCodeAt(a++));if(void 0===c||void 0===u)throw new Di(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);n[o]=16*c+u}return n}function ul(t,e={}){const i=ew.encode(t);return"number"==typeof e.size?(ir(i,{size:e.size}),tr(i,{dir:"right",size:e.size})):i}const ls=BigInt(2**32-1),xc=BigInt(32);function sw(t,e=!1){return e?{h:Number(t&ls),l:Number(t>>xc&ls)}:{h:0|Number(t>>xc&ls),l:0|Number(t&ls)}}const Mi="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function Bs(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Mr(t,...e){if(!function hw(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function TD(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.createHasher");Bs(t.outputLen),Bs(t.blockLen)}function Ic(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function lw(t,e){Mr(t);const i=e.outputLen;if(t.length<i)throw new Error("digestInto() expects output buffer of length at least "+i)}function hl(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function CD(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function PD(t,e){return t<<32-e|t>>>e}function pw(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const Sc=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])()?t=>t:function gw(t){for(let e=0;e<t.length;e++)t[e]=pw(t[e]);return t};function ll(t){return"string"==typeof t&&(t=function yw(t){if("string"!=typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))}(t)),Mr(t),t}function RD(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Mr(s),e+=s.length}const i=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const n=t[r];i.set(n,s),s+=n.length}return i}class ww{}function mw(t){const e=r=>t().update(ll(r)).digest(),i=t();return e.outputLen=i.outputLen,e.blockLen=i.blockLen,e.create=()=>t(),e}function FD(t=32){if(Mi&&"function"==typeof Mi.getRandomValues)return Mi.getRandomValues(new Uint8Array(t));if(Mi&&"function"==typeof Mi.randomBytes)return Uint8Array.from(Mi.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const bw=BigInt(0),hr=BigInt(1),vw=BigInt(2),Ew=BigInt(7),_w=BigInt(256),xw=BigInt(113),fl=[],dl=[],pl=[];for(let t=0,e=hr,i=1,r=0;t<24;t++){[i,r]=[r,(2*i+3*r)%5],fl.push(2*(5*r+i)),dl.push((t+1)*(t+2)/2%64);let s=bw;for(let n=0;n<7;n++)e=(e<<hr^(e>>Ew)*xw)%_w,e&vw&&(s^=hr<<(hr<<BigInt(n))-hr);pl.push(s)}const gl=function nw(t,e=!1){const i=t.length;let r=new Uint32Array(i),s=new Uint32Array(i);for(let n=0;n<i;n++){const{h:o,l:a}=sw(t[n],e);[r[n],s[n]]=[o,a]}return[r,s]}(pl,!0),Iw=gl[0],Sw=gl[1],Dc=(t,e,i)=>i>32?((t,e,i)=>e<<i-32|t>>>64-i)(t,e,i):((t,e,i)=>t<<i|e>>>32-i)(t,e,i),Ac=(t,e,i)=>i>32?((t,e,i)=>t<<i-32|e>>>64-i)(t,e,i):((t,e,i)=>e<<i|t>>>32-i)(t,e,i);class ta extends ww{constructor(e,i,r,s=!1,n=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=i,this.outputLen=r,this.enableXOF=s,this.rounds=n,Bs(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=function fw(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}(this.state)}clone(){return this._cloneInto()}keccak(){Sc(this.state32),function Dw(t,e=24){const i=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)i[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=i[c],h=i[c+1],l=Dc(u,h,1)^i[a],f=Ac(u,h,1)^i[a+1];for(let p=0;p<50;p+=10)t[o+p]^=l,t[o+p+1]^=f}let s=t[2],n=t[3];for(let o=0;o<24;o++){const a=dl[o],c=Dc(s,n,a),u=Ac(s,n,a),h=fl[o];s=t[h],n=t[h+1],t[h]=c,t[h+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)i[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~i[(a+2)%10]&i[(a+4)%10]}t[0]^=Iw[r],t[1]^=Sw[r]}hl(i)}(this.state32,this.rounds),Sc(this.state32),this.posOut=0,this.pos=0}update(e){Ic(this),Mr(e=ll(e));const{blockLen:i,state:r}=this,s=e.length;for(let n=0;n<s;){const o=Math.min(i-this.pos,s-n);for(let a=0;a<o;a++)r[this.pos++]^=e[n++];this.pos===i&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:i,pos:r,blockLen:s}=this;e[r]^=i,128&i&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Ic(this,!1),Mr(e),this.finish();const i=this.state,{blockLen:r}=this;for(let s=0,n=e.length;s<n;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,n-s);e.set(i.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Bs(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(lw(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,hl(this.state)}_cloneInto(e){const{blockLen:i,suffix:r,outputLen:s,rounds:n,enableXOF:o}=this;return e||(e=new ta(i,r,s,o,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const $w=(()=>{return t=1,e=136,i=32,mw(()=>new ta(e,t,i));var t,e,i})();function yl(t,e){const i=e||"hex",r=$w(Lr(t,{strict:!1})?tw(t):t);return"bytes"===i?r:po(r)}class Ow extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const i=super.get(e);return super.has(e)&&void 0!==i&&(this.delete(e),super.set(e,i)),i}set(e,i){if(super.set(e,i),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Rn=new Ow(8192);function Cw(t){return function Tw(t,e){if(Rn.has(`${t}.${e}`))return Rn.get(`${t}.${e}`);const i=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=yl(ul(i),"bytes"),s=(e?i.substring(`${e}0x`.length):i).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(15&r[o>>1])>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const n=`0x${s.join("")}`;return Rn.set(`${t}.${e}`,n),n}(`0x${yl(`0x${t.substring(4)}`).substring(26)}`)}async function Pw({hash:t,signature:e}){const i=Lr(t)?t:po(t),{secp256k1:r}=await __webpack_require__.e(4005).then(__webpack_require__.bind(__webpack_require__,"./node_modules/starknetkit/dist/secp256k1-edd4123c.js"));return`0x${(()=>{if("object"==typeof e&&"r"in e&&"s"in e){const{r:u,s:h,v:l,yParity:f}=e,d=$c(Number(f??l));return new r.Signature(fo(u),fo(h)).addRecoveryBit(d)}const o=Lr(e)?e:po(e);if(65!==lo(o))throw new Error("invalid signature length");const a=function Y1(t,e={}){return Number(fo(t,e))}(`0x${o.slice(130)}`),c=$c(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(i.substring(2)).toHex(!1)}`}function $c(t){if(0===t||1===t)return t;if(27===t)return 0;if(28===t)return 1;throw new Error("Invalid yParityOrV value")}const Zr=function Fw(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let u=0;u<e.length;u++)e[u]=255;for(let u=0;u<t.length;u++){const h=t.charAt(u),l=h.charCodeAt(0);if(255!==e[l])throw new TypeError(h+" is ambiguous");e[l]=u}const i=t.length,r=t.charAt(0),s=Math.log(i)/Math.log(256),n=Math.log(256)/Math.log(i);function a(u){if("string"!=typeof u)throw new TypeError("Expected String");if(0===u.length)return new Uint8Array;let h=0,l=0,f=0;for(;u[h]===r;)l++,h++;const p=(u.length-h)*s+1>>>0,d=new Uint8Array(p);for(;h<u.length;){const v=u.charCodeAt(h);if(v>255)return;let m=e[v];if(255===m)return;let D=0;for(let I=p-1;(0!==m||D<f)&&-1!==I;I--,D++)m+=i*d[I]>>>0,d[I]=m%256>>>0,m=m/256>>>0;if(0!==m)throw new Error("Non-zero carry");f=D,h++}let g=p-f;for(;g!==p&&0===d[g];)g++;const y=new Uint8Array(l+(p-g));let E=l;for(;g!==p;)y[E++]=d[g++];return y}return{encode:function o(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===u.length)return"";let h=0,l=0,f=0;const p=u.length;for(;f!==p&&0===u[f];)f++,h++;const d=(p-f)*n+1>>>0,g=new Uint8Array(d);for(;f!==p;){let v=u[f],m=0;for(let D=d-1;(0!==v||m<l)&&-1!==D;D--,m++)v+=256*g[D]>>>0,g[D]=v%i>>>0,v=v/i>>>0;if(0!==v)throw new Error("Non-zero carry");l=m,f++}let y=d-l;for(;y!==d&&0===g[y];)y++;let E=r.repeat(h);for(;y<d;++y)E+=t.charAt(g[y]);return E},decodeUnsafe:a,decode:function c(u){const h=a(u);if(h)return h;throw new Error("Non-base"+i+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");const kw=new TextEncoder;function qw(t,e,i){t.length>50?function Mw(t,e,i){kw.encodeInto(t,e.subarray(i))}(t,e,i):function Nw(t,e,i){const r=t.length;let s=i,n=0;for(;n<r;){let o=t.charCodeAt(n++);if(4294967168&o){if(4294965248&o){if(o>=55296&&o<=56319&&n<r){const a=t.charCodeAt(n);56320==(64512&a)&&(++n,o=((1023&o)<<10)+(1023&a)+65536)}4294901760&o?(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128):(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128)}else e[s++]=o>>6&31|192;e[s++]=63&o|128}else e[s++]=o}}(t,e,i)}function wl(t,e,i){let r=e;const s=r+i,n=[];let o="";for(;r<s;){const a=t[r++];if(128&a)if(192==(224&a)){const c=63&t[r++];n.push((31&a)<<6|c)}else if(224==(240&a)){const c=63&t[r++],u=63&t[r++];n.push((31&a)<<12|c<<6|u)}else if(240==(248&a)){let l=(7&a)<<18|(63&t[r++])<<12|(63&t[r++])<<6|63&t[r++];l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l)}else n.push(a);else n.push(a);n.length>=4096&&(o+=String.fromCharCode(...n),n.length=0)}return n.length>0&&(o+=String.fromCharCode(...n)),o}const zw=new TextDecoder;function Hw(t,e,i){return i>200?function Vw(t,e,i){const r=t.subarray(e,e+i);return zw.decode(r)}(t,e,i):wl(t,e,i)}class fs{constructor(e,i){this.type=e,this.data=i}}class tt extends Error{constructor(e){super(e);const i=Object.create(tt.prototype);Object.setPrototypeOf(this,i),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:tt.name})}}const lr=4294967295;function ml(t,e,i){const r=Math.floor(i/4294967296),s=i;t.setUint32(e,r),t.setUint32(e+4,s)}function bl(t,e){return 4294967296*t.getInt32(e)+t.getUint32(e+4)}const rm={type:-1,encode:function em(t){if(t instanceof Date){const e=function Xw(t){const e=t.getTime(),i=Math.floor(e/1e3),r=1e6*(e-1e3*i),s=Math.floor(r/1e9);return{sec:i+s,nsec:r-1e9*s}}(t);return function Qw({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=17179869183){if(0===e&&t<=4294967295){const i=new Uint8Array(4);return new DataView(i.buffer).setUint32(0,t),i}{const i=t/4294967296,r=4294967295&t,s=new Uint8Array(8),n=new DataView(s.buffer);return n.setUint32(0,e<<2|3&i),n.setUint32(4,r),s}}{const i=new Uint8Array(12),r=new DataView(i.buffer);return r.setUint32(0,e),ml(r,4,t),i}}(e)}return null},decode:function im(t){const e=function tm(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const i=e.getUint32(0);return{sec:4294967296*(3&i)+e.getUint32(4),nsec:i>>>2}}case 12:return{sec:bl(e,4),nsec:e.getUint32(0)};default:throw new tt(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}(t);return new Date(1e3*e.sec+e.nsec/1e6)}};class Ns{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(rm)}register({type:e,encode:i,decode:r}){if(e>=0)this.encoders[e]=i,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=i,this.builtInDecoders[s]=r}}tryToEncode(e,i){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(null!=s){const n=s(e,i);if(null!=n){return new fs(-1-r,n)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(null!=s){const n=s(e,i);if(null!=n){return new fs(r,n)}}}return e instanceof fs?e:null}decode(e,i,r){const s=i<0?this.builtInDecoders[-1-i]:this.decoders[i];return s?s(e,i,r):new fs(i,e)}}function go(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):function sm(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}(t)?new Uint8Array(t):Uint8Array.from(t)}Ns.defaultCodec=new Ns;let am=class vl{constructor(e){this.entered=!1,this.extensionCodec=e?.extensionCodec??Ns.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.maxDepth=e?.maxDepth??100,this.initialBufferSize=e?.initialBufferSize??2048,this.sortKeys=e?.sortKeys??!1,this.forceFloat32=e?.forceFloat32??!1,this.ignoreUndefined=e?.ignoreUndefined??!1,this.forceIntegerToFloat=e?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new vl({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,i){if(i>this.maxDepth)throw new Error(`Too deep objects in depth ${i}`);null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.useBigInt64&&"bigint"==typeof e?this.encodeBigInt64(e):this.encodeObject(e,i)}ensureBufferSizeToWrite(e){const i=this.pos+e;this.view.byteLength<i&&this.resizeBuffer(2*i)}resizeBuffer(e){const i=new ArrayBuffer(e),r=new Uint8Array(i),s=new DataView(i);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){!1===e?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else{if(!(e<4294967296))throw new Error(`Too long string: ${e} bytes in UTF-8`);this.writeU8(219),this.writeU32(e)}}encodeString(e){const r=function Bw(t){const e=t.length;let i=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if(4294967168&s)if(4294965248&s){if(s>=55296&&s<=56319&&r<e){const n=t.charCodeAt(r);56320==(64512&n)&&(++r,s=((1023&s)<<10)+(1023&n)+65536)}i+=4294901760&s?4:3}else i+=2;else i++}return i}(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),qw(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,i){const r=this.extensionCodec.tryToEncode(e,this.context);if(null!=r)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,i);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else{if("object"!=typeof e)throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`);this.encodeMap(e,i)}}encodeBinary(e){const i=e.byteLength;if(i<256)this.writeU8(196),this.writeU8(i);else if(i<65536)this.writeU8(197),this.writeU16(i);else{if(!(i<4294967296))throw new Error(`Too large binary: ${i}`);this.writeU8(198),this.writeU32(i)}const r=go(e);this.writeU8a(r)}encodeArray(e,i){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else{if(!(r<4294967296))throw new Error(`Too large array: ${r}`);this.writeU8(221),this.writeU32(r)}for(const s of e)this.doEncode(s,i+1)}countWithoutUndefined(e,i){let r=0;for(const s of i)void 0!==e[s]&&r++;return r}encodeMap(e,i){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else{if(!(s<4294967296))throw new Error(`Too large map object: ${s}`);this.writeU8(223),this.writeU32(s)}for(const n of r){const o=e[n];this.ignoreUndefined&&void 0===o||(this.encodeString(n),this.doEncode(o,i+1))}}encodeExtension(e){if("function"==typeof e.data){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);return this.writeU8(201),this.writeU32(s),this.writeI8(e.type),void this.writeU8a(r)}const i=e.data.length;if(1===i)this.writeU8(212);else if(2===i)this.writeU8(213);else if(4===i)this.writeU8(214);else if(8===i)this.writeU8(215);else if(16===i)this.writeU8(216);else if(i<256)this.writeU8(199),this.writeU8(i);else if(i<65536)this.writeU8(200),this.writeU16(i);else{if(!(i<4294967296))throw new Error(`Too large extension object: ${i}`);this.writeU8(201),this.writeU32(i)}this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const i=e.length;this.ensureBufferSizeToWrite(i),this.bytes.set(e,this.pos),this.pos+=i}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),function Ww(t,e,i){const r=i/4294967296,s=i;t.setUint32(e,r),t.setUint32(e+4,s)}(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),ml(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function Fn(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const yo="array",Ar="map_key",El="map_value",fm=t=>{if("string"==typeof t||"number"==typeof t)return t;throw new tt("The type of key must be string or number but "+typeof t)};class dm{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const i=this.getUninitializedStateFromPool();i.type=yo,i.position=0,i.size=e,i.array=new Array(e)}pushMapState(e){const i=this.getUninitializedStateFromPool();i.type=Ar,i.readCount=0,i.size=e,i.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===yo){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===Ar||e.type===El){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const ia=new DataView(new ArrayBuffer(0)),pm=new Uint8Array(ia.buffer);try{ia.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const Oc=new RangeError("Insufficient data"),gm=new class lm{constructor(e=16,i=16){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=i,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,i,r){const s=this.caches[r-1];e:for(const n of s){const o=n.bytes;for(let a=0;a<r;a++)if(o[a]!==e[i+a])continue e;return n.str}return null}store(e,i){const r=this.caches[e.length-1],s={bytes:e,str:i};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,i,r){const s=this.find(e,i,r);if(null!=s)return this.hit++,s;this.miss++;const n=wl(e,i,r),o=Uint8Array.prototype.slice.call(e,i,i+r);return this.store(o,n),n}};let ym=class _l{constructor(e){this.totalPos=0,this.pos=0,this.view=ia,this.bytes=pm,this.headByte=-1,this.stack=new dm,this.entered=!1,this.extensionCodec=e?.extensionCodec??Ns.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.rawStrings=e?.rawStrings??!1,this.maxStrLength=e?.maxStrLength??lr,this.maxBinLength=e?.maxBinLength??lr,this.maxArrayLength=e?.maxArrayLength??lr,this.maxMapLength=e?.maxMapLength??lr,this.maxExtLength=e?.maxExtLength??lr,this.keyDecoder=void 0!==e?.keyDecoder?e.keyDecoder:gm,this.mapKeyConverter=e?.mapKeyConverter??fm}clone(){return new _l({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=-1,this.stack.reset()}setBuffer(e){const i=go(e);this.bytes=i,this.view=new DataView(i.buffer,i.byteOffset,i.byteLength),this.pos=0}appendBuffer(e){if(-1!==this.headByte||this.hasRemaining(1)){const i=this.bytes.subarray(this.pos),r=go(e),s=new Uint8Array(i.length+r.length);s.set(i),s.set(r,i.length),this.setBuffer(s)}else this.setBuffer(e)}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:i,pos:r}=this;return new RangeError(`Extra ${i.byteLength-r} of ${i.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const i=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return i}finally{this.entered=!1}}*decodeMulti(e){if(this.entered)yield*this.clone().decodeMulti(e);else try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let r,i=!1;for await(const a of e){if(i)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),i=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(i){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:n,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${Fn(s)} at ${o} (${n} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,i){if(this.entered)yield*this.clone().decodeMultiAsync(e,i);else try{this.entered=!0;let r=i,s=-1;for await(const n of e){if(i&&0===s)throw this.createExtraByteError(this.totalPos);this.appendBuffer(n),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),0!==--s;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let i;if(e>=224)i=e-256;else if(e<192)if(e<128)i=e;else if(e<144){const s=e-128;if(0!==s){this.pushMapState(s),this.complete();continue e}i={}}else if(e<160){const s=e-144;if(0!==s){this.pushArrayState(s),this.complete();continue e}i=[]}else{const s=e-160;i=this.decodeString(s,0)}else if(192===e)i=null;else if(194===e)i=!1;else if(195===e)i=!0;else if(202===e)i=this.readF32();else if(203===e)i=this.readF64();else if(204===e)i=this.readU8();else if(205===e)i=this.readU16();else if(206===e)i=this.readU32();else if(207===e)i=this.useBigInt64?this.readU64AsBigInt():this.readU64();else if(208===e)i=this.readI8();else if(209===e)i=this.readI16();else if(210===e)i=this.readI32();else if(211===e)i=this.useBigInt64?this.readI64AsBigInt():this.readI64();else if(217===e){const s=this.lookU8();i=this.decodeString(s,1)}else if(218===e){const s=this.lookU16();i=this.decodeString(s,2)}else if(219===e){const s=this.lookU32();i=this.decodeString(s,4)}else if(220===e){const s=this.readU16();if(0!==s){this.pushArrayState(s),this.complete();continue e}i=[]}else if(221===e){const s=this.readU32();if(0!==s){this.pushArrayState(s),this.complete();continue e}i=[]}else if(222===e){const s=this.readU16();if(0!==s){this.pushMapState(s),this.complete();continue e}i={}}else if(223===e){const s=this.readU32();if(0!==s){this.pushMapState(s),this.complete();continue e}i={}}else if(196===e){const s=this.lookU8();i=this.decodeBinary(s,1)}else if(197===e){const s=this.lookU16();i=this.decodeBinary(s,2)}else if(198===e){const s=this.lookU32();i=this.decodeBinary(s,4)}else if(212===e)i=this.decodeExtension(1,0);else if(213===e)i=this.decodeExtension(2,0);else if(214===e)i=this.decodeExtension(4,0);else if(215===e)i=this.decodeExtension(8,0);else if(216===e)i=this.decodeExtension(16,0);else if(199===e){const s=this.lookU8();i=this.decodeExtension(s,1)}else if(200===e){const s=this.lookU16();i=this.decodeExtension(s,2)}else{if(201!==e)throw new tt(`Unrecognized type byte: ${Fn(e)}`);{const s=this.lookU32();i=this.decodeExtension(s,4)}}this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===yo){if(s.array[s.position]=i,s.position++,s.position!==s.size)continue e;i=s.array,r.release(s)}else{if(s.type===Ar){if("__proto__"===i)throw new tt("The key __proto__ is not allowed");s.key=this.mapKeyConverter(i),s.type=El;continue e}if(s.map[s.key]=i,s.readCount++,s.readCount!==s.size){s.key=null,s.type=Ar;continue e}i=s.map,r.release(s)}}return i}}readHeadByte(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=-1}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new tt(`Unrecognized array type byte: ${Fn(e)}`)}}pushMapState(e){if(e>this.maxMapLength)throw new tt(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new tt(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,i){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,i):this.decodeBinary(e,i)}decodeUtf8String(e,i){if(e>this.maxStrLength)throw new tt(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+i+e)throw Oc;const r=this.pos+i;let s;return s=this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?this.keyDecoder.decode(this.bytes,r,e):Hw(this.bytes,r,e),this.pos+=i+e,s}stateIsMapKey(){return this.stack.length>0&&this.stack.top().type===Ar}decodeBinary(e,i){if(e>this.maxBinLength)throw new tt(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+i))throw Oc;const r=this.pos+i,s=this.bytes.subarray(r,r+e);return this.pos+=i+e,s}decodeExtension(e,i){if(e>this.maxExtLength)throw new tt(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+i),s=this.decodeBinary(e,i+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=function Gw(t,e){return 4294967296*t.getUint32(e)+t.getUint32(e+4)}(this.view,this.pos);return this.pos+=8,e}readI64(){const e=bl(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function xl(t,e){return!!Array.isArray(e)&&(0===e.length||(t?e.every(i=>"string"==typeof i):e.every(i=>Number.isSafeInteger(i))))}function ks(t,e){if("string"!=typeof e)throw new Error(`${t}: string expected`);return!0}function ra(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function wo(t){if(!Array.isArray(t))throw new Error("array expected")}function Ls(t,e){if(!xl(!0,e))throw new Error(`${t}: array of strings expected`)}function vm(...t){const e=n=>n,i=(n,o)=>a=>n(o(a));return{encode:t.map(n=>n.encode).reduceRight(i,e),decode:t.map(n=>n.decode).reduce(i,e)}}function Em(t){const e="string"==typeof t?t.split(""):t,i=e.length;Ls("alphabet",e);const r=new Map(e.map((s,n)=>[s,n]));return{encode:s=>(wo(s),s.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=i)throw new Error(`alphabet.encode: digit index outside alphabet "${n}". Allowed: ${t}`);return e[n]})),decode:s=>(wo(s),s.map(n=>{ks("alphabet.decode",n);const o=r.get(n);if(void 0===o)throw new Error(`Unknown letter: "${n}". Allowed: ${t}`);return o}))}}function _m(t=""){return ks("join",t),{encode:e=>(Ls("join.decode",e),e.join(t)),decode:e=>(ks("join.decode",e),e.split(t))}}function xm(t,e="="){return ra(t),ks("padding",e),{encode(i){for(Ls("padding.encode",i);i.length*t%8;)i.push(e);return i},decode(i){Ls("padding.decode",i);let r=i.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&i[r-1]===e;r--)if((r-1)*t%8==0)throw new Error("padding: invalid, string has too much padding");return i.slice(0,r)}}}const Il=(t,e)=>0===e?t:Il(e,t%e),Ms=(t,e)=>t+(e-Il(t,e)),Un=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function Tc(t,e,i,r){if(wo(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(i<=0||i>32)throw new Error(`convertRadix2: wrong to=${i}`);if(Ms(e,i)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${i} carryBits=${Ms(e,i)}`);let s=0,n=0;const o=Un[e],a=Un[i]-1,c=[];for(const u of t){if(ra(u),u>=o)throw new Error(`convertRadix2: invalid data word=${u} from=${e}`);if(s=s<<e|u,n+e>32)throw new Error(`convertRadix2: carry overflow pos=${n} from=${e}`);for(n+=e;n>=i;n-=i)c.push((s>>n-i&a)>>>0);const h=Un[n];if(void 0===h)throw new Error("invalid carry");s&=h-1}if(s=s<<i-n&a,!r&&n>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&n>0&&c.push(s>>>0),c}function Im(t,e=!1){if(ra(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(Ms(8,t)>32||Ms(t,8)>32)throw new Error("radix2: carry overflow");return{encode:i=>{if(!function mm(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}(i))throw new Error("radix2.encode input should be Uint8Array");return Tc(Array.from(i),8,t,!e)},decode:i=>(function bm(t,e){if(!xl(!1,e))throw new Error(`${t}: array of numbers expected`)}("radix2.decode",i),Uint8Array.from(Tc(i,t,8,e)))}}const Sm=vm(Im(5),Em("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),xm(5),_m(""));function sa(t){return null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Sl(t=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?sa(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function $r(t,e){e||(e=t.reduce((s,n)=>s+n.length,0));const i=Sl(e);let r=0;for(const s of t)i.set(s,r),r+=s.length;return sa(i)}var Am=function Dm(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var i=new Uint8Array(256),r=0;r<i.length;r++)i[r]=255;for(var s=0;s<t.length;s++){var n=t.charAt(s),o=n.charCodeAt(0);if(255!==i[o])throw new TypeError(n+" is ambiguous");i[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function f(d){if("string"!=typeof d)throw new TypeError("Expected String");if(0===d.length)return new Uint8Array;var g=0;if(" "!==d[g]){for(var y=0,E=0;d[g]===c;)y++,g++;for(var v=(d.length-g)*u+1>>>0,m=new Uint8Array(v);d[g];){var D=i[d.charCodeAt(g)];if(255===D)return;for(var I=0,R=v-1;(0!==D||I<E)&&-1!==R;R--,I++)D+=a*m[R]>>>0,m[R]=D%256>>>0,D=D/256>>>0;if(0!==D)throw new Error("Non-zero carry");E=I,g++}if(" "!==d[g]){for(var B=v-E;B!==v&&0===m[B];)B++;for(var C=new Uint8Array(y+(v-B)),w=y;B!==v;)C[w++]=m[B++];return C}}}return{encode:function l(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===d.length)return"";for(var g=0,y=0,E=0,v=d.length;E!==v&&0===d[E];)E++,g++;for(var m=(v-E)*h+1>>>0,D=new Uint8Array(m);E!==v;){for(var I=d[E],R=0,B=m-1;(0!==I||R<y)&&-1!==B;B--,R++)I+=256*D[B]>>>0,D[B]=I%a>>>0,I=I/a>>>0;if(0!==I)throw new Error("Non-zero carry");y=R,E++}for(var C=m-y;C!==m&&0===D[C];)C++;for(var w=c.repeat(g);C<m;++C)w+=t.charAt(D[C]);return w},decodeUnsafe:f,decode:function p(d){var g=f(d);if(g)return g;throw new Error(`Non-${e} character`)}}},$m=Am;class Pm{constructor(e,i,r){this.name=e,this.prefix=i,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Rm{constructor(e,i,r){if(this.name=e,this.prefix=i,void 0===i.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=i.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Dl(this,e)}}class Fm{constructor(e){this.decoders=e}or(e){return Dl(this,e)}decode(e){const i=e[0],r=this.decoders[i];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Dl=(t,e)=>new Fm({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Um{constructor(e,i,r,s){this.name=e,this.prefix=i,this.baseEncode=r,this.baseDecode=s,this.encoder=new Pm(e,i,r),this.decoder=new Rm(e,i,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const tn=({name:t,prefix:e,encode:i,decode:r})=>new Um(t,e,i,r),Qr=({prefix:t,name:e,alphabet:i})=>{const{encode:r,decode:s}=$m(i,e);return tn({prefix:t,name:e,encode:r,decode:n=>(t=>{if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")})(s(n))})},Ce=({name:t,prefix:e,bitsPerChar:i,alphabet:r})=>tn({prefix:e,name:t,encode:s=>((t,e,i)=>{const r="="===e[e.length-1],s=(1<<i)-1;let n="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>i;)o-=i,n+=e[s&a>>o];if(o&&(n+=e[s&a<<i-o]),r)for(;n.length*i&7;)n+="=";return n})(s,r,i),decode:s=>((t,e,i,r)=>{const s={};for(let h=0;h<e.length;++h)s[e[h]]=h;let n=t.length;for(;"="===t[n-1];)--n;const o=new Uint8Array(n*i/8|0);let a=0,c=0,u=0;for(let h=0;h<n;++h){const l=s[t[h]];if(void 0===l)throw new SyntaxError(`Non-${r} character`);c=c<<i|l,a+=i,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=i||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(s,r,i,t)}),km=tn({prefix:"\0",name:"identity",encode:t=>(t=>(new TextDecoder).decode(t))(t),decode:t=>(t=>(new TextEncoder).encode(t))(t)}),Lm=Object.freeze(Object.defineProperty({__proto__:null,identity:km},Symbol.toStringTag,{value:"Module"})),Mm=Ce({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),qm=Object.freeze(Object.defineProperty({__proto__:null,base2:Mm},Symbol.toStringTag,{value:"Module"})),jm=Ce({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),zm=Object.freeze(Object.defineProperty({__proto__:null,base8:jm},Symbol.toStringTag,{value:"Module"})),Km=Qr({prefix:"9",name:"base10",alphabet:"0123456789"}),Vm=Object.freeze(Object.defineProperty({__proto__:null,base10:Km},Symbol.toStringTag,{value:"Module"})),Hm=Ce({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Wm=Ce({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Gm=Object.freeze(Object.defineProperty({__proto__:null,base16:Hm,base16upper:Wm},Symbol.toStringTag,{value:"Module"})),Ym=Ce({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Jm=Ce({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Zm=Ce({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Qm=Ce({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Xm=Ce({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),eb=Ce({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),tb=Ce({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ib=Ce({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),rb=Ce({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),sb=Object.freeze(Object.defineProperty({__proto__:null,base32:Ym,base32hex:Xm,base32hexpad:tb,base32hexpadupper:ib,base32hexupper:eb,base32pad:Zm,base32padupper:Qm,base32upper:Jm,base32z:rb},Symbol.toStringTag,{value:"Module"})),nb=Qr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ob=Qr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),ab=Object.freeze(Object.defineProperty({__proto__:null,base36:nb,base36upper:ob},Symbol.toStringTag,{value:"Module"})),cb=Qr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ub=Qr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),hb=Object.freeze(Object.defineProperty({__proto__:null,base58btc:cb,base58flickr:ub},Symbol.toStringTag,{value:"Module"})),lb=Ce({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),fb=Ce({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),db=Ce({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),pb=Ce({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),gb=Object.freeze(Object.defineProperty({__proto__:null,base64:lb,base64pad:fb,base64url:db,base64urlpad:pb},Symbol.toStringTag,{value:"Module"})),Al=Array.from(""),yb=Al.reduce((t,e,i)=>(t[i]=e,t),[]),wb=Al.reduce((t,e,i)=>(t[e.codePointAt(0)]=i,t),[]);const vb=tn({prefix:"",name:"base256emoji",encode:function mb(t){return t.reduce((e,i)=>e+=yb[i],"")},decode:function bb(t){const e=[];for(const i of t){const r=wb[i.codePointAt(0)];if(void 0===r)throw new Error(`Non-base256emoji character: ${i}`);e.push(r)}return new Uint8Array(e)}}),Eb=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:vb},Symbol.toStringTag,{value:"Module"}));new TextEncoder,new TextDecoder;const Cc={...Lm,...qm,...zm,...Vm,...Gm,...sb,...ab,...hb,...gb,...Eb};function $l(t,e,i,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:i},decoder:{decode:r}}}const Pc=$l("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>(new TextEncoder).encode(t.substring(1))),Bn=$l("ascii","a",t=>{let e="a";for(let i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return e},t=>{const e=Sl((t=t.substring(1)).length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}),Ol={utf8:Pc,"utf-8":Pc,hex:Cc.base16,latin1:Bn,ascii:Bn,binary:Bn,...Cc};function ht(t,e="utf8"){const i=Ol[e];if(!i)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?i.decoder.decode(`${i.prefix}${t}`):sa(globalThis.Buffer.from(t,"utf-8"))}function Ze(t,e="utf8"){const i=Ol[e];if(!i)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?i.encoder.encode(t).substring(1):globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8")}const _b={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};function ds(t){return(4294967296+t).toString(16).substring(1)}var Tl={normalizeInput:function Ib(t){let e;if(t instanceof Uint8Array)e=t;else{if("string"!=typeof t)throw new Error("Input must be an string, Buffer or Uint8Array");e=(new TextEncoder).encode(t)}return e},toHex:function Sb(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")},debugPrint:function Db(t,e,i){let r="\n"+t+" = ";for(let s=0;s<e.length;s+=2){if(32===i)r+=ds(e[s]).toUpperCase(),r+=" ",r+=ds(e[s+1]).toUpperCase();else{if(64!==i)throw new Error("Invalid size "+i);r+=ds(e[s+1]).toUpperCase(),r+=ds(e[s]).toUpperCase()}s%6==4?r+="\n"+new Array(t.length+4).join(" "):s<e.length-2&&(r+=" ")}console.log(r)},testSpeed:function Ab(t,e,i){let r=(new Date).getTime();const s=new Uint8Array(e);for(let o=0;o<e;o++)s[o]=o%256;const n=(new Date).getTime();console.log("Generated random input in "+(n-r)+"ms"),r=n;for(let o=0;o<i;o++){const a=t(s),c=(new Date).getTime(),u=c-r;r=c,console.log("Hashed in "+u+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(u/1e3)*100)/100+" MB PER SECOND")}}};const Ds=Tl;function ps(t,e,i){const r=t[e]+t[i];let s=t[e+1]+t[i+1];r>=4294967296&&s++,t[e]=r,t[e+1]=s}function Rc(t,e,i,r){let s=t[e]+i;i<0&&(s+=4294967296);let n=t[e+1]+r;s>=4294967296&&n++,t[e]=s,t[e+1]=n}function Cl(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Kt(t,e,i,r,s,n){const o=xr[s],a=xr[s+1],c=xr[n],u=xr[n+1];ps(G,t,e),Rc(G,t,o,a);let h=G[r]^G[t],l=G[r+1]^G[t+1];G[r]=l,G[r+1]=h,ps(G,i,r),h=G[e]^G[i],l=G[e+1]^G[i+1],G[e]=h>>>24^l<<8,G[e+1]=l>>>24^h<<8,ps(G,t,e),Rc(G,t,c,u),h=G[r]^G[t],l=G[r+1]^G[t+1],G[r]=h>>>16^l<<16,G[r+1]=l>>>16^h<<16,ps(G,i,r),h=G[e]^G[i],l=G[e+1]^G[i+1],G[e]=l>>>31^h<<1,G[e+1]=h>>>31^l<<1}const Pl=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Re=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map(function(t){return 2*t})),G=new Uint32Array(32),xr=new Uint32Array(32);function Rl(t,e){let i=0;for(i=0;i<16;i++)G[i]=t.h[i],G[i+16]=Pl[i];for(G[24]=G[24]^t.t,G[25]=G[25]^t.t/4294967296,e&&(G[28]=~G[28],G[29]=~G[29]),i=0;i<32;i++)xr[i]=Cl(t.b,4*i);for(i=0;i<12;i++)Kt(0,8,16,24,Re[16*i+0],Re[16*i+1]),Kt(2,10,18,26,Re[16*i+2],Re[16*i+3]),Kt(4,12,20,28,Re[16*i+4],Re[16*i+5]),Kt(6,14,22,30,Re[16*i+6],Re[16*i+7]),Kt(0,10,20,30,Re[16*i+8],Re[16*i+9]),Kt(2,12,22,24,Re[16*i+10],Re[16*i+11]),Kt(4,14,16,26,Re[16*i+12],Re[16*i+13]),Kt(6,8,18,28,Re[16*i+14],Re[16*i+15]);for(i=0;i<16;i++)t.h[i]=t.h[i]^G[i]^G[i+16]}const Vt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function Fl(t,e,i,r){if(0===t||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(i&&16!==i.length)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&16!==r.length)throw new Error("Illegal personal, expected Uint8Array with length is 16");const s={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};Vt.fill(0),Vt[0]=t,e&&(Vt[1]=e.length),Vt[2]=1,Vt[3]=1,i&&Vt.set(i,32),r&&Vt.set(r,48);for(let n=0;n<16;n++)s.h[n]=Pl[n]^Cl(Vt,4*n);return e&&(na(s,e),s.c=128),s}function na(t,e){for(let i=0;i<e.length;i++)128===t.c&&(t.t+=t.c,Rl(t,!1),t.c=0),t.b[t.c++]=e[i]}function Ul(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;Rl(t,!0);const e=new Uint8Array(t.outlen);for(let i=0;i<t.outlen;i++)e[i]=t.h[i>>2]>>8*(3&i);return e}function Bl(t,e,i,r,s){i=i||64,t=Ds.normalizeInput(t),r&&(r=Ds.normalizeInput(r)),s&&(s=Ds.normalizeInput(s));const n=Fl(i,e,r,s);return na(n,t),Ul(n)}var Tb={blake2b:Bl,blake2bHex:function Ob(t,e,i,r,s){const n=Bl(t,e,i,r,s);return Ds.toHex(n)},blake2bInit:Fl,blake2bUpdate:na,blake2bFinal:Ul};const Nl=Tl;function Cb(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Ht(t,e,i,r,s,n){te[t]=te[t]+te[e]+s,te[r]=gs(te[r]^te[t],16),te[i]=te[i]+te[r],te[e]=gs(te[e]^te[i],12),te[t]=te[t]+te[e]+n,te[r]=gs(te[r]^te[t],8),te[i]=te[i]+te[r],te[e]=gs(te[e]^te[i],7)}function gs(t,e){return t>>>e^t<<32-e}const kl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Fe=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),te=new Uint32Array(16),Se=new Uint32Array(16);function Ll(t,e){let i=0;for(i=0;i<8;i++)te[i]=t.h[i],te[i+8]=kl[i];for(te[12]^=t.t,te[13]^=t.t/4294967296,e&&(te[14]=~te[14]),i=0;i<16;i++)Se[i]=Cb(t.b,4*i);for(i=0;i<10;i++)Ht(0,4,8,12,Se[Fe[16*i+0]],Se[Fe[16*i+1]]),Ht(1,5,9,13,Se[Fe[16*i+2]],Se[Fe[16*i+3]]),Ht(2,6,10,14,Se[Fe[16*i+4]],Se[Fe[16*i+5]]),Ht(3,7,11,15,Se[Fe[16*i+6]],Se[Fe[16*i+7]]),Ht(0,5,10,15,Se[Fe[16*i+8]],Se[Fe[16*i+9]]),Ht(1,6,11,12,Se[Fe[16*i+10]],Se[Fe[16*i+11]]),Ht(2,7,8,13,Se[Fe[16*i+12]],Se[Fe[16*i+13]]),Ht(3,4,9,14,Se[Fe[16*i+14]],Se[Fe[16*i+15]]);for(i=0;i<8;i++)t.h[i]^=te[i]^te[i+8]}function Ml(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const i=e?e.length:0;if(e&&!(i>0&&i<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(kl),b:new Uint8Array(64),c:0,t:0,outlen:t};return r.h[0]^=16842752^i<<8^t,i>0&&(oa(r,e),r.c=64),r}function oa(t,e){for(let i=0;i<e.length;i++)64===t.c&&(t.t+=t.c,Ll(t,!1),t.c=0),t.b[t.c++]=e[i]}function ql(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;Ll(t,!0);const e=new Uint8Array(t.outlen);for(let i=0;i<t.outlen;i++)e[i]=t.h[i>>2]>>8*(3&i)&255;return e}function jl(t,e,i){i=i||32,t=Nl.normalizeInput(t);const r=Ml(i,e);return oa(r,t),ql(r)}var Rb={blake2s:jl,blake2sHex:function Pb(t,e,i){const r=jl(t,e,i);return Nl.toHex(r)},blake2sInit:Ml,blake2sUpdate:oa,blake2sFinal:ql};var Fb={blake2b:Tb.blake2b,blake2bHex:Tb.blake2bHex,blake2bInit:Tb.blake2bInit,blake2bUpdate:Tb.blake2bUpdate,blake2bFinal:Tb.blake2bFinal,blake2s:Rb.blake2s,blake2sHex:Rb.blake2sHex,blake2sInit:Rb.blake2sInit,blake2sUpdate:Rb.blake2sUpdate,blake2sFinal:Rb.blake2sFinal};function As(t){const[e,i]=t.split(":");return{namespace:e,reference:i}}function kb(t){const{namespace:e,reference:i}=function Bb(t){const[e,i,r]=t.split(":");return{namespace:e,reference:i,address:r}}(t);return function Ub(t){const{namespace:e,reference:i}=t;return[e,i].join(":")}({namespace:e,reference:i})}function zl(t,e=[]){const i=[];return Object.keys(t).forEach(r=>{if(e.length&&!e.includes(r))return;const s=t[r];i.push(...s.accounts)}),i}function Kl(t,e=[]){const i=[];return Object.keys(t).forEach(r=>{if(e.length&&!e.includes(r))return;const s=t[r];i.push(...function Lb(t){return function Nb(t,e){const i=[];return t.forEach(r=>{const s=e(r);i.includes(s)||i.push(s)}),i}(t,kb)}(s.accounts))}),i}function ca(t,e){return t.includes(":")?[t]:e.chains||[]}var qb=Object.defineProperty,jb=Object.defineProperties,zb=Object.getOwnPropertyDescriptors,Fc=Object.getOwnPropertySymbols,Kb=Object.prototype.hasOwnProperty,Vb=Object.prototype.propertyIsEnumerable,mo=(t,e,i)=>e in t?qb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Uc=(t,e)=>{for(var i in e||(e={}))Kb.call(e,i)&&mo(t,i,e[i]);if(Fc)for(var i of Fc(e))Vb.call(e,i)&&mo(t,i,e[i]);return t},Bc=(t,e,i)=>mo(t,"symbol"!=typeof e?e+"":e,i);const it_reactNative="react-native",it_node="node",it_browser="browser",it_unknown="unknown",Gb="js";function qs(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function ci(){return!Si()&&!!Xo()&&"ReactNative"===navigator.product}function rr(){return!qs()&&!!Xo()&&!!Si()}function Xr(){return ci()?it_reactNative:qs()?it_node:rr()?it_browser:it_unknown}function Nc(){var t;try{return ci()&&typeof __webpack_require__.g<"u"&&typeof(null==__webpack_require__.g?void 0:__webpack_require__.g.Application)<"u"?null==(t=__webpack_require__.g.Application)?void 0:t.applicationId:void 0}catch{return}}function Qb(t){var e,i;const r=Vl();try{return null!=t&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),null!=(e=t?.icons)&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>""!==s)),((t,e)=>jb(t,zb(e)))(Uc(Uc({},r),t),{url:t?.url||r.url,name:t?.name||r.name,description:t?.description||r.description,icons:null!=(i=t?.icons)&&i.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function Vl(){return il()||{name:"",description:"",url:"",icons:[""]}}function Hl(t,e,i){const r=function Xb(){if(Xr()===it_reactNative&&typeof __webpack_require__.g<"u"&&typeof(null==__webpack_require__.g?void 0:__webpack_require__.g.Platform)<"u"){const{OS:i,Version:r}=__webpack_require__.g.Platform;return[i,r].join("-")}const t=(0,_Modal_b083f70f_js__WEBPACK_IMPORTED_MODULE_1__.d)();if(null===t)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return"browser"===t.type?[e,t.name,t.version].join("-"):[e,t.version].join("-")}(),s=function ev(){var t;const e=Xr();return e===it_browser?[e,(null==(t=tl())?void 0:t.host)||"unknown"].join(":"):e}();return[[t,e].join("-"),[Gb,i].join("-"),r,s].join("/")}function tv({protocol:t,version:e,relayUrl:i,sdkVersion:r,auth:s,projectId:n,useOnCloseEvent:o,bundleId:a,packageName:c}){const u=i.split("?"),l={auth:s,ua:Hl(t,e,r),projectId:n,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:a||void 0},f=function Zb(t,e){const i=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];void 0!==s&&i.set(r,s)}return i.toString()}(u[1]||"",l);return u[0]+"?"+f}function bi(t,e){return t.filter(i=>e.includes(i)).length===t.length}function bo(t){return Object.fromEntries(t.entries())}function vo(t){return new Map(Object.entries(t))}function yi(t=L.FIVE_MINUTES,e){const i=L.toMiliseconds(t||L.FIVE_MINUTES);let r,s,n,o;return{resolve:a=>{n&&r&&(clearTimeout(n),r(a),o=Promise.resolve(a))},reject:a=>{n&&s&&(clearTimeout(n),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);n=setTimeout(()=>{const u=new Error(e);o=Promise.reject(u),c(u)},i),r=a,s=c})}}function At(t,e,i){return new Promise(async(r,s)=>{const n=setTimeout(()=>s(new Error(i)),e);try{r(await t)}catch(o){s(o)}clearTimeout(n)})}function Wl(t,e){if("string"==typeof e&&e.startsWith(`${t}:`))return e;if("topic"===t.toLowerCase()){if("string"!=typeof e)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}if("id"===t.toLowerCase()){if("number"!=typeof e)throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Gl(t){const[e,i]=t.split(":"),r={id:void 0,topic:void 0};if("topic"===e&&"string"==typeof i)r.topic=i;else{if("id"!==e||!Number.isInteger(Number(i)))throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${i}`);r.id=Number(i)}return r}function me(t,e){return L.fromMiliseconds((e||Date.now())+L.toMiliseconds(t))}function ei(t){return Date.now()>=L.toMiliseconds(t)}function se(t,e){return`${t}${e?`:${e}`:""}`}function xi(t=[],e=[]){return[...new Set([...t,...e])]}async function sv({id:t,topic:e,wcDeepLink:i}){var r;try{if(!i)return;const s="string"==typeof i?JSON.parse(i):i,n=s?.href;if("string"!=typeof n)return;const o=function nv(t,e,i){const r=`requestId=${e}&sessionTopic=${i}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){s=`${s}${t.includes("?")?"&startapp=":"?startapp="}${function hv(t,e=!1){const i=Buffer.from(t).toString("base64");return e?i.replace(/[=]/g,""):i}(r,!0)}`}else s=`${s}/wc?${r}`;return s}(n,t,e),a=Xr();if(a===it_browser){if(null==(r=Si())||!r.hasFocus())return void console.warn("Document does not have focus, skipping deeplink.");!function ov(t){let e="_self";!function uv(){try{return window.self!==window.top}catch{return!1}}()?(function cv(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"):e="_top",window.open(t,e,"noreferrer noopener")}(o)}else a===it_reactNative&&typeof(null==__webpack_require__.g?void 0:__webpack_require__.g.Linking)<"u"&&await __webpack_require__.g.Linking.openURL(o)}catch(s){console.error(s)}}function kc(t,e){if(!t.includes(e))return null;const i=t.split(/([&,?,=])/),r=i.indexOf(e);return i[r+2]}function Lc(){return typeof crypto<"u"&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}function ua(){return typeof process<"u"&&"true"===process.env.IS_VITEST}function Yl(t){return Buffer.from(t,"base64").toString("utf-8")}let fv=class{constructor({limit:e}){Bc(this,"limit"),Bc(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const i=this.set.values().next().value;i&&this.set.delete(i)}this.set.add(e)}}has(e){return this.set.has(e)}};const ys=BigInt(2**32-1),Mc=BigInt(32);function Jl(t,e=!1){return e?{h:Number(t&ys),l:Number(t>>Mc&ys)}:{h:0|Number(t>>Mc&ys),l:0|Number(t&ys)}}function Zl(t,e=!1){const i=t.length;let r=new Uint32Array(i),s=new Uint32Array(i);for(let n=0;n<i;n++){const{h:o,l:a}=Jl(t[n],e);[r[n],s[n]]=[o,a]}return[r,s]}const qc=(t,e,i)=>t>>>i,jc=(t,e,i)=>t<<32-i|e>>>i,ti=(t,e,i)=>t>>>i|e<<32-i,ii=(t,e,i)=>t<<32-i|e>>>i,Ir=(t,e,i)=>t<<64-i|e>>>i-32,Sr=(t,e,i)=>t>>>i-32|e<<64-i,dv=(t,e)=>e,pv=(t,e)=>t;function yt(t,e,i,r){const s=(e>>>0)+(r>>>0);return{h:t+i+(s/2**32|0)|0,l:0|s}}const ha=(t,e,i)=>(t>>>0)+(e>>>0)+(i>>>0),la=(t,e,i,r)=>e+i+r+(t/2**32|0)|0,bv=(t,e,i,r)=>(t>>>0)+(e>>>0)+(i>>>0)+(r>>>0),vv=(t,e,i,r,s)=>e+i+r+s+(t/2**32|0)|0,Ev=(t,e,i,r,s)=>(t>>>0)+(e>>>0)+(i>>>0)+(r>>>0)+(s>>>0),_v=(t,e,i,r,s,n)=>e+i+r+s+n+(t/2**32|0)|0,qi="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function fa(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function qt(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function lt(t,...e){if(!fa(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function da(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.createHasher");qt(t.outputLen),qt(t.blockLen)}function ai(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function pa(t,e){lt(t);const i=e.outputLen;if(t.length<i)throw new Error("digestInto() expects output buffer of length at least "+i)}function qr(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function ft(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Nn(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function vt(t,e){return t<<32-e|t>>>e}const Ql=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Xl(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const Bt=Ql?t=>t:t=>Xl(t);const ri=Ql?t=>t:function xv(t){for(let e=0;e<t.length;e++)t[e]=Xl(t[e]);return t},ef="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,Iv=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function jr(t){if(lt(t),ef)return t.toHex();let e="";for(let i=0;i<t.length;i++)e+=Iv[t[i]];return e}const Rt__0=48,Rt__9=57,Rt_A=65,Rt_F=70,Rt_a=97,Rt_f=102;function zc(t){return t>=Rt__0&&t<=Rt__9?t-Rt__0:t>=Rt_A&&t<=Rt_F?t-(Rt_A-10):t>=Rt_a&&t<=Rt_f?t-(Rt_a-10):void 0}function ga(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);if(ef)return Uint8Array.fromHex(t);const e=t.length,i=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(i);for(let s=0,n=0;s<i;s++,n+=2){const o=zc(t.charCodeAt(n)),a=zc(t.charCodeAt(n+1));if(void 0===o||void 0===a){const c=t[n]+t[n+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+n)}r[s]=16*o+a}return r}function mt(t){return"string"==typeof t&&(t=function Sv(t){if("string"!=typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))}(t)),lt(t),t}function vi(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];lt(s),e+=s.length}const i=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const n=t[r];i.set(n,s),s+=n.length}return i}class rn{}function es(t){const e=r=>t().update(mt(r)).digest(),i=t();return e.outputLen=i.outputLen,e.blockLen=i.blockLen,e.create=()=>t(),e}function sr(t=32){if(qi&&"function"==typeof qi.getRandomValues)return qi.getRandomValues(new Uint8Array(t));if(qi&&"function"==typeof qi.randomBytes)return Uint8Array.from(qi.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const Av=BigInt(0),gr=BigInt(1),$v=BigInt(2),Ov=BigInt(7),Tv=BigInt(256),Cv=BigInt(113),tf=[],rf=[],sf=[];for(let t=0,e=gr,i=1,r=0;t<24;t++){[i,r]=[r,(2*i+3*r)%5],tf.push(2*(5*r+i)),rf.push((t+1)*(t+2)/2%64);let s=Av;for(let n=0;n<7;n++)e=(e<<gr^(e>>Ov)*Cv)%Tv,e&$v&&(s^=gr<<(gr<<BigInt(n))-gr);sf.push(s)}const nf=Zl(sf,!0),Pv=nf[0],Rv=nf[1],Kc=(t,e,i)=>i>32?((t,e,i)=>e<<i-32|t>>>64-i)(t,e,i):((t,e,i)=>t<<i|e>>>32-i)(t,e,i),Vc=(t,e,i)=>i>32?((t,e,i)=>t<<i-32|e>>>64-i)(t,e,i):((t,e,i)=>e<<i|t>>>32-i)(t,e,i);let Uv=class of extends rn{constructor(e,i,r,s=!1,n=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=i,this.outputLen=r,this.enableXOF=s,this.rounds=n,qt(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=qr(this.state)}clone(){return this._cloneInto()}keccak(){ri(this.state32),function Fv(t,e=24){const i=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)i[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=i[c],h=i[c+1],l=Kc(u,h,1)^i[a],f=Vc(u,h,1)^i[a+1];for(let p=0;p<50;p+=10)t[o+p]^=l,t[o+p+1]^=f}let s=t[2],n=t[3];for(let o=0;o<24;o++){const a=rf[o],c=Kc(s,n,a),u=Vc(s,n,a),h=tf[o];s=t[h],n=t[h+1],t[h]=c,t[h+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)i[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~i[(a+2)%10]&i[(a+4)%10]}t[0]^=Pv[r],t[1]^=Rv[r]}ft(i)}(this.state32,this.rounds),ri(this.state32),this.posOut=0,this.pos=0}update(e){ai(this),lt(e=mt(e));const{blockLen:i,state:r}=this,s=e.length;for(let n=0;n<s;){const o=Math.min(i-this.pos,s-n);for(let a=0;a<o;a++)r[this.pos++]^=e[n++];this.pos===i&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:i,pos:r,blockLen:s}=this;e[r]^=i,128&i&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){ai(this,!1),lt(e),this.finish();const i=this.state,{blockLen:r}=this;for(let s=0,n=e.length;s<n;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,n-s);e.set(i.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return qt(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(pa(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,ft(this.state)}_cloneInto(e){const{blockLen:i,suffix:r,outputLen:s,rounds:n,enableXOF:o}=this;return e||(e=new of(i,r,s,o,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Nv=(t=1,e=136,i=32,es(()=>new Uv(e,t,i)));var t,e,i;function Lv(t,e,i){return t&e^~t&i}function Mv(t,e,i){return t&e^t&i^e&i}let af=class extends rn{constructor(e,i,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=i,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Nn(this.buffer)}update(e){ai(this),lt(e=mt(e));const{view:i,buffer:r,blockLen:s}=this,n=e.length;for(let o=0;o<n;){const a=Math.min(s-this.pos,n-o);if(a===s){const c=Nn(e);for(;s<=n-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(i,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ai(this),pa(e,this),this.finished=!0;const{buffer:i,view:r,blockLen:s,isLE:n}=this;let{pos:o}=this;i[o++]=128,ft(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let l=o;l<s;l++)i[l]=0;(function kv(t,e,i,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,i,r);const s=BigInt(32),n=BigInt(4294967295),o=Number(i>>s&n),a=Number(i&n),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)})(r,s-8,BigInt(8*this.length),n),this.process(r,0);const a=Nn(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,h[l],n)}digest(){const{buffer:e,outputLen:i}=this;this.digestInto(e);const r=e.slice(0,i);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:i,buffer:r,length:s,finished:n,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=n,e.length=s,e.pos=a,s%i&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Wt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ue=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Be=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),qv=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Gt=new Uint32Array(64);let jv=class extends af{constructor(e=32){super(64,e,8,!1),this.A=0|Wt[0],this.B=0|Wt[1],this.C=0|Wt[2],this.D=0|Wt[3],this.E=0|Wt[4],this.F=0|Wt[5],this.G=0|Wt[6],this.H=0|Wt[7]}get(){const{A:e,B:i,C:r,D:s,E:n,F:o,G:a,H:c}=this;return[e,i,r,s,n,o,a,c]}set(e,i,r,s,n,o,a,c){this.A=0|e,this.B=0|i,this.C=0|r,this.D=0|s,this.E=0|n,this.F=0|o,this.G=0|a,this.H=0|c}process(e,i){for(let l=0;l<16;l++,i+=4)Gt[l]=e.getUint32(i,!1);for(let l=16;l<64;l++){const f=Gt[l-15],p=Gt[l-2],d=vt(f,7)^vt(f,18)^f>>>3,g=vt(p,17)^vt(p,19)^p>>>10;Gt[l]=g+Gt[l-7]+d+Gt[l-16]|0}let{A:r,B:s,C:n,D:o,E:a,F:c,G:u,H:h}=this;for(let l=0;l<64;l++){const p=h+(vt(a,6)^vt(a,11)^vt(a,25))+Lv(a,c,u)+qv[l]+Gt[l]|0,d=(vt(r,2)^vt(r,13)^vt(r,22))+Mv(r,s,n)|0;h=u,u=c,c=a,a=o+p|0,o=n,n=s,s=r,r=p+d|0}r=r+this.A|0,s=s+this.B|0,n=n+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(r,s,n,o,a,c,u,h)}roundClean(){ft(Gt)}destroy(){this.set(0,0,0,0,0,0,0,0),ft(this.buffer)}};const cf=Zl(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),zv=cf[0],Kv=cf[1],Yt=new Uint32Array(80),Jt=new Uint32Array(80);let ya=class extends af{constructor(e=64){super(128,e,16,!1),this.Ah=0|Be[0],this.Al=0|Be[1],this.Bh=0|Be[2],this.Bl=0|Be[3],this.Ch=0|Be[4],this.Cl=0|Be[5],this.Dh=0|Be[6],this.Dl=0|Be[7],this.Eh=0|Be[8],this.El=0|Be[9],this.Fh=0|Be[10],this.Fl=0|Be[11],this.Gh=0|Be[12],this.Gl=0|Be[13],this.Hh=0|Be[14],this.Hl=0|Be[15]}get(){const{Ah:e,Al:i,Bh:r,Bl:s,Ch:n,Cl:o,Dh:a,Dl:c,Eh:u,El:h,Fh:l,Fl:f,Gh:p,Gl:d,Hh:g,Hl:y}=this;return[e,i,r,s,n,o,a,c,u,h,l,f,p,d,g,y]}set(e,i,r,s,n,o,a,c,u,h,l,f,p,d,g,y){this.Ah=0|e,this.Al=0|i,this.Bh=0|r,this.Bl=0|s,this.Ch=0|n,this.Cl=0|o,this.Dh=0|a,this.Dl=0|c,this.Eh=0|u,this.El=0|h,this.Fh=0|l,this.Fl=0|f,this.Gh=0|p,this.Gl=0|d,this.Hh=0|g,this.Hl=0|y}process(e,i){for(let m=0;m<16;m++,i+=4)Yt[m]=e.getUint32(i),Jt[m]=e.getUint32(i+=4);for(let m=16;m<80;m++){const D=0|Yt[m-15],I=0|Jt[m-15],R=ti(D,I,1)^ti(D,I,8)^qc(D,0,7),B=ii(D,I,1)^ii(D,I,8)^jc(D,I,7),C=0|Yt[m-2],w=0|Jt[m-2],O=ti(C,w,19)^Ir(C,w,61)^qc(C,0,6),_=ii(C,w,19)^Sr(C,w,61)^jc(C,w,6),$=bv(B,_,Jt[m-7],Jt[m-16]),P=vv($,R,O,Yt[m-7],Yt[m-16]);Yt[m]=0|P,Jt[m]=0|$}let{Ah:r,Al:s,Bh:n,Bl:o,Ch:a,Cl:c,Dh:u,Dl:h,Eh:l,El:f,Fh:p,Fl:d,Gh:g,Gl:y,Hh:E,Hl:v}=this;for(let m=0;m<80;m++){const D=ti(l,f,14)^ti(l,f,18)^Ir(l,f,41),I=ii(l,f,14)^ii(l,f,18)^Sr(l,f,41),R=l&p^~l&g,C=Ev(v,I,f&d^~f&y,Kv[m],Jt[m]),w=_v(C,E,D,R,zv[m],Yt[m]),O=0|C,_=ti(r,s,28)^Ir(r,s,34)^Ir(r,s,39),$=ii(r,s,28)^Sr(r,s,34)^Sr(r,s,39),P=r&n^r&a^n&a,k=s&o^s&c^o&c;E=0|g,v=0|y,g=0|p,y=0|d,p=0|l,d=0|f,({h:l,l:f}=yt(0|u,0|h,0|w,0|O)),u=0|a,h=0|c,a=0|n,c=0|o,n=0|r,o=0|s;const x=ha(O,$,k);r=la(x,w,_,P),s=0|x}({h:r,l:s}=yt(0|this.Ah,0|this.Al,0|r,0|s)),({h:n,l:o}=yt(0|this.Bh,0|this.Bl,0|n,0|o)),({h:a,l:c}=yt(0|this.Ch,0|this.Cl,0|a,0|c)),({h:u,l:h}=yt(0|this.Dh,0|this.Dl,0|u,0|h)),({h:l,l:f}=yt(0|this.Eh,0|this.El,0|l,0|f)),({h:p,l:d}=yt(0|this.Fh,0|this.Fl,0|p,0|d)),({h:g,l:y}=yt(0|this.Gh,0|this.Gl,0|g,0|y)),({h:E,l:v}=yt(0|this.Hh,0|this.Hl,0|E,0|v)),this.set(r,s,n,o,a,c,u,h,l,f,p,d,g,y,E,v)}roundClean(){ft(Yt,Jt)}destroy(){ft(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Vv=class extends ya{constructor(){super(48),this.Ah=0|Ue[0],this.Al=0|Ue[1],this.Bh=0|Ue[2],this.Bl=0|Ue[3],this.Ch=0|Ue[4],this.Cl=0|Ue[5],this.Dh=0|Ue[6],this.Dl=0|Ue[7],this.Eh=0|Ue[8],this.El=0|Ue[9],this.Fh=0|Ue[10],this.Fl=0|Ue[11],this.Gh=0|Ue[12],this.Gl=0|Ue[13],this.Hh=0|Ue[14],this.Hl=0|Ue[15]}};const Ne=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class Hv extends ya{constructor(){super(32),this.Ah=0|Ne[0],this.Al=0|Ne[1],this.Bh=0|Ne[2],this.Bl=0|Ne[3],this.Ch=0|Ne[4],this.Cl=0|Ne[5],this.Dh=0|Ne[6],this.Dl=0|Ne[7],this.Eh=0|Ne[8],this.El=0|Ne[9],this.Fh=0|Ne[10],this.Fl=0|Ne[11],this.Gh=0|Ne[12],this.Gl=0|Ne[13],this.Hh=0|Ne[14],this.Hl=0|Ne[15]}}const sn=es(()=>new jv),Wv=es(()=>new ya),Gv=es(()=>new Vv),Yv=es(()=>new Hv),Jv=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),we=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),q=new Uint32Array(32);function Zt(t,e,i,r,s,n){const o=s[n],a=s[n+1];let c=q[2*t],u=q[2*t+1],h=q[2*e],l=q[2*e+1],f=q[2*i],p=q[2*i+1],d=q[2*r],g=q[2*r+1],y=ha(c,h,o);u=la(y,u,l,a),c=0|y,({Dh:g,Dl:d}={Dh:g^u,Dl:d^c}),({Dh:g,Dl:d}={Dh:dv(0,d),Dl:pv(g)}),({h:p,l:f}=yt(p,f,g,d)),({Bh:l,Bl:h}={Bh:l^p,Bl:h^f}),({Bh:l,Bl:h}={Bh:ti(l,h,24),Bl:ii(l,h,24)}),q[2*t]=c,q[2*t+1]=u,q[2*e]=h,q[2*e+1]=l,q[2*i]=f,q[2*i+1]=p,q[2*r]=d,q[2*r+1]=g}function Qt(t,e,i,r,s,n){const o=s[n],a=s[n+1];let c=q[2*t],u=q[2*t+1],h=q[2*e],l=q[2*e+1],f=q[2*i],p=q[2*i+1],d=q[2*r],g=q[2*r+1],y=ha(c,h,o);u=la(y,u,l,a),c=0|y,({Dh:g,Dl:d}={Dh:g^u,Dl:d^c}),({Dh:g,Dl:d}={Dh:ti(g,d,16),Dl:ii(g,d,16)}),({h:p,l:f}=yt(p,f,g,d)),({Bh:l,Bl:h}={Bh:l^p,Bl:h^f}),({Bh:l,Bl:h}={Bh:Ir(l,h,63),Bl:Sr(l,h,63)}),q[2*t]=c,q[2*t+1]=u,q[2*e]=h,q[2*e+1]=l,q[2*i]=f,q[2*i+1]=p,q[2*r]=d,q[2*r+1]=g}class Qv extends rn{constructor(e,i){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,qt(e),qt(i),this.blockLen=e,this.outputLen=i,this.buffer=new Uint8Array(e),this.buffer32=qr(this.buffer)}update(e){ai(this),lt(e=mt(e));const{blockLen:i,buffer:r,buffer32:s}=this,n=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<n;){this.pos===i&&(ri(s),this.compress(s,0,!1),ri(s),this.pos=0);const u=Math.min(i-this.pos,n-c),h=o+c;if(u===i&&!(h%4)&&c+u<n){const l=new Uint32Array(a,h,Math.floor((n-c)/4));ri(l);for(let f=0;c+i<n;f+=s.length,c+=i)this.length+=i,this.compress(l,f,!1);ri(l);continue}r.set(e.subarray(c,c+u),this.pos),this.pos+=u,this.length+=u,c+=u}return this}digestInto(e){ai(this),pa(e,this);const{pos:i,buffer32:r}=this;this.finished=!0,ft(this.buffer.subarray(i)),ri(r),this.compress(r,0,!0),ri(r);const s=qr(e);this.get().forEach((n,o)=>s[o]=Bt(n))}digest(){const{buffer:e,outputLen:i}=this;this.digestInto(e);const r=e.slice(0,i);return this.destroy(),r}_cloneInto(e){const{buffer:i,length:r,finished:s,destroyed:n,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(i),e.destroyed=n,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class Xv extends Qv{constructor(e={}){const i=void 0===e.dkLen?64:e.dkLen;super(128,i),this.v0l=0|we[0],this.v0h=0|we[1],this.v1l=0|we[2],this.v1h=0|we[3],this.v2l=0|we[4],this.v2h=0|we[5],this.v3l=0|we[6],this.v3h=0|we[7],this.v4l=0|we[8],this.v4h=0|we[9],this.v5l=0|we[10],this.v5h=0|we[11],this.v6l=0|we[12],this.v6h=0|we[13],this.v7l=0|we[14],this.v7h=0|we[15],function Zv(t,e={},i,r,s){if(qt(i),t<0||t>i)throw new Error("outputLen bigger than keyLen");const{key:n,salt:o,personalization:a}=e;if(void 0!==n&&(n.length<1||n.length>i))throw new Error("key length must be undefined or 1.."+i);if(void 0!==o&&o.length!==r)throw new Error("salt must be undefined or "+r);if(void 0!==a&&a.length!==s)throw new Error("personalization must be undefined or "+s)}(i,e,64,16,16);let{key:r,personalization:s,salt:n}=e,o=0;if(void 0!==r&&(r=mt(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,void 0!==n){n=mt(n);const a=qr(n);this.v4l^=Bt(a[0]),this.v4h^=Bt(a[1]),this.v5l^=Bt(a[2]),this.v5h^=Bt(a[3])}if(void 0!==s){s=mt(s);const a=qr(s);this.v6l^=Bt(a[0]),this.v6h^=Bt(a[1]),this.v7l^=Bt(a[2]),this.v7h^=Bt(a[3])}if(void 0!==r){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:i,v1l:r,v1h:s,v2l:n,v2h:o,v3l:a,v3h:c,v4l:u,v4h:h,v5l:l,v5h:f,v6l:p,v6h:d,v7l:g,v7h:y}=this;return[e,i,r,s,n,o,a,c,u,h,l,f,p,d,g,y]}set(e,i,r,s,n,o,a,c,u,h,l,f,p,d,g,y){this.v0l=0|e,this.v0h=0|i,this.v1l=0|r,this.v1h=0|s,this.v2l=0|n,this.v2h=0|o,this.v3l=0|a,this.v3h=0|c,this.v4l=0|u,this.v4h=0|h,this.v5l=0|l,this.v5h=0|f,this.v6l=0|p,this.v6h=0|d,this.v7l=0|g,this.v7h=0|y}compress(e,i,r){this.get().forEach((c,u)=>q[u]=c),q.set(we,16);let{h:s,l:n}=Jl(BigInt(this.length));q[24]=we[8]^n,q[25]=we[9]^s,r&&(q[28]=~q[28],q[29]=~q[29]);let o=0;const a=Jv;for(let c=0;c<12;c++)Zt(0,4,8,12,e,i+2*a[o++]),Qt(0,4,8,12,e,i+2*a[o++]),Zt(1,5,9,13,e,i+2*a[o++]),Qt(1,5,9,13,e,i+2*a[o++]),Zt(2,6,10,14,e,i+2*a[o++]),Qt(2,6,10,14,e,i+2*a[o++]),Zt(3,7,11,15,e,i+2*a[o++]),Qt(3,7,11,15,e,i+2*a[o++]),Zt(0,5,10,15,e,i+2*a[o++]),Qt(0,5,10,15,e,i+2*a[o++]),Zt(1,6,11,12,e,i+2*a[o++]),Qt(1,6,11,12,e,i+2*a[o++]),Zt(2,7,8,13,e,i+2*a[o++]),Qt(2,7,8,13,e,i+2*a[o++]),Zt(3,4,9,14,e,i+2*a[o++]),Qt(3,4,9,14,e,i+2*a[o++]);this.v0l^=q[0]^q[16],this.v0h^=q[1]^q[17],this.v1l^=q[2]^q[18],this.v1h^=q[3]^q[19],this.v2l^=q[4]^q[20],this.v2h^=q[5]^q[21],this.v3l^=q[6]^q[22],this.v3h^=q[7]^q[23],this.v4l^=q[8]^q[24],this.v4h^=q[9]^q[25],this.v5l^=q[10]^q[26],this.v5h^=q[11]^q[27],this.v6l^=q[12]^q[28],this.v6h^=q[13]^q[29],this.v7l^=q[14]^q[30],this.v7h^=q[15]^q[31],ft(q)}destroy(){this.destroyed=!0,ft(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const e2=function Dv(t){const e=(r,s)=>t(s).update(mt(r)).digest(),i=t({});return e.outputLen=i.outputLen,e.blockLen=i.blockLen,e.create=r=>t(r),e}(t=>new Xv(t)),t2="https://rpc.walletconnect.org/v1";function uf(t){const e=`Ethereum Signed Message:\n${t.length}`,i=(new TextEncoder).encode(e+t);return"0x"+Buffer.from(Nv(i)).toString("hex")}async function i2(t,e,i,r,s,n){switch(i.t){case"eip191":return await async function r2(t,e,i){return(await async function Rw({hash:t,signature:e}){return Cw(await Pw({hash:t,signature:e}))}({hash:uf(e),signature:i})).toLowerCase()===t.toLowerCase()}(t,e,i.s);case"eip1271":return await async function s2(t,e,i,r,s,n){const o=As(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",u=i.substring(2),h=(u.length/2).toString(16).padStart(64,"0"),f=a+(e.startsWith("0x")?e:uf(e)).substring(2)+c+h+u,p=await fetch(`${n||t2}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:n2(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:f},"latest"]})}),{result:d}=await p.json();return!!d&&d.slice(0,a.length).toLowerCase()===a.toLowerCase()}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}(t,e,i.s,r,s,n);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${i.t}`)}}function n2(){return Date.now()+Math.floor(1e3*Math.random())}function a2(t){const e=new Uint8Array(Buffer.from(t,"base64")),i=Array.from("TransactionData::").map(n=>n.charCodeAt(0)),r=new Uint8Array(i.length+e.length);r.set(i),r.set(e,i.length);const s=e2(r,{dkLen:32});return Zr.encode(s)}function Hc(t){const e=new Uint8Array(sn(function c2(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if("object"==typeof t&&null!=t&&t.data)return new Uint8Array(Object.values(t.data));if("object"==typeof t&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}(t)));return Zr.encode(e)}function Wc(t){const i=function wm(t,e){return new ym(e).decode(t)}(Buffer.from(t,"base64")).txn;if(!i)throw new Error("Invalid signed transaction: missing 'txn' field");const r=function cm(t,e){return new am(e).encodeSharedRef(t)}(i),s=Buffer.from("TX"),n=Buffer.concat([s,Buffer.from(r)]),o=Yv(n);return Sm.encode(o).replace(/=+$/,"")}function kn(t){const e=[];let i=BigInt(t);for(;i>=BigInt(128);)e.push(Number(i&BigInt(127)|BigInt(128))),i>>=BigInt(7);return e.push(Number(i)),Buffer.from(e)}function u2(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),i=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(kn(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(kn(i.length)),s.push(i),s.push(Buffer.from([26])),s.push(kn(r.length)),s.push(r);const n=Buffer.concat(s),o=sn(n);return Buffer.from(o).toString("hex").toUpperCase()}var h2=Object.defineProperty,l2=Object.defineProperties,f2=Object.getOwnPropertyDescriptors,Gc=Object.getOwnPropertySymbols,d2=Object.prototype.hasOwnProperty,p2=Object.prototype.propertyIsEnumerable,Yc=(t,e,i)=>e in t?h2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;const wa=t=>t?.split(":"),Eo=t=>{const e=t&&wa(t);if(e)return e[2]+":"+e[3]},js=t=>{const e=t&&wa(t);if(e)return e.pop()};async function Jc(t){const{cacao:e,projectId:i}=t,{s:r,p:s}=e,n=hf(s,s.iss),o=js(s.iss);return await i2(o,n,r,Eo(s.iss),i)}const hf=(t,e)=>{const i=`${t.domain} wants you to sign in with your Ethereum account:`,r=js(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const n=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${(t=>{const e=t&&wa(t);if(e)return t.includes("did:pkh:")?e[3]:e[1]})(e)}`,c=`Nonce: ${t.nonce}`,u=`Issued At: ${t.iat}`,h=t.exp?`Expiration Time: ${t.exp}`:void 0,l=t.nbf?`Not Before: ${t.nbf}`:void 0,f=t.requestId?`Request ID: ${t.requestId}`:void 0,p=t.resources?`Resources:${t.resources.map(g=>`\n- ${g}`).join("")}`:void 0,d=$s(t.resources);if(d){s=function A2(t="",e){Ai(e);const i="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(i))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(l=>({ability:l.split("/")[0],action:l.split("/")[1]}));c.sort((l,f)=>l.action.localeCompare(f.action));const u={};c.forEach(l=>{u[l.ability]||(u[l.ability]=[]),u[l.ability].push(l.action)});const h=Object.keys(u).map(l=>(s++,`(${s}) '${l}': '${u[l].join("', '")}' for '${a}'.`));r.push(h.join(", ").replace(".,","."))});const n=r.join(" "),o=`${i}${n}`;return`${t?t+" ":""}${o}`}(s,zr(d))}return[i,r,"",s,"",n,o,a,c,u,h,l,f,p].filter(g=>null!=g).join("\n")};function Ai(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(null==e||!e.length)throw new Error("No resources found in `att` property");e.forEach(i=>{const r=t.att[i];if(Array.isArray(r))throw new Error(`Resource must be an object: ${i}`);if("object"!=typeof r)throw new Error(`Resource must be an object: ${i}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${i}`);Object.keys(r).forEach(s=>{const n=r[s];if(!Array.isArray(n))throw new Error(`Ability limits ${s} must be an array of objects, found: ${n}`);if(!n.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);n.forEach(o=>{if("object"!=typeof o)throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function _2(t,e,i={}){e=e?.sort((s,n)=>s.localeCompare(n));const r=e.map(s=>({[`${t}/${s}`]:[i]}));return Object.assign({},...r)}function lf(t){return Ai(t),`urn:recap:${function b2(t){return Buffer.from(JSON.stringify(t)).toString("base64")}(t).replace(/=/g,"")}`}function zr(t){const e=function v2(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}(t.replace("urn:recap:",""));return Ai(e),e}function x2(t,e,i){const r=function E2(t,e,i,r={}){return i?.sort((s,n)=>s.localeCompare(n)),{att:{[t]:_2(e,i,r)}}}(t,e,i);return lf(r)}function S2(t,e){const s=function D2(t,e){Ai(t),Ai(e);const i=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,n)=>s.localeCompare(n)),r={att:{}};return i.forEach(s=>{var n,o;Object.keys((null==(n=t.att)?void 0:n[s])||{}).concat(Object.keys((null==(o=e.att)?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,u;r.att[s]=((t,e)=>l2(t,f2(e)))(((t,e)=>{for(var i in e||(e={}))d2.call(e,i)&&Yc(t,i,e[i]);if(Gc)for(var i of Gc(e))p2.call(e,i)&&Yc(t,i,e[i]);return t})({},r.att[s]),{[a]:(null==(c=t.att[s])?void 0:c[a])||(null==(u=e.att[s])?void 0:u[a])})})}),r}(zr(t),zr(e));return lf(s)}function Zc(t){var e;const i=zr(t);Ai(i);const r=null==(e=i.att)?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function Qc(t){const e=zr(t);Ai(e);const i=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var n;null!=(n=s?.[0])&&n.chains&&i.push(s[0].chains)})}),[...new Set(i.flat())]}function $s(t){if(!t)return;const e=t?.[t.length-1];return function I2(t){return t&&t.includes("urn:recap:")}(e)?e:void 0}function ff(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function _o(t){if("boolean"!=typeof t)throw new Error(`boolean expected, not ${t}`)}function Ln(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ge(t,...e){if(!ff(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Xc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function oi(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Ji(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const T2=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function xo(t){if("string"==typeof t)t=function C2(t){if("string"!=typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))}(t);else{if(!ff(t))throw new Error("Uint8Array expected, got "+typeof t);t=Io(t)}return t}function eu(t,e,i=!0){if(void 0===e)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(i&&!function B2(t){return t.byteOffset%4==0}(e))throw new Error("invalid output, must be aligned");return e}function tu(t,e,i,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,i,r);const s=BigInt(32),n=BigInt(4294967295),o=Number(i>>s&n),a=Number(i&n),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}function U2(t,e,i){_o(i);const r=new Uint8Array(16),s=function O2(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}(r);return tu(s,0,BigInt(e),i),tu(s,8,BigInt(t),i),r}function Io(t){return Uint8Array.from(t)}const df=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),N2=df("expand 16-byte k"),k2=df("expand 32-byte k"),L2=oi(N2),M2=oi(k2);function X(t,e){return t<<e|t>>>32-e}function So(t){return t.byteOffset%4==0}const pf=2**32-1,iu=new Uint32Array;const De=(t,e)=>255&t[e++]|(255&t[e++])<<8;class K2{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,Ge(e=xo(e),32);const i=De(e,0),r=De(e,2),s=De(e,4),n=De(e,6),o=De(e,8),a=De(e,10),c=De(e,12),u=De(e,14);this.r[0]=8191&i,this.r[1]=8191&(i>>>13|r<<3),this.r[2]=7939&(r>>>10|s<<6),this.r[3]=8191&(s>>>7|n<<9),this.r[4]=255&(n>>>4|o<<12),this.r[5]=o>>>1&8190,this.r[6]=8191&(o>>>14|a<<2),this.r[7]=8065&(a>>>11|c<<5),this.r[8]=8191&(c>>>8|u<<8),this.r[9]=u>>>5&127;for(let h=0;h<8;h++)this.pad[h]=De(e,16+2*h)}process(e,i,r=!1){const s=r?0:2048,{h:n,r:o}=this,a=o[0],c=o[1],u=o[2],h=o[3],l=o[4],f=o[5],p=o[6],d=o[7],g=o[8],y=o[9],E=De(e,i+0),v=De(e,i+2),m=De(e,i+4),D=De(e,i+6),I=De(e,i+8),R=De(e,i+10),B=De(e,i+12),C=De(e,i+14);let w=n[0]+(8191&E),O=n[1]+(8191&(E>>>13|v<<3)),_=n[2]+(8191&(v>>>10|m<<6)),$=n[3]+(8191&(m>>>7|D<<9)),P=n[4]+(8191&(D>>>4|I<<12)),k=n[5]+(I>>>1&8191),x=n[6]+(8191&(I>>>14|R<<2)),b=n[7]+(8191&(R>>>11|B<<5)),S=n[8]+(8191&(B>>>8|C<<8)),T=n[9]+(C>>>5|s),A=0,U=A+w*a+O*(5*y)+_*(5*g)+$*(5*d)+P*(5*p);A=U>>>13,U&=8191,U+=k*(5*f)+x*(5*l)+b*(5*h)+S*(5*u)+T*(5*c),A+=U>>>13,U&=8191;let N=A+w*c+O*a+_*(5*y)+$*(5*g)+P*(5*d);A=N>>>13,N&=8191,N+=k*(5*p)+x*(5*f)+b*(5*l)+S*(5*h)+T*(5*u),A+=N>>>13,N&=8191;let j=A+w*u+O*c+_*a+$*(5*y)+P*(5*g);A=j>>>13,j&=8191,j+=k*(5*d)+x*(5*p)+b*(5*f)+S*(5*l)+T*(5*h),A+=j>>>13,j&=8191;let z=A+w*h+O*u+_*c+$*a+P*(5*y);A=z>>>13,z&=8191,z+=k*(5*g)+x*(5*d)+b*(5*p)+S*(5*f)+T*(5*l),A+=z>>>13,z&=8191;let K=A+w*l+O*h+_*u+$*c+P*a;A=K>>>13,K&=8191,K+=k*(5*y)+x*(5*g)+b*(5*d)+S*(5*p)+T*(5*f),A+=K>>>13,K&=8191;let V=A+w*f+O*l+_*h+$*u+P*c;A=V>>>13,V&=8191,V+=k*a+x*(5*y)+b*(5*g)+S*(5*d)+T*(5*p),A+=V>>>13,V&=8191;let H=A+w*p+O*f+_*l+$*h+P*u;A=H>>>13,H&=8191,H+=k*c+x*a+b*(5*y)+S*(5*g)+T*(5*d),A+=H>>>13,H&=8191;let re=A+w*d+O*p+_*f+$*l+P*h;A=re>>>13,re&=8191,re+=k*u+x*c+b*a+S*(5*y)+T*(5*g),A+=re>>>13,re&=8191;let ie=A+w*g+O*d+_*p+$*f+P*l;A=ie>>>13,ie&=8191,ie+=k*h+x*u+b*c+S*a+T*(5*y),A+=ie>>>13,ie&=8191;let J=A+w*y+O*g+_*d+$*p+P*f;A=J>>>13,J&=8191,J+=k*l+x*h+b*u+S*c+T*a,A+=J>>>13,J&=8191,A=(A<<2)+A|0,A=A+U|0,U=8191&A,A>>>=13,N+=A,n[0]=U,n[1]=N,n[2]=j,n[3]=z,n[4]=K,n[5]=V,n[6]=H,n[7]=re,n[8]=ie,n[9]=J}finalize(){const{h:e,pad:i}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=5*s,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let n=(1^s)-1;for(let a=0;a<10;a++)r[a]&=n;n=~n;for(let a=0;a<10;a++)e[a]=e[a]&n|r[a];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let o=e[0]+i[0];e[0]=65535&o;for(let a=1;a<8;a++)o=(e[a]+i[a]|0)+(o>>>16)|0,e[a]=65535&o;Ji(r)}update(e){Xc(this),Ge(e=xo(e));const{buffer:i,blockLen:r}=this,s=e.length;for(let n=0;n<s;){const o=Math.min(r-this.pos,s-n);if(o!==r)i.set(e.subarray(n,n+o),this.pos),this.pos+=o,n+=o,this.pos===r&&(this.process(i,0,!1),this.pos=0);else for(;r<=s-n;n+=r)this.process(e,n)}return this}destroy(){Ji(this.h,this.r,this.buffer,this.pad)}digestInto(e){Xc(this),function $2(t,e){Ge(t);const i=e.outputLen;if(t.length<i)throw new Error("digestInto() expects output buffer of length at least "+i)}(e,this),this.finished=!0;const{buffer:i,h:r}=this;let{pos:s}=this;if(s){for(i[s++]=1;s<16;s++)i[s]=0;this.process(i,0,!0)}this.finalize();let n=0;for(let o=0;o<8;o++)e[n++]=r[o]>>>0,e[n++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:i}=this;this.digestInto(e);const r=e.slice(0,i);return this.destroy(),r}}const H2=function V2(t){const e=(r,s)=>t(s).update(xo(r)).digest(),i=t(new Uint8Array(32));return e.outputLen=i.outputLen,e.blockLen=i.blockLen,e.create=r=>t(r),e}(t=>new K2(t));const G2=function z2(t,e){const{allowShortKeys:i,extendNonceFn:r,counterLength:s,counterRight:n,rounds:o}=function P2(t,e){if(null==e||"object"!=typeof e)throw new Error("options must be defined");return Object.assign(t,e)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if("function"!=typeof t)throw new Error("core must be a function");return Ln(s),Ln(o),_o(n),_o(i),(a,c,u,h,l=0)=>{Ge(a),Ge(c),Ge(u);const f=u.length;if(void 0===h&&(h=new Uint8Array(f)),Ge(h),Ln(l),l<0||l>=pf)throw new Error("arx: counter overflow");if(h.length<f)throw new Error(`arx: output (${h.length}) is shorter than data (${f})`);const p=[];let g,y,d=a.length;if(32===d)p.push(g=Io(a)),y=M2;else{if(16!==d||!i)throw new Error(`arx: invalid 32-byte key, got length=${d}`);g=new Uint8Array(32),g.set(a),g.set(a,16),y=L2,p.push(g)}So(c)||p.push(c=Io(c));const E=oi(g);if(r){if(24!==c.length)throw new Error("arx: extended nonce must be 24 bytes");r(y,E,oi(c.subarray(0,16)),E),c=c.subarray(16)}const v=16-s;if(v!==c.length)throw new Error(`arx: nonce must be ${v} or 16 bytes`);if(12!==v){const D=new Uint8Array(12);D.set(c,n?0:12-c.length),c=D,p.push(c)}const m=oi(c);return function j2(t,e,i,r,s,n,o,a){const c=s.length,u=new Uint8Array(64),h=oi(u),l=So(s)&&So(n),f=l?oi(s):iu,p=l?oi(n):iu;for(let d=0;d<c;o++){if(t(e,i,r,h,o,a),o>=pf)throw new Error("arx: counter overflow");const g=Math.min(64,c-d);if(l&&64===g){const y=d/4;if(d%4!=0)throw new Error("arx: invalid block position");for(let v,E=0;E<16;E++)v=y+E,p[v]=f[v]^h[E];d+=64;continue}for(let E,y=0;y<g;y++)E=d+y,n[E]=s[E]^u[y];d+=g}}(t,y,E,m,u,h,l,o),Ji(...p),h}}(function W2(t,e,i,r,s,n=20){let o=t[0],a=t[1],c=t[2],u=t[3],h=e[0],l=e[1],f=e[2],p=e[3],d=e[4],g=e[5],y=e[6],E=e[7],v=s,m=i[0],D=i[1],I=i[2],R=o,B=a,C=c,w=u,O=h,_=l,$=f,P=p,k=d,x=g,b=y,S=E,T=v,A=m,U=D,N=I;for(let z=0;z<n;z+=2)R=R+O|0,T=X(T^R,16),k=k+T|0,O=X(O^k,12),R=R+O|0,T=X(T^R,8),k=k+T|0,O=X(O^k,7),B=B+_|0,A=X(A^B,16),x=x+A|0,_=X(_^x,12),B=B+_|0,A=X(A^B,8),x=x+A|0,_=X(_^x,7),C=C+$|0,U=X(U^C,16),b=b+U|0,$=X($^b,12),C=C+$|0,U=X(U^C,8),b=b+U|0,$=X($^b,7),w=w+P|0,N=X(N^w,16),S=S+N|0,P=X(P^S,12),w=w+P|0,N=X(N^w,8),S=S+N|0,P=X(P^S,7),R=R+_|0,N=X(N^R,16),b=b+N|0,_=X(_^b,12),R=R+_|0,N=X(N^R,8),b=b+N|0,_=X(_^b,7),B=B+$|0,T=X(T^B,16),S=S+T|0,$=X($^S,12),B=B+$|0,T=X(T^B,8),S=S+T|0,$=X($^S,7),C=C+P|0,A=X(A^C,16),k=k+A|0,P=X(P^k,12),C=C+P|0,A=X(A^C,8),k=k+A|0,P=X(P^k,7),w=w+O|0,U=X(U^w,16),x=x+U|0,O=X(O^x,12),w=w+O|0,U=X(U^w,8),x=x+U|0,O=X(O^x,7);let j=0;r[j++]=o+R|0,r[j++]=a+B|0,r[j++]=c+C|0,r[j++]=u+w|0,r[j++]=h+O|0,r[j++]=l+_|0,r[j++]=f+$|0,r[j++]=p+P|0,r[j++]=d+k|0,r[j++]=g+x|0,r[j++]=y+b|0,r[j++]=E+S|0,r[j++]=v+T|0,r[j++]=m+A|0,r[j++]=D+U|0,r[j++]=I+N|0},{counterRight:!1,counterLength:4,allowShortKeys:!1}),Y2=new Uint8Array(16),ru=(t,e)=>{t.update(e);const i=e.length%16;i&&t.update(Y2.subarray(i))},J2=new Uint8Array(32);function su(t,e,i,r,s){const n=t(e,i,J2),o=H2.create(n);s&&ru(o,s),ru(o,r);const a=U2(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return Ji(n,a),c}const gf=((t,e)=>{function i(r,...s){if(Ge(r),!T2)throw new Error("Non little-endian hardware is not yet supported");if(void 0!==t.nonceLength){const u=s[0];if(!u)throw new Error("nonce / iv required");t.varSizeNonce?Ge(u):Ge(u,t.nonceLength)}const n=t.tagLength;n&&void 0!==s[1]&&Ge(s[1]);const o=e(r,...s),a=(u,h)=>{if(void 0!==h){if(2!==u)throw new Error("cipher output not supported");Ge(h)}};let c=!1;return{encrypt(u,h){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Ge(u),a(o.encrypt.length,h),o.encrypt(u,h)},decrypt(u,h){if(Ge(u),n&&u.length<n)throw new Error("invalid ciphertext length: smaller than tagLength="+n);return a(o.decrypt.length,h),o.decrypt(u,h)}}}return Object.assign(i,t),i})({blockSize:64,nonceLength:12,tagLength:16},(t=>(e,i,r)=>({encrypt(s,n){const o=s.length;(n=eu(o+16,n,!1)).set(s);const a=n.subarray(0,-16);t(e,i,a,a,1);const c=su(t,e,i,a,r);return n.set(c,o),Ji(c),n},decrypt(s,n){n=eu(s.length-16,n,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=su(t,e,i,o,r);if(!function R2(t,e){if(t.length!==e.length)return!1;let i=0;for(let r=0;r<t.length;r++)i|=t[r]^e[r];return 0===i}(a,c))throw new Error("invalid tag");return n.set(s.subarray(0,-16)),t(e,i,n,n,1),Ji(c),n}}))(G2));let yf=class extends rn{constructor(e,i){super(),this.finished=!1,this.destroyed=!1,da(e);const r=mt(i);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,n=new Uint8Array(s);n.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<n.length;o++)n[o]^=54;this.iHash.update(n),this.oHash=e.create();for(let o=0;o<n.length;o++)n[o]^=106;this.oHash.update(n),ft(n)}update(e){return ai(this),this.iHash.update(e),this}digestInto(e){ai(this),lt(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:i,iHash:r,finished:s,destroyed:n,blockLen:o,outputLen:a}=this;return e.finished=s,e.destroyed=n,e.blockLen=o,e.outputLen=a,e.oHash=i._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const nn=(t,e,i)=>new yf(t,e).update(i).digest();nn.create=(t,e)=>new yf(t,e);const Mn=Uint8Array.from([0]),nu=Uint8Array.of();const eE=(t,e,i,r,s)=>function X2(t,e,i,r=32){da(t),qt(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const n=Math.ceil(r/s);void 0===i&&(i=nu);const o=new Uint8Array(n*s),a=nn.create(t,e),c=a._cloneInto(),u=new Uint8Array(a.outputLen);for(let h=0;h<n;h++)Mn[0]=h+1,c.update(0===h?nu:u).update(i).update(Mn).digestInto(u),o.set(u,s*h),a._cloneInto(c);return a.destroy(),c.destroy(),ft(u,Mn),o.slice(0,r)}(t,function Q2(t,e,i){return da(t),void 0===i&&(i=new Uint8Array(t.outputLen)),nn(t,mt(i),mt(e))}(t,e,i),r,s),on=sn,ma=BigInt(0),Do=BigInt(1);function zs(t,e){if("boolean"!=typeof e)throw new Error(t+" boolean expected, got "+e)}function ms(t){const e=t.toString(16);return 1&e.length?"0"+e:e}function wf(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return""===t?ma:BigInt("0x"+t)}function an(t){return wf(jr(t))}function Ks(t){return lt(t),wf(jr(Uint8Array.from(t).reverse()))}function ba(t,e){return ga(t.toString(16).padStart(2*e,"0"))}function va(t,e){return ba(t,e).reverse()}function We(t,e,i){let r;if("string"==typeof e)try{r=ga(e)}catch(n){throw new Error(t+" must be hex string or Uint8Array, cause: "+n)}else{if(!fa(e))throw new Error(t+" must be hex string or Uint8Array");r=Uint8Array.from(e)}const s=r.length;if("number"==typeof i&&s!==i)throw new Error(t+" of length "+i+" expected, got "+s);return r}const qn=t=>"bigint"==typeof t&&ma<=t;function Ao(t,e,i,r){if(!function tE(t,e,i){return qn(t)&&qn(e)&&qn(i)&&e<=t&&t<i}(e,i,r))throw new Error("expected valid "+t+": "+i+" <= n < "+r+", got "+e)}const cn=t=>(Do<<BigInt(t))-Do;function un(t,e,i={}){if(!t||"object"!=typeof t)throw new Error("expected valid options object");function r(s,n,o){const a=t[s];if(o&&void 0===a)return;const c=typeof a;if(c!==n||null===a)throw new Error(`param "${s}" is invalid: expected ${n}, got ${c}`)}Object.entries(e).forEach(([s,n])=>r(s,n,!1)),Object.entries(i).forEach(([s,n])=>r(s,n,!0))}function ou(t){const e=new WeakMap;return(i,...r)=>{const s=e.get(i);if(void 0!==s)return s;const n=t(i,...r);return e.set(i,n),n}}const Je=BigInt(0),Me=BigInt(1),Ei=BigInt(2),sE=BigInt(3),mf=BigInt(4),bf=BigInt(5),vf=BigInt(8);function ut(t,e){const i=t%e;return i>=Je?i:e+i}function gt(t,e,i){let r=t;for(;e-- >Je;)r*=r,r%=i;return r}function au(t,e){if(t===Je)throw new Error("invert: expected non-zero number");if(e<=Je)throw new Error("invert: expected positive modulus, got "+e);let i=ut(t,e),r=e,s=Je,n=Me;for(;i!==Je;){const a=r%i,c=s-n*(r/i);r=i,i=a,s=n,n=c}if(r!==Me)throw new Error("invert: does not exist");return ut(s,e)}function Ef(t,e){const i=(t.ORDER+Me)/mf,r=t.pow(e,i);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function nE(t,e){const i=(t.ORDER-bf)/vf,r=t.mul(e,Ei),s=t.pow(r,i),n=t.mul(e,s),o=t.mul(t.mul(n,Ei),s),a=t.mul(n,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function aE(t){return t%mf===sE?Ef:t%vf===bf?nE:function oE(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Me,i=0;for(;e%Ei===Je;)e/=Ei,i++;let r=Ei;const s=nr(t);for(;1===cu(s,r);)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===i)return Ef;let n=s.pow(r,e);const o=(e+Me)/Ei;return function(a,c){if(a.is0(c))return c;if(1!==cu(a,c))throw new Error("Cannot find square root");let u=i,h=a.mul(a.ONE,n),l=a.pow(c,e),f=a.pow(c,o);for(;!a.eql(l,a.ONE);){if(a.is0(l))return a.ZERO;let p=1,d=a.sqr(l);for(;!a.eql(d,a.ONE);)if(p++,d=a.sqr(d),p===u)throw new Error("Cannot find square root");const g=Me<<BigInt(u-p-1),y=a.pow(h,g);u=p,h=a.sqr(y),l=a.mul(l,h),f=a.mul(f,y)}return f}}(t)}const cE=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function _f(t,e,i=!1){const r=new Array(e.length).fill(i?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),n=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),n),r}function cu(t,e){const i=(t.ORDER-Me)/Ei,r=t.pow(e,i),s=t.eql(r,t.ONE),n=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!n&&!o)throw new Error("invalid Legendre symbol result");return s?1:n?0:-1}function nr(t,e,i=!1,r={}){if(t<=Je)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,n;if("object"==typeof e&&null!=e){if(r.sqrt||i)throw new Error("cannot specify opts in two arguments");const h=e;h.BITS&&(s=h.BITS),h.sqrt&&(n=h.sqrt),"boolean"==typeof h.isLE&&(i=h.isLE)}else"number"==typeof e&&(s=e),r.sqrt&&(n=r.sqrt);const{nBitLength:o,nByteLength:a}=function lE(t,e){void 0!==e&&qt(e);const i=void 0!==e?e:t.toString(2).length;return{nBitLength:i,nByteLength:Math.ceil(i/8)}}(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const u=Object.freeze({ORDER:t,isLE:i,BITS:o,BYTES:a,MASK:cn(o),ZERO:Je,ONE:Me,create:h=>ut(h,t),isValid:h=>{if("bigint"!=typeof h)throw new Error("invalid field element: expected bigint, got "+typeof h);return Je<=h&&h<t},is0:h=>h===Je,isValidNot0:h=>!u.is0(h)&&u.isValid(h),isOdd:h=>(h&Me)===Me,neg:h=>ut(-h,t),eql:(h,l)=>h===l,sqr:h=>ut(h*h,t),add:(h,l)=>ut(h+l,t),sub:(h,l)=>ut(h-l,t),mul:(h,l)=>ut(h*l,t),pow:(h,l)=>function hE(t,e,i){if(i<Je)throw new Error("invalid exponent, negatives unsupported");if(i===Je)return t.ONE;if(i===Me)return e;let r=t.ONE,s=e;for(;i>Je;)i&Me&&(r=t.mul(r,s)),s=t.sqr(s),i>>=Me;return r}(u,h,l),div:(h,l)=>ut(h*au(l,t),t),sqrN:h=>h*h,addN:(h,l)=>h+l,subN:(h,l)=>h-l,mulN:(h,l)=>h*l,inv:h=>au(h,t),sqrt:n||(h=>(c||(c=aE(t)),c(u,h))),toBytes:h=>i?va(h,a):ba(h,a),fromBytes:h=>{if(h.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+h.length);return i?Ks(h):an(h)},invertBatch:h=>_f(u,h),cmov:(h,l,f)=>f?l:h});return Object.freeze(u)}function xf(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function If(t){const e=xf(t);return e+Math.ceil(e/2)}const Zi=BigInt(0),_i=BigInt(1);function Or(t,e){const i=e.negate();return t?i:e}function Sf(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function jn(t,e){Sf(t,e);const s=2**t;return{windows:Math.ceil(e/t)+1,windowSize:2**(t-1),mask:cn(t),maxNumber:s,shiftBy:BigInt(t)}}function uu(t,e,i){const{windowSize:r,mask:s,maxNumber:n,shiftBy:o}=i;let a=Number(t&s),c=t>>o;a>r&&(a-=n,c+=_i);const u=e*r;return{nextN:c,offset:u+Math.abs(a)-1,isZero:0===a,isNeg:a<0,isNegF:e%2!=0,offsetF:u}}const zn=new WeakMap,Df=new WeakMap;function Kn(t){return Df.get(t)||1}function hu(t){if(t!==Zi)throw new Error("invalid wNAF")}function mE(t,e,i,r){(function pE(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((i,r)=>{if(!(i instanceof e))throw new Error("invalid point at index "+r)})})(i,t),function gE(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((i,r)=>{if(!e.isValid(i))throw new Error("invalid scalar at index "+r)})}(r,e);const s=i.length,n=r.length;if(s!==n)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=function iE(t){let e;for(e=0;t>ma;t>>=Do,e+=1);return e}(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=cn(c),h=new Array(Number(u)+1).fill(o);let f=o;for(let p=Math.floor((e.BITS-1)/c)*c;p>=0;p-=c){h.fill(o);for(let g=0;g<n;g++){const y=r[g],E=Number(y>>BigInt(p)&u);h[E]=h[E].add(i[g])}let d=o;for(let g=h.length-1,y=o;g>0;g--)y=y.add(h[g]),d=d.add(y);if(f=f.add(d),0!==p)for(let g=0;g<c;g++)f=f.double()}return f}function lu(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return function uE(t){return un(t,cE.reduce((r,s)=>(r[s]="function",r),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"})),t}(e),e}return nr(t)}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const yr=BigInt(0),ji=BigInt(1),bs=BigInt(2);function EE(t){const e=function vE(t){return un(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}(t),{P:i,type:r,adjustScalarBytes:s,powPminus2:n,randomBytes:o}=e,a="x25519"===r;if(!a&&"x448"!==r)throw new Error("invalid type");const c=o||sr,u=a?255:448,h=a?32:56,l=BigInt(a?9:5),f=BigInt(a?121665:39081),p=a?bs**BigInt(254):bs**BigInt(447),d=a?BigInt(8)*bs**BigInt(251)-ji:BigInt(4)*bs**BigInt(445)-ji,g=p+d+ji,y=w=>ut(w,i),E=v(l);function v(w){return va(y(w),h)}function I(w,O){const _=function C(w,O){Ao("u",w,yr,i),Ao("scalar",O,p,g);const _=O,$=w;let P=ji,k=yr,x=w,b=ji,S=yr;for(let A=BigInt(u-1);A>=yr;A--){const U=_>>A&ji;S^=U,({x_2:P,x_3:x}=B(S,P,x)),({x_2:k,x_3:b}=B(S,k,b)),S=U;const N=P+k,j=y(N*N),z=P-k,K=y(z*z),V=j-K,H=x+b,ie=y((x-b)*N),J=y(H*z),fe=ie+J,Ie=ie-J;x=y(fe*fe),b=y($*y(Ie*Ie)),P=y(j*K),k=y(V*(j+y(f*V)))}({x_2:P,x_3:x}=B(S,P,x)),({x_2:k,x_3:b}=B(S,k,b));const T=n(k);return y(P*T)}(function m(w){const O=We("u coordinate",w,h);return a&&(O[31]&=127),y(Ks(O))}(O),function D(w){return Ks(s(We("scalar",w,h)))}(w));if(_===yr)throw new Error("invalid private or public key received");return v(_)}function R(w){return I(w,E)}function B(w,O,_){const $=y(w*(O-_));return{x_2:O=y(O-$),x_3:_=y(_+$)}}return{scalarMult:I,scalarMultBase:R,getSharedSecret:(w,O)=>I(w,O),getPublicKey:w=>R(w),utils:{randomPrivateKey:()=>c(h)},GuBytes:E.slice()}}BigInt(0);const _E=BigInt(1),fu=BigInt(2),xE=BigInt(3),IE=BigInt(5),SE=BigInt(8),Af={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:SE,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function AE(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const $o=(()=>{const t=Af.p;return EE({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:i,b2:r}=function DE(t){const e=BigInt(10),i=BigInt(20),r=BigInt(40),s=BigInt(80),n=Af.p,o=t*t%n*t%n,a=gt(o,fu,n)*o%n,c=gt(a,_E,n)*t%n,u=gt(c,IE,n)*c%n,h=gt(u,e,n)*u%n,l=gt(h,i,n)*h%n,f=gt(l,r,n)*l%n,p=gt(f,s,n)*f%n,d=gt(p,s,n)*f%n,g=gt(d,e,n)*u%n;return{pow_p_5_8:gt(g,fu,n)*t%n,b2:o}}(e);return ut(gt(i,xE,t)*r,t)},adjustScalarBytes:AE})})();function du(t){void 0!==t.lowS&&zs("lowS",t.lowS),void 0!==t.prehash&&zs("prehash",t.prehash)}class $E extends Error{constructor(e=""){super(e)}}const kt={Err:$E,_tlv:{encode:(t,e)=>{const{Err:i}=kt;if(t<0||t>256)throw new i("tlv.encode: wrong tag");if(1&e.length)throw new i("tlv.encode: unpadded data");const r=e.length/2,s=ms(r);if(s.length/2&128)throw new i("tlv.encode: long form length too big");const n=r>127?ms(s.length/2|128):"";return ms(t)+n+s+e},decode(t,e){const{Err:i}=kt;let r=0;if(t<0||t>256)throw new i("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new i("tlv.decode: wrong tlv");const s=e[r++];let o=0;if(!!(128&s)){const c=127&s;if(!c)throw new i("tlv.decode(long): indefinite length not supported");if(c>4)throw new i("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+c);if(u.length!==c)throw new i("tlv.decode: length bytes not complete");if(0===u[0])throw new i("tlv.decode(long): zero leftmost byte");for(const h of u)o=o<<8|h;if(r+=c,o<128)throw new i("tlv.decode(long): not minimal encoding")}else o=s;const a=e.subarray(r,r+o);if(a.length!==o)throw new i("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=kt;if(t<Tr)throw new e("integer: negative integers are not allowed");let i=ms(t);if(8&Number.parseInt(i[0],16)&&(i="00"+i),1&i.length)throw new e("unexpected DER parsing assertion: unpadded hex");return i},decode(t){const{Err:e}=kt;if(128&t[0])throw new e("invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new e("invalid signature integer: unnecessary leading zero");return an(t)}},toSig(t){const{Err:e,_int:i,_tlv:r}=kt,s=We("signature",t),{v:n,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,n),{v:u,l:h}=r.decode(2,c);if(h.length)throw new e("invalid signature: left bytes after parsing");return{r:i.decode(a),s:i.decode(u)}},hexFromSig(t){const{_tlv:e,_int:i}=kt,n=e.encode(2,i.encode(t.r))+e.encode(2,i.encode(t.s));return e.encode(48,n)}},Tr=BigInt(0),Cr=BigInt(1),OE=BigInt(2),vs=BigInt(3),TE=BigInt(4);function $f(t,e,i){const{BYTES:r}=t;return function s(n){let o;if("bigint"==typeof n)o=n;else{let a=We("private key",n);if(e){if(!e.includes(2*a.length))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof n}`)}}if(i&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}}function PE(t,e={}){const{Fp:i,Fn:r}=function bE(t,e,i={}){if(!e||"object"!=typeof e)throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!("bigint"==typeof a&&a>Zi))throw new Error(`CURVE.${o} must be positive bigint`)}const r=lu(e.p,i.Fp),s=lu(e.n,i.Fn),n=["Gx","Gy","a","weierstrass"===t?"b":"d"];for(const o of n)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}("weierstrass",t,e),{h:s,n}=t;un(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!i.is0(t.a)||"bigint"!=typeof o.beta||"function"!=typeof o.splitScalar))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!i.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}const h=e.toBytes||function c(C,w,O){const{x:_,y:$}=w.toAffine(),P=i.toBytes(_);if(zs("isCompressed",O),O){a();return vi(Of(!i.isOdd($)),P)}return vi(Uint8Array.of(4),P,i.toBytes($))},l=e.fromBytes||function u(C){lt(C);const w=i.BYTES,O=w+1,_=2*w+1,$=C.length,P=C[0],k=C.subarray(1);if($!==O||2!==P&&3!==P){if($===_&&4===P){const x=i.fromBytes(k.subarray(0*w,1*w)),b=i.fromBytes(k.subarray(1*w,2*w));if(!p(x,b))throw new Error("bad point: is not on curve");return{x,y:b}}throw new Error(`bad point: got length ${$}, expected compressed=${O} or uncompressed=${_}`)}{const x=i.fromBytes(k);if(!i.isValid(x))throw new Error("bad point: is not on curve, wrong x");const b=f(x);let S;try{S=i.sqrt(b)}catch(A){const U=A instanceof Error?": "+A.message:"";throw new Error("bad point: is not on curve, sqrt error"+U)}a();return!(1&~P)!==i.isOdd(S)&&(S=i.neg(S)),{x,y:S}}},f=function CE(t,e,i){return function r(s){const n=t.sqr(s),o=t.mul(n,s);return t.add(t.add(o,t.mul(s,e)),i)}}(i,t.a,t.b);function p(C,w){const O=i.sqr(w),_=f(C);return i.eql(O,_)}if(!p(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const d=i.mul(i.pow(t.a,vs),TE),g=i.mul(i.sqr(t.b),BigInt(27));if(i.is0(i.add(d,g)))throw new Error("bad curve params: a or b");function y(C,w,O=!1){if(!i.isValid(w)||O&&i.is0(w))throw new Error(`bad point coordinate ${C}`);return w}function E(C){if(!(C instanceof I))throw new Error("ProjectivePoint expected")}const v=ou((C,w)=>{const{px:O,py:_,pz:$}=C;if(i.eql($,i.ONE))return{x:O,y:_};const P=C.is0();null==w&&(w=P?i.ONE:i.inv($));const k=i.mul(O,w),x=i.mul(_,w),b=i.mul($,w);if(P)return{x:i.ZERO,y:i.ZERO};if(!i.eql(b,i.ONE))throw new Error("invZ was invalid");return{x:k,y:x}}),m=ou(C=>{if(C.is0()){if(e.allowInfinityPoint&&!i.is0(C.py))return;throw new Error("bad point: ZERO")}const{x:w,y:O}=C.toAffine();if(!i.isValid(w)||!i.isValid(O))throw new Error("bad point: x or y not field elements");if(!p(w,O))throw new Error("bad point: equation left != right");if(!C.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function D(C,w,O,_,$){return O=new I(i.mul(O.px,C),O.py,O.pz),w=Or(_,w),O=Or($,O),w.add(O)}class I{constructor(w,O,_){this.px=y("x",w),this.py=y("y",O,!0),this.pz=y("z",_),Object.freeze(this)}static fromAffine(w){const{x:O,y:_}=w||{};if(!w||!i.isValid(O)||!i.isValid(_))throw new Error("invalid affine point");if(w instanceof I)throw new Error("projective point not allowed");return i.is0(O)&&i.is0(_)?I.ZERO:new I(O,_,i.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){return function dE(t,e,i){const r="pz"===e?n=>n.pz:n=>n.ez,s=_f(t.Fp,i.map(r));return i.map((n,o)=>n.toAffine(s[o])).map(t.fromAffine)}(I,"pz",w)}static fromBytes(w){return lt(w),I.fromHex(w)}static fromHex(w){const O=I.fromAffine(l(We("pointHex",w)));return O.assertValidity(),O}static fromPrivateKey(w){const O=$f(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return I.BASE.multiply(O(w))}static msm(w,O){return mE(I,r,w,O)}precompute(w=8,O=!0){return B.setWindowSize(this,w),O||this.multiply(vs),this}_setWindowSize(w){this.precompute(w)}assertValidity(){m(this)}hasEvenY(){const{y:w}=this.toAffine();if(!i.isOdd)throw new Error("Field doesn't support isOdd");return!i.isOdd(w)}equals(w){E(w);const{px:O,py:_,pz:$}=this,{px:P,py:k,pz:x}=w,b=i.eql(i.mul(O,x),i.mul(P,$)),S=i.eql(i.mul(_,x),i.mul(k,$));return b&&S}negate(){return new I(this.px,i.neg(this.py),this.pz)}double(){const{a:w,b:O}=t,_=i.mul(O,vs),{px:$,py:P,pz:k}=this;let x=i.ZERO,b=i.ZERO,S=i.ZERO,T=i.mul($,$),A=i.mul(P,P),U=i.mul(k,k),N=i.mul($,P);return N=i.add(N,N),S=i.mul($,k),S=i.add(S,S),x=i.mul(w,S),b=i.mul(_,U),b=i.add(x,b),x=i.sub(A,b),b=i.add(A,b),b=i.mul(x,b),x=i.mul(N,x),S=i.mul(_,S),U=i.mul(w,U),N=i.sub(T,U),N=i.mul(w,N),N=i.add(N,S),S=i.add(T,T),T=i.add(S,T),T=i.add(T,U),T=i.mul(T,N),b=i.add(b,T),U=i.mul(P,k),U=i.add(U,U),T=i.mul(U,N),x=i.sub(x,T),S=i.mul(U,A),S=i.add(S,S),S=i.add(S,S),new I(x,b,S)}add(w){E(w);const{px:O,py:_,pz:$}=this,{px:P,py:k,pz:x}=w;let b=i.ZERO,S=i.ZERO,T=i.ZERO;const A=t.a,U=i.mul(t.b,vs);let N=i.mul(O,P),j=i.mul(_,k),z=i.mul($,x),K=i.add(O,_),V=i.add(P,k);K=i.mul(K,V),V=i.add(N,j),K=i.sub(K,V),V=i.add(O,$);let H=i.add(P,x);return V=i.mul(V,H),H=i.add(N,z),V=i.sub(V,H),H=i.add(_,$),b=i.add(k,x),H=i.mul(H,b),b=i.add(j,z),H=i.sub(H,b),T=i.mul(A,V),b=i.mul(U,z),T=i.add(b,T),b=i.sub(j,T),T=i.add(j,T),S=i.mul(b,T),j=i.add(N,N),j=i.add(j,N),z=i.mul(A,z),V=i.mul(U,V),j=i.add(j,z),z=i.sub(N,z),z=i.mul(A,z),V=i.add(V,z),N=i.mul(j,V),S=i.add(S,N),N=i.mul(H,V),b=i.mul(K,b),b=i.sub(b,N),N=i.mul(K,j),T=i.mul(H,T),T=i.add(T,N),new I(b,S,T)}subtract(w){return this.add(w.negate())}is0(){return this.equals(I.ZERO)}multiply(w){const{endo:O}=e;if(!r.isValidNot0(w))throw new Error("invalid scalar: out of range");let _,$;const P=k=>B.wNAFCached(this,k,I.normalizeZ);if(O){const{k1neg:k,k1:x,k2neg:b,k2:S}=O.splitScalar(w),{p:T,f:A}=P(x),{p:U,f:N}=P(S);$=A.add(N),_=D(O.beta,T,U,k,b)}else{const{p:k,f:x}=P(w);_=k,$=x}return I.normalizeZ([_,$])[0]}multiplyUnsafe(w){const{endo:O}=e,_=this;if(!r.isValid(w))throw new Error("invalid scalar: out of range");if(w===Tr||_.is0())return I.ZERO;if(w===Cr)return _;if(B.hasPrecomputes(this))return this.multiply(w);if(O){const{k1neg:$,k1:P,k2neg:k,k2:x}=O.splitScalar(w),{p1:b,p2:S}=function wE(t,e,i,r){let s=e,n=t.ZERO,o=t.ZERO;for(;i>Zi||r>Zi;)i&_i&&(n=n.add(s)),r&_i&&(o=o.add(s)),s=s.double(),i>>=_i,r>>=_i;return{p1:n,p2:o}}(I,_,P,x);return D(O.beta,b,S,$,k)}return B.wNAFCachedUnsafe(_,w)}multiplyAndAddUnsafe(w,O,_){const $=this.multiplyUnsafe(O).add(w.multiplyUnsafe(_));return $.is0()?void 0:$}toAffine(w){return v(this,w)}isTorsionFree(){const{isTorsionFree:w}=e;return s===Cr||(w?w(I,this):B.wNAFCachedUnsafe(this,n).is0())}clearCofactor(){const{clearCofactor:w}=e;return s===Cr?this:w?w(I,this):this.multiplyUnsafe(s)}toBytes(w=!0){return zs("isCompressed",w),this.assertValidity(),h(I,this,w)}toRawBytes(w=!0){return this.toBytes(w)}toHex(w=!0){return jr(this.toBytes(w))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}I.BASE=new I(t.Gx,t.Gy,i.ONE),I.ZERO=new I(i.ZERO,i.ONE,i.ZERO),I.Fp=i,I.Fn=r;const R=r.BITS,B=function yE(t,e){return{constTimeNegate:Or,hasPrecomputes:i=>1!==Kn(i),unsafeLadder(i,r,s=t.ZERO){let n=i;for(;r>Zi;)r&_i&&(s=s.add(n)),n=n.double(),r>>=_i;return s},precomputeWindow(i,r){const{windows:s,windowSize:n}=jn(r,e),o=[];let a=i,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let h=1;h<n;h++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(i,r,s){let n=t.ZERO,o=t.BASE;const a=jn(i,e);for(let c=0;c<a.windows;c++){const{nextN:u,offset:h,isZero:l,isNeg:f,isNegF:p,offsetF:d}=uu(s,c,a);s=u,l?o=o.add(Or(p,r[d])):n=n.add(Or(f,r[h]))}return hu(s),{p:n,f:o}},wNAFUnsafe(i,r,s,n=t.ZERO){const o=jn(i,e);for(let a=0;a<o.windows&&s!==Zi;a++){const{nextN:c,offset:u,isZero:h,isNeg:l}=uu(s,a,o);if(s=c,!h){const f=r[u];n=n.add(l?f.negate():f)}}return hu(s),n},getPrecomputes(i,r,s){let n=zn.get(r);return n||(n=this.precomputeWindow(r,i),1!==i&&("function"==typeof s&&(n=s(n)),zn.set(r,n))),n},wNAFCached(i,r,s){const n=Kn(i);return this.wNAF(n,this.getPrecomputes(n,i,s),r)},wNAFCachedUnsafe(i,r,s,n){const o=Kn(i);return 1===o?this.unsafeLadder(i,r,n):this.wNAFUnsafe(o,this.getPrecomputes(o,i,s),r,n)},setWindowSize(i,r){Sf(r,e),Df.set(i,r),zn.delete(i)}}}(I,e.endo?Math.ceil(R/2):R);return I}function Of(t){return Uint8Array.of(t?2:3)}function RE(t,e,i={}){un(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||sr,s=e.hmac||((_,...$)=>nn(e.hash,_,vi(...$))),{Fp:n,Fn:o}=t,{ORDER:a,BITS:c}=o;function u(_){return _>a>>Cr}function l(_,$){if(!o.isValidNot0($))throw new Error(`invalid signature ${_}: out of range 1..CURVE.n`)}class f{constructor($,P,k){l("r",$),l("s",P),this.r=$,this.s=P,null!=k&&(this.recovery=k),Object.freeze(this)}static fromCompact($){const P=o.BYTES,k=We("compactSignature",$,2*P);return new f(o.fromBytes(k.subarray(0,P)),o.fromBytes(k.subarray(P,2*P)))}static fromDER($){const{r:P,s:k}=kt.toSig(We("DER",$));return new f(P,k)}assertValidity(){}addRecoveryBit($){return new f(this.r,this.s,$)}recoverPublicKey($){const P=n.ORDER,{r:k,s:x,recovery:b}=this;if(null==b||![0,1,2,3].includes(b))throw new Error("recovery id invalid");if(a*OE<P&&b>1)throw new Error("recovery id is ambiguous for h>1 curve");const S=2===b||3===b?k+a:k;if(!n.isValid(S))throw new Error("recovery id 2 or 3 invalid");const T=n.toBytes(S),A=t.fromHex(vi(Of(!(1&b)),T)),U=o.inv(S),N=m(We("msgHash",$)),j=o.create(-N*U),z=o.create(x*U),K=t.BASE.multiplyUnsafe(j).add(A.multiplyUnsafe(z));if(K.is0())throw new Error("point at infinify");return K.assertValidity(),K}hasHighS(){return u(this.s)}normalizeS(){return this.hasHighS()?new f(this.r,o.neg(this.s),this.recovery):this}toBytes($){if("compact"===$)return vi(o.toBytes(this.r),o.toBytes(this.s));if("der"===$)return ga(kt.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return jr(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return jr(this.toBytes("compact"))}}const p=$f(o,i.allowedPrivateKeyLengths,i.wrapPrivateKey),d={isValidPrivateKey(_){try{return p(_),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{const _=a;return function fE(t,e,i=!1){const r=t.length,s=xf(e),n=If(e);if(r<16||r<n||r>1024)throw new Error("expected "+n+"-1024 bytes of input, got "+r);const a=ut(i?Ks(t):an(t),e-Me)+Me;return i?va(a,s):ba(a,s)}(r(If(_)),_)},precompute:(_=8,$=t.BASE)=>$.precompute(_,!1)};function y(_){if("bigint"==typeof _)return!1;if(_ instanceof t)return!0;const $=We("key",_).length,P=n.BYTES,k=P+1,x=2*P+1;return i.allowedPrivateKeyLengths||o.BYTES===k?void 0:$===k||$===x}const v=e.bits2int||function(_){if(_.length>8192)throw new Error("input is too large");const $=an(_),P=8*_.length-c;return P>0?$>>BigInt(P):$},m=e.bits2int_modN||function(_){return o.create(v(_))},D=cn(c);function I(_){return Ao("num < 2^"+c,_,Tr,D),o.toBytes(_)}function R(_,$,P=B){if(["recovered","canonical"].some(K=>K in P))throw new Error("sign() legacy options not supported");const{hash:k}=e;let{lowS:x,prehash:b,extraEntropy:S}=P;null==x&&(x=!0),_=We("msgHash",_),du(P),b&&(_=We("prehashed msgHash",k(_)));const T=m(_),A=p($),U=[I(A),I(T)];if(null!=S&&!1!==S){const K=!0===S?r(n.BYTES):S;U.push(We("extraEntropy",K))}const N=vi(...U),j=T;return{seed:N,k2sig:function z(K){const V=v(K);if(!o.isValidNot0(V))return;const H=o.inv(V),re=t.BASE.multiply(V).toAffine(),ie=o.create(re.x);if(ie===Tr)return;const J=o.create(H*o.create(j+ie*A));if(J===Tr)return;let fe=(re.x===ie?0:2)|Number(re.y&Cr),Ie=J;return x&&u(J)&&(Ie=function h(_){return u(_)?o.neg(_):_}(J),fe^=1),new f(ie,Ie,fe)}}}const B={lowS:e.lowS,prehash:!1},C={lowS:e.lowS,prehash:!1};return t.BASE.precompute(8),Object.freeze({getPublicKey:function g(_,$=!0){return t.fromPrivateKey(_).toBytes($)},getSharedSecret:function E(_,$,P=!0){if(!0===y(_))throw new Error("first arg must be private key");if(!1===y($))throw new Error("second arg must be public key");return t.fromHex($).multiply(p(_)).toBytes(P)},sign:function w(_,$,P=B){const{seed:k,k2sig:x}=R(_,$,P);return function rE(t,e,i){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof i)throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let n=r(t),o=r(t),a=0;const c=()=>{n.fill(1),o.fill(0),a=0},u=(...f)=>i(o,n,...f),h=(f=r(0))=>{o=u(s(0),f),n=u(),0!==f.length&&(o=u(s(1),f),n=u())},l=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){n=u();const d=n.slice();p.push(d),f+=n.length}return vi(...p)};return(f,p)=>{let d;for(c(),h(f);!(d=p(l()));)h();return c(),d}}(e.hash.outputLen,o.BYTES,s)(k,x)},verify:function O(_,$,P,k=C){const x=_;$=We("msgHash",$),P=We("publicKey",P),du(k);const{lowS:b,prehash:S,format:T}=k;if("strict"in k)throw new Error("options.strict was renamed to lowS");if(void 0!==T&&!["compact","der","js"].includes(T))throw new Error('format must be "compact", "der" or "js"');const A="string"==typeof x||fa(x),U=!A&&!T&&"object"==typeof x&&null!==x&&"bigint"==typeof x.r&&"bigint"==typeof x.s;if(!A&&!U)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let N,j;try{if(U){if(void 0!==T&&"js"!==T)throw new Error("invalid format");N=new f(x.r,x.s)}if(A){try{"compact"!==T&&(N=f.fromDER(x))}catch(fe){if(!(fe instanceof kt.Err))throw fe}!N&&"der"!==T&&(N=f.fromCompact(x))}j=t.fromHex(P)}catch{return!1}if(!N||b&&N.hasHighS())return!1;S&&($=e.hash($));const{r:z,s:K}=N,V=m($),H=o.inv(K),re=o.create(V*H),ie=o.create(z*H),J=t.BASE.multiplyUnsafe(re).add(j.multiplyUnsafe(ie));return!J.is0()&&o.create(J.x)===z},utils:d,Point:t,Signature:f})}function UE(t){const{CURVE:e,curveOpts:i}=function FE(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy};return{CURVE:e,curveOpts:{Fp:t.Fp,Fn:nr(e.n,t.nBitLength),allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes}}}(t);return{CURVE:e,curveOpts:i,ecdsaOpts:{hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN}}}function NE(t){const{CURVE:e,curveOpts:i,ecdsaOpts:r}=UE(t);return function BE(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}(t,RE(PE(e,i),r,i))}function Oo(t,e){const i=r=>NE({...t,hash:r});return{...i(e),create:i}}const Tf={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},Cf={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},Pf={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},kE=nr(Tf.p),LE=nr(Cf.p),ME=nr(Pf.p),qE=Oo({...Tf,Fp:kE,lowS:!1},sn);Oo({...Cf,Fp:LE,lowS:!1},Gv),Oo({...Pf,Fp:ME,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Wv);const jE=qE,qe="base16",Ye="base64pad",si="base64url",ts="utf8";function To(){return Ze(sr(32),qe)}function Os(t){return Ze(on(ht(t,qe)),qe)}function at(t){return Ze(on(ht(t,ts)),qe)}function Uf(t){return ht(`${t}`,"base10")}function $i(t){return Number(Ze(t,"base10"))}function Bf(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Nf(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),i=(4-e.length%4)%4;return e+"=".repeat(i)}function kf(t){if(2===$i(t.type))return Ze($r([t.type,t.sealed]),Ye);if(1===$i(t.type)){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ze($r([t.type,t.senderPublicKey,t.iv,t.sealed]),Ye)}return Ze($r([t.type,t.iv,t.sealed]),Ye)}function Kr(t){const i=ht((t.encoding||Ye)===si?Nf(t.encoded):t.encoded,Ye),r=i.slice(0,1);if(1===$i(r)){const c=33,u=c+12,h=i.slice(1,c),l=i.slice(c,u);return{type:r,sealed:i.slice(u),iv:l,senderPublicKey:h}}if(2===$i(r)){return{type:r,sealed:i.slice(1),iv:sr(12)}}const o=i.slice(1,13);return{type:r,sealed:i.slice(13),iv:o}}function Lf(t){const e=t?.type||0;if(1===e){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function gu(t){return 1===t.type&&"string"==typeof t.senderPublicKey&&"string"==typeof t.receiverPublicKey}function yu(t){return 2===t.type}function QE(t,e){const[i,r,s]=t.split("."),n=Buffer.from(Nf(s),"base64");if(64!==n.length)throw new Error("Invalid signature length");const o=n.slice(0,32),a=n.slice(32,64),u=on(`${i}.${r}`),h=function ZE(t){const e=Buffer.from(t.x,"base64"),i=Buffer.from(t.y,"base64");return $r([new Uint8Array([4]),e,i])}(e);if(!jE.verify($r([o,a]),u,h))throw new Error("Invalid signature");return ho(t).payload}function Vs(t){return t?.relay||{protocol:"irn"}}function Wi(t){const e=_b[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function e3(t,e="-"){const i={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const n=s.replace(r,""),o=t[s];i[n]=o}}),i}function wu(t){if(!t.includes("wc:")){const u=Yl(t);null!=u&&u.includes("wc:")&&(t=u)}const e=(t=(t=t.includes("wc://")?t.replace("wc://",""):t).includes("wc:")?t.replace("wc:",""):t).indexOf(":"),i=-1!==t.indexOf("?")?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,i).split("@"),n=typeof i<"u"?t.substring(i):"",o=new URLSearchParams(n),a={};o.forEach((u,h)=>{a[h]=u});const c="string"==typeof a.methods?a.methods.split(","):void 0;return{protocol:r,topic:t3(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:e3(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function t3(t){return t.startsWith("//")?t.substring(2):t}function mu(t){const e=new URLSearchParams,i=function i3(t,e="-"){const r={};return Object.keys(t).forEach(s=>{const n=s,o="relay"+e+n;t[n]&&(r[o]=t[n])}),r}(t.relay);Object.keys(i).sort().forEach(s=>{e.set(s,i[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function Es(t,e,i){return`${t}?wc_ev=${i}&topic=${e}`}var r3=Object.defineProperty,s3=Object.defineProperties,n3=Object.getOwnPropertyDescriptors,bu=Object.getOwnPropertySymbols,o3=Object.prototype.hasOwnProperty,a3=Object.prototype.propertyIsEnumerable,vu=(t,e,i)=>e in t?r3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,c3=(t,e)=>{for(var i in e||(e={}))o3.call(e,i)&&vu(t,i,e[i]);if(bu)for(var i of bu(e))a3.call(e,i)&&vu(t,i,e[i]);return t},u3=(t,e)=>s3(t,n3(e));function or(t){const e=[];return t.forEach(i=>{const[r,s]=i.split(":");e.push(`${r}:${s}`)}),e}function Mf(t){return t.includes(":")}function d3(t){return Mf(t)?t.split(":")[0]:t}function Eu(t){var e,i,r;const s={};if(!Vr(t))return s;for(const[n,o]of Object.entries(t)){const a=Mf(n)?[n]:o.chains,c=o.methods||[],u=o.events||[],h=d3(n);s[h]=u3(c3({},s[h]),{chains:xi(a,null==(e=s[h])?void 0:e.chains),methods:xi(c,null==(i=s[h])?void 0:i.methods),events:xi(u,null==(r=s[h])?void 0:r.events)})}return s}function _u(t,e){const i=function p3(t){const e={};return t?.forEach(i=>{var r;const[s,n]=i.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(i),null==(r=e[s].chains)||r.push(`${s}:${n}`)}),e}(e=e.map(r=>r.replace("did:pkh:","")));for(const[r,s]of Object.entries(i))s.methods?s.methods=xi(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return i}const y3={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},w3={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function M(t,e){const{message:i,code:r}=w3[t];return{message:e?`${i} ${e}`:i,code:r}}function le(t,e){const{message:i,code:r}=y3[t];return{message:e?`${i} ${e}`:i,code:r}}function Qi(t,e){return!!Array.isArray(t)&&(!(typeof e<"u"&&t.length)||t.every(e))}function Vr(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function ve(t){return typeof t>"u"}function ye(t,e){return!(!e||!ve(t))||"string"==typeof t&&!!t.trim().length}function _a(t,e){return!(!e||!ve(t))||"number"==typeof t&&!isNaN(t)}function Hs(t){return!(!ye(t,!1)||!t.includes(":"))&&2===t.split(":").length}function xu(t){let e=!0;return Qi(t)?t.length&&(e=t.every(i=>ye(i,!1))):e=!1,e}function S3(t,e,i){let r=null;return Object.entries(t).forEach(([s,n])=>{if(r)return;const o=function I3(t,e,i){let r=null;return Qi(e)&&e.length?e.forEach(s=>{r||Hs(s)||(r=le("UNSUPPORTED_CHAINS",`${i}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):Hs(t)||(r=le("UNSUPPORTED_CHAINS",`${i}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}(s,ca(s,n),`${e} ${i}`);o&&(r=o)}),r}function D3(t,e){let i=null;return Qi(t)?t.forEach(r=>{i||function b3(t){if(ye(t,!1)&&t.includes(":")){const e=t.split(":");if(3===e.length){const i=e[0]+":"+e[1];return!!e[2]&&Hs(i)}}return!1}(r)||(i=le("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):i=le("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),i}function qf(t,e){let i=null;return Object.values(t).forEach(r=>{if(i)return;const s=function $3(t,e){let i=null;return xu(t?.methods)?xu(t?.events)||(i=le("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):i=le("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),i}(r,`${e}, namespace`);s&&(i=s)}),i}function Vn(t,e){let i=null;if(t&&Vr(t)){const r=qf(t,e);r&&(i=r);const s=function A3(t,e){let i=null;return Object.values(t).forEach(r=>{if(i)return;const s=D3(r?.accounts,`${e} namespace`);s&&(i=s)}),i}(t,e);s&&(i=s)}else i=M("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return i}function jf(t){return ye(t.protocol,!0)}function He(t){return typeof t<"u"&&null!==typeof t}function Iu(t,e){return!(!Hs(e)||!function h3(t){const e=[];return Object.values(t).forEach(i=>{e.push(...or(i.accounts))}),e}(t).includes(e))}function B3(t,e,i){return!!ye(i,!1)&&function l3(t,e){const i=[];return Object.values(t).forEach(r=>{or(r.accounts).includes(e)&&i.push(...r.methods)}),i}(t,e).includes(i)}function N3(t,e,i){return!!ye(i,!1)&&function f3(t,e){const i=[];return Object.values(t).forEach(r=>{or(r.accounts).includes(e)&&i.push(...r.events)}),i}(t,e).includes(i)}function Su(t,e,i){let r=null;const s=function k3(t){const e={};return Object.keys(t).forEach(i=>{var r;i.includes(":")?e[i]=t[i]:null==(r=t[i].chains)||r.forEach(s=>{e[s]={methods:t[i].methods,events:t[i].events}})}),e}(t),n=function L3(t){const e={};return Object.keys(t).forEach(i=>{i.includes(":")?e[i]=t[i]:or(t[i].accounts)?.forEach(s=>{e[s]={accounts:t[i].accounts.filter(n=>n.includes(`${s}:`)),methods:t[i].methods,events:t[i].events}})}),e}(e),o=Object.keys(s),a=Object.keys(n),c=Du(Object.keys(t)),u=Du(Object.keys(e)),h=c.filter(l=>!u.includes(l));return h.length&&(r=M("NON_CONFORMING_NAMESPACES",`${i} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${h.toString()}\n      Received: ${Object.keys(e).toString()}`)),bi(o,a)||(r=M("NON_CONFORMING_NAMESPACES",`${i} namespaces chains don't satisfy required namespaces.\n      Required: ${o.toString()}\n      Approved: ${a.toString()}`)),Object.keys(e).forEach(l=>{if(!l.includes(":")||r)return;const f=or(e[l].accounts);f.includes(l)||(r=M("NON_CONFORMING_NAMESPACES",`${i} namespaces accounts don't satisfy namespace accounts for ${l}\n        Required: ${l}\n        Approved: ${f.toString()}`))}),o.forEach(l=>{r||(bi(s[l].methods,n[l].methods)?bi(s[l].events,n[l].events)||(r=M("NON_CONFORMING_NAMESPACES",`${i} namespaces events don't satisfy namespace events for ${l}`)):r=M("NON_CONFORMING_NAMESPACES",`${i} namespaces methods don't satisfy namespace methods for ${l}`))}),r}function Du(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Au(){const t=Xr();return new Promise(e=>{switch(t){case it_browser:e(function q3(){return rr()&&navigator?.onLine}());break;case it_reactNative:e(async function j3(){return!(ci()&&typeof __webpack_require__.g<"u"&&null!=__webpack_require__.g&&__webpack_require__.g.NetInfo)||(await(null==__webpack_require__.g?void 0:__webpack_require__.g.NetInfo.fetch()))?.isConnected}());break;default:e(!0)}})}function K3(t){switch(Xr()){case it_browser:!function V3(t){!ci()&&rr()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}(t);break;case it_reactNative:!function H3(t){ci()&&typeof __webpack_require__.g<"u"&&null!=__webpack_require__.g&&__webpack_require__.g.NetInfo&&__webpack_require__.g?.NetInfo.addEventListener(e=>t(e?.isConnected))}(t)}}const Hn={};class wr{static get(e){return Hn[e]}static set(e,i){Hn[e]=i}static delete(e){delete Hn[e]}}function Y3({publicKey:t,signature:e,payload:i}){var r;const s=Co(i.method),n=128|parseInt((null==(r=i.version)?void 0:r.toString())||"4"),o=function Q3(t){const e=Zr.decode(t)[0];return 42===e?0:60===e?2:1}(i.address),a="00"===i.era?new Uint8Array([0]):Co(i.era);if(1!==a.length&&2!==a.length)throw new Error("Invalid era length");const c=parseInt(i.nonce,16),u=new Uint8Array([255&c,c>>8&255]),h=BigInt(`0x${function Z3(t){return t.startsWith("0x")?t.slice(2):t}(i.tip)}`),l=function e_(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}throw new Error("BigInt compact encoding not supported > 2^30")}(h),f=new Uint8Array([0,...t,o,...e,...a,...u,...l,...s]),p=function X3(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([255&e,e>>8&255])}if(t<1<<30){const e=t<<2|2;return new Uint8Array([255&e,e>>8&255,e>>16&255,e>>24&255])}throw new Error("Compact encoding > 2^30 not supported")}(f.length+1);return new Uint8Array([...p,n,...f])}function Co(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function t_(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),i=function G3(t){const e=Zr.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}(t.transaction.address),r=Y3({publicKey:i,signature:e,payload:t.transaction});return function J3(t){const e=Co(t),i=Fb.blake2b(e,void 0,32);return"0x"+Buffer.from(i).toString("hex")}(Buffer.from(r).toString("hex"))}const i_="PARSE_ERROR",r_="INVALID_REQUEST",s_="METHOD_NOT_FOUND",n_="INVALID_PARAMS",zf="INTERNAL_ERROR",xa="SERVER_ERROR",o_=[-32700,-32600,-32601,-32602,-32603],Rr={[i_]:{code:-32700,message:"Parse error"},[r_]:{code:-32600,message:"Invalid Request"},[s_]:{code:-32601,message:"Method not found"},[n_]:{code:-32602,message:"Invalid params"},[zf]:{code:-32603,message:"Internal error"},[xa]:{code:-32e3,message:"Server error"}},Kf=xa;function $u(t){return Object.keys(Rr).includes(t)?Rr[t]:Rr[Kf]}var Ou,Vf={},Ft={};var Tu,Ut={};function It(t=3){return Date.now()*Math.pow(10,t)+Math.floor(Math.random()*Math.pow(10,t))}function ni(t=6){return BigInt(It(t))}function Lt(t,e,i){return{id:i||It(),jsonrpc:"2.0",method:t,params:e}}function Hr(t,e){return{id:t,jsonrpc:"2.0",result:e}}function hn(t,e,i){return{id:t,jsonrpc:"2.0",error:f_(e,i)}}function f_(t,e){return typeof t>"u"?$u(zf):("string"==typeof t&&(t=Object.assign(Object.assign({},$u(xa)),{message:t})),typeof e<"u"&&(t.data=e),function a_(t){return o_.includes(t)}(t.code)&&(t=function c_(t){const e=Object.values(Rr).find(i=>i.code===t);return e||Rr[Kf]}(t.code)),t)}!function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wr;e.__exportStar(function h_(){if(Ou)return Ft;function t(){return(null===_connector_4bc69b15_js__WEBPACK_IMPORTED_MODULE_0__.c||void 0===_connector_4bc69b15_js__WEBPACK_IMPORTED_MODULE_0__.c?void 0:_connector_4bc69b15_js__WEBPACK_IMPORTED_MODULE_0__.c.crypto)||(null===_connector_4bc69b15_js__WEBPACK_IMPORTED_MODULE_0__.c||void 0===_connector_4bc69b15_js__WEBPACK_IMPORTED_MODULE_0__.c?void 0:_connector_4bc69b15_js__WEBPACK_IMPORTED_MODULE_0__.c.msCrypto)||{}}function e(){const r=t();return r.subtle||r.webkitSubtle}return Ou=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.isBrowserCryptoAvailable=Ft.getSubtleCrypto=Ft.getBrowerCrypto=void 0,Ft.getBrowerCrypto=t,Ft.getSubtleCrypto=e,Ft.isBrowserCryptoAvailable=function i(){return!!t()&&!!e()},Ft}(),t),e.__exportStar(function l_(){if(Tu)return Ut;function t(){return typeof document>"u"&&typeof navigator<"u"&&"ReactNative"===navigator.product}function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}return Tu=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.isBrowser=Ut.isNode=Ut.isReactNative=void 0,Ut.isReactNative=t,Ut.isNode=e,Ut.isBrowser=function i(){return!t()&&!e()},Ut}(),t)}(Vf);class Hf{}let d_=class extends Hf{constructor(e){super()}},p_=class extends Hf{constructor(){super()}};class g_ extends p_{constructor(e){super()}}function m_(t,e){const i=function w_(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(e&&e.length)return e[0]}(t);return!(typeof i>"u")&&new RegExp(e).test(i)}function Cu(t){return m_(t,"^wss?:")}function b_(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function Wf(t){return"object"==typeof t&&"id"in t&&"jsonrpc"in t&&"2.0"===t.jsonrpc}function Ia(t){return Wf(t)&&"method"in t}function ln(t){return Wf(t)&&(St(t)||ct(t))}function St(t){return"result"in t}function ct(t){return"error"in t}let Gf=class extends g_{constructor(e){super(e),this.events=new rt.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,i){this.events.on(e,i)}once(e,i){this.events.once(e,i)}off(e,i){this.events.off(e,i)}removeListener(e,i){this.events.removeListener(e,i)}async request(e,i){return this.requestStrict(Lt(e.method,e.params||[],e.id||ni().toString()),i)}async requestStrict(e,i){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(n){s(n)}this.events.on(`${e.id}`,n=>{ct(n)?s(n.error):r(n.result)});try{await this.connection.send(e,i)}catch(n){s(n)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),ln(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof e&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const Pu=t=>t.split("?")[0],__=typeof WebSocket<"u"?WebSocket:typeof __webpack_require__.g<"u"&&typeof __webpack_require__.g.WebSocket<"u"?__webpack_require__.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:__webpack_require__("./node_modules/ws/browser.js");let x_=class{constructor(e){if(this.url=e,this.events=new rt.EventEmitter,this.registering=!1,!Cu(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,i){this.events.on(e,i)}once(e,i){this.events.once(e,i)}off(e,i){this.events.off(e,i)}removeListener(e,i){this.events.removeListener(e,i)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,i)=>{typeof this.socket>"u"?i(new Error("Connection already closed")):(this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close())})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Ii(e))}catch(i){this.onError(e.id,i)}}register(e=this.url){if(!Cu(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const i=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=i||this.events.listenerCount("open")>=i)&&this.events.setMaxListeners(i+1),new Promise((r,s)=>{this.events.once("register_error",n=>{this.resetMaxListeners(),s(n)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((i,r)=>{const s=Vf.isReactNative()?void 0:{rejectUnauthorized:!b_(e)},n=new __(e,[],s);typeof WebSocket<"u"||typeof __webpack_require__.g<"u"&&typeof __webpack_require__.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u"?n.onerror=o=>{const a=o;r(this.emitError(a.error))}:n.on("error",o=>{r(this.emitError(o))}),n.onopen=()=>{this.onOpen(n),i(n)}})}onOpen(e){e.onmessage=i=>this.onPayload(i),e.onclose=i=>this.onClose(i),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const i="string"==typeof e.data?Yi(e.data):e.data;this.events.emit("payload",i)}onError(e,i){const r=this.parseError(i),n=hn(e,r.message||r.toString());this.events.emit("payload",n)}parseError(e,i=this.url){return function u_(t,e,i){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${i} RPC url at ${e}`):t}(e,Pu(i),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){const i=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${Pu(this.url)}`));return this.events.emit("register_error",i),i}};const Ws="core",Ot=`wc@2:${Ws}:`,I__logger="error",S_={database:":memory:"},Fu="client_ed25519_seed",A_=L.ONE_DAY,P_=L.SIX_HOURS,Qf="wss://relay.walletconnect.org",de_message="relayer_message",de_message_ack="relayer_message_ack",de_connect="relayer_connect",de_disconnect="relayer_disconnect",de_error="relayer_error",de_connection_stalled="relayer_connection_stalled",de_publish="relayer_publish",st_payload="payload",st_connect="connect",st_disconnect="disconnect",st_error="error",Po="2.21.8",he={link_mode:"link_mode",relay:"relay"},Ts_inbound="inbound",Ts_outbound="outbound",Uu="WALLETCONNECT_LINK_MODE_APPS",et_created="subscription_created",et_deleted="subscription_deleted",et_sync="subscription_sync",et_resubscribed="subscription_resubscribed",mr={wc_pairingDelete:{req:{ttl:L.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:L.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:L.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:L.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:L.ONE_DAY,prompt:!1,tag:0},res:{ttl:L.ONE_DAY,prompt:!1,tag:0}}},mi_create="pairing_create",mi_expire="pairing_expire",mi_delete="pairing_delete",mi_ping="pairing_ping",pt_created="history_created",pt_updated="history_updated",pt_deleted="history_deleted",pt_sync="history_sync",ot_created="expirer_created",ot_deleted="expirer_deleted",ot_expired="expirer_expired",ot_sync="expirer_sync",Xf="https://verify.walletconnect.org",Fr=Xf,J_=`${Fr}/v3`,Z_=["https://verify.walletconnect.com",Xf],xt_pairing_started="pairing_started",xt_pairing_uri_validation_success="pairing_uri_validation_success",xt_pairing_uri_not_expired="pairing_uri_not_expired",xt_store_new_pairing="store_new_pairing",xt_subscribing_pairing_topic="subscribing_pairing_topic",xt_subscribe_pairing_topic_success="subscribe_pairing_topic_success",xt_existing_pairing="existing_pairing",xt_pairing_not_expired="pairing_not_expired",xt_emit_inactive_pairing="emit_inactive_pairing",xt_emit_session_proposal="emit_session_proposal",Nt_no_internet_connection="no_internet_connection",Nt_malformed_pairing_uri="malformed_pairing_uri",Nt_active_pairing_already_exists="active_pairing_already_exists",Nt_subscribe_pairing_topic_failure="subscribe_pairing_topic_failure",Nt_pairing_expired="pairing_expired",Nt_proposal_listener_not_found="proposal_listener_not_found",Xt_session_approve_started="session_approve_started",Xt_session_namespaces_validation_success="session_namespaces_validation_success",Xt_subscribing_session_topic="subscribing_session_topic",Xt_subscribe_session_topic_success="subscribe_session_topic_success",Xt_session_approve_publish_success="session_approve_publish_success",Xt_store_session="store_session",br_no_internet_connection="no_internet_connection",br_proposal_expired="proposal_expired",br_subscribe_session_topic_failure="subscribe_session_topic_failure",br_session_approve_namespace_validation_failure="session_approve_namespace_validation_failure",br_proposal_not_found="proposal_not_found",di_authenticated_session_approve_started="authenticated_session_approve_started",di_create_authenticated_session_topic="create_authenticated_session_topic",di_cacaos_verified="cacaos_verified",di_store_authenticated_session="store_authenticated_session",di_subscribing_authenticated_session_topic="subscribing_authenticated_session_topic",di_subscribe_authenticated_session_topic_success="subscribe_authenticated_session_topic_success",di_publishing_authenticated_session_approve="publishing_authenticated_session_approve",vr_no_internet_connection="no_internet_connection",vr_invalid_cacao="invalid_cacao",vr_subscribe_authenticated_session_topic_failure="subscribe_authenticated_session_topic_failure",vr_authenticated_session_approve_publish_failure="authenticated_session_approve_publish_failure",vr_authenticated_session_pending_request_not_found="authenticated_session_pending_request_not_found";var nx=function sx(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var i=new Uint8Array(256),r=0;r<i.length;r++)i[r]=255;for(var s=0;s<t.length;s++){var n=t.charAt(s),o=n.charCodeAt(0);if(255!==i[o])throw new TypeError(n+" is ambiguous");i[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function f(d){if("string"!=typeof d)throw new TypeError("Expected String");if(0===d.length)return new Uint8Array;var g=0;if(" "!==d[g]){for(var y=0,E=0;d[g]===c;)y++,g++;for(var v=(d.length-g)*u+1>>>0,m=new Uint8Array(v);d[g];){var D=i[d.charCodeAt(g)];if(255===D)return;for(var I=0,R=v-1;(0!==D||I<E)&&-1!==R;R--,I++)D+=a*m[R]>>>0,m[R]=D%256>>>0,D=D/256>>>0;if(0!==D)throw new Error("Non-zero carry");E=I,g++}if(" "!==d[g]){for(var B=v-E;B!==v&&0===m[B];)B++;for(var C=new Uint8Array(y+(v-B)),w=y;B!==v;)C[w++]=m[B++];return C}}}return{encode:function l(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===d.length)return"";for(var g=0,y=0,E=0,v=d.length;E!==v&&0===d[E];)E++,g++;for(var m=(v-E)*h+1>>>0,D=new Uint8Array(m);E!==v;){for(var I=d[E],R=0,B=m-1;(0!==I||R<y)&&-1!==B;B--,R++)I+=256*D[B]>>>0,D[B]=I%a>>>0,I=I/a>>>0;if(0!==I)throw new Error("Non-zero carry");y=R,E++}for(var C=m-y;C!==m&&0===D[C];)C++;for(var w=c.repeat(g);C<m;++C)w+=t.charAt(D[C]);return w},decodeUnsafe:f,decode:function p(d){var g=f(d);if(g)return g;throw new Error(`Non-${e} character`)}}},ox=nx;const ed=t=>{if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};class ux{constructor(e,i,r){this.name=e,this.prefix=i,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class hx{constructor(e,i,r){if(this.name=e,this.prefix=i,void 0===i.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=i.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return td(this,e)}}class lx{constructor(e){this.decoders=e}or(e){return td(this,e)}decode(e){const i=e[0],r=this.decoders[i];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const td=(t,e)=>new lx({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class fx{constructor(e,i,r,s){this.name=e,this.prefix=i,this.baseEncode=r,this.baseDecode=s,this.encoder=new ux(e,i,r),this.decoder=new hx(e,i,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const fn=({name:t,prefix:e,encode:i,decode:r})=>new fx(t,e,i,r),rs=({prefix:t,name:e,alphabet:i})=>{const{encode:r,decode:s}=ox(i,e);return fn({prefix:t,name:e,encode:r,decode:n=>ed(s(n))})},Pe=({name:t,prefix:e,bitsPerChar:i,alphabet:r})=>fn({prefix:e,name:t,encode:s=>((t,e,i)=>{const r="="===e[e.length-1],s=(1<<i)-1;let n="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>i;)o-=i,n+=e[s&a>>o];if(o&&(n+=e[s&a<<i-o]),r)for(;n.length*i&7;)n+="=";return n})(s,r,i),decode:s=>((t,e,i,r)=>{const s={};for(let h=0;h<e.length;++h)s[e[h]]=h;let n=t.length;for(;"="===t[n-1];)--n;const o=new Uint8Array(n*i/8|0);let a=0,c=0,u=0;for(let h=0;h<n;++h){const l=s[t[h]];if(void 0===l)throw new SyntaxError(`Non-${r} character`);c=c<<i|l,a+=i,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=i||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(s,r,i,t)}),gx=fn({prefix:"\0",name:"identity",encode:t=>(t=>(new TextDecoder).decode(t))(t),decode:t=>(t=>(new TextEncoder).encode(t))(t)});var yx=Object.freeze({__proto__:null,identity:gx});const wx=Pe({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var mx=Object.freeze({__proto__:null,base2:wx});const bx=Pe({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var vx=Object.freeze({__proto__:null,base8:bx});const Ex=rs({prefix:"9",name:"base10",alphabet:"0123456789"});var _x=Object.freeze({__proto__:null,base10:Ex});const xx=Pe({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ix=Pe({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Sx=Object.freeze({__proto__:null,base16:xx,base16upper:Ix});const Dx=Pe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ax=Pe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),$x=Pe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ox=Pe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Tx=Pe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Cx=Pe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Px=Pe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Rx=Pe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Fx=Pe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Ux=Object.freeze({__proto__:null,base32:Dx,base32upper:Ax,base32pad:$x,base32padupper:Ox,base32hex:Tx,base32hexupper:Cx,base32hexpad:Px,base32hexpadupper:Rx,base32z:Fx});const Bx=rs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Nx=rs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var kx=Object.freeze({__proto__:null,base36:Bx,base36upper:Nx});const Lx=rs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Mx=rs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var qx=Object.freeze({__proto__:null,base58btc:Lx,base58flickr:Mx});const jx=Pe({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),zx=Pe({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Kx=Pe({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Vx=Pe({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Hx=Object.freeze({__proto__:null,base64:jx,base64pad:zx,base64url:Kx,base64urlpad:Vx});const id=Array.from(""),Wx=id.reduce((t,e,i)=>(t[i]=e,t),[]),Gx=id.reduce((t,e,i)=>(t[e.codePointAt(0)]=i,t),[]);const Zx=fn({prefix:"",name:"base256emoji",encode:function Yx(t){return t.reduce((e,i)=>e+=Wx[i],"")},decode:function Jx(t){const e=[];for(const i of t){const r=Gx[i.codePointAt(0)];if(void 0===r)throw new Error(`Non-base256emoji character: ${i}`);e.push(r)}return new Uint8Array(e)}});var Qx=Object.freeze({__proto__:null,base256emoji:Zx}),Xx=function rd(t,e,i){e=e||[];for(var r=i=i||0;t>=i8;)e[i++]=255&t|Bu,t/=128;for(;t&t8;)e[i++]=255&t|Bu,t>>>=7;return e[i]=0|t,rd.bytes=i-r+1,e},Bu=128,t8=-128,i8=Math.pow(2,31);var r8=function Ro(t,r){var o,i=0,s=0,n=r=r||0,a=t.length;do{if(n>=a)throw Ro.bytes=0,new RangeError("Could not decode varint");o=t[n++],i+=s<28?(o&Nu)<<s:(o&Nu)*Math.pow(2,s),s+=7}while(o>=s8);return Ro.bytes=n-r,i},s8=128,Nu=127;var n8=Math.pow(2,7),o8=Math.pow(2,14),a8=Math.pow(2,21),c8=Math.pow(2,28),u8=Math.pow(2,35),h8=Math.pow(2,42),l8=Math.pow(2,49),f8=Math.pow(2,56),d8=Math.pow(2,63),g8={encode:Xx,decode:r8,encodingLength:function(t){return t<n8?1:t<o8?2:t<a8?3:t<c8?4:t<u8?5:t<h8?6:t<l8?7:t<f8?8:t<d8?9:10}},sd=g8;const ku=(t,e,i=0)=>(sd.encode(t,e,i),e),Lu=t=>sd.encodingLength(t),Fo=(t,e)=>{const i=e.byteLength,r=Lu(t),s=r+Lu(i),n=new Uint8Array(s+i);return ku(t,n,0),ku(i,n,r),n.set(e,s),new y8(t,i,e,n)};class y8{constructor(e,i,r,s){this.code=e,this.size=i,this.digest=r,this.bytes=s}}const nd=({name:t,code:e,encode:i})=>new w8(t,e,i);class w8{constructor(e,i,r){this.name=e,this.code=i,this.encode=r}digest(e){if(e instanceof Uint8Array){const i=this.encode(e);return i instanceof Uint8Array?Fo(this.code,i):i.then(r=>Fo(this.code,r))}throw Error("Unknown type, must be binary type")}}const od=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),m8=nd({name:"sha2-256",code:18,encode:od("SHA-256")}),b8=nd({name:"sha2-512",code:19,encode:od("SHA-512")});Object.freeze({__proto__:null,sha256:m8,sha512:b8});const cd=ed,x8={code:0,name:"identity",encode:cd,digest:t=>Fo(0,cd(t))};Object.freeze({__proto__:null,identity:x8});new TextEncoder,new TextDecoder;const Mu={...yx,...mx,...vx,..._x,...Sx,...Ux,...kx,...qx,...Hx,...Qx};function ud(t){return null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function hd(t,e,i,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:i},decoder:{decode:r}}}const qu=hd("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>(new TextEncoder).encode(t.substring(1))),Wn=hd("ascii","a",t=>{let e="a";for(let i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return e},t=>{const e=function S8(t=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?ud(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}((t=t.substring(1)).length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}),D8={utf8:qu,"utf-8":qu,hex:Mu.base16,latin1:Wn,ascii:Wn,binary:Wn,...Mu};var $8=Object.defineProperty,Et=(t,e,i)=>((t,e,i)=>e in t?$8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);class T8{constructor(e,i){this.core=e,this.logger=i,Et(this,"keychain",new Map),Et(this,"name","keychain"),Et(this,"version","0.3"),Et(this,"initialized",!1),Et(this,"storagePrefix",Ot),Et(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Et(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Et(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),Et(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:n}=M("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(n)}return s}),Et(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=je(i,this.name)}get context(){return Qe(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,bo(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?vo(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=M("NOT_INITIALIZED",this.name);throw new Error(e)}}}var C8=Object.defineProperty,Ae=(t,e,i)=>((t,e,i)=>e in t?C8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);class R8{constructor(e,i,r){this.core=e,this.logger=i,Ae(this,"name","crypto"),Ae(this,"keychain"),Ae(this,"randomSessionIdentifier",To()),Ae(this,"initialized",!1),Ae(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Ae(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Ae(this,"getClientId",async()=>{this.isInitialized();return el(vc(await this.getClientSeed()).publicKey)}),Ae(this,"generateKeyPair",()=>{this.isInitialized();const s=function KE(){const t=$o.utils.randomPrivateKey(),e=$o.getPublicKey(t);return{privateKey:Ze(t,qe),publicKey:Ze(e,qe)}}();return this.setPrivateKey(s.publicKey,s.privateKey)}),Ae(this,"signJWT",async s=>{this.isInitialized();const o=vc(await this.getClientSeed()),a=this.randomSessionIdentifier;return await R1(a,s,A_,o)}),Ae(this,"generateSharedKey",(s,n,o)=>{this.isInitialized();const c=function VE(t,e){const i=$o.getSharedSecret(ht(t,qe),ht(e,qe));return Ze(eE(on,i,void 0,void 0,32),qe)}(this.getPrivateKey(s),n);return this.setSymKey(c,o)}),Ae(this,"setSymKey",async(s,n)=>{this.isInitialized();const o=n||Os(s);return await this.keychain.set(o,s),o}),Ae(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Ae(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Ae(this,"encode",async(s,n,o)=>{this.isInitialized();const a=Lf(o),c=Ii(n);if(yu(a))return function GE(t,e){const i=Uf(2),r=sr(12),n=kf({type:i,sealed:ht(t,ts),iv:r});return e===si?Bf(n):n}(c,o?.encoding);if(gu(a)){const f=a.senderPublicKey,p=a.receiverPublicKey;s=await this.generateSharedKey(f,p)}const u=this.getSymKey(s),{type:h,senderPublicKey:l}=a;return function HE(t){const e=Uf(typeof t.type<"u"?t.type:0);if(1===$i(e)&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const i=typeof t.senderPublicKey<"u"?ht(t.senderPublicKey,qe):void 0,r=typeof t.iv<"u"?ht(t.iv,qe):sr(12),s=ht(t.symKey,qe),o=kf({type:e,sealed:gf(s,r).encrypt(ht(t.message,ts)),iv:r,senderPublicKey:i});return t.encoding===si?Bf(o):o}({type:h,symKey:u,message:c,senderPublicKey:l,encoding:o?.encoding})}),Ae(this,"decode",async(s,n,o)=>{this.isInitialized();const a=function JE(t,e){const i=Kr({encoded:t,encoding:e?.encoding});return Lf({type:$i(i.type),senderPublicKey:typeof i.senderPublicKey<"u"?Ze(i.senderPublicKey,qe):void 0,receiverPublicKey:e?.receiverPublicKey})}(n,o);if(yu(a)){const c=function YE(t,e){const{sealed:i}=Kr({encoded:t,encoding:e});return Ze(i,ts)}(n,o?.encoding);return Yi(c)}if(gu(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;s=await this.generateSharedKey(c,u)}try{const u=function WE(t){const e=ht(t.symKey,qe),{sealed:i,iv:r}=Kr({encoded:t.encoded,encoding:t.encoding}),s=gf(e,r).decrypt(i);if(null===s)throw new Error("Failed to decrypt");return Ze(s,ts)}({symKey:this.getSymKey(s),encoded:n,encoding:o?.encoding});return Yi(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Ae(this,"getPayloadType",(s,n=Ye)=>$i(Kr({encoded:s,encoding:n}).type)),Ae(this,"getPayloadSenderPublicKey",(s,n=Ye)=>{const o=Kr({encoded:s,encoding:n});return o.senderPublicKey?Ze(o.senderPublicKey,qe):void 0}),this.core=e,this.logger=je(i,this.name),this.keychain=r||new T8(this.core,this.logger)}get context(){return Qe(this.logger)}async setPrivateKey(e,i){return await this.keychain.set(e,i),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Fu)}catch{e=To(),await this.keychain.set(Fu,e)}return function A8(t,e="utf8"){const i=D8[e];if(!i)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?i.decoder.decode(`${i.prefix}${t}`):ud(globalThis.Buffer.from(t,"utf-8"))}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=M("NOT_INITIALIZED",this.name);throw new Error(e)}}}var F8=Object.defineProperty,U8=Object.defineProperties,B8=Object.getOwnPropertyDescriptors,ju=Object.getOwnPropertySymbols,N8=Object.prototype.hasOwnProperty,k8=Object.prototype.propertyIsEnumerable,Uo=(t,e,i)=>e in t?F8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Xe=(t,e,i)=>Uo(t,"symbol"!=typeof e?e+"":e,i);class q8 extends Tg{constructor(e,i){super(e,i),this.logger=e,this.core=i,Xe(this,"messages",new Map),Xe(this,"messagesWithoutClientAck",new Map),Xe(this,"name","messages"),Xe(this,"version","0.3"),Xe(this,"initialized",!1),Xe(this,"storagePrefix",Ot),Xe(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Xe(this,"set",async(r,s,n)=>{this.isInitialized();const o=at(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),n===Ts_inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,((t,e)=>U8(t,B8(e)))(((t,e)=>{for(var i in e||(e={}))N8.call(e,i)&&Uo(t,i,e[i]);if(ju)for(var i of ju(e))k8.call(e,i)&&Uo(t,i,e[i]);return t})({},c),{[o]:s}))}return await this.persist(),o}),Xe(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),Xe(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const n of r){const o=this.messagesWithoutClientAck.get(n)||{};s[n]=Object.values(o)}return s}),Xe(this,"has",(r,s)=>{this.isInitialized();return typeof this.get(r)[at(s)]<"u"}),Xe(this,"ack",async(r,s)=>{this.isInitialized();const n=this.messagesWithoutClientAck.get(r);if(typeof n>"u")return;delete n[at(s)],0===Object.keys(n).length?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,n),await this.persist()}),Xe(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=je(e,this.name),this.core=i}get context(){return Qe(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,bo(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,bo(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?vo(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?vo(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=M("NOT_INITIALIZED",this.name);throw new Error(e)}}}var j8=Object.defineProperty,z8=Object.defineProperties,K8=Object.getOwnPropertyDescriptors,zu=Object.getOwnPropertySymbols,V8=Object.prototype.hasOwnProperty,H8=Object.prototype.propertyIsEnumerable,Bo=(t,e,i)=>e in t?j8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,zi=(t,e)=>{for(var i in e||(e={}))V8.call(e,i)&&Bo(t,i,e[i]);if(zu)for(var i of zu(e))H8.call(e,i)&&Bo(t,i,e[i]);return t},Ku=(t,e)=>z8(t,K8(e)),nt=(t,e,i)=>Bo(t,"symbol"!=typeof e?e+"":e,i);class W8 extends Cg{constructor(e,i){super(e,i),this.relayer=e,this.logger=i,nt(this,"events",new rt.EventEmitter),nt(this,"name","publisher"),nt(this,"queue",new Map),nt(this,"publishTimeout",L.toMiliseconds(L.ONE_MINUTE)),nt(this,"initialPublishTimeout",L.toMiliseconds(15*L.ONE_SECOND)),nt(this,"needsTransportRestart",!1),nt(this,"publish",async(r,s,n)=>{var o,a,c,u,h;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:n}});const l=n?.ttl||P_,f=n?.prompt||!1,p=n?.tag||0,d=n?.id||ni().toString(),g=Wi(Vs().protocol),y={id:d,method:n?.publishMethod||g.publish,params:zi({topic:r,message:s,ttl:l,prompt:f,tag:p,attestation:n?.attestation},n?.tvf&&{tvf:n.tvf})},E=`Failed to publish payload, please try again. id:${d} tag:${p}`;try{ve(null==(o=y.params)?void 0:o.prompt)&&(null==(a=y.params)||delete a.prompt),ve(null==(c=y.params)?void 0:c.tag)&&(null==(u=y.params)||delete u.tag);const v=new Promise(async m=>{const D=({id:R})=>{var B;(null==(B=y.id)?void 0:B.toString())===R.toString()&&(this.removeRequestFromQueue(R),this.relayer.events.removeListener(de_publish,D),m())};this.relayer.events.on(de_publish,D);const I=At(new Promise((R,B)=>{this.rpcPublish(y,n).then(R).catch(C=>{this.logger.warn(C,C?.message),B(C)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${p}`);try{await I,this.events.removeListener(de_publish,D)}catch(R){this.queue.set(d,{request:y,opts:n,attempt:1}),this.logger.warn(R,R?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:n}}),await At(v,this.publishTimeout,E)}catch(v){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(v),null!=(h=n?.internal)&&h.throwOnFailedPublish)throw v}finally{this.queue.delete(d)}}),nt(this,"publishCustom",async r=>{var s,n,o,a,c;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:r});const{payload:u,opts:h={}}=r,{attestation:l,tvf:f,publishMethod:p,prompt:d,tag:g,ttl:y=L.FIVE_MINUTES}=h,E=h.id||ni().toString(),v=Wi(Vs().protocol),m=p||v.publish,D={id:E,method:m,params:zi(Ku(zi({},u),{ttl:y,prompt:d,tag:g,attestation:l}),f)},I=`Failed to publish custom payload, please try again. id:${E} tag:${g}`;try{ve(null==(s=D.params)?void 0:s.prompt)&&(null==(n=D.params)||delete n.prompt),ve(null==(o=D.params)?void 0:o.tag)&&(null==(a=D.params)||delete a.tag);const R=new Promise(async B=>{const C=({id:O})=>{var _;(null==(_=D.id)?void 0:_.toString())===O.toString()&&(this.removeRequestFromQueue(O),this.relayer.events.removeListener(de_publish,C),B())};this.relayer.events.on(de_publish,C);const w=At(new Promise((O,_)=>{this.rpcPublish(D,h).then(O).catch($=>{this.logger.warn($,$?.message),_($)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${m} id:${E} tag:${g}`);try{await w,this.events.removeListener(de_publish,C)}catch(O){this.queue.set(E,{request:D,opts:h,attempt:1}),this.logger.warn(O,O?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:E,payload:u,opts:h}}),await At(R,this.publishTimeout,I)}catch(R){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(R),null!=(c=h?.internal)&&c.throwOnFailedPublish)throw R}finally{this.queue.delete(E)}}),nt(this,"on",(r,s)=>{this.events.on(r,s)}),nt(this,"once",(r,s)=>{this.events.once(r,s)}),nt(this,"off",(r,s)=>{this.events.off(r,s)}),nt(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=je(i,this.name),this.registerEventListeners()}get context(){return Qe(this.logger)}async rpcPublish(e,i){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});const r=await this.relayer.request(e);return this.relayer.events.emit(de_publish,zi(zi({},e),i)),this.logger.debug("Successfully Published Payload"),r}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,i)=>{var r;const s=e.attempt+1;this.queue.set(i,Ku(zi({},e),{attempt:s})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${null==(r=e.request.params)?void 0:r.tag}, attempt: ${s}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Ti_pulse,()=>{if(this.needsTransportRestart)return this.needsTransportRestart=!1,void this.relayer.events.emit(de_connection_stalled);this.checkQueue()}),this.relayer.on(de_message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var G8=Object.defineProperty,Ki=(t,e,i)=>((t,e,i)=>e in t?G8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);class J8{constructor(){Ki(this,"map",new Map),Ki(this,"set",(e,i)=>{const r=this.get(e);this.exists(e,i)||this.map.set(e,[...r,i])}),Ki(this,"get",e=>this.map.get(e)||[]),Ki(this,"exists",(e,i)=>this.get(e).includes(i)),Ki(this,"delete",(e,i)=>{if(typeof i>"u")return void this.map.delete(e);if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,i))return;const s=r.filter(n=>n!==i);s.length?this.map.set(e,s):this.map.delete(e)}),Ki(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var Z8=Object.defineProperty,Q8=Object.defineProperties,X8=Object.getOwnPropertyDescriptors,Vu=Object.getOwnPropertySymbols,eI=Object.prototype.hasOwnProperty,tI=Object.prototype.propertyIsEnumerable,No=(t,e,i)=>e in t?Z8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Er=(t,e)=>{for(var i in e||(e={}))eI.call(e,i)&&No(t,i,e[i]);if(Vu)for(var i of Vu(e))tI.call(e,i)&&No(t,i,e[i]);return t},Gn=(t,e)=>Q8(t,X8(e)),ae=(t,e,i)=>No(t,"symbol"!=typeof e?e+"":e,i);class iI extends Fg{constructor(e,i){super(e,i),this.relayer=e,this.logger=i,ae(this,"subscriptions",new Map),ae(this,"topicMap",new J8),ae(this,"events",new rt.EventEmitter),ae(this,"name","subscription"),ae(this,"version","0.3"),ae(this,"pending",new Map),ae(this,"cached",[]),ae(this,"initialized",!1),ae(this,"storagePrefix",Ot),ae(this,"subscribeTimeout",L.toMiliseconds(L.ONE_MINUTE)),ae(this,"initialSubscribeTimeout",L.toMiliseconds(15*L.ONE_SECOND)),ae(this,"clientId"),ae(this,"batchSubscribeTopicsLimit",500),ae(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),ae(this,"subscribe",async(r,s)=>{var n;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const o=Vs(s),a={topic:r,relay:o,transportType:s?.transportType};null!=(n=s?.internal)&&n.skipSubscribe||this.pending.set(r,a);const c=await this.rpcSubscribe(r,o,s);return"string"==typeof c&&(this.onSubscribe(c,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),c}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}}),ae(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof s?.id<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),ae(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),ae(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(n=>n.topic===r))})),ae(this,"on",(r,s)=>{this.events.on(r,s)}),ae(this,"once",(r,s)=>{this.events.once(r,s)}),ae(this,"off",(r,s)=>{this.events.off(r,s)}),ae(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),ae(this,"start",async()=>{await this.onConnect()}),ae(this,"stop",async()=>{await this.onDisconnect()}),ae(this,"restart",async()=>{await this.restore(),await this.onRestart()}),ae(this,"checkPending",async()=>{if(!(0!==this.pending.size||this.initialized&&this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),ae(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Ti_pulse,async()=>{await this.checkPending()}),this.events.on(et_created,async r=>{const s=et_created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(et_deleted,async r=>{const s=et_deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=je(i,this.name),this.clientId=""}get context(){return Qe(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,i){let r=!1;try{r=this.getSubscription(e).topic===i}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,i){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,i)))}async unsubscribeById(e,i,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:i,opts:r}});try{const s=Vs(r);await this.restartToComplete({topic:e,id:i,relay:s}),await this.rpcUnsubscribe(e,i,s);const n=le("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,i,n),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:i,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,i,r){var s,n;const o=await this.getSubscriptionId(e);if(null!=(s=r?.internal)&&s.skipSubscribe)return o;(!r||r?.transportType===he.relay)&&await this.restartToComplete({topic:e,id:e,relay:i});const a={method:Wi(i.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const c=null==(n=r?.internal)?void 0:n.throwOnFailedPublish;try{if(r?.transportType===he.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(l=>this.logger.warn(l))},L.toMiliseconds(L.ONE_SECOND)),o;const u=new Promise(async l=>{const f=p=>{p.topic===e&&(this.events.removeListener(et_created,f),l(p.id))};this.events.on(et_created,f);try{const p=await At(new Promise((d,g)=>{this.relayer.request(a).catch(y=>{this.logger.warn(y,y?.message),g(y)}).then(d)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(et_created,f),l(p)}catch{}}),h=await At(u,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!h&&c)throw new Error(`Subscribing to ${e} failed, please try again`);return h?o:null}catch(u){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(de_connection_stalled),c)throw u}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r={method:Wi(e[0].relay.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await At(new Promise(s=>{this.relayer.request(r).catch(n=>this.logger.warn(n)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(de_connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r={method:Wi(e[0].relay.protocol).batchFetchMessages,params:{topics:e.map(n=>n.topic)}};let s;this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{s=await await At(new Promise((n,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(n)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(de_connection_stalled)}return s}rpcUnsubscribe(e,i,r){const s={method:Wi(r.protocol).unsubscribe,params:{topic:e,id:i}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,i){this.setSubscription(e,Gn(Er({},i),{id:e})),this.pending.delete(i.topic)}onBatchSubscribe(e){e.length&&e.forEach(i=>{this.setSubscription(i.id,Er({},i)),this.pending.delete(i.topic)})}async onUnsubscribe(e,i,r){this.events.removeAllListeners(i),this.hasSubscription(i,e)&&this.deleteSubscription(i,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,i){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:i}),this.addSubscription(e,i)}addSubscription(e,i){this.subscriptions.set(e,Er({},i)),this.topicMap.set(i.topic,e),this.events.emit(et_created,i)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const i=this.subscriptions.get(e);if(!i){const{message:r}=M("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return i}deleteSubscription(e,i){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:i});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(et_deleted,Gn(Er({},r),{reason:i}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(et_sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],i=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<i;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(et_resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(i=>{var r;return i.topic===(null==(r=this.subscriptions.get(i.id))?void 0:r.topic)})){const{message:i}=M("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(i),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(i)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async i=>Gn(Er({},i),{id:await this.getSubscriptionId(i.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const i=await this.rpcBatchFetchMessages(e);i&&i.messages&&(await function lv(t){return new Promise(e=>setTimeout(e,t))}(L.toMiliseconds(L.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(i.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=M("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return at(e+await this.getClientId())}}var rI=Object.defineProperty,Hu=Object.getOwnPropertySymbols,sI=Object.prototype.hasOwnProperty,nI=Object.prototype.propertyIsEnumerable,ko=(t,e,i)=>e in t?rI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Wu=(t,e)=>{for(var i in e||(e={}))sI.call(e,i)&&ko(t,i,e[i]);if(Hu)for(var i of Hu(e))nI.call(e,i)&&ko(t,i,e[i]);return t},ee=(t,e,i)=>ko(t,"symbol"!=typeof e?e+"":e,i);class oI extends Pg{constructor(e){super(e),ee(this,"protocol","wc"),ee(this,"version",2),ee(this,"core"),ee(this,"logger"),ee(this,"events",new rt.EventEmitter),ee(this,"provider"),ee(this,"messages"),ee(this,"subscriber"),ee(this,"publisher"),ee(this,"name","relayer"),ee(this,"transportExplicitlyClosed",!1),ee(this,"initialized",!1),ee(this,"connectionAttemptInProgress",!1),ee(this,"relayUrl"),ee(this,"projectId"),ee(this,"packageName"),ee(this,"bundleId"),ee(this,"hasExperiencedNetworkDisruption",!1),ee(this,"pingTimeout"),ee(this,"heartBeatTimeout",L.toMiliseconds(L.THIRTY_SECONDS+L.FIVE_SECONDS)),ee(this,"reconnectTimeout"),ee(this,"connectPromise"),ee(this,"reconnectInProgress",!1),ee(this,"requestsInFlight",[]),ee(this,"connectTimeout",L.toMiliseconds(15*L.ONE_SECOND)),ee(this,"request",async i=>{var r,s;this.logger.debug("Publishing Request Payload");const n=i.id||ni().toString();await this.toEstablishConnection();try{this.logger.trace({id:n,method:i.method,topic:null==(r=i.params)?void 0:r.topic},"relayer.request - publishing...");const o=`${n}:${(null==(s=i.params)?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(i);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${n}`),o}}),ee(this,"resetPingTimeout",()=>{qs()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var i,r,s,n;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),null==(n=null==(s=null==(r=null==(i=this.provider)?void 0:i.connection)?void 0:r.socket)?void 0:s.terminate)||n.call(s)}catch(o){this.logger.warn(o,o?.message)}},this.heartBeatTimeout))}),ee(this,"onPayloadHandler",i=>{this.onProviderPayload(i),this.resetPingTimeout()}),ee(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(de_connect)}),ee(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),ee(this,"onProviderErrorHandler",i=>{this.logger.fatal(`Fatal socket error: ${i.message}`),this.events.emit(de_error,i),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),ee(this,"registerProviderListeners",()=>{this.provider.on(st_payload,this.onPayloadHandler),this.provider.on(st_connect,this.onConnectHandler),this.provider.on(st_disconnect,this.onDisconnectHandler),this.provider.on(st_error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&"string"!=typeof e.logger?je(e.logger,this.name):Zs(Vo({level:e.logger||"error"})),this.messages=new q8(this.logger,e.core),this.subscriber=new iI(this,this.logger),this.publisher=new W8(this,this.logger),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Qf,function Yb(){return ci()&&typeof __webpack_require__.g<"u"&&typeof(null==__webpack_require__.g?void 0:__webpack_require__.g.Platform)<"u"&&"android"===(null==__webpack_require__.g?void 0:__webpack_require__.g.Platform.OS)}()?this.packageName=Nc():function Jb(){return ci()&&typeof __webpack_require__.g<"u"&&typeof(null==__webpack_require__.g?void 0:__webpack_require__.g.Platform)<"u"&&"ios"===(null==__webpack_require__.g?void 0:__webpack_require__.g.Platform.OS)}()&&(this.bundleId=Nc()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e?.message))}get context(){return Qe(this.logger)}get connected(){var e,i,r;return 1===(null==(r=null==(i=null==(e=this.provider)?void 0:e.connection)?void 0:i.socket)?void 0:r.readyState)||!1}get connecting(){var e,i,r;return 0===(null==(r=null==(i=null==(e=this.provider)?void 0:e.connection)?void 0:i.socket)?void 0:r.readyState)||void 0!==this.connectPromise||!1}async publish(e,i,r){this.isInitialized(),await this.publisher.publish(e,i,r),await this.recordMessageEvent({topic:e,message:i,publishedAt:Date.now(),transportType:he.relay},Ts_outbound)}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,i){var r,s,n;this.isInitialized(),(null==i||!i.transportType||"relay"===i?.transportType)&&await this.toEstablishConnection();const o=typeof(null==(r=i?.internal)?void 0:r.throwOnFailedPublish)>"u"||(null==(s=i?.internal)?void 0:s.throwOnFailedPublish);let c,a=(null==(n=this.subscriber.topicMap.get(e))?void 0:n[0])||"";const u=h=>{h.topic===e&&(this.subscriber.off(et_created,u),c())};return await Promise.all([new Promise(h=>{c=h,this.subscriber.on(et_created,u)}),new Promise(async(h,l)=>{a=await this.subscriber.subscribe(e,Wu({internal:{throwOnFailedPublish:o}},i)).catch(f=>{o&&l(f)})||a,h()})]),a}async unsubscribe(e,i){this.isInitialized(),await this.subscriber.unsubscribe(e,i)}on(e,i){this.events.on(e,i)}once(e,i){this.events.once(e,i)}off(e,i){this.events.off(e,i)}removeListener(e,i){this.events.removeListener(e,i)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await At(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(this.subscriber.hasAnyTopics){if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(i,r)=>{await this.connect(e).then(i).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}else this.logger.info("Starting WS connection skipped because the client has no topics to work with.")}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Au())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(0===e?.length)return void this.logger.trace("Batch message events is empty. Ignoring...");const i=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${i.length} message events sorted`);for(const r of i)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+s?.message)}this.logger.trace(`Batch of ${i.length} message events processed`)}async onLinkMessageEvent(e,i){const{topic:r}=e;if(!i.sessionExists){const n={topic:r,expiry:me(L.FIVE_MINUTES),relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,n)}this.events.emit(de_message,e),await this.recordMessageEvent(e,Ts_inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let i=1;for(;i<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${i}...`),await this.createProvider(),await new Promise(async(r,s)=>{const n=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(st_disconnect,n),await At(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(st_disconnect,n),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(st_disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(st_disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${i}`);break}await new Promise(r=>setTimeout(r,L.toMiliseconds(1*i))),i++}}startPingTimeout(){var e,i,r,s,n;if(qs())try{null!=(i=null==(e=this.provider)?void 0:e.connection)&&i.socket&&(null==(n=null==(s=null==(r=this.provider)?void 0:r.connection)?void 0:s.socket)||n.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Gf(new x_(tv({sdkVersion:Po,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,i){const{topic:r,message:s}=e;await this.messages.set(r,s,i)}async shouldIgnoreMessageEvent(e){const{topic:i,message:r}=e;if(!r||0===r.length)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(i))return this.logger.warn(`Ignoring message for unknown topic ${i}`),!0;const s=this.messages.has(i,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Ia(e)){if(!e.method.endsWith("_subscription"))return;const i=e.params,{topic:r,message:s,publishedAt:n,attestation:o}=i.data,a={topic:r,message:s,publishedAt:n,transportType:he.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Wu({type:"event",event:i.id},a)),this.events.emit(i.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else ln(e)&&this.events.emit(de_message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Ts_inbound),this.events.emit(de_message,e))}async acknowledgePayload(e){const i=Hr(e.id,!0);await this.provider.connection.send(i)}unregisterProviderListeners(){this.provider.off(st_payload,this.onPayloadHandler),this.provider.off(st_connect,this.onConnectHandler),this.provider.off(st_disconnect,this.onDisconnectHandler),this.provider.off(st_error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await Au();K3(async i=>{e!==i&&(e=i,i?await this.transportOpen().catch(r=>this.logger.error(r,r?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Ti_pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&function W3(){var t;return!rr()||!Si()||"visible"===(null==(t=Si())?void 0:t.visibilityState)}())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(i){this.logger.warn(i,i?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(de_disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},L.toMiliseconds(.1)))))}isInitialized(){if(!this.initialized){const{message:e}=M("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise)return void await this.connectPromise;await this.connect()}}}function Gu(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Yu(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Ju="[object Arguments]",Yn="[object Object]";function PI(){}function Zu(t){if(!t||"object"!=typeof t)return!1;const e=Object.getPrototypeOf(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&"[object Object]"===Object.prototype.toString.call(t)}function Dr(t,e,i,r,s,n,o){const a=o(t,e,i,r,s,n);if(void 0!==a)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return t===e;case"number":return t===e||Object.is(t,e);case"object":return Ur(t,e,n,o)}return Ur(t,e,n,o)}function Ur(t,e,i,r){if(Object.is(t,e))return!0;let s=Yu(t),n=Yu(e);if(s===Ju&&(s=Yn),n===Ju&&(n=Yn),s!==n)return!1;switch(s){case"[object String]":return t.toString()===e.toString();case"[object Number]":return function aI(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}(t.valueOf(),e.valueOf());case"[object Boolean]":case"[object Date]":case"[object Symbol]":return Object.is(t.valueOf(),e.valueOf());case"[object RegExp]":return t.source===e.source&&t.flags===e.flags;case"[object Function]":return t===e}const o=(i=i??new Map).get(t),a=i.get(e);if(null!=o&&null!=a)return o===e;i.set(t,e),i.set(e,t);try{switch(s){case"[object Map]":if(t.size!==e.size)return!1;for(const[c,u]of t.entries())if(!e.has(c)||!Dr(u,e.get(c),c,t,e,i,r))return!1;return!0;case"[object Set]":{if(t.size!==e.size)return!1;const c=Array.from(t.values()),u=Array.from(e.values());for(let h=0;h<c.length;h++){const l=c[h],f=u.findIndex(p=>Dr(l,p,void 0,t,e,i,r));if(-1===f)return!1;u.splice(f,1)}return!0}case"[object Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":case"[object BigUint64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object BigInt64Array]":case"[object Float32Array]":case"[object Float64Array]":if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Dr(t[c],e[c],c,t,e,i,r))return!1;return!0;case"[object ArrayBuffer]":return t.byteLength===e.byteLength&&Ur(new Uint8Array(t),new Uint8Array(e),i,r);case"[object DataView]":return t.byteLength===e.byteLength&&t.byteOffset===e.byteOffset&&Ur(new Uint8Array(t),new Uint8Array(e),i,r);case"[object Error]":return t.name===e.name&&t.message===e.message;case Yn:{if(!(Ur(t.constructor,e.constructor,i,r)||Zu(t)&&Zu(e)))return!1;const c=[...Object.keys(t),...Gu(t)],u=[...Object.keys(e),...Gu(e)];if(c.length!==u.length)return!1;for(let h=0;h<c.length;h++){const l=c[h],f=t[l];if(!Object.hasOwn(e,l))return!1;if(!Dr(f,e[l],l,t,e,i,r))return!1}return!0}default:return!1}}finally{i.delete(t),i.delete(e)}}function FI(t,e){return function RI(t,e,i){return Dr(t,e,void 0,void 0,void 0,void 0,i)}(t,e,PI)}var UI=Object.defineProperty,Qu=Object.getOwnPropertySymbols,BI=Object.prototype.hasOwnProperty,NI=Object.prototype.propertyIsEnumerable,Lo=(t,e,i)=>e in t?UI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Xu=(t,e)=>{for(var i in e||(e={}))BI.call(e,i)&&Lo(t,i,e[i]);if(Qu)for(var i of Qu(e))NI.call(e,i)&&Lo(t,i,e[i]);return t},Ke=(t,e,i)=>Lo(t,"symbol"!=typeof e?e+"":e,i);class Ri extends Rg{constructor(e,i,r,s=Ot,n=void 0){super(e,i,r,s),this.core=e,this.logger=i,this.name=r,Ke(this,"map",new Map),Ke(this,"version","0.3"),Ke(this,"cached",[]),Ke(this,"initialized",!1),Ke(this,"getKey"),Ke(this,"storagePrefix",Ot),Ke(this,"recentlyDeleted",[]),Ke(this,"recentlyDeletedLimit",200),Ke(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&null!==o&&!ve(o)?this.map.set(this.getKey(o),o):function E3(t){var e;return null==(e=t?.proposer)?void 0:e.publicKey}(o)?this.map.set(o.id,o):function _3(t){return t?.topic}(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Ke(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Ke(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Ke(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>FI(a[c],o[c]))):this.values)),Ke(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=Xu(Xu({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Ke(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=je(i,this.name),this.storagePrefix=s,this.getKey=n}get context(){return Qe(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const i=this.map.get(e);if(!i){if(this.recentlyDeleted.includes(e)){const{message:s}=M("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=M("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return i}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:i}=M("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(i),new Error(i)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=M("NOT_INITIALIZED",this.name);throw new Error(e)}}}var kI=Object.defineProperty,Z=(t,e,i)=>((t,e,i)=>e in t?kI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);class MI{constructor(e,i){this.core=e,this.logger=i,Z(this,"name","pairing"),Z(this,"version","0.3"),Z(this,"events",new mh),Z(this,"pairings"),Z(this,"initialized",!1),Z(this,"storagePrefix",Ot),Z(this,"ignoredPayloadTypes",[1]),Z(this,"registeredMethods",[]),Z(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Z(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Z(this,"create",async r=>{this.isInitialized();const s=To(),n=await this.core.crypto.setSymKey(s),o=me(L.FIVE_MINUTES),a={protocol:"irn"},c={topic:n,expiry:o,relay:a,active:!1,methods:r?.methods},u=mu({protocol:this.core.protocol,version:this.core.version,topic:n,symKey:s,relay:a,expiryTimestamp:o,methods:r?.methods});return this.events.emit(mi_create,c),this.core.expirer.set(n,o),await this.pairings.set(n,c),await this.core.relayer.subscribe(n,{transportType:r?.transportType,internal:r?.internal}),{topic:n,uri:u}}),Z(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r?.uri,trace:[xt_pairing_started]}});this.isValidPair(r,s);const{topic:n,symKey:o,relay:a,expiryTimestamp:c,methods:u}=wu(r.uri);let h;if(s.props.properties.topic=n,s.addTrace(xt_pairing_uri_validation_success),s.addTrace(xt_pairing_uri_not_expired),this.pairings.keys.includes(n)){if(h=this.pairings.get(n),s.addTrace(xt_existing_pairing),h.active)throw s.setError(Nt_active_pairing_already_exists),new Error(`Pairing already exists: ${n}. Please try again with a new connection URI.`);s.addTrace(xt_pairing_not_expired)}const l=c||me(L.FIVE_MINUTES),f={topic:n,relay:a,expiry:l,active:!1,methods:u};this.core.expirer.set(n,l),await this.pairings.set(n,f),s.addTrace(xt_store_new_pairing),r.activatePairing&&await this.activate({topic:n}),this.events.emit(mi_create,f),s.addTrace(xt_emit_inactive_pairing),this.core.crypto.keychain.has(n)||await this.core.crypto.setSymKey(o,n),s.addTrace(xt_subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Nt_no_internet_connection)}try{await this.core.relayer.subscribe(n,{relay:a})}catch(p){throw s.setError(Nt_subscribe_pairing_topic_failure),p}return s.addTrace(xt_subscribe_pairing_topic_success),f}),Z(this,"activate",async({topic:r})=>{this.isInitialized();const s=me(L.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Z(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const n=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=yi();this.events.once(se("pairing_ping",n),({error:u})=>{u?c(u):a()}),await o()}}),Z(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Z(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Z(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Z(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",le("USER_DISCONNECTED")),await this.deletePairing(s))}),Z(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:n,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return mu({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:n,expiryTimestamp:o,methods:a})}),Z(this,"sendRequest",async(r,s,n)=>{const o=Lt(s,n),a=await this.core.crypto.encode(r,o),c=mr[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Z(this,"sendResult",async(r,s,n)=>{const o=Hr(r,n),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,u=mr[c].res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),Z(this,"sendError",async(r,s,n)=>{const o=hn(r,n),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,u=mr[c]?mr[c].res:mr.unregistered_method.res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),Z(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,le("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Z(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>ei(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Z(this,"onRelayEventRequest",async r=>{const{topic:s,payload:n}=r;switch(n.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,n);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,n);default:return await this.onUnknownRpcMethodRequest(s,n)}}),Z(this,"onRelayEventResponse",async r=>{const{topic:s,payload:n}=r,o=(await this.core.history.get(s,n.id)).request.method;return"wc_pairingPing"===o?this.onPairingPingResponse(s,n):this.onUnknownRpcMethodResponse(o)}),Z(this,"onPairingPingRequest",async(r,s)=>{const{id:n}=s;try{this.isValidPing({topic:r}),await this.sendResult(n,r,!0),this.events.emit(mi_ping,{id:n,topic:r})}catch(o){await this.sendError(n,r,o),this.logger.error(o)}}),Z(this,"onPairingPingResponse",(r,s)=>{const{id:n}=s;setTimeout(()=>{St(s)?this.events.emit(se("pairing_ping",n),{}):ct(s)&&this.events.emit(se("pairing_ping",n),{error:s.error})},500)}),Z(this,"onPairingDeleteRequest",async(r,s)=>{const{id:n}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(mi_delete,{id:n,topic:r})}catch(o){await this.sendError(n,r,o),this.logger.error(o)}}),Z(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:n,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=le("WC_METHOD_UNSUPPORTED",o);await this.sendError(n,r,a),this.logger.error(a)}catch(a){await this.sendError(n,r,a),this.logger.error(a)}}),Z(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(le("WC_METHOD_UNSUPPORTED",r))}),Z(this,"isValidPair",(r,s)=>{var n;if(!He(r)){const{message:a}=M("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Nt_malformed_pairing_uri),new Error(a)}if(!function v3(t){function e(i){try{return typeof new URL(i)<"u"}catch{return!1}}try{if(ye(t,!1))return!!e(t)||e(Yl(t))}catch{}return!1}(r.uri)){const{message:a}=M("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Nt_malformed_pairing_uri),new Error(a)}const o=wu(r?.uri);if(null==(n=o?.relay)||!n.protocol){const{message:a}=M("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Nt_malformed_pairing_uri),new Error(a)}if(null==o||!o.symKey){const{message:a}=M("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Nt_malformed_pairing_uri),new Error(a)}if(null!=o&&o.expiryTimestamp&&L.toMiliseconds(o?.expiryTimestamp)<Date.now()){s.setError(Nt_pairing_expired);const{message:a}=M("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Z(this,"isValidPing",async r=>{if(!He(r)){const{message:n}=M("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(n)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Z(this,"isValidDisconnect",async r=>{if(!He(r)){const{message:n}=M("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(n)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Z(this,"isValidPairingTopic",async r=>{if(!ye(r,!1)){const{message:s}=M("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=M("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(ei(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=M("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=je(i,this.name),this.pairings=new Ri(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Qe(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=M("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(de_message,async e=>{const{topic:i,message:r,transportType:s}=e;if(this.pairings.keys.includes(i)&&s!==he.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const n=await this.core.crypto.decode(i,r);Ia(n)?(this.core.history.set(i,n),await this.onRelayEventRequest({topic:i,payload:n})):ln(n)&&(await this.core.history.resolve(n),await this.onRelayEventResponse({topic:i,payload:n}),this.core.history.delete(i,n.id)),await this.core.relayer.messages.ack(i,r)}catch(n){this.logger.error(n)}})}registerExpirerEvents(){this.core.expirer.on(ot_expired,async e=>{const{topic:i}=Gl(e.target);i&&this.pairings.keys.includes(i)&&(await this.deletePairing(i,!0),this.events.emit(mi_expire,{topic:i}))})}}var qI=Object.defineProperty,$e=(t,e,i)=>((t,e,i)=>e in t?qI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);class zI extends Og{constructor(e,i){super(e,i),this.core=e,this.logger=i,$e(this,"records",new Map),$e(this,"events",new rt.EventEmitter),$e(this,"name","history"),$e(this,"version","0.3"),$e(this,"cached",[]),$e(this,"initialized",!1),$e(this,"storagePrefix",Ot),$e(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),$e(this,"set",(r,s,n)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:n}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:n,expiry:me(L.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(pt_created,o)}),$e(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=ct(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(pt_updated,s))}),$e(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),$e(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(n=>{if(n.topic===r){if(typeof s<"u"&&n.id!==s)return;this.records.delete(n.id),this.events.emit(pt_deleted,n)}}),this.persist()}),$e(this,"exists",async(r,s)=>(this.isInitialized(),!!this.records.has(s)&&(await this.getRecord(s)).topic===r)),$e(this,"on",(r,s)=>{this.events.on(r,s)}),$e(this,"once",(r,s)=>{this.events.once(r,s)}),$e(this,"off",(r,s)=>{this.events.off(r,s)}),$e(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=je(i,this.name)}get context(){return Qe(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(i=>{if(typeof i.response<"u")return;const r={topic:i.topic,request:Lt(i.request.method,i.request.params,i.id),chainId:i.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const i=this.records.get(e);if(!i){const{message:r}=M("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return i}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(pt_sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:i}=M("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(i),new Error(i)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(pt_created,e=>{const i=pt_created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,record:e})}),this.events.on(pt_updated,e=>{const i=pt_updated;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,record:e})}),this.events.on(pt_deleted,e=>{const i=pt_deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,record:e})}),this.core.heartbeat.on(Ti_pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(i=>{L.toMiliseconds(i.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${i.id}`),this.records.delete(i.id),this.events.emit(pt_deleted,i,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=M("NOT_INITIALIZED",this.name);throw new Error(e)}}}var KI=Object.defineProperty,ke=(t,e,i)=>((t,e,i)=>e in t?KI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);class HI extends Ug{constructor(e,i){super(e,i),this.core=e,this.logger=i,ke(this,"expirations",new Map),ke(this,"events",new rt.EventEmitter),ke(this,"name","expirer"),ke(this,"version","0.3"),ke(this,"cached",[]),ke(this,"initialized",!1),ke(this,"storagePrefix",Ot),ke(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ke(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),ke(this,"set",(r,s)=>{this.isInitialized();const n=this.formatTarget(r),o={target:n,expiry:s};this.expirations.set(n,o),this.checkExpiry(n,o),this.events.emit(ot_created,{target:n,expiration:o})}),ke(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),ke(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),n=this.getExpiration(s);this.expirations.delete(s),this.events.emit(ot_deleted,{target:s,expiration:n})}}),ke(this,"on",(r,s)=>{this.events.on(r,s)}),ke(this,"once",(r,s)=>{this.events.once(r,s)}),ke(this,"off",(r,s)=>{this.events.off(r,s)}),ke(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=je(i,this.name)}get context(){return Qe(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return function iv(t){return Wl("topic",t)}(e);if("number"==typeof e)return function rv(t){return Wl("id",t)}(e);const{message:i}=M("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(i)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(ot_sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:i}=M("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(i),new Error(i)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const i=this.expirations.get(e);if(!i){const{message:r}=M("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return i}checkExpiry(e,i){const{expiry:r}=i;L.toMiliseconds(r)-Date.now()<=0&&this.expire(e,i)}expire(e,i){this.expirations.delete(e),this.events.emit(ot_expired,{target:e,expiration:i})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,i)=>this.checkExpiry(i,e))}registerEventListeners(){this.core.heartbeat.on(Ti_pulse,()=>this.checkExpirations()),this.events.on(ot_created,e=>{const i=ot_created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:e}),this.persist()}),this.events.on(ot_expired,e=>{const i=ot_expired;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:e}),this.persist()}),this.events.on(ot_deleted,e=>{const i=ot_deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=M("NOT_INITIALIZED",this.name);throw new Error(e)}}}var WI=Object.defineProperty,ge=(t,e,i)=>((t,e,i)=>e in t?WI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);class YI extends Bg{constructor(e,i,r){super(e,i,r),this.core=e,this.logger=i,this.store=r,ge(this,"name","verify-api"),ge(this,"abortController"),ge(this,"isDevEnv"),ge(this,"verifyUrlV3",J_),ge(this,"storagePrefix",Ot),ge(this,"version",2),ge(this,"publicKey"),ge(this,"fetchPromise"),ge(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&L.toMiliseconds(null==(s=this.publicKey)?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),ge(this,"register",async s=>{if(!rr()||this.isDevEnv)return;const n=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${n}&id=${o}&decryptedId=${a}`;try{const u=Si(),h=this.startAbortTimer(5*L.ONE_SECOND),l=await new Promise((f,p)=>{const d=()=>{window.removeEventListener("message",y),u.body.removeChild(g),p("attestation aborted")};this.abortController.signal.addEventListener("abort",d);const g=u.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",d,{signal:this.abortController.signal});const y=E=>{if(E.data&&"string"==typeof E.data)try{const v=JSON.parse(E.data);if("verify_attestation"===v.type){if(ho(v.attestation).payload.id!==o)return;clearInterval(h),u.body.removeChild(g),this.abortController.signal.removeEventListener("abort",d),window.removeEventListener("message",y),f(null===v.attestation?"":v.attestation)}}catch(v){this.logger.warn(v)}};u.body.appendChild(g),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",l),l}catch(u){this.logger.warn(u)}return""}),ge(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:n,hash:o,encryptedId:a}=s;if(""===n)return void this.logger.debug("resolve: attestationId is empty, skipping");if(n){if(ho(n).payload.id!==a)return;const u=await this.isValidJwtAttestation(n);if(u)return u.isVerified?u:void this.logger.warn("resolve: jwt attestation: origin url not verified")}if(!o)return;const c=this.getVerifyUrl(s?.verifyUrl);return this.fetchAttestation(o,c)}),ge(this,"fetchAttestation",async(s,n)=>{this.logger.debug(`resolving attestation: ${s} from url: ${n}`);const o=this.startAbortTimer(5*L.ONE_SECOND),a=await fetch(`${n}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),200===a.status?await a.json():void 0}),ge(this,"getVerifyUrl",s=>{let n=s||Fr;return Z_.includes(n)||(this.logger.info(`verify url: ${n}, not included in trusted list, assigning default: ${Fr}`),n=Fr),n}),ge(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(L.FIVE_SECONDS),n=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await n.json()}catch(s){this.logger.warn(s)}}),ge(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),ge(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),ge(this,"isValidJwtAttestation",async s=>{const n=await this.getPublicKey();try{if(n)return this.validateAttestation(s,n)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),ge(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),ge(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async n=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),n(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),ge(this,"validateAttestation",(s,n)=>{const o=QE(s,n.publicKey),a={hasExpired:L.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=je(i,this.name),this.abortController=new AbortController,this.isDevEnv=ua(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Qe(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),L.toMiliseconds(e))}}var JI=Object.defineProperty,eh=(t,e,i)=>((t,e,i)=>e in t?JI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);class QI extends Ng{constructor(e,i){super(e,i),this.projectId=e,this.logger=i,eh(this,"context","echo"),eh(this,"registerDeviceToken",async r=>{const{clientId:s,token:n,notificationType:o,enableEncrypted:a=!1}=r,c=`https://echo.walletconnect.com/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:n,always_raw:a})})}),this.logger=je(i,this.context)}}var XI=Object.defineProperty,th=Object.getOwnPropertySymbols,eS=Object.prototype.hasOwnProperty,tS=Object.prototype.propertyIsEnumerable,Mo=(t,e,i)=>e in t?XI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,_r=(t,e)=>{for(var i in e||(e={}))eS.call(e,i)&&Mo(t,i,e[i]);if(th)for(var i of th(e))tS.call(e,i)&&Mo(t,i,e[i]);return t},Ee=(t,e,i)=>Mo(t,"symbol"!=typeof e?e+"":e,i);class iS extends kg{constructor(e,i,r=!0){super(e,i,r),this.core=e,this.logger=i,Ee(this,"context","event-client"),Ee(this,"storagePrefix",Ot),Ee(this,"storageVersion",.1),Ee(this,"events",new Map),Ee(this,"shouldPersist",!1),Ee(this,"init",async()=>{if(!ua())try{const s={eventId:Lc(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:Hl(this.core.relayer.protocol,this.core.relayer.version,Po)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Ee(this,"createEvent",s=>{const{event:n="ERROR",type:o="",properties:{topic:a,trace:c}}=s,u=Lc(),h=this.core.projectId||"",l=Date.now(),f=_r({eventId:u,timestamp:l,props:{event:n,type:o,properties:{topic:a,trace:c}},bundleId:h,domain:this.getAppDomain()},this.setMethods(u));return this.telemetryEnabled&&(this.events.set(u,f),this.shouldPersist=!0),f}),Ee(this,"getEvent",s=>{const{eventId:n,topic:o}=s;if(n)return this.events.get(n);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);return a?_r(_r({},a),this.setMethods(a.eventId)):void 0}),Ee(this,"deleteEvent",s=>{const{eventId:n}=s;this.events.delete(n),this.shouldPersist=!0}),Ee(this,"setEventListeners",()=>{this.core.heartbeat.on(Ti_pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{L.fromMiliseconds(Date.now())-L.fromMiliseconds(s.timestamp)>86400&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Ee(this,"setMethods",s=>({addTrace:n=>this.addTrace(s,n),setError:n=>this.setError(s,n)})),Ee(this,"addTrace",(s,n)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(n),this.events.set(s,o),this.shouldPersist=!0)}),Ee(this,"setError",(s,n)=>{const o=this.events.get(s);o&&(o.props.type=n,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Ee(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Ee(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(n=>{this.events.set(n.eventId,_r(_r({},n),this.setMethods(n.eventId)))})}catch(s){this.logger.warn(s)}}),Ee(this,"submit",async()=>{if(!this.telemetryEnabled||0===this.events.size)return;const s=[];for(const[n,o]of this.events)o.props.type&&s.push(o);if(0!==s.length)try{if((await this.sendEvent(s)).ok)for(const n of s)this.events.delete(n.eventId),this.shouldPersist=!0}catch(n){this.logger.warn(n)}}),Ee(this,"sendEvent",async s=>{const n=this.getAppDomain()?"":"&sp=desktop";return await fetch(`https://pulse.walletconnect.org/batch?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Po}${n}`,{method:"POST",body:JSON.stringify(s)})}),Ee(this,"getAppDomain",()=>Vl().url),this.logger=je(i,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var rS=Object.defineProperty,ih=Object.getOwnPropertySymbols,sS=Object.prototype.hasOwnProperty,nS=Object.prototype.propertyIsEnumerable,qo=(t,e,i)=>e in t?rS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,rh=(t,e)=>{for(var i in e||(e={}))sS.call(e,i)&&qo(t,i,e[i]);if(ih)for(var i of ih(e))nS.call(e,i)&&qo(t,i,e[i]);return t},ce=(t,e,i)=>qo(t,"symbol"!=typeof e?e+"":e,i);class Sa extends Sg{constructor(e){var i;super(e),ce(this,"protocol","wc"),ce(this,"version",2),ce(this,"name",Ws),ce(this,"relayUrl"),ce(this,"projectId"),ce(this,"customStoragePrefix"),ce(this,"events",new rt.EventEmitter),ce(this,"logger"),ce(this,"heartbeat"),ce(this,"relayer"),ce(this,"crypto"),ce(this,"storage"),ce(this,"history"),ce(this,"expirer"),ce(this,"pairing"),ce(this,"verify"),ce(this,"echoClient"),ce(this,"linkModeSupportedApps"),ce(this,"eventClient"),ce(this,"initialized",!1),ce(this,"logChunkController"),ce(this,"on",(a,c)=>this.events.on(a,c)),ce(this,"once",(a,c)=>this.events.once(a,c)),ce(this,"off",(a,c)=>this.events.off(a,c)),ce(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),ce(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:u})=>{if(!a||!c)return;const h={topic:a,message:c,publishedAt:Date.now(),transportType:he.link_mode};this.relayer.onLinkMessageEvent(h,{sessionExists:u})});const r=this.getGlobalCore(e?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Qf,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=Vo({level:"string"==typeof e?.logger&&e.logger?e.logger:I__logger,name:Ws}),{logger:n,chunkLoggerController:o}=_g({opts:s,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=o,null!=(i=this.logChunkController)&&i.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;null!=(a=this.logChunkController)&&a.downloadLogsBlobInBrowser&&(null==(c=this.logChunkController)||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=je(n,this.name),this.heartbeat=new fp,this.crypto=new R8(this,this.logger,e?.keychain),this.history=new zI(this,this.logger),this.expirer=new HI(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new Gp(rh(rh({},S_),e?.storageOptions)),this.relayer=new oI({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new MI(this,this.logger),this.verify=new YI(this,this.logger,this.storage),this.echoClient=new QI(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new iS(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const i=new Sa(e);await i.initialize();const r=await i.crypto.getClientId();return await i.storage.setItem("WALLETCONNECT_CLIENT_ID",r),i}get context(){return Qe(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return null==(e=this.logChunkController)?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(Uu,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(Uu)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const i=`_walletConnectCore_${e}`,r=`${i}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[i]}catch(i){return void console.warn("Failed to get global WalletConnect core",i)}}setGlobalCore(e){var i;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${(null==(i=e.opts)?void 0:i.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&"true"===process.env.DISABLE_GLOBAL_CORE}catch{return!0}}}const oS=Sa,Da="wc@2:client:",Jn_name="client",Jn_logger="error",sh="WALLETCONNECT_DEEPLINK_CHOICE",nh="Proposal expired",Vi=L.SEVEN_DAYS,Oe={wc_sessionPropose:{req:{ttl:L.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:L.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:L.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:L.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:L.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:L.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:L.ONE_DAY,prompt:!1,tag:1104},res:{ttl:L.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:L.ONE_DAY,prompt:!1,tag:1106},res:{ttl:L.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:L.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:L.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:L.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:L.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:L.ONE_DAY,prompt:!1,tag:1112},res:{ttl:L.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:L.ONE_DAY,prompt:!1,tag:1114},res:{ttl:L.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:L.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:L.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:L.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:L.FIVE_MINUTES,prompt:!1,tag:1119}}},Zn={min:L.FIVE_MINUTES,max:L.SEVEN_DAYS},_t_idle="IDLE",_t_active="ACTIVE",hS={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},fS=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],dn="wc@1.5:auth:",Cs=`${dn}:PUB_KEY`;var mS=Object.defineProperty,bS=Object.defineProperties,vS=Object.getOwnPropertyDescriptors,oh=Object.getOwnPropertySymbols,ES=Object.prototype.hasOwnProperty,_S=Object.prototype.propertyIsEnumerable,jo=(t,e,i)=>e in t?mS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,ne=(t,e)=>{for(var i in e||(e={}))ES.call(e,i)&&jo(t,i,e[i]);if(oh)for(var i of oh(e))_S.call(e,i)&&jo(t,i,e[i]);return t},Le=(t,e)=>bS(t,vS(e)),F=(t,e,i)=>jo(t,"symbol"!=typeof e?e+"":e,i);class xS extends jg{constructor(e){super(e),F(this,"name","engine"),F(this,"events",new mh),F(this,"initialized",!1),F(this,"requestQueue",{state:_t_idle,queue:[]}),F(this,"sessionRequestQueue",{state:_t_idle,queue:[]}),F(this,"emittedSessionRequests",new fv({limit:500})),F(this,"requestQueueDelay",L.ONE_SECOND),F(this,"expectedPairingMethodMap",new Map),F(this,"recentlyDeletedMap",new Map),F(this,"recentlyDeletedLimit",200),F(this,"relayMessageCache",[]),F(this,"pendingSessions",new Map),F(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Oe)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},L.toMiliseconds(this.requestQueueDelay)))}),F(this,"connect",async i=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Le(ne({},i),{requiredNamespaces:i.requiredNamespaces||{},optionalNamespaces:i.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=function g3(t,e){var i,r,s,n,o,a;const c=Eu(t),u=Eu(e),h={},l=Object.keys(c).concat(Object.keys(u));for(const f of l)h[f]={chains:xi(null==(i=c[f])?void 0:i.chains,null==(r=u[f])?void 0:r.chains),methods:xi(null==(s=c[f])?void 0:s.methods,null==(n=u[f])?void 0:n.methods),events:xi(null==(o=c[f])?void 0:o.events,null==(a=u[f])?void 0:a.events)};return h}(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:n,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:u}=r;let l,h=s,f=!1;try{if(h){const R=this.client.core.pairing.pairings.get(h);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),f=R.active}}catch(R){throw this.client.logger.error(`connect() -> pairing.get(${h}) failed`),R}if(!h||!f){const{topic:R,uri:B}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});h=R,l=B}if(!h){const{message:R}=M("NO_MATCHING_KEY",`connect() pairing topic: ${h}`);throw new Error(R)}const p=await this.client.core.crypto.generateKeyPair(),d=Oe.wc_sessionPropose.req.ttl||L.FIVE_MINUTES,g=me(d),y=Le(ne(ne({requiredNamespaces:n,optionalNamespaces:o,relays:u??[{protocol:"irn"}],proposer:{publicKey:p,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:h},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:It()}),E=se("session_connect",y.id),{reject:v,resolve:m,done:D}=yi(d,nh),I=({id:R})=>{R===y.id&&(this.client.events.off("proposal_expire",I),this.pendingSessions.delete(y.id),this.events.emit(E,{error:{message:nh,code:0}}))};return this.client.events.on("proposal_expire",I),this.events.once(E,({error:R,session:B})=>{this.client.events.off("proposal_expire",I),R?v(R):B&&m(B)}),await this.sendProposeSession({proposal:y,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:y.id}}}),await this.setProposal(y.id,y),{uri:l,approval:D}}),F(this,"pair",async i=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(i)}catch(r){throw this.client.logger.error("pair() failed"),r}}),F(this,"approve",async i=>{var r,s,n;const o=this.client.core.eventClient.createEvent({properties:{topic:null==(r=i?.id)?void 0:r.toString(),trace:[Xt_session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(w){throw o.setError(br_no_internet_connection),w}try{await this.isValidProposalId(i?.id)}catch(w){throw this.client.logger.error(`approve() -> proposal.get(${i?.id}) failed`),o.setError(br_proposal_not_found),w}try{await this.isValidApprove(i)}catch(w){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(br_session_approve_namespace_validation_failure),w}const{id:a,relayProtocol:c,namespaces:u,sessionProperties:h,scopedProperties:l,sessionConfig:f}=i,p=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:d,proposer:g,requiredNamespaces:y,optionalNamespaces:E}=p;let v=null==(s=this.client.core.eventClient)?void 0:s.getEvent({topic:d});v||(v=null==(n=this.client.core.eventClient)?void 0:n.createEvent({type:Xt_session_approve_started,properties:{topic:d,trace:[Xt_session_approve_started,Xt_session_namespaces_validation_success]}}));const m=await this.client.core.crypto.generateKeyPair(),D=g.publicKey,I=await this.client.core.crypto.generateSharedKey(m,D),R=ne(ne(ne({relay:{protocol:c??"irn"},namespaces:u,controller:{publicKey:m,metadata:this.client.metadata},expiry:me(Vi)},h&&{sessionProperties:h}),l&&{scopedProperties:l}),f&&{sessionConfig:f}),B=he.relay;v.addTrace(Xt_subscribing_session_topic);try{await this.client.core.relayer.subscribe(I,{transportType:B,internal:{skipSubscribe:!0}})}catch(w){throw v.setError(br_subscribe_session_topic_failure),w}v.addTrace(Xt_subscribe_session_topic_success);const C=Le(ne({},R),{topic:I,requiredNamespaces:y,optionalNamespaces:E,pairingTopic:d,acknowledged:!1,self:R.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:m,transportType:he.relay});await this.client.session.set(I,C),v.addTrace(Xt_store_session);try{await this.sendApproveSession({sessionTopic:I,proposal:p,pairingProposalResponse:{relay:{protocol:c??"irn"},responderPublicKey:m},sessionSettleRequest:R,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:a}}}),v.addTrace(Xt_session_approve_publish_success)}catch(w){throw this.client.logger.error(w),this.client.session.delete(I,le("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(I),w}return this.client.core.eventClient.deleteEvent({eventId:v.eventId}),await this.client.core.pairing.updateMetadata({topic:d,metadata:g.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:d}),await this.setExpiry(I,me(Vi)),{topic:I,acknowledged:()=>Promise.resolve(this.client.session.get(I))}}),F(this,"reject",async i=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(i)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=i;let n;try{n=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}n&&await this.sendError({id:r,topic:n,error:s,rpcOpts:Oe.wc_sessionPropose.reject}),await this.deleteProposal(r)}),F(this,"update",async i=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(i)}catch(l){throw this.client.logger.error("update() -> isValidUpdate() failed"),l}const{topic:r,namespaces:s}=i,{done:n,resolve:o,reject:a}=yi(),c=It(),u=ni().toString(),h=this.client.session.get(r).namespaces;return this.events.once(se("session_update",c),({error:l})=>{l?a(l):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:u}).catch(l=>{this.client.logger.error(l),this.client.session.update(r,{namespaces:h}),a(l)}),{acknowledged:n}}),F(this,"extend",async i=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(i)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=i,s=It(),{done:n,resolve:o,reject:a}=yi();return this.events.once(se("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,me(Vi)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:n}}),F(this,"request",async i=>{this.isInitialized();try{await this.isValidRequest(i)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:n,expiry:o=Oe.wc_sessionRequest.req.ttl}=i,a=this.client.session.get(n);a?.transportType===he.relay&&await this.confirmOnlineStateOrThrow();const c=It(),u=ni().toString(),{done:h,resolve:l,reject:f}=yi(o,"Request expired. Please try again.");this.events.once(se("session_request",c),({error:y,result:E})=>{y?f(y):l(E)});const p="wc_sessionRequest",d=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(d)return await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:n,method:p,params:{request:Le(ne({},s),{expiryTimestamp:me(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:d}).catch(y=>f(y)),this.client.events.emit("session_request_sent",{topic:n,request:s,chainId:r,id:c}),await h();const g={request:Le(ne({},s),{expiryTimestamp:me(o)}),chainId:r};return await Promise.all([new Promise(async y=>{await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:n,method:p,params:g,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,g)}).catch(E=>f(E)),this.client.events.emit("session_request_sent",{topic:n,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var E;if(null==(E=a.sessionConfig)||!E.disableDeepLink){const v=await async function av(t,e){let i="";try{if(rr()&&(i=localStorage.getItem(e),i))return i;i=await t.getItem(e)}catch(r){console.error(r)}return i}(this.client.core.storage,sh);await sv({id:c,topic:n,wcDeepLink:v})}y()}),h()]).then(y=>y[2])}),F(this,"respond",async i=>{this.isInitialized(),await this.isValidRespond(i);const{topic:r,response:s}=i,{id:n}=s,o=this.client.session.get(r);o.transportType===he.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);St(s)?await this.sendResult({id:n,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):ct(s)&&await this.sendError({id:n,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(i)}),F(this,"ping",async i=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(i)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=i;if(this.client.session.keys.includes(r)){const s=It(),n=ni().toString(),{done:o,resolve:a,reject:c}=yi();this.events.once(se("session_ping",s),({error:u})=>{u?c(u):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:n}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),F(this,"emit",async i=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(i);const{topic:r,event:s,chainId:n}=i,o=ni().toString(),a=It();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:n},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),F(this,"disconnect",async i=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(i);const{topic:r}=i;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:le("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else{if(!this.client.core.pairing.pairings.keys.includes(r)){const{message:s}=M("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}await this.client.core.pairing.disconnect({topic:r})}}),F(this,"find",i=>(this.isInitialized(),this.client.session.getAll().filter(r=>function m3(t,e){const{requiredNamespaces:i}=e,r=Object.keys(t.namespaces),s=Object.keys(i);let n=!0;return!!bi(s,r)&&(r.forEach(o=>{const{accounts:a,methods:c,events:u}=t.namespaces[o],h=or(a),l=i[o];bi(ca(o,l),h)&&bi(l.methods,c)&&bi(l.events,u)||(n=!1)}),n)}(r,i)))),F(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),F(this,"authenticate",async(i,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(i);const n=r&&this.client.core.linkModeSupportedApps.includes(r)&&(null==(s=this.client.metadata.redirect)?void 0:s.linkMode),o=n?he.link_mode:he.relay;o===he.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:u,domain:h,nonce:l,type:f,exp:p,nbf:d,methods:g=[],expiry:y}=i,E=[...i.resources||[]],{topic:v,uri:m}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:v,uri:m}});const D=await this.client.core.crypto.generateKeyPair(),I=Os(D);if(await Promise.all([this.client.auth.authKeys.set(Cs,{responseTopic:I,publicKey:D}),this.client.auth.pairingTopics.set(I,{topic:I,pairingTopic:v})]),await this.client.core.relayer.subscribe(I,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${v}`),g.length>0){const{namespace:A}=As(a[0]);let U=x2(A,"request",g);$s(E)&&(U=S2(U,E.pop())),E.push(U)}const R=y&&y>Oe.wc_sessionAuthenticate.req.ttl?y:Oe.wc_sessionAuthenticate.req.ttl,B={authPayload:{type:f??"caip122",chains:a,statement:c,aud:u,domain:h,version:"1",nonce:l,iat:(new Date).toISOString(),exp:p,nbf:d,resources:E},requester:{publicKey:D,metadata:this.client.metadata},expiryTimestamp:me(R)},w={requiredNamespaces:{},optionalNamespaces:{eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},relays:[{protocol:"irn"}],pairingTopic:v,proposer:{publicKey:D,metadata:this.client.metadata},expiryTimestamp:me(Oe.wc_sessionPropose.req.ttl),id:It()},{done:O,resolve:_,reject:$}=yi(R,"Request expired"),P=It(),k=se("session_connect",w.id),x=se("session_request",P),b=async({error:A,session:U})=>{this.events.off(x,S),A?$(A):U&&_({session:U})},S=async A=>{var U,N,j;if(await this.deletePendingAuthRequest(P,{message:"fulfilled",code:0}),A.error){const J=le("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return A.error.code===J.code?void 0:(this.events.off(k,b),$(A.error.message))}await this.deleteProposal(w.id),this.events.off(k,b);const{cacaos:z,responder:K}=A.result,V=[],H=[];for(const J of z){await Jc({cacao:J,projectId:this.client.core.projectId})||(this.client.logger.error(J,"Signature verification failed"),$(le("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:fe}=J,Ie=$s(fe.resources),ui=[Eo(fe.iss)],ss=js(fe.iss);if(Ie){const Fi=Zc(Ie),gn=Qc(Ie);V.push(...Fi),ui.push(...gn)}for(const Fi of ui)H.push(`${Fi}:${ss}`)}const re=await this.client.core.crypto.generateSharedKey(D,K.publicKey);let ie;V.length>0&&(ie={topic:re,acknowledged:!0,self:{publicKey:D,metadata:this.client.metadata},peer:K,controller:K.publicKey,expiry:me(Vi),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:v,namespaces:_u([...new Set(V)],[...new Set(H)]),transportType:o},await this.client.core.relayer.subscribe(re,{transportType:o}),await this.client.session.set(re,ie),v&&await this.client.core.pairing.updateMetadata({topic:v,metadata:K.metadata}),ie=this.client.session.get(re)),null!=(U=this.client.metadata.redirect)&&U.linkMode&&null!=(N=K.metadata.redirect)&&N.linkMode&&null!=(j=K.metadata.redirect)&&j.universal&&r&&(this.client.core.addLinkModeSupportedApp(K.metadata.redirect.universal),this.client.session.update(re,{transportType:he.link_mode})),_({auths:z,session:ie})};let T;this.events.once(k,b),this.events.once(x,S);try{if(n){const A=Lt("wc_sessionAuthenticate",B,P);this.client.core.history.set(v,A);const U=await this.client.core.crypto.encode("",A,{type:2,encoding:si});T=Es(r,v,U)}else await Promise.all([this.sendRequest({topic:v,method:"wc_sessionAuthenticate",params:B,expiry:i.expiry,throwOnFailedPublish:!0,clientRpcId:P}),this.sendRequest({topic:v,method:"wc_sessionPropose",params:w,expiry:Oe.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:w.id})])}catch(A){throw this.events.off(k,b),this.events.off(x,S),A}return await this.setProposal(w.id,w),await this.setAuthRequest(P,{request:Le(ne({},B),{verifyContext:{}}),pairingTopic:v,transportType:o}),{uri:T??m,response:O}}),F(this,"approveSessionAuthenticate",async i=>{const{id:r,auths:s}=i,n=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[di_authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw n.setError(vr_no_internet_connection),y}const o=this.getPendingAuthRequest(r);if(!o)throw n.setError(vr_authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||he.relay;a===he.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),h=Os(c),l={type:1,receiverPublicKey:c,senderPublicKey:u},f=[],p=[];for(const y of s){if(!await Jc({cacao:y,projectId:this.client.core.projectId})){n.setError(vr_invalid_cacao);const I=le("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:h,error:I,encodeOpts:l}),new Error(I.message)}n.addTrace(di_cacaos_verified);const{p:E}=y,v=$s(E.resources),m=[Eo(E.iss)],D=js(E.iss);if(v){const I=Zc(v),R=Qc(v);f.push(...I),m.push(...R)}for(const I of m)p.push(`${I}:${D}`)}const d=await this.client.core.crypto.generateSharedKey(u,c);let g;if(n.addTrace(di_create_authenticated_session_topic),f?.length>0){g={topic:d,acknowledged:!0,self:{publicKey:u,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:me(Vi),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:_u([...new Set(f)],[...new Set(p)]),transportType:a},n.addTrace(di_subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(d,{transportType:a})}catch(y){throw n.setError(vr_subscribe_authenticated_session_topic_failure),y}n.addTrace(di_subscribe_authenticated_session_topic_success),await this.client.session.set(d,g),n.addTrace(di_store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}n.addTrace(di_publishing_authenticated_session_approve);try{await this.sendResult({topic:h,id:r,result:{cacaos:s,responder:{publicKey:u,metadata:this.client.metadata}},encodeOpts:l,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw n.setError(vr_authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:n.eventId}),{session:g}}),F(this,"rejectSessionAuthenticate",async i=>{this.isInitialized();const{id:r,reason:s}=i,n=this.getPendingAuthRequest(r);if(!n)throw new Error(`Could not find pending auth request with id ${r}`);n.transportType===he.relay&&await this.confirmOnlineStateOrThrow();const o=n.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Os(o),u={type:1,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:u,rpcOpts:Oe.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(n.requester.metadata,n.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),F(this,"formatAuthMessage",i=>{this.isInitialized();const{request:r,iss:s}=i;return hf(r,s)}),F(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(0!==this.relayMessageCache.length)for(;this.relayMessageCache.length>0;)try{const i=this.relayMessageCache.shift();i&&await this.onRelayMessage(i)}catch(i){this.client.logger.error(i)}},50)}),F(this,"cleanupDuplicatePairings",async i=>{if(i.pairingTopic)try{const r=this.client.core.pairing.pairings.get(i.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(n=>{var o,a;return(null==(o=n.peerMetadata)?void 0:o.url)&&(null==(a=n.peerMetadata)?void 0:a.url)===i.peer.metadata.url&&n.topic&&n.topic!==r.topic});if(0===s.length)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(n=>this.client.core.pairing.disconnect({topic:n.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),F(this,"deleteSession",async i=>{var r;const{topic:s,expirerHasDeleted:n=!1,emitEvent:o=!0,id:a=0}=i,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,le("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),n||this.client.core.expirer.del(s),this.client.core.storage.removeItem(sh).catch(u=>this.client.logger.warn(u)),this.getPendingSessionRequests().forEach(u=>{u.topic===s&&this.deletePendingSessionRequest(u.id,le("USER_DISCONNECTED"))}),s===(null==(r=this.sessionRequestQueue.queue[0])?void 0:r.topic)&&(this.sessionRequestQueue.state=_t_idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),F(this,"deleteProposal",async(i,r)=>{if(r)try{const s=this.client.proposal.get(i);this.client.core.eventClient.getEvent({topic:s.pairingTopic})?.setError(br_proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(i,le("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(i)]),this.addToRecentlyDeleted(i,"proposal")}),F(this,"deletePendingSessionRequest",async(i,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(i,r),s?Promise.resolve():this.client.core.expirer.del(i)]),this.addToRecentlyDeleted(i,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(n=>n.id!==i),s&&(this.sessionRequestQueue.state=_t_idle,this.client.events.emit("session_request_expire",{id:i}))}),F(this,"deletePendingAuthRequest",async(i,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(i,r),s?Promise.resolve():this.client.core.expirer.del(i)])}),F(this,"setExpiry",async(i,r)=>{this.client.session.keys.includes(i)&&(this.client.core.expirer.set(i,r),await this.client.session.update(i,{expiry:r}))}),F(this,"setProposal",async(i,r)=>{this.client.core.expirer.set(i,me(Oe.wc_sessionPropose.req.ttl)),await this.client.proposal.set(i,r)}),F(this,"setAuthRequest",async(i,r)=>{const{request:s,pairingTopic:n,transportType:o=he.relay}=r;this.client.core.expirer.set(i,s.expiryTimestamp),await this.client.auth.requests.set(i,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:i,pairingTopic:n,verifyContext:s.verifyContext,transportType:o})}),F(this,"setPendingSessionRequest",async i=>{const{id:r,topic:s,params:n,verifyContext:o}=i,a=n.request.expiryTimestamp||me(Oe.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:n,verifyContext:o})}),F(this,"sendRequest",async i=>{const{topic:r,method:s,params:n,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:u,appLink:h,tvf:l,publishOpts:f={}}=i,p=Lt(s,n,c);let d;const g=!!h;try{const v=g?si:Ye;d=await this.client.core.crypto.encode(r,p,{encoding:v})}catch(v){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),v}let y;if(fS.includes(s)){const v=at(JSON.stringify(p)),m=at(d);y=await this.client.core.verify.register({id:m,decryptedId:v})}const E=ne(ne({},Oe[s].req),f);if(E.attestation=y,o&&(E.ttl=o),a&&(E.id=a),this.client.core.history.set(r,p),g){const v=Es(h,r,d);await __webpack_require__.g.Linking.openURL(v,this.client.name)}else E.tvf=Le(ne({},l),{correlationId:p.id}),u?(E.internal=Le(ne({},E.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,d,E)):this.client.core.relayer.publish(r,d,E).catch(v=>this.client.logger.error(v));return p.id}),F(this,"sendProposeSession",async i=>{const{proposal:r,publishOpts:s}=i,n=Lt("wc_sessionPropose",r,r.id);this.client.core.history.set(r.pairingTopic,n);const o=await this.client.core.crypto.encode(r.pairingTopic,n,{encoding:Ye}),a=at(JSON.stringify(n)),c=at(o),u=await this.client.core.verify.register({id:c,decryptedId:a});await this.client.core.relayer.publishCustom({payload:{pairingTopic:r.pairingTopic,sessionProposal:o},opts:Le(ne({},s),{publishMethod:"wc_proposeSession",attestation:u})})}),F(this,"sendApproveSession",async i=>{const{sessionTopic:r,pairingProposalResponse:s,proposal:n,sessionSettleRequest:o,publishOpts:a}=i,c=Hr(n.id,s),u=await this.client.core.crypto.encode(n.pairingTopic,c,{encoding:Ye}),h=Lt("wc_sessionSettle",o,a?.id),l=await this.client.core.crypto.encode(r,h,{encoding:Ye});this.client.core.history.set(r,h),await this.client.core.relayer.publishCustom({payload:{sessionTopic:r,pairingTopic:n.pairingTopic,sessionProposalResponse:u,sessionSettlementRequest:l},opts:Le(ne({},a),{publishMethod:"wc_approveSession"})})}),F(this,"sendResult",async i=>{const{id:r,topic:s,result:n,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=i,u=Hr(r,n);let h;const l=c&&typeof(null==__webpack_require__.g?void 0:__webpack_require__.g.Linking)<"u";try{const d=l?si:Ye;h=await this.client.core.crypto.encode(s,u,Le(ne({},a||{}),{encoding:d}))}catch(d){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),d}let f,p;try{f=await this.client.core.history.get(s,r);const d=f.request;try{p=this.getTVFParams(r,d.params,n)}catch(g){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${g?.message}`)}}catch(d){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),d}if(l){const d=Es(c,s,h);await __webpack_require__.g.Linking.openURL(d,this.client.name)}else{const d=f.request.method,g=Oe[d].res;g.tvf=Le(ne({},p),{correlationId:r}),o?(g.internal=Le(ne({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,h,g)):this.client.core.relayer.publish(s,h,g).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(u)}),F(this,"sendError",async i=>{const{id:r,topic:s,error:n,encodeOpts:o,rpcOpts:a,appLink:c}=i,u=hn(r,n);let h;const l=c&&typeof(null==__webpack_require__.g?void 0:__webpack_require__.g.Linking)<"u";try{const p=l?si:Ye;h=await this.client.core.crypto.encode(s,u,Le(ne({},o||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),p}let f;try{f=await this.client.core.history.get(s,r)}catch(p){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),p}if(l){const p=Es(c,s,h);await __webpack_require__.g.Linking.openURL(p,this.client.name)}else{const p=f.request.method,d=a||Oe[p].res;this.client.core.relayer.publish(s,h,d)}await this.client.core.history.resolve(u)}),F(this,"cleanup",async()=>{const i=[],r=[];this.client.session.getAll().forEach(s=>{let n=!1;ei(s.expiry)&&(n=!0),this.client.core.crypto.keychain.has(s.topic)||(n=!0),n&&i.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{ei(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...i.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),F(this,"onProviderMessageEvent",async i=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(i):await this.onRelayMessage(i)}),F(this,"onRelayEventRequest",async i=>{this.requestQueue.queue.push(i),await this.processRequestsQueue()}),F(this,"processRequestsQueue",async()=>{if(this.requestQueue.state!==_t_active){for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=_t_active;const i=this.requestQueue.queue.shift();if(i)try{await this.processRequest(i)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=_t_idle}else this.client.logger.info("Request queue already active, skipping...")}),F(this,"processRequest",async i=>{const{topic:r,payload:s,attestation:n,transportType:o,encryptedId:a}=i,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:n,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:n,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:n,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),F(this,"onRelayEventResponse",async i=>{const{topic:r,payload:s,transportType:n}=i,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,n);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),F(this,"onRelayEventUnknownPayload",i=>{const{topic:r}=i,{message:s}=M("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),F(this,"shouldIgnorePairingRequest",i=>{const{topic:r,requestMethod:s}=i,n=this.expectedPairingMethodMap.get(r);return!(!n||n.includes(s))&&!!(n.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),F(this,"onSessionProposeRequest",async i=>{const{topic:r,payload:s,attestation:n,encryptedId:o}=i,{params:a,id:c}=s;try{const u=this.client.core.eventClient.getEvent({topic:r});0===this.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),u?.setError(Nt_proposal_listener_not_found)),this.isValidConnect(ne({},s.params));const h=a.expiryTimestamp||me(Oe.wc_sessionPropose.req.ttl),l=ne({id:c,pairingTopic:r,expiryTimestamp:h,attestation:n,encryptedId:o},a);await this.setProposal(c,l);const f=await this.getVerifyContext({attestationId:n,hash:at(JSON.stringify(s)),encryptedId:o,metadata:l.proposer.metadata});u?.addTrace(xt_emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:l,verifyContext:f})}catch(u){await this.sendError({id:c,topic:r,error:u,rpcOpts:Oe.wc_sessionPropose.autoReject}),this.client.logger.error(u)}}),F(this,"onSessionProposeResponse",async(i,r,s)=>{const{id:n}=r;if(St(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(n);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const u=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u});const h=await this.client.core.crypto.generateSharedKey(c,u);this.pendingSessions.set(n,{sessionTopic:h,pairingTopic:i,proposalId:n,publicKey:c});const l=await this.client.core.relayer.subscribe(h,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:l}),await this.client.core.pairing.activate({topic:i})}else if(ct(r)){await this.deleteProposal(n);const o=se("session_connect",n);if(0===this.events.listenerCount(o))throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),F(this,"onSessionSettleRequest",async(i,r)=>{const{id:s,params:n}=r;try{this.isValidSessionSettleRequest(n);const{relay:o,controller:a,expiry:c,namespaces:u,sessionProperties:h,scopedProperties:l,sessionConfig:f}=r.params,p=[...this.pendingSessions.values()].find(y=>y.sessionTopic===i);if(!p)return this.client.logger.error(`Pending session not found for topic ${i}`);const d=this.client.proposal.get(p.proposalId),g=Le(ne(ne(ne({topic:i,relay:o,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:p.pairingTopic,requiredNamespaces:d.requiredNamespaces,optionalNamespaces:d.optionalNamespaces,controller:a.publicKey,self:{publicKey:p.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},h&&{sessionProperties:h}),l&&{scopedProperties:l}),f&&{sessionConfig:f}),{transportType:he.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:p.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(se("session_connect",p.proposalId),{session:g}),this.pendingSessions.delete(p.proposalId),this.deleteProposal(p.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:i,result:!0})}catch(o){await this.sendError({id:s,topic:i,error:o}),this.client.logger.error(o)}}),F(this,"onSessionSettleResponse",async(i,r)=>{const{id:s}=r;St(r)?(await this.client.session.update(i,{acknowledged:!0}),this.events.emit(se("session_approve",s),{})):ct(r)&&(await this.client.session.delete(i,le("USER_DISCONNECTED")),this.events.emit(se("session_approve",s),{error:r.error}))}),F(this,"onSessionUpdateRequest",async(i,r)=>{const{params:s,id:n}=r;try{const o=`${i}_session_update`,a=wr.get(o);if(a&&this.isRequestOutOfSync(a,n))return this.client.logger.warn(`Discarding out of sync request - ${n}`),void this.sendError({id:n,topic:i,error:le("INVALID_UPDATE_REQUEST")});this.isValidUpdate(ne({topic:i},s));try{wr.set(o,n),await this.client.session.update(i,{namespaces:s.namespaces}),await this.sendResult({id:n,topic:i,result:!0})}catch(c){throw wr.delete(o),c}this.client.events.emit("session_update",{id:n,topic:i,params:s})}catch(o){await this.sendError({id:n,topic:i,error:o}),this.client.logger.error(o)}}),F(this,"isRequestOutOfSync",(i,r)=>r.toString().slice(0,-3)<i.toString().slice(0,-3)),F(this,"onSessionUpdateResponse",(i,r)=>{const{id:s}=r,n=se("session_update",s);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);St(r)?this.events.emit(se("session_update",s),{}):ct(r)&&this.events.emit(se("session_update",s),{error:r.error})}),F(this,"onSessionExtendRequest",async(i,r)=>{const{id:s}=r;try{this.isValidExtend({topic:i}),await this.setExpiry(i,me(Vi)),await this.sendResult({id:s,topic:i,result:!0}),this.client.events.emit("session_extend",{id:s,topic:i})}catch(n){await this.sendError({id:s,topic:i,error:n}),this.client.logger.error(n)}}),F(this,"onSessionExtendResponse",(i,r)=>{const{id:s}=r,n=se("session_extend",s);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);St(r)?this.events.emit(se("session_extend",s),{}):ct(r)&&this.events.emit(se("session_extend",s),{error:r.error})}),F(this,"onSessionPingRequest",async(i,r)=>{const{id:s}=r;try{this.isValidPing({topic:i}),await this.sendResult({id:s,topic:i,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:i})}catch(n){await this.sendError({id:s,topic:i,error:n}),this.client.logger.error(n)}}),F(this,"onSessionPingResponse",(i,r)=>{const{id:s}=r,n=se("session_ping",s);setTimeout(()=>{if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners 2176`);St(r)?this.events.emit(se("session_ping",s),{}):ct(r)&&this.events.emit(se("session_ping",s),{error:r.error})},500)}),F(this,"onSessionDeleteRequest",async(i,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:i,reason:r.params}),await Promise.all([new Promise(n=>{this.client.core.relayer.once(de_publish,async()=>{n(await this.deleteSession({topic:i,id:s}))})}),this.sendResult({id:s,topic:i,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:i,error:le("USER_DISCONNECTED")})]).catch(n=>this.client.logger.error(n))}catch(n){this.client.logger.error(n)}}),F(this,"onSessionRequest",async i=>{var r,s,n;const{topic:o,payload:a,attestation:c,encryptedId:u,transportType:h}=i,{id:l,params:f}=a;try{await this.isValidRequest(ne({topic:o},f));const p=this.client.session.get(o),g={id:l,topic:o,params:f,verifyContext:await this.getVerifyContext({attestationId:c,hash:at(JSON.stringify(Lt("wc_sessionRequest",f,l))),encryptedId:u,metadata:p.peer.metadata,transportType:h})};await this.setPendingSessionRequest(g),h===he.link_mode&&null!=(r=p.peer.metadata.redirect)&&r.universal&&this.client.core.addLinkModeSupportedApp(null==(s=p.peer.metadata.redirect)?void 0:s.universal),null!=(n=this.client.signConfig)&&n.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(p){await this.sendError({id:l,topic:o,error:p}),this.client.logger.error(p)}}),F(this,"onSessionRequestResponse",(i,r)=>{const{id:s}=r,n=se("session_request",s);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);St(r)?this.events.emit(se("session_request",s),{result:r.result}):ct(r)&&this.events.emit(se("session_request",s),{error:r.error})}),F(this,"onSessionEventRequest",async(i,r)=>{const{id:s,params:n}=r;try{const o=`${i}_session_event_${n.event.name}`,a=wr.get(o);if(a&&this.isRequestOutOfSync(a,s))return void this.client.logger.info(`Discarding out of sync request - ${s}`);this.isValidEmit(ne({topic:i},n)),this.client.events.emit("session_event",{id:s,topic:i,params:n}),wr.set(o,s)}catch(o){await this.sendError({id:s,topic:i,error:o}),this.client.logger.error(o)}}),F(this,"onSessionAuthenticateResponse",(i,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:i,payload:r}),St(r)?this.events.emit(se("session_request",s),{result:r.result}):ct(r)&&this.events.emit(se("session_request",s),{error:r.error})}),F(this,"onSessionAuthenticateRequest",async i=>{var r;const{topic:s,payload:n,attestation:o,encryptedId:a,transportType:c}=i;try{const{requester:u,authPayload:h,expiryTimestamp:l}=n.params,f=await this.getVerifyContext({attestationId:o,hash:at(JSON.stringify(n)),encryptedId:a,metadata:u.metadata,transportType:c}),p={requester:u,pairingTopic:s,id:n.id,authPayload:h,verifyContext:f,expiryTimestamp:l};await this.setAuthRequest(n.id,{request:p,pairingTopic:s,transportType:c}),c===he.link_mode&&null!=(r=u.metadata.redirect)&&r.universal&&this.client.core.addLinkModeSupportedApp(u.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:n.params,id:n.id,verifyContext:f})}catch(u){this.client.logger.error(u);const h=n.params.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),f=this.getAppLinkIfEnabled(n.params.requester.metadata,c),p={type:1,receiverPublicKey:h,senderPublicKey:l};await this.sendError({id:n.id,topic:s,error:u,encodeOpts:p,rpcOpts:Oe.wc_sessionAuthenticate.autoReject,appLink:f})}}),F(this,"addSessionRequestToSessionRequestQueue",i=>{this.sessionRequestQueue.queue.push(i)}),F(this,"cleanupAfterResponse",i=>{this.deletePendingSessionRequest(i.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=_t_idle,this.processSessionRequestQueue()},L.toMiliseconds(this.requestQueueDelay))}),F(this,"cleanupPendingSentRequestsForTopic",({topic:i,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(n=>n.topic===i&&"wc_sessionRequest"===n.request.method).forEach(n=>{const a=se("session_request",n.request.id);if(0===this.events.listenerCount(a))throw new Error(`emitting ${a} without any listeners`);this.events.emit(se("session_request",n.request.id),{error:r})})}),F(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===_t_active)return void this.client.logger.info("session request queue is already active.");const i=this.sessionRequestQueue.queue[0];if(i)try{this.emitSessionRequest(i)}catch(r){this.client.logger.error(r)}else this.client.logger.info("session request queue is empty.")}),F(this,"emitSessionRequest",i=>{this.emittedSessionRequests.has(i.id)?this.client.logger.warn({id:i.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${i.id}`):(this.sessionRequestQueue.state=_t_active,this.emittedSessionRequests.add(i.id),this.client.events.emit("session_request",i))}),F(this,"onPairingCreated",i=>{if(i.methods&&this.expectedPairingMethodMap.set(i.topic,i.methods),i.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===i.topic);r&&this.onSessionProposeRequest({topic:i.topic,payload:Lt("wc_sessionPropose",Le(ne({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),F(this,"isValidConnect",async i=>{if(!He(i)){const{message:u}=M("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(i)}`);throw new Error(u)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:n,sessionProperties:o,scopedProperties:a,relays:c}=i;if(ve(r)||await this.isValidPairingTopic(r),!function T3(t,e){let i=!1;return e&&!t?i=!0:t&&Qi(t)&&t.length&&t.forEach(r=>{i=jf(r)}),i}(c,!0)){const{message:u}=M("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(u)}if(!ve(s)&&0!==Vr(s)){const u="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(u):this.client.logger.warn(u),this.validateNamespaces(s,"requiredNamespaces")}if(!ve(n)&&0!==Vr(n)&&this.validateNamespaces(n,"optionalNamespaces"),ve(o)||this.validateSessionProps(o,"sessionProperties"),!ve(a)){this.validateSessionProps(a,"scopedProperties");const u=Object.keys(s||{}).concat(Object.keys(n||{}));if(!Object.keys(a).every(h=>u.includes(h.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(u)}`)}}),F(this,"validateNamespaces",(i,r)=>{const s=function O3(t,e,i){let r=null;if(t&&Vr(t)){const s=qf(t,e);s&&(r=s);const n=S3(t,e,i);n&&(r=n)}else r=M("MISSING_OR_INVALID",`${e}, ${i} should be an object with data`);return r}(i,"connect()",r);if(s)throw new Error(s.message)}),F(this,"isValidApprove",async i=>{if(!He(i))throw new Error(M("MISSING_OR_INVALID",`approve() params: ${i}`).message);const{id:r,namespaces:s,relayProtocol:n,sessionProperties:o,scopedProperties:a}=i;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),u=Vn(s,"approve()");if(u)throw new Error(u.message);const h=Su(c.requiredNamespaces,s,"approve()");if(h)throw new Error(h.message);if(!ye(n,!0)){const{message:l}=M("MISSING_OR_INVALID",`approve() relayProtocol: ${n}`);throw new Error(l)}if(ve(o)||this.validateSessionProps(o,"sessionProperties"),!ve(a)){this.validateSessionProps(a,"scopedProperties");const l=new Set(Object.keys(s));if(!Object.keys(a).every(f=>l.has(f.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(l).join(", ")}`)}}),F(this,"isValidReject",async i=>{if(!He(i)){const{message:n}=M("MISSING_OR_INVALID",`reject() params: ${i}`);throw new Error(n)}const{id:r,reason:s}=i;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!function P3(t){return!!(t&&"object"==typeof t&&t.code&&_a(t.code,!1)&&t.message&&ye(t.message,!1))}(s)){const{message:n}=M("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(n)}}),F(this,"isValidSessionSettleRequest",i=>{if(!He(i)){const{message:u}=M("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${i}`);throw new Error(u)}const{relay:r,controller:s,namespaces:n,expiry:o}=i;if(!jf(r)){const{message:u}=M("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=function x3(t,e){let i=null;return ye(t?.publicKey,!1)||(i=M("MISSING_OR_INVALID",`${e} controller public key should be a string`)),i}(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Vn(n,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(ei(o)){const{message:u}=M("EXPIRED","onSessionSettleRequest()");throw new Error(u)}}),F(this,"isValidUpdate",async i=>{if(!He(i)){const{message:c}=M("MISSING_OR_INVALID",`update() params: ${i}`);throw new Error(c)}const{topic:r,namespaces:s}=i;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const n=this.client.session.get(r),o=Vn(s,"update()");if(o)throw new Error(o.message);const a=Su(n.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),F(this,"isValidExtend",async i=>{if(!He(i)){const{message:s}=M("MISSING_OR_INVALID",`extend() params: ${i}`);throw new Error(s)}const{topic:r}=i;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),F(this,"isValidRequest",async i=>{if(!He(i)){const{message:c}=M("MISSING_OR_INVALID",`request() params: ${i}`);throw new Error(c)}const{topic:r,request:s,chainId:n,expiry:o}=i;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!Iu(a,n)){const{message:c}=M("MISSING_OR_INVALID",`request() chainId: ${n}`);throw new Error(c)}if(!function R3(t){return!(ve(t)||!ye(t.method,!1))}(s)){const{message:c}=M("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!B3(a,n,s.method)){const{message:c}=M("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!function M3(t,e){return _a(t,!1)&&t<=e.max&&t>=e.min}(o,Zn)){const{message:c}=M("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${Zn.min} and ${Zn.max}`);throw new Error(c)}}),F(this,"isValidRespond",async i=>{var r;if(!He(i)){const{message:o}=M("MISSING_OR_INVALID",`respond() params: ${i}`);throw new Error(o)}const{topic:s,response:n}=i;try{await this.isValidSessionTopic(s)}catch(o){throw null!=(r=i?.response)&&r.id&&this.cleanupAfterResponse(i),o}if(!function F3(t){return!(ve(t)||ve(t.result)&&ve(t.error)||!_a(t.id,!1)||!ye(t.jsonrpc,!1))}(n)){const{message:o}=M("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(n)}`);throw new Error(o)}}),F(this,"isValidPing",async i=>{if(!He(i)){const{message:s}=M("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(s)}const{topic:r}=i;await this.isValidSessionOrPairingTopic(r)}),F(this,"isValidEmit",async i=>{if(!He(i)){const{message:a}=M("MISSING_OR_INVALID",`emit() params: ${i}`);throw new Error(a)}const{topic:r,event:s,chainId:n}=i;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!Iu(o,n)){const{message:a}=M("MISSING_OR_INVALID",`emit() chainId: ${n}`);throw new Error(a)}if(!function U3(t){return!(ve(t)||!ye(t.name,!1))}(s)){const{message:a}=M("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!N3(o,n,s.name)){const{message:a}=M("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),F(this,"isValidDisconnect",async i=>{if(!He(i)){const{message:s}=M("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(s)}const{topic:r}=i;await this.isValidSessionOrPairingTopic(r)}),F(this,"isValidAuthenticate",i=>{const{chains:r,uri:s,domain:n,nonce:o}=i;if(!Array.isArray(r)||0===r.length)throw new Error("chains is required and must be a non-empty array");if(!ye(s,!1))throw new Error("uri is required parameter");if(!ye(n,!1))throw new Error("domain is required parameter");if(!ye(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>As(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=As(r[0]);if("eip155"!==a)throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),F(this,"getVerifyContext",async i=>{const{attestationId:r,hash:s,encryptedId:n,metadata:o,transportType:a}=i,c={verified:{verifyUrl:o.verifyUrl||Fr,validation:"UNKNOWN",origin:o.url||""}};try{if(a===he.link_mode){const h=this.getAppLinkIfEnabled(o,a);return c.verified.validation=h&&new URL(h).origin===new URL(o.url).origin?"VALID":"INVALID",c}const u=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:n,verifyUrl:o.verifyUrl});u&&(c.verified.origin=u.origin,c.verified.isScam=u.isScam,c.verified.validation=u.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(u){this.client.logger.warn(u)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),F(this,"validateSessionProps",(i,r)=>{Object.values(i).forEach((s,n)=>{if(null==s){const{message:o}=M("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(i)[n]}`);throw new Error(o)}})}),F(this,"getPendingAuthRequest",i=>{const r=this.client.auth.requests.get(i);return"object"==typeof r?r:void 0}),F(this,"addToRecentlyDeleted",(i,r)=>{if(this.recentlyDeletedMap.set(i,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const n=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=n)break;this.recentlyDeletedMap.delete(o)}}}),F(this,"checkRecentlyDeleted",i=>{const r=this.recentlyDeletedMap.get(i);if(r){const{message:s}=M("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${i}`);throw new Error(s)}}),F(this,"isLinkModeEnabled",(i,r)=>{var s,n,o,a,c,u,h,l,f;return!(!i||r!==he.link_mode)&&(!0===(null==(n=null==(s=this.client.metadata)?void 0:s.redirect)?void 0:n.linkMode)&&void 0!==(null==(a=null==(o=this.client.metadata)?void 0:o.redirect)?void 0:a.universal)&&""!==(null==(u=null==(c=this.client.metadata)?void 0:c.redirect)?void 0:u.universal)&&void 0!==(null==(h=i?.redirect)?void 0:h.universal)&&""!==(null==(l=i?.redirect)?void 0:l.universal)&&!0===(null==(f=i?.redirect)?void 0:f.linkMode)&&this.client.core.linkModeSupportedApps.includes(i.redirect.universal)&&typeof(null==__webpack_require__.g?void 0:__webpack_require__.g.Linking)<"u")}),F(this,"getAppLinkIfEnabled",(i,r)=>{var s;return this.isLinkModeEnabled(i,r)?null==(s=i?.redirect)?void 0:s.universal:void 0}),F(this,"handleLinkModeMessage",({url:i})=>{if(!i||!i.includes("wc_ev")||!i.includes("topic"))return;const r=kc(i,"topic")||"",s=decodeURIComponent(kc(i,"wc_ev")||""),n=this.client.session.keys.includes(r);n&&this.client.session.update(r,{transportType:he.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:n})}),F(this,"registerLinkModeListeners",async()=>{var i;if(ua()||ci()&&null!=(i=this.client.metadata.redirect)&&i.linkMode){const r=null==__webpack_require__.g?void 0:__webpack_require__.g.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),F(this,"getTVFParams",(i,r,s)=>{var n,o,a;if(null==(n=r.request)||!n.method)return{};const c={correlationId:i,rpcMethods:[r.request.method],chainId:r.chainId};try{const u=this.extractTxHashesFromResult(r.request,s);c.txHashes=u,c.contractAddresses=this.isValidContractData(r.request.params)?[null==(a=null==(o=r.request.params)?void 0:o[0])?void 0:a.to]:[]}catch(u){this.client.logger.warn("Error getting TVF params",u)}return c}),F(this,"isValidContractData",i=>{var r;if(!i)return!1;try{const s=i?.data||(null==(r=i?.[0])?void 0:r.data);if(!s.startsWith("0x"))return!1;const n=s.slice(2);return!!/^[0-9a-fA-F]*$/.test(n)&&n.length%2==0}catch{}return!1}),F(this,"extractTxHashesFromResult",(i,r)=>{var s;try{if(!r)return[];const n=i.method,o=hS[n];if("sui_signTransaction"===n)return[a2(r.transactionBytes)];if("near_signTransaction"===n)return[Hc(r)];if("near_signTransactions"===n)return r.map(c=>Hc(c));if("xrpl_signTransactionFor"===n||"xrpl_signTransaction"===n)return[null==(s=r.tx_json)?void 0:s.hash];if("polkadot_signTransaction"===n)return[t_({transaction:i.params.transactionPayload,signature:r.signature})];if("algo_signTxn"===n)return Qi(r)?r.map(c=>Wc(c)):[Wc(r)];if("cosmos_signDirect"===n)return[u2(r)];if("string"==typeof r)return[r];const a=r[o.key];if(Qi(a))return"solana_signAllTransactions"===n?a.map(c=>function o2(t){const e=atob(t),i=new Uint8Array(e.length);for(let o=0;o<e.length;o++)i[o]=e.charCodeAt(o);const r=i[0];if(0===r)throw new Error("No signatures found");const s=1+64*r;if(i.length<s)throw new Error("Transaction data too short for claimed signature count");if(i.length<100)throw new Error("Transaction too short");const n=Buffer.from(t,"base64").slice(1,65);return Zr.encode(n)}(c)):a;if("string"==typeof a)return[a]}catch(n){this.client.logger.warn("Error extracting tx hashes from result",n)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,i=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(i))for(const n of s)try{await this.onProviderMessageEvent({topic:r,message:n,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${n}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=M("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(de_message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:i,message:r,attestation:s,transportType:n}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Cs)?this.client.auth.authKeys.get(Cs):{responseTopic:void 0,publicKey:void 0};try{const a=await this.client.core.crypto.decode(i,r,{receiverPublicKey:o,encoding:n===he.link_mode?si:Ye});Ia(a)?(this.client.core.history.set(i,a),await this.onRelayEventRequest({topic:i,payload:a,attestation:s,transportType:n,encryptedId:at(r)})):ln(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:i,payload:a,transportType:n}),this.client.core.history.delete(i,a.id)):await this.onRelayEventUnknownPayload({topic:i,payload:a,transportType:n}),await this.client.core.relayer.messages.ack(i,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(ot_expired,async e=>{const{topic:i,id:r}=Gl(e.target);return r&&this.client.pendingRequest.keys.includes(r)?await this.deletePendingSessionRequest(r,M("EXPIRED"),!0):r&&this.client.auth.requests.keys.includes(r)?await this.deletePendingAuthRequest(r,M("EXPIRED"),!0):void(i?this.client.session.keys.includes(i)&&(await this.deleteSession({topic:i,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:i})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r})))})}registerPairingEvents(){this.client.core.pairing.events.on(mi_create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(mi_delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!ye(e,!1)){const{message:i}=M("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(i)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:i}=M("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(i)}if(ei(this.client.core.pairing.pairings.get(e).expiry)){const{message:i}=M("EXPIRED",`pairing topic: ${e}`);throw new Error(i)}}async isValidSessionTopic(e){if(!ye(e,!1)){const{message:i}=M("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(i)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:i}=M("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(i)}if(ei(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:i}=M("EXPIRED",`session topic: ${e}`);throw new Error(i)}if(!this.client.core.crypto.keychain.has(e)){const{message:i}=M("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(i)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else{if(!this.client.core.pairing.pairings.keys.includes(e)){if(ye(e,!1)){const{message:i}=M("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(i)}{const{message:i}=M("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(i)}}this.isValidPairingTopic(e)}}async isValidProposalId(e){if(!function C3(t){return"number"==typeof t}(e)){const{message:i}=M("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(i)}if(!this.client.proposal.keys.includes(e)){const{message:i}=M("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(i)}if(ei(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:i}=M("EXPIRED",`proposal id: ${e}`);throw new Error(i)}}}class IS extends Ri{constructor(e,i){super(e,i,"proposal",Da),this.core=e,this.logger=i}}class SS extends Ri{constructor(e,i){super(e,i,"session",Da),this.core=e,this.logger=i}}class DS extends Ri{constructor(e,i){super(e,i,"request",Da,r=>r.id),this.core=e,this.logger=i}}class AS extends Ri{constructor(e,i){super(e,i,"authKeys",dn,()=>Cs),this.core=e,this.logger=i}}class $S extends Ri{constructor(e,i){super(e,i,"pairingTopics",dn),this.core=e,this.logger=i}}class OS extends Ri{constructor(e,i){super(e,i,"requests",dn,r=>r.id),this.core=e,this.logger=i}}var TS=Object.defineProperty,Qn=(t,e,i)=>((t,e,i)=>e in t?TS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);class PS{constructor(e,i){this.core=e,this.logger=i,Qn(this,"authKeys"),Qn(this,"pairingTopics"),Qn(this,"requests"),this.authKeys=new AS(this.core,this.logger),this.pairingTopics=new $S(this.core,this.logger),this.requests=new OS(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var RS=Object.defineProperty,Q=(t,e,i)=>((t,e,i)=>e in t?RS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);class pn extends qg{constructor(e){super(e),Q(this,"protocol","wc"),Q(this,"version",2),Q(this,"name",Jn_name),Q(this,"metadata"),Q(this,"core"),Q(this,"logger"),Q(this,"events",new rt.EventEmitter),Q(this,"engine"),Q(this,"session"),Q(this,"proposal"),Q(this,"pendingRequest"),Q(this,"auth"),Q(this,"signConfig"),Q(this,"on",(r,s)=>this.events.on(r,s)),Q(this,"once",(r,s)=>this.events.once(r,s)),Q(this,"off",(r,s)=>this.events.off(r,s)),Q(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),Q(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Q(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),Q(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),Q(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),Q(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),Q(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),Q(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),Q(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),Q(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),Q(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),Q(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),Q(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),Q(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),Q(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Q(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(n){throw this.logger.error(n.message),n}}),Q(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),Q(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),Q(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=e?.name||Jn_name,this.metadata=Qb(e?.metadata),this.signConfig=e?.signConfig;const i=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:Zs(Vo({level:e?.logger||Jn_logger}));this.core=e?.core||new oS(e),this.logger=je(i,this.name),this.session=new SS(this.core,this.logger),this.proposal=new IS(this.core,this.logger),this.pendingRequest=new DS(this.core,this.logger),this.engine=new xS(this),this.auth=new PS(this.core,this.logger)}static async init(e){const i=new pn(e);return await i.initialize(),i}get context(){return Qe(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const Xn=(0,_Modal_b083f70f_js__WEBPACK_IMPORTED_MODULE_1__.a)(),US={width:"245px",height:"245px",borderRadius:"40px",zIndex:"99999",backgroundColor:"white",border:"none",outline:"none"};const wt=new class NS{constructor(){W(this,"bridgeUrl","https://login.ready.co"),W(this,"mobileUrl","ready://"),W(this,"type","overlay"),W(this,"wcUri"),W(this,"overlay"),W(this,"popupWindow"),W(this,"closingTimeout"),W(this,"standaloneConnectorModal")}showWalletConnectModal(e,i){const r=encodeURIComponent(e),s=encodeURIComponent(window.location.href);this.showModal({desktop:`${this.bridgeUrl}?wc=${r}&href=${s}&device=desktop&onlyQR=true`,ios:`${this.mobileUrl}app/wc?uri=${r}&href=${s}&device=mobile&onlyQR=true`,android:`${this.mobileUrl}app/wc?uri=${r}&href=${s}&device=mobile&onlyQR=true`},i)}getWalletConnectQR(e){const i=encodeURIComponent(e),r=encodeURIComponent(window.location.href);this.getQR({desktop:`${this.bridgeUrl}?wc=${i}&href=${r}&device=desktop&onlyQR=true`,ios:`${this.mobileUrl}app/wc?uri=${i}&href=${r}&device=mobile&onlyQR=true`,android:`${this.mobileUrl}app/wc?uri=${i}&href=${r}&device=mobile&onlyQR=true`})}openMobileApp(e){const i=document.createElement("button");i.style.display="none",i.addEventListener("click",()=>{window.location.href=e[Xn]}),i.click()}getQR(e){if(["android","ios"].includes(Xn))return void this.openMobileApp(e);const i=document.createElement("div"),r=document.querySelector("#starknetkit-modal-container");if(!r?.shadowRoot)throw new Error("Cannot find modal");{const s=r.shadowRoot.querySelector(".qr-code-slot");if(!s)throw new Error("Cannot find QR code slot");{s.innerHTML='\n  <div id="argent-mobile-modal-container" style="position: relative; display: flex; justify-content: center; align-items: center">\n    <iframe class="argent-iframe" allow="clipboard-write"></iframe>\n  </div>\n',document.body.appendChild(i),this.overlay=i;const n=s.querySelector("iframe");n.setAttribute("src",e.desktop);for(const[o,a]of Object.entries(US))n.style[o]=a}}}showApprovalModal(e){const i=encodeURIComponent(window.location.href),r={desktop:`${this.bridgeUrl}?action=sign&device=desktop&href=${i}`,ios:`${this.mobileUrl}app/wc/request?href=${i}&device=mobile`,android:`${this.mobileUrl}app/wc/request?href=${i}&device=mobile`};if(!(0,_index_76832d25_js__WEBPACK_IMPORTED_MODULE_3__.a)())return this.getModal(void 0,_Modal_b083f70f_js__WEBPACK_IMPORTED_MODULE_1__.L.approval),["android","ios"].includes(Xn)?void this.openMobileApp(r):void 0;this.showModal(r,void 0)}closeModal({success:e,isRequest:i}={success:!1,isRequest:!1}){const r=this.standaloneConnectorModal;e?(r?.$set({layout:_Modal_b083f70f_js__WEBPACK_IMPORTED_MODULE_1__.L.success}),setTimeout(()=>r?.$destroy(),500)):i?(r?.$set({layout:_Modal_b083f70f_js__WEBPACK_IMPORTED_MODULE_1__.L.requestFailure}),setTimeout(()=>r?.$destroy(),500)):r?.$set({layout:_Modal_b083f70f_js__WEBPACK_IMPORTED_MODULE_1__.L.loginFailure})}getModal(e,i=_Modal_b083f70f_js__WEBPACK_IMPORTED_MODULE_1__.L.qrCode){this.standaloneConnectorModal=new _Modal_b083f70f_js__WEBPACK_IMPORTED_MODULE_1__.M({target:(0,_Modal_b083f70f_js__WEBPACK_IMPORTED_MODULE_1__.g)(),props:{layout:i,dappName:e?.dappName,showBackButton:!1,selectedWallet:e,callback:async r=>{try{const s=r?.connector;this.standaloneConnectorModal?.$destroy(),await(s?.connect())}catch{this.standaloneConnectorModal?.$set({layout:_Modal_b083f70f_js__WEBPACK_IMPORTED_MODULE_1__.L.loginFailure})}}}})}showModal(e,i){this.getModal(i,_Modal_b083f70f_js__WEBPACK_IMPORTED_MODULE_1__.L.qrCode),this.getQR(e)}},Gs=starknet__WEBPACK_IMPORTED_MODULE_2__.AA.NetworkName,LS=t=>{if(!t)throw new Error(`Unknown or unsupported chainId (${t}), either specify a supported chain or set bridgeUrl.`);const e=parseInt(`${t}`);return String(t).startsWith(Gs.SN_SEPOLIA)||11155111===e?"https://mobile-login.hydrogen.argent47.net":String(t).startsWith(Gs.SN_MAIN)||1===e?"https://login.argent.xyz":void 0},MS=t=>{if(!t)throw new Error(`Unknown or unsupported chainId (${t}), either specify a supported chain or set mobileUrl.`);const e=parseInt(`${t}`);return String(t).startsWith(Gs.SN_SEPOLIA)||11155111===e?"argent-dev://":String(t).startsWith(Gs.SN_MAIN)||1===e?"argent://":void 0};var qS=Object.defineProperty,pi=(t,e,i)=>((t,e,i)=>e in t?qS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);const Dt_init="signer_init",Dt_uri="signer_uri",Dt_created="signer_created",Dt_updated="signer_updated",Dt_deleted="signer_deleted",Dt_event="signer_event";class KS extends d_{constructor(e){super(),pi(this,"events",new rt.EventEmitter),pi(this,"requiredNamespaces"),pi(this,"pending",!1),pi(this,"session"),pi(this,"opts"),pi(this,"client"),pi(this,"initializing",!1),this.requiredNamespaces=e?.requiredNamespaces||{},this.opts=e?.client}get connected(){return typeof this.session<"u"}get connecting(){return this.pending}get chains(){return this.session?Kl(this.session.namespaces):function Mb(t,e=[]){const i=[];return Object.keys(t).forEach(r=>{if(e.length&&!e.includes(r))return;const s=t[r];i.push(...ca(r,s))}),i}(this.requiredNamespaces)}get accounts(){return this.session?zl(this.session.namespaces):[]}on(e,i){this.events.on(e,i)}once(e,i){this.events.once(e,i)}off(e,i){this.events.off(e,i)}removeListener(e,i){this.events.removeListener(e,i)}async open(){if(this.pending)return new Promise((e,i)=>{this.events.once("open",()=>{if(this.events.once("open_error",r=>{i(r)}),typeof this.client>"u")return i(new Error("Sign Client not initialized"));e()})});try{this.pending=!0;const e=await this.register(),i=e.find({requiredNamespaces:this.requiredNamespaces});if(i.length)return this.onOpen(i[0]);const{uri:r,approval:s}=await e.connect({requiredNamespaces:this.requiredNamespaces});this.events.emit(Dt_uri,{uri:r}),this.session=await s(),this.events.emit(Dt_created,this.session),this.onOpen()}catch(e){throw this.events.emit("open_error",e),e}}async close(){typeof this.session>"u"||(await(await this.register()).disconnect({topic:this.session.topic,reason:le("USER_DISCONNECTED")}),this.onClose())}async send(e,i){if(typeof this.client>"u"&&(this.client=await this.register(),this.connected||await this.open()),typeof this.session>"u")throw new Error("Signer connection is missing session");this.client.request({topic:this.session.topic,request:e,chainId:i?.chainId}).then(r=>this.events.emit("payload",Hr(e.id,r))).catch(r=>this.events.emit("payload",hn(e.id,r.message)))}async register(e=this.opts){if(typeof this.client<"u")return this.client;if(this.initializing)return new Promise((i,r)=>{this.events.once("register_error",s=>{r(s)}),this.events.once(Dt_init,()=>{if(typeof this.client>"u")return r(new Error("Sign Client not initialized"));i(this.client)})});if(function zS(t){return typeof t<"u"&&typeof t.context<"u"}(e))return this.client=e,this.registerEventListeners(),this.client;try{return this.initializing=!0,this.client=await pn.init(e),this.initializing=!1,this.registerEventListeners(),this.events.emit(Dt_init),this.client}catch(i){throw this.events.emit("register_error",i),i}}onOpen(e){this.pending=!1,e&&(this.session=e),this.events.emit("open")}onClose(){this.pending=!1,this.client&&(this.client=void 0),this.events.emit("close")}registerEventListeners(){typeof this.client<"u"&&(this.client.on("session_event",e=>{var i;this.session&&(null==(i=this.session)?void 0:i.topic)!==e.topic||this.events.emit(Dt_event,e.params)}),this.client.on("session_update",e=>{var i;typeof this.client<"u"&&(this.session&&(null==(i=this.session)?void 0:i.topic)!==e.topic||(this.session=this.client.session.get(e.topic),this.events.emit(Dt_updated,this.session)))}),this.client.on("session_delete",e=>{var i;this.session&&(this.session&&(null==(i=this.session)?void 0:i.topic)!==e.topic||(this.onClose(),this.events.emit(Dt_deleted,this.session),this.session=void 0))}))}}class VS{constructor(){W(this,"accounts",[]),W(this,"eventEmitter",new rt.EventEmitter),W(this,"updateSession",e=>{if(!this.isValidSession(e))throw console.warn("updateSession incompatible session",e,"for adapter",this.formatChainId(this.chainId)),new Error("Invalid session");this.session=e;const i=Kl(e.namespaces,[this.namespace]);this.setChainIds(i);const r=zl(e.namespaces,[this.namespace]);this.setAccounts(r)}),W(this,"isValidSession",({namespaces:e,requiredNamespaces:i})=>{const r=this.formatChainId(this.chainId);return i&&Object.keys(i).length>0?!!i[this.namespace]?.chains?.includes(r):!!e?.[this.namespace]?.accounts.some(s=>s.startsWith(r))})}getRequiredNamespaces(){const e=[this.formatChainId(this.chainId)];return{[this.namespace]:{chains:e,methods:this.methods,events:this.events}}}isCompatibleChainId(e){return"string"==typeof e&&e.startsWith(`${this.namespace}:`)}setChainIds(e){const r=e.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s)).filter(s=>s!==this.chainId);r.length&&(this.chainId=r[0],this.eventEmitter.emit("chainChanged",this.chainId))}setChainId(e){this.isCompatibleChainId(e)&&(this.chainId=this.parseChainId(e),this.eventEmitter.emit("chainChanged",this.chainId))}parseAccountId(e){const[i,r,s]=e.split(":");return{chainId:`${i}:${r}`,address:s}}getSignerConnection(e){return new KS({requiredNamespaces:{[this.namespace]:{chains:this.rpc.chains,methods:this.rpc.methods,events:this.rpc.events}},client:e})}registerEventListeners(){this.rpcProvider.on("connect",()=>{const{chains:e,accounts:i}=this.signerConnection;e?.length&&this.setChainIds(e),i?.length&&this.setAccounts(i)}),this.signerConnection.on(Dt_created,this.updateSession),this.signerConnection.on(Dt_updated,this.updateSession),this.signerConnection.on(Dt_event,e=>{if(!this.rpc.chains.includes(e.chainId))return;const{event:i}=e;"accountsChanged"===i.name?(this.accounts=i.data,this.eventEmitter.emit("accountsChanged",this.accounts)):"chainChanged"===i.name?this.setChainId(i.data):this.eventEmitter.emit(i.name,i.data)}),this.rpcProvider.on("disconnect",()=>{this.eventEmitter.emit("disconnect")})}}class ah extends starknet__WEBPACK_IMPORTED_MODULE_2__.gD{constructor(e,i,r,s){super({provider:e,address:i,signer:r}),this.wallet=s}async execute(e,i,r={}){const s=Array.isArray(e)?e:[e],n=void 0===i||Array.isArray(i)?r:i;return await this.wallet.wallet_requestAddInvokeTransaction({accountAddress:this.address,executionRequest:{calls:s,invocationDetails:n}})}async declare(e,i){throw new Error("Not supported via Ready Login")}async deployAccount(e,i){throw new Error("Not supported via Ready Login")}}class HS{constructor(e){this.wallet=e}async getPubKey(){throw new Error("Not supported via Ready Login")}async signMessage(e,i){const{signature:r}=await this.wallet.wallet_signTypedData({accountAddress:i,typedData:e});return r}async signTransaction(e,i,r){throw new Error("Not supported via Ready Login")}async signDeployAccountTransaction(e){throw new Error("Not supported via Ready Login")}async signDeclareTransaction(e){throw new Error("Not supported via Ready Login")}}class YS extends VS{constructor({client:i,chainId:r,rpcUrl:s,provider:n}){super(),W(this,"id","argentMobile"),W(this,"name","Ready (formerly Argent)"),W(this,"version","0.1.0"),W(this,"icon",""),W(this,"provider"),W(this,"signer"),W(this,"account"),W(this,"selectedAddress",""),W(this,"namespace","starknet"),W(this,"methods",["starknet_supportedSpecs","starknet_signTypedData","starknet_requestAddInvokeTransaction","wallet_supportedSpecs","wallet_signTypedData","wallet_addInvokeTransaction"]),W(this,"events",["chainChanged","accountsChanged"]),W(this,"remoteSigner"),W(this,"signerConnection"),W(this,"rpcProvider"),W(this,"chainId"),W(this,"client"),W(this,"session"),W(this,"rpc"),W(this,"walletRpc"),W(this,"handleRequest"),W(this,"request",async i=>{if(!this.session)throw new Error("No session");let r=i.type;("wallet_addInvokeTransaction"===r||"wallet_supportedSpecs"===r||"wallet_signTypedData"===r)&&(r=r.replace("wallet_","starknet_"));const s=this.handleRequest[r];if(s)return s(i.params);throw new Error(`Not implemented: .request() for ${i.type}`)}),W(this,"on",(i,r)=>{this.eventEmitter.on(i,r)}),W(this,"off",(i,r)=>{this.eventEmitter.off(i,r)}),W(this,"handleRequestChainId",()=>this.chainId===starknet__WEBPACK_IMPORTED_MODULE_2__.AA.NetworkName.SN_SEPOLIA?starknet__WEBPACK_IMPORTED_MODULE_2__.AA.StarknetChainId.SN_SEPOLIA:starknet__WEBPACK_IMPORTED_MODULE_2__.AA.StarknetChainId.SN_MAIN),W(this,"handleRequestAccounts",()=>this.accounts),W(this,"handleGetPermissions",async()=>await this.isPreauthorized()?["accounts"]:[]),W(this,"handleAddInvokeTransaction",async i=>{const{calls:r}=i;return await this.requestWallet({method:"starknet_requestAddInvokeTransaction",params:{accountAddress:this.account.address,executionRequest:{calls:r?.map(({contract_address:s,entry_point:n,...o})=>({...o,contractAddress:s,entrypoint:n}))}}})}),W(this,"handleSignTypedData",async i=>{const r={accountAddress:this.account.address,typedData:i},s=await this.requestWallet({method:"starknet_signTypedData",params:r});return"signature"in s?s.signature:s}),W(this,"handleSupportedSpecs",async()=>await this.requestWallet({method:"starknet_supportedSpecs",params:{}})),this.chainId=String(r??starknet__WEBPACK_IMPORTED_MODULE_2__.AA.NetworkName.SN_MAIN),this.rpc={chains:r?[this.formatChainId(this.chainId)]:[],methods:this.methods,events:this.events},this.signerConnection=this.getSignerConnection(i),this.rpcProvider=new Gf(this.signerConnection),this.client=i,this.registerEventListeners(),this.walletRpc=new Proxy({},{get:(o,a)=>c=>this.requestWallet({method:a,params:c})}),this.remoteSigner=new HS(this.walletRpc),this.provider=n||new starknet__WEBPACK_IMPORTED_MODULE_2__.RpcProvider({nodeUrl:s}),this.account=new ah(this.provider,"",this.remoteSigner,this.walletRpc),this.handleRequest=Object.freeze({wallet_requestChainId:this.handleRequestChainId,wallet_requestAccounts:this.handleRequestAccounts,wallet_getPermissions:this.handleGetPermissions,starknet_addInvokeTransaction:this.handleAddInvokeTransaction,starknet_signTypedData:this.handleSignTypedData,starknet_supportedSpecs:this.handleSupportedSpecs,wallet_addInvokeTransaction:this.handleAddInvokeTransaction,wallet_signTypedData:this.handleSignTypedData,wallet_supportedSpecs:this.handleSupportedSpecs})}getNetworkName(i){if("SN_SEPOLIA"===i)return starknet__WEBPACK_IMPORTED_MODULE_2__.AA.NetworkName.SN_SEPOLIA;if("SN_MAIN"===i)return starknet__WEBPACK_IMPORTED_MODULE_2__.AA.NetworkName.SN_MAIN;throw new Error(`Unknown starknet.js network name for chainId ${i}`)}async enable(){return await this.rpcProvider.connect(),this.accounts}get isConnected(){return!0}async isPreauthorized(){return!!this.client.session.getAll().find(this.isValidSession)}async requestWallet(i){if(!this.session)throw new Error("No session");try{const{topic:r}=this.session,s=this.formatChainId(this.chainId);wt.showApprovalModal(i);const n=await this.client.request({topic:r,chainId:s,request:i});return wt.closeModal({success:!0}),n}catch(r){throw wt.closeModal({isRequest:!0}),r instanceof Error||r&&void 0!==r.message?new Error(r.message):new Error("Unknown error on requestWallet")}}get isConnecting(){return this.signerConnection.connecting}async disable(){await this.rpcProvider.disconnect()}get isWalletConnect(){return!0}registerEventListeners(){super.registerEventListeners(),this.eventEmitter.on("chainChanged",i=>{throw new Error("Not implemented: chainChanged")})}formatChainId(i){return`${this.namespace}:${(t=>t.replace(/^SN_/,"SN"))(i)}`}parseChainId(i){return(t=>t.replace(/^SN/,"SN_"))(i.split(":")[1])}setAccounts(i){this.accounts=i.filter(n=>this.parseChainId(this.parseAccountId(n).chainId)===this.chainId).map(n=>this.parseAccountId(n).address);const{address:r}=this.parseAccountId(i[0]),s=r.startsWith("0x")?r:`0x${r}`;this.account=new ah(this.provider,s,this.remoteSigner,this.walletRpc),this.eventEmitter.emit("accountsChanged",this.accounts),this.selectedAddress=s}}const VD=Object.freeze(Object.defineProperty({__proto__:null,getStarknetWindowObject:async t=>(async({projectId:t,chainId:e,name:i,description:r,rpcUrl:s,bridgeUrl:n=LS(e),mobileUrl:o=MS(e),modalType:a="overlay",url:c,icons:u,walletConnect:h,onlyQRCode:l,modalWallet:f},p)=>{if(!n)throw new Error("bridgeUrl is required");if(!o)throw new Error("mobileUrl is required");wt.bridgeUrl=n,wt.mobileUrl=o,wt.type=a;const d={projectId:t,metadata:{name:i??"Unknown dapp",description:r??"Unknown dapp description",url:c??"#",icons:u??[],...h?.metadata}},g=await pn.init(d),y=new starknet__WEBPACK_IMPORTED_MODULE_2__.RpcProvider({nodeUrl:s}),E=new p({client:g,chainId:e,rpcUrl:s,provider:y});g.on("session_event",v=>{}),g.on("session_update",({topic:v,params:m})=>{const{namespaces:D}=m,I=g.session.get(v);E.updateSession({...I,namespaces:D})}),g.on("session_delete",()=>{});try{const v=g.session.getAll().find(E.isValidSession);if(v)return E.updateSession(v),E;const m={requiredNamespaces:E.getRequiredNamespaces()};(0,_index_76832d25_js__WEBPACK_IMPORTED_MODULE_3__.r)(),await new Promise(R=>setTimeout(R,200));const{uri:D,approval:I}=await g.connect(m);if(D){l?wt.getWalletConnectQR(D):wt.showWalletConnectModal(D,{...f,dappName:i||""}),wt.wcUri=D;const R=await I();E.updateSession(R),wt.closeModal({success:!0})}return E}catch{return console.error("@argent/login::error"),wt.closeModal(),null}})(t,YS)},Symbol.toStringTag,{value:"Module"}))},"./node_modules/ws/browser.js":module=>{module.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}}]);