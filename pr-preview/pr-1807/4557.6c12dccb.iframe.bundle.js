(self.webpackChunklayerswap=self.webpackChunklayerswap||[]).push([[4557],{"./node_modules/@solflare-wallet/metamask-sdk/lib/esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{StandardSolflareMetaMaskWalletAccount:()=>StandardSolflareMetaMaskWalletAccount,default:()=>esm});var index_browser_esm=__webpack_require__("./node_modules/@solana/web3.js/lib/index.browser.esm.js"),eventemitter3=__webpack_require__("./node_modules/eventemitter3/index.mjs"),bs58=__webpack_require__("./node_modules/@solflare-wallet/metamask-sdk/node_modules/bs58/index.js"),bs58_default=__webpack_require__.n(bs58),v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");__webpack_require__("./node_modules/buffer/index.js").Buffer;function isLegacyTransactionInstance(transaction){return void 0===transaction.version}function serializeTransaction(transaction){return isLegacyTransactionInstance(transaction)?transaction.serialize({verifySignatures:!1,requireAllSignatures:!1}):transaction.serialize()}var console=__webpack_require__("./node_modules/console-browserify/index.js"),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};function isSnapSupported(provider){return __awaiter(this,void 0,void 0,function*(){try{return yield provider.request({method:"wallet_getSnaps"}),!0}catch(error){return!1}})}var signAndSendTransaction=__webpack_require__("./node_modules/@solana/wallet-standard-features/lib/esm/signAndSendTransaction.js"),signTransaction=__webpack_require__("./node_modules/@solana/wallet-standard-features/lib/esm/signTransaction.js"),signMessage=__webpack_require__("./node_modules/@solana/wallet-standard-features/lib/esm/signMessage.js");const SOLANA_CHAINS=["solana:mainnet","solana:devnet","solana:testnet","solana:localnet"];function isSolanaChain(chain){return SOLANA_CHAINS.includes(chain)}var _StandardSolflareMetaMaskWalletAccount_address,_StandardSolflareMetaMaskWalletAccount_publicKey,_StandardSolflareMetaMaskWalletAccount_chains,_StandardSolflareMetaMaskWalletAccount_features,_StandardSolflareMetaMaskWalletAccount_label,_StandardSolflareMetaMaskWalletAccount_icon,__classPrivateFieldGet=function(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)},__classPrivateFieldSet=function(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value};const chains=SOLANA_CHAINS,features=[signAndSendTransaction.R,signTransaction.q,signMessage.F];class StandardSolflareMetaMaskWalletAccount{get address(){return __classPrivateFieldGet(this,_StandardSolflareMetaMaskWalletAccount_address,"f")}get publicKey(){return __classPrivateFieldGet(this,_StandardSolflareMetaMaskWalletAccount_publicKey,"f").slice()}get chains(){return __classPrivateFieldGet(this,_StandardSolflareMetaMaskWalletAccount_chains,"f").slice()}get features(){return __classPrivateFieldGet(this,_StandardSolflareMetaMaskWalletAccount_features,"f").slice()}get label(){return __classPrivateFieldGet(this,_StandardSolflareMetaMaskWalletAccount_label,"f")}get icon(){return __classPrivateFieldGet(this,_StandardSolflareMetaMaskWalletAccount_icon,"f")}constructor({address,publicKey,label,icon}){_StandardSolflareMetaMaskWalletAccount_address.set(this,void 0),_StandardSolflareMetaMaskWalletAccount_publicKey.set(this,void 0),_StandardSolflareMetaMaskWalletAccount_chains.set(this,void 0),_StandardSolflareMetaMaskWalletAccount_features.set(this,void 0),_StandardSolflareMetaMaskWalletAccount_label.set(this,void 0),_StandardSolflareMetaMaskWalletAccount_icon.set(this,void 0),new.target===StandardSolflareMetaMaskWalletAccount&&Object.freeze(this),__classPrivateFieldSet(this,_StandardSolflareMetaMaskWalletAccount_address,address,"f"),__classPrivateFieldSet(this,_StandardSolflareMetaMaskWalletAccount_publicKey,publicKey,"f"),__classPrivateFieldSet(this,_StandardSolflareMetaMaskWalletAccount_chains,chains,"f"),__classPrivateFieldSet(this,_StandardSolflareMetaMaskWalletAccount_features,features,"f"),__classPrivateFieldSet(this,_StandardSolflareMetaMaskWalletAccount_label,label,"f"),__classPrivateFieldSet(this,_StandardSolflareMetaMaskWalletAccount_icon,icon,"f")}}_StandardSolflareMetaMaskWalletAccount_address=new WeakMap,_StandardSolflareMetaMaskWalletAccount_publicKey=new WeakMap,_StandardSolflareMetaMaskWalletAccount_chains=new WeakMap,_StandardSolflareMetaMaskWalletAccount_features=new WeakMap,_StandardSolflareMetaMaskWalletAccount_label=new WeakMap,_StandardSolflareMetaMaskWalletAccount_icon=new WeakMap;var esm_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};class SolflareMetaMask extends eventemitter3.A{constructor(config){super(),this._network="mainnet-beta",this._iframeParams={},this._element=null,this._iframe=null,this._publicKey=null,this._account=null,this._isConnected=!1,this._connectHandler=null,this._messageHandlers={},this._handleEvent=event=>{var _a,_b;switch(event.type){case"connect":return this._collapseIframe(),void((null===(_a=event.data)||void 0===_a?void 0:_a.publicKey)?(this._publicKey=event.data.publicKey,this._isConnected=!0,this._connectHandler&&(this._connectHandler.resolve(),this._connectHandler=null),this._connected()):(this._connectHandler&&(this._connectHandler.reject(),this._connectHandler=null),this._disconnected()));case"disconnect":return this._connectHandler&&(this._connectHandler.reject(),this._connectHandler=null),void this._disconnected();case"accountChanged":return void((null===(_b=event.data)||void 0===_b?void 0:_b.publicKey)?(this._publicKey=event.data.publicKey,this.emit("accountChanged",this.publicKey),this._standardConnected()):(this.emit("accountChanged",void 0),this._standardDisconnected()));default:return}},this._handleResize=data=>{"full"===data.resizeMode?"fullscreen"===data.params.mode?this._expandIframe():"hide"===data.params.mode&&this._collapseIframe():"coordinates"===data.resizeMode&&this._resizeIframe(data.params)},this._handleMessage=event=>{var _a;if("solflareIframeToWalletAdapter"!==(null===(_a=event.data)||void 0===_a?void 0:_a.channel))return;const data=event.data.data||{};if("event"===data.type)this._handleEvent(data.event);else if("resize"===data.type)this._handleResize(data);else if("response"===data.type&&this._messageHandlers[data.id]){const{resolve,reject}=this._messageHandlers[data.id];delete this._messageHandlers[data.id],data.error?reject(data.error):resolve(data.result)}},this._removeElement=()=>{this._element&&(this._element.remove(),this._element=null)},this._removeDanglingElements=()=>{const elements=document.getElementsByClassName("solflare-metamask-wallet-adapter-iframe");for(const element of elements)element.parentElement&&element.remove()},this._injectElement=()=>{this._removeElement(),this._removeDanglingElements();const params=Object.assign(Object.assign({},this._iframeParams),{mm:!0,v:1,cluster:this._network||"mainnet-beta",origin:window.location.origin||"",title:document.title||""}),queryString=Object.keys(params).map(key=>`${key}=${encodeURIComponent(params[key])}`).join("&"),iframeUrl=`${SolflareMetaMask.IFRAME_URL}?${queryString}`;this._element=document.createElement("div"),this._element.className="solflare-metamask-wallet-adapter-iframe",this._element.innerHTML=`\n      <iframe src='${iframeUrl}' style='position: fixed; top: 0; bottom: 0; left: 0; right: 0; width: 100%; height: 100%; border: none; border-radius: 0; z-index: 99999; color-scheme: auto;' allowtransparency='true'></iframe>\n    `,document.body.appendChild(this._element),this._iframe=this._element.querySelector("iframe"),window.addEventListener("message",this._handleMessage,!1)},this._collapseIframe=()=>{this._iframe&&(this._iframe.style.top="",this._iframe.style.right="",this._iframe.style.height="2px",this._iframe.style.width="2px")},this._expandIframe=()=>{this._iframe&&(this._iframe.style.top="0px",this._iframe.style.bottom="0px",this._iframe.style.left="0px",this._iframe.style.right="0px",this._iframe.style.width="100%",this._iframe.style.height="100%")},this._resizeIframe=params=>{this._iframe&&(this._iframe.style.top=isFinite(params.top)?`${params.top}px`:"",this._iframe.style.bottom=isFinite(params.bottom)?`${params.bottom}px`:"",this._iframe.style.left=isFinite(params.left)?`${params.left}px`:"",this._iframe.style.right=isFinite(params.right)?`${params.right}px`:"",this._iframe.style.width=isFinite(params.width)?`${params.width}px`:params.width,this._iframe.style.height=isFinite(params.height)?`${params.height}px`:params.height)},this._sendIframeMessage=data=>{if(!this.connected||!this.publicKey)throw new Error("Wallet not connected");return new Promise((resolve,reject)=>{var _a,_b;const messageId=(0,v4.A)();this._messageHandlers[messageId]={resolve,reject},null===(_b=null===(_a=this._iframe)||void 0===_a?void 0:_a.contentWindow)||void 0===_b||_b.postMessage({channel:"solflareWalletAdapterToIframe",data:Object.assign({id:messageId},data)},"*")})},this._connected=()=>{this._isConnected=!0,this.emit("connect",this.publicKey),this._standardConnected()},this._disconnected=()=>{this._publicKey=null,this._isConnected=!1,window.removeEventListener("message",this._handleMessage,!1),this._removeElement(),this.emit("disconnect"),this._standardDisconnected()},this._standardConnected=()=>{if(!this.publicKey)return;const address=this.publicKey.toString();this._account&&this._account.address===address||(this._account=new StandardSolflareMetaMaskWalletAccount({address,publicKey:this.publicKey.toBytes()}),this.emit("standard_change",{accounts:this.standardAccounts}))},this._standardDisconnected=()=>{this._account&&(this._account=null,this.emit("standard_change",{accounts:this.standardAccounts}))},(null==config?void 0:config.network)&&(this._network=null==config?void 0:config.network),window.SolflareMetaMaskParams&&(this._iframeParams=Object.assign(Object.assign({},this._iframeParams),window.SolflareMetaMaskParams)),(null==config?void 0:config.params)&&(this._iframeParams=Object.assign(Object.assign({},this._iframeParams),null==config?void 0:config.params))}get publicKey(){return this._publicKey?new index_browser_esm.PublicKey(this._publicKey):null}get standardAccount(){return this._account}get standardAccounts(){return this._account?[this._account]:[]}get isConnected(){return this._isConnected}get connected(){return this.isConnected}get autoApprove(){return!1}connect(){return esm_awaiter(this,void 0,void 0,function*(){this.connected||(this._injectElement(),yield new Promise((resolve,reject)=>{this._connectHandler={resolve,reject}}))})}disconnect(){return esm_awaiter(this,void 0,void 0,function*(){yield this._sendIframeMessage({method:"disconnect"}),this._disconnected()})}signTransaction(transaction){var _a;return esm_awaiter(this,void 0,void 0,function*(){if(!this.connected||!this.publicKey)throw new Error("Wallet not connected");try{const serializedTransaction=serializeTransaction(transaction),response=yield this._sendIframeMessage({method:"signTransactionV2",params:{transaction:bs58_default().encode(serializedTransaction)}}),{transaction:signedTransaction}=response;return isLegacyTransactionInstance(transaction)?index_browser_esm.ZX.from(bs58_default().decode(signedTransaction)):index_browser_esm.Kt.deserialize(bs58_default().decode(signedTransaction))}catch(e){throw new Error((null===(_a=null==e?void 0:e.toString)||void 0===_a?void 0:_a.call(e))||"Failed to sign transaction")}})}signAllTransactions(transactions){var _a;return esm_awaiter(this,void 0,void 0,function*(){if(!this.connected||!this.publicKey)throw new Error("Wallet not connected");try{const serializedTransactions=transactions.map(transaction=>serializeTransaction(transaction)),{transactions:signedTransactions}=yield this._sendIframeMessage({method:"signAllTransactionsV2",params:{transactions:serializedTransactions.map(transaction=>bs58_default().encode(transaction))}});return signedTransactions.map((signedTransaction,index)=>isLegacyTransactionInstance(transactions[index])?index_browser_esm.ZX.from(bs58_default().decode(signedTransaction)):index_browser_esm.Kt.deserialize(bs58_default().decode(signedTransaction)))}catch(e){throw new Error((null===(_a=null==e?void 0:e.toString)||void 0===_a?void 0:_a.call(e))||"Failed to sign transactions")}})}signAndSendTransaction(transaction,options){var _a;return esm_awaiter(this,void 0,void 0,function*(){if(!this.connected||!this.publicKey)throw new Error("Wallet not connected");try{const serializedTransaction=serializeTransaction(transaction),{signature}=yield this._sendIframeMessage({method:"signAndSendTransaction",params:{transaction:bs58_default().encode(serializedTransaction),options}});return signature}catch(e){throw new Error((null===(_a=null==e?void 0:e.toString)||void 0===_a?void 0:_a.call(e))||"Failed to sign and send transaction")}})}signMessage(data,display="utf8"){var _a;return esm_awaiter(this,void 0,void 0,function*(){if(!this.connected||!this.publicKey)throw new Error("Wallet not connected");try{const{signature}=yield this._sendIframeMessage({method:"signMessage",params:{data:bs58_default().encode(data),display}});return Uint8Array.from(bs58_default().decode(signature))}catch(e){throw new Error((null===(_a=null==e?void 0:e.toString)||void 0===_a?void 0:_a.call(e))||"Failed to sign message")}})}sign(data,display="utf8"){return esm_awaiter(this,void 0,void 0,function*(){return yield this.signMessage(data,display)})}static isSupported(){return esm_awaiter(this,void 0,void 0,function*(){return!!(yield function detectProvider(){return __awaiter(this,void 0,void 0,function*(){try{const provider=window.ethereum;if(!provider)return null;if(provider.providers&&Array.isArray(provider.providers)){const providers=provider.providers;for(const provider of providers)if(yield isSnapSupported(provider))return provider}if(provider.detected&&Array.isArray(provider.detected)){const providers=provider.detected;for(const provider of providers)if(yield isSnapSupported(provider))return provider}return(yield isSnapSupported(provider))?provider:null}catch(error){return console.error(error),null}})}())})}standardSignAndSendTransaction(...inputs){return esm_awaiter(this,void 0,void 0,function*(){if(!this.connected)throw new Error("not connected");const outputs=[];if(1===inputs.length){const{transaction,account,chain,options}=inputs[0],{minContextSlot,preflightCommitment,skipPreflight,maxRetries}=options||{};if(account!==this._account)throw new Error("invalid account");if(!isSolanaChain(chain))throw new Error("invalid chain");const signature=yield this.signAndSendTransaction(index_browser_esm.Kt.deserialize(transaction),{preflightCommitment,minContextSlot,maxRetries,skipPreflight});outputs.push({signature:bs58_default().decode(signature)})}else if(inputs.length>1)for(const input of inputs)outputs.push(...yield this.standardSignAndSendTransaction(input));return outputs})}standardSignTransaction(...inputs){return esm_awaiter(this,void 0,void 0,function*(){if(!this.connected)throw new Error("not connected");const outputs=[];if(1===inputs.length){const{transaction,account,chain}=inputs[0];if(account!==this._account)throw new Error("invalid account");if(chain&&!isSolanaChain(chain))throw new Error("invalid chain");const signedTransaction=yield this.signTransaction(index_browser_esm.Kt.deserialize(transaction));outputs.push({signedTransaction:signedTransaction.serialize()})}else if(inputs.length>1){let chain;for(const input of inputs){if(input.account!==this._account)throw new Error("invalid account");if(input.chain){if(!isSolanaChain(input.chain))throw new Error("invalid chain");if(chain){if(input.chain!==chain)throw new Error("conflicting chain")}else chain=input.chain}}const transactions=inputs.map(({transaction})=>index_browser_esm.Kt.deserialize(transaction)),signedTransactions=yield this.signAllTransactions(transactions);outputs.push(...signedTransactions.map(signedTransaction=>({signedTransaction:signedTransaction.serialize()})))}return outputs})}standardSignMessage(...inputs){return esm_awaiter(this,void 0,void 0,function*(){if(!this.connected)throw new Error("not connected");const outputs=[];if(1===inputs.length){const{message,account}=inputs[0];if(account!==this._account)throw new Error("invalid account");const signature=yield this.signMessage(message);outputs.push({signedMessage:message,signature})}else if(inputs.length>1)for(const input of inputs)outputs.push(...yield this.standardSignMessage(input));return outputs})}}SolflareMetaMask.IFRAME_URL="https://widget.solflare.com/";const esm=SolflareMetaMask},"./node_modules/@solflare-wallet/metamask-sdk/node_modules/base-x/src/index.js":module=>{"use strict";module.exports=function base(ALPHABET){if(ALPHABET.length>=255)throw new TypeError("Alphabet too long");for(var BASE_MAP=new Uint8Array(256),j=0;j<BASE_MAP.length;j++)BASE_MAP[j]=255;for(var i=0;i<ALPHABET.length;i++){var x=ALPHABET.charAt(i),xc=x.charCodeAt(0);if(255!==BASE_MAP[xc])throw new TypeError(x+" is ambiguous");BASE_MAP[xc]=i}var BASE=ALPHABET.length,LEADER=ALPHABET.charAt(0),FACTOR=Math.log(BASE)/Math.log(256),iFACTOR=Math.log(256)/Math.log(BASE);function decodeUnsafe(source){if("string"!=typeof source)throw new TypeError("Expected String");if(0===source.length)return new Uint8Array;for(var psz=0,zeroes=0,length=0;source[psz]===LEADER;)zeroes++,psz++;for(var size=(source.length-psz)*FACTOR+1>>>0,b256=new Uint8Array(size);source[psz];){var charCode=source.charCodeAt(psz);if(charCode>255)return;var carry=BASE_MAP[charCode];if(255===carry)return;for(var i=0,it3=size-1;(0!==carry||i<length)&&-1!==it3;it3--,i++)carry+=BASE*b256[it3]>>>0,b256[it3]=carry%256>>>0,carry=carry/256>>>0;if(0!==carry)throw new Error("Non-zero carry");length=i,psz++}for(var it4=size-length;it4!==size&&0===b256[it4];)it4++;for(var vch=new Uint8Array(zeroes+(size-it4)),j=zeroes;it4!==size;)vch[j++]=b256[it4++];return vch}return{encode:function encode(source){if(source instanceof Uint8Array||(ArrayBuffer.isView(source)?source=new Uint8Array(source.buffer,source.byteOffset,source.byteLength):Array.isArray(source)&&(source=Uint8Array.from(source))),!(source instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===source.length)return"";for(var zeroes=0,length=0,pbegin=0,pend=source.length;pbegin!==pend&&0===source[pbegin];)pbegin++,zeroes++;for(var size=(pend-pbegin)*iFACTOR+1>>>0,b58=new Uint8Array(size);pbegin!==pend;){for(var carry=source[pbegin],i=0,it1=size-1;(0!==carry||i<length)&&-1!==it1;it1--,i++)carry+=256*b58[it1]>>>0,b58[it1]=carry%BASE>>>0,carry=carry/BASE>>>0;if(0!==carry)throw new Error("Non-zero carry");length=i,pbegin++}for(var it2=size-length;it2!==size&&0===b58[it2];)it2++;for(var str=LEADER.repeat(zeroes);it2<size;++it2)str+=ALPHABET.charAt(b58[it2]);return str},decodeUnsafe,decode:function decode(string){var buffer=decodeUnsafe(string);if(buffer)return buffer;throw new Error("Non-base"+BASE+" character")}}}},"./node_modules/@solflare-wallet/metamask-sdk/node_modules/bs58/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{const basex=__webpack_require__("./node_modules/@solflare-wallet/metamask-sdk/node_modules/base-x/src/index.js");module.exports=basex("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")}}]);